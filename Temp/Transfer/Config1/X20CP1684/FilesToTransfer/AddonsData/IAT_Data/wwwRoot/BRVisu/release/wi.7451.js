"use strict";(self.webpackChunkwidgets=self.webpackChunkwidgets||[]).push([[7451],{54863:(E,S,c)=>{var g;g=function(){var I=function(){this.value="",this.startIndex=-1},h=I.prototype;return h.init=function(){this.value="",this.startIndex=-1},h.parseInput=function(){var n=[];return n},h.setValue=function(n){this.value=n,this.len=n.length},h.getValue=function(){return this.value},h.clearValue=function(){this.value=""},h.setStartIndex=function(n){n<0&&(n=0),this.startIndex=n},h.resetStartIndex=function(){this.startIndex=-1},h.getStartIndex=function(){return this.startIndex},h.addChar=function(n,o){var s=o-this.startIndex,t=this.value.slice(0,s),v=this.value.slice(s,this.value.length);s>=0&&s<=this.value.length+1&&(this.value=t+n+v)},h.getLen=function(){return typeof this.value=="string"?this.value.length:null},h.removeChar=function(n,o){var s=o-this.startIndex,t=this.value.slice(0,s),v=this.value.slice(s+1,this.value.length);s===this.value.length&&(t=this.value.slice(0,s-1)),s>=0&&s<=this.value.length&&(this.value=t+v)},h.dispose=function(){this.value=null,this.startIndex=null},new I}.call(S,c,S,E),g!==void 0&&(E.exports=g)},58857:(E,S,c)=>{var g,I;g=[c(31021)],I=function({core:{Types:h},system:{widgets:{common:{keyboards:{external:{dictionaries:n}}}}}}){var o=function(){},s=o.prototype,t=[],v;s.init=function(){return n.load("zh-cn")},s.getCandidates=function(f){return t=[],f.length>0&&(v=new RegExp("^"+f+"$","i"),this.lookup(f).map(d,this)),t},s.lookup=function(f){return C(f).filter(this.testEntry,f).sort(function(V,x){var _=h.parseValue(V.freq,"Integer",{default:n.MAX_FREQUENCY,min:n.MIN_FREQUENCY,max:n.MAX_FREQUENCY}),b=h.parseValue(x.freq,"Integer",{default:n.MAX_FREQUENCY,min:n.MIN_FREQUENCY,max:n.MAX_FREQUENCY});return _-b}).map(this.extractData)},s.testEntry=function(f){if(f)return v.test(f.com)===!0},s.extractData=function(f){return f.can};function C(){return n.get("zh-cn")}function d(f){t.includes(f)||t.push(f)}return new o}.apply(S,g),I!==void 0&&(E.exports=I)},47451:(E,S,c)=>{var g=c(22224),I=c(41669),h,n;h=[c(31021),c(54863),c(58857)],n=function({config:o,events:{BreaseEvent:s}},t,v){var C=function(){this.boundOnSelectItem=this.onSelectItem.bind(this),this.boundOnSelectNext=this.onSelectNext.bind(this),this.boundOnSelectPrev=this.onSelectPrev.bind(this)},d=C.prototype;d.init=function(e){var i=this;this.preventInput=!0,this.keyboard=e,this.debouncedBuildList=g.debounce(i._buildList,300),this.eventsAttached=!1,this.initEvents(),this.startCursor=this.keyboard.getCursor(),this.len=0,this.items=[],this.oldValue=this.keyboard.getValue(),t.init()},d.show=function(){this.oldValue=this.keyboard.getValue(),this.startCursor=this.keyboard.getCursor(),this.cursor=0,this.initEvents(),v.init(),t.init()},d.hide=function(){this.initEvents(!0),this.container.empty(),this.debouncedBuildList.cancel(),this.oldValue=""},d.setCursor=function(e){this.cursor=e},d.getCursor=function(){return this.cursor},d.getItems=function(){return this.container.find('[class*="item"]')},d.onInput=function(){},d.onDelete=function(){},d.onClear=function(){this.len=0,this.value="",this.oldValue="",this.container.empty(),t.setValue(""),t.resetStartIndex(),this.debouncedBuildList.cancel()},d.onSelectItem=function(e){var i=e.currentTarget.textContent.split(" ")[1];b.call(this,i)},d.onSelectNext=function(){this.start+=this.offset,this.end+=this.offset,y.call(this)},d.onSelectPrev=function(){this.start-=this.offset,this.end-=this.offset,y.call(this)},d.dispose=function(){this.initEvents(!0),this.oldValue="",this.debouncedBuildList.cancel(),t.dispose(),this.len=0,this.cursor=0},d._buildList=function(){var e=t.getValue();if(e.length!==0){var i=v.getCandidates(e);i.length>0&&(this.items=i,L.call(this))}else this.items=[],L.call(this)},d.initEvents=function(e){if(!(!e&&this.eventsAttached)){!e&&!this.eventsAttached?this.eventsAttached=!0:this.eventsAttached=!1;var i=e?V:f,u=N(o.virtualKeyboards);o.editMode||(this.container=this.keyboard.el.find(".keyBoardPlugin"),i(this.keyboard.inputEl,"focus input",{self:this,oldValue:this.oldValue},x),i(this.keyboard.inputEl,u,{self:this,oldValue:this.oldValue},_),i(this.container,u,'[class*="item"]',this.boundOnSelectItem),i(this.container,u,".next",this.boundOnSelectNext),i(this.container,u,".prev",this.boundOnSelectPrev))}};function f(e,i,u,l,r){e.on(i,u,l,r)}function V(e,i,u,l,r){e.off(i,u,l,r)}function x(e){var i=e.data.self,u=I(this),l=e.data.self.oldValue.split(""),r=u.val().split(""),p=t.getValue().length,a;if(l.length>r.length)for(a=0;a<l.length;a+=1)if(l[a]!==r[0])if((t.getStartIndex()===-1||a<Math.abs(t.getStartIndex()-1))&&(t.setValue(""),t.setStartIndex(a)),l[a]&&p>0){t.removeChar(l[a],a),i.debouncedBuildList();break}else t.setValue(""),t.setStartIndex(this.selectionStart),i.debouncedBuildList.cancel();else r.shift();else if(l.length<r.length)for(a=0;a<r.length;a+=1)if(r[a]!==l[0])if((t.getStartIndex()===-1||a<Math.abs(t.getStartIndex()-1))&&(t.setValue(""),t.setStartIndex(a)),r[a]){t.addChar(r[a],a),i.debouncedBuildList();break}else t.setValue(""),t.setStartIndex(this.selectionStart),i.debouncedBuildList.cancel();else l.shift();else t.getValue()===""&&t.setStartIndex(this.selectionStart);i.oldValue=u.val()}function _(){(this.selectionStart<t.getStartIndex()||this.selectionStart>t.getStartIndex()+t.getLen())&&(t.setStartIndex(this.selectionStart),t.setValue(""))}function b(e){var i=this.keyboard.value,u=t.getStartIndex(),l=t.getLen(),r=i.substr(0,u),p=i.substr(u+l),a=r+e+p;t.setValue(""),u=r.length+e.length,t.setStartIndex(u),this.oldValue=a,this.keyboard.setValue(a),this.keyboard.setCursor(u),this.items=[],L.call(this)}function L(){this.start=0,this.end=5,this.offset=this.end,this.end>this.items.length&&(this.end=this.items.length),y.call(this)}function y(){this.container.empty().append(A.call(this))}function A(){var e="",i=this.items.slice(this.start,this.end);return i.forEach(function(u,l,r){l===0&&this.start>0?e+='<div class="pluginList"><div class="prev">-</div>':l===0&&(e+='<div class="pluginList"><div></div>'),e+='<div class="itemLarge">'+l+" "+u+"</div>",l===r.length-1&&this.end<this.items.length?e+='<div class="next">+</div></div>':l===r.length-1&&(e+="</div>")},this),e}function N(e){return e&&e.InputProcessing&&e.InputProcessing.onKeyDown===!0?s.MOUSE_DOWN:s.CLICK}return new C}.apply(S,h),n!==void 0&&(E.exports=n)}}]);
