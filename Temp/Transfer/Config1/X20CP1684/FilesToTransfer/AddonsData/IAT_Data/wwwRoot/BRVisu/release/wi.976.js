"use strict";(self.webpackChunkwidgets=self.webpackChunkwidgets||[]).push([[976],{74188:(V,x,c)=>{var S,g;S=[c(83488)],g=function(f){var I=function(){this.value="",this.startIndex=-1},u=I.prototype;return u.init=function(){this.value="",this.startIndex=-1},u.parseInput=function(h){var o=[],t=f.toKana(h,{passRomaji:!0}),s=f.toKatakana(t,{passRomaji:!0});return t.length>0&&o.push(t),s.length>0&&s!==t&&o.push(s),o},u.setValue=function(h){this.value=h,this.len=h.length},u.getValue=function(){return this.value},u.clearValue=function(){this.value=""},u.setStartIndex=function(h){h<0&&(h=0),this.startIndex=h},u.resetStartIndex=function(){this.startIndex=-1},u.getStartIndex=function(){return this.startIndex},u.addChar=function(h,o){var t=o-this.startIndex,s=this.value.slice(0,t),v=this.value.slice(t,this.value.length);t>=0&&t<=this.value.length+1&&(this.value=s+h+v)},u.getLen=function(){return typeof this.value=="string"?this.value.length:null},u.removeChar=function(h,o){var t=o-this.startIndex,s=this.value.slice(0,t),v=this.value.slice(t+1,this.value.length);t===this.value.length&&(s=this.value.slice(0,t-1)),t>=0&&t<=this.value.length&&(this.value=s+v)},u.dispose=function(){this.value=null,this.startIndex=null},new I}.apply(x,S),g!==void 0&&(V.exports=g)},42024:(V,x,c)=>{var S,g;S=[c(83488),c(8836)],g=function(f,I){var u=function(){this.pathDict="widgets/brease/KeyBoard/libs/external/dictionaries/KanjiDic"},h=u.prototype;h.getCandidates=function(s){switch(this.candidateList=[],t(s)){case 0:this.lookup(s).map(o,this);break;case 1:this.lookup(f.toRomaji(s)).map(o,this);break;default:}return this.candidateList},h.lookup=function(s){for(var v=f.toKana(s,{passRomaji:!0}),r="",p=[],b=0;b<v.length;b+=1)f.isKana(v[b])&&(r+=v[b]);for(var C in I)C.indexOf(r)===0&&(p=p.concat(I[C].split("")));return p};function o(s){this.candidateList.push(s)}function t(s){return f.isRomaji(s)?0:f.isKatakana(s)||f.isHiragana(s)?1:void 0}return new u}.apply(x,S),g!==void 0&&(V.exports=g)},976:(V,x,c)=>{var S=c(72844),g=c(94232),f,I;f=[c(60436),c(83488),c(74188),c(42024)],I=function({config:u,events:{BreaseEvent:h}},o,t,s){var v=function(){this.boundOnSelectItem=this.onSelectItem.bind(this),this.boundOnSelectNext=this.onSelectNext.bind(this),this.boundOnSelectPrev=this.onSelectPrev.bind(this)},r=v.prototype;r.init=function(e){var i=this;this.preventInput=!0,this.keyboard=e,this.debouncedBuildList=S.debounce(i._buildList,300),this.eventsAttached=!1,this.initEvents(),this.startCursor=this.keyboard.getCursor(),this.len=0,this.items=[],this.oldValue=this.keyboard.getValue(),t.init()},r.show=function(){this.oldValue=this.keyboard.getValue(),this.startCursor=this.keyboard.getCursor(),this.cursor=0,this.initEvents(),t.init()},r.hide=function(){this.initEvents(!0),this.container.empty(),this.debouncedBuildList.cancel(),this.oldValue=""},r.setCursor=function(e){this.cursor=e},r.getCursor=function(){return this.cursor},r.getItems=function(){return this.container.find('[class*="item"]')},r.onInput=function(){},r.onDelete=function(){},r.onClear=function(){this.len=0,this.value="",this.oldValue="",this.container.empty(),t.setValue(""),t.resetStartIndex(),this.debouncedBuildList.cancel()},r.onSelectItem=function(e){var i=e.currentTarget.textContent.split(" ")[1];A.call(this,i)},r.onSelectNext=function(){this.start+=this.offset,this.end+=this.offset,L.call(this)},r.onSelectPrev=function(){this.start-=this.offset,this.end-=this.offset,L.call(this)},r.dispose=function(){this.initEvents(!0),this.oldValue="",this.debouncedBuildList.cancel(),t.dispose(),this.len=0,this.cursor=0},r._buildList=function(){var e=t.getValue();if(e.length!==0){var i=t.parseInput(e),n=s.getCandidates(e);n.unshift(i[0]),i[1]&&n.push(i[1]),this.items=n,E.call(this)}else this.items=[],E.call(this)},r.initEvents=function(e){if(!(!e&&this.eventsAttached)){!e&&!this.eventsAttached?this.eventsAttached=!0:this.eventsAttached=!1;var i=e?b:p,n=R(u.virtualKeyboards);u.editMode||(this.container=this.keyboard.el.find(".keyBoardPlugin"),i(this.keyboard.inputEl,"focus input",{self:this,oldValue:this.oldValue},C),i(this.keyboard.inputEl,n,{self:this,oldValue:this.oldValue},y),i(this.container,n,'[class*="item"]',this.boundOnSelectItem),i(this.container,n,".next",this.boundOnSelectNext),i(this.container,n,".prev",this.boundOnSelectPrev))}};function p(e,i,n,a,d){e.on(i,n,a,d)}function b(e,i,n,a,d){e.off(i,n,a,d)}function C(e){var i=e.data.self,n=g(this),a=e.data.self.oldValue.split(""),d=n.val().split(""),l;if(a.length>d.length)for(l=0;l<a.length;l+=1)if(a[l]!==d[0])if((t.getStartIndex()===-1||l<Math.abs(t.getStartIndex()-1))&&(t.setValue(""),t.setStartIndex(l)),o.isRomaji(a[l])){t.removeChar(a[l],l),i.debouncedBuildList();break}else t.setValue(""),t.setStartIndex(this.selectionStart),i.debouncedBuildList.cancel();else d.shift();else if(a.length<d.length)for(l=0;l<d.length;l+=1)if(d[l]!==a[0])if((t.getStartIndex()===-1||l<Math.abs(t.getStartIndex()-1))&&(t.setValue(""),t.setStartIndex(l)),o.isRomaji(d[l])){t.addChar(d[l],l),i.debouncedBuildList();break}else t.setValue(""),t.setStartIndex(this.selectionStart),i.debouncedBuildList.cancel();else a.shift();else t.getValue()===""&&t.setStartIndex(this.selectionStart);i.oldValue=n.val()}function y(){(this.selectionStart<t.getStartIndex()||this.selectionStart>t.getStartIndex()+t.getLen())&&(t.setStartIndex(this.selectionStart),t.setValue(""))}function A(e){var i=this.keyboard.value,n=t.getStartIndex(),a=t.getLen(),d=i.substr(0,n),l=i.substr(n+a),_=d+e+l;t.setValue(""),n=d.length+e.length,t.setStartIndex(n),this.oldValue=_,this.keyboard.setValue(_),this.keyboard.setCursor(n),this.items=[],E.call(this)}function E(){this.start=0,this.end=5,this.offset=this.end,this.end>this.items.length&&(this.end=this.items.length),L.call(this)}function L(){this.container.empty().append(K.call(this))}function K(){var e="",i=this.items.slice(this.start,this.end);return i.forEach(function(n,a,d){a===0&&this.start>0?e+='<div class="pluginList"><div class="prev">-</div>':a===0&&(e+='<div class="pluginList"><div></div>'),e+='<div class="itemLarge">'+a+" "+n+"</div>",a===d.length-1&&this.end<this.items.length?e+='<div class="next">+</div></div>':a===d.length-1&&(e+="</div>")},this),e}function R(e){return e&&e.InputProcessing&&e.InputProcessing.onKeyDown===!0?h.MOUSE_DOWN:h.CLICK}return new v}.apply(x,f),I!==void 0&&(V.exports=I)}}]);
