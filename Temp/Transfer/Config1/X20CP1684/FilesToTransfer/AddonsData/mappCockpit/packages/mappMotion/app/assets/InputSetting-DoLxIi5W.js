import{m as B,ad as x,ae as O,S,n as $,o as r,q as y,V as U,W as t,w as L,B as C,a6 as T,u as w,af as R,ab as A,_ as q,x as v,A as V,Y as _,U as j,cl as F,$ as W,cm as P,a7 as Y,bs as G,a8 as M,ai as H,cn as J,co as K}from"./index-BsJ70qdJ.js";import{N as Q}from"./numerictextbox.component-BoYdwtAt.js";const E=B({__name:"InputSettingNumeric",props:x({title:{type:String,default:""},left:{type:Number,default:0},top:{type:Number,default:0},width:{type:String,default:null},disabled:{type:Boolean,default:!1},modified:{type:Boolean,default:!1},parametrizationValue:{type:Number,default:null},configurationValue:{type:Number,default:null},projectValue:{type:Number,default:null},unit:{type:String,default:null},description:{type:String,default:null},step:{type:Number,default:null},min:{type:Number,default:null},max:{type:Number,default:null},format:{type:String,default:"0.######"},multiple:{type:Number,default:null},decimals:{type:Number,default:null},showSpinButton:{type:Boolean,default:!1}},{modelValue:{type:Number,required:!0},modelModifiers:{}}),emits:x(["apply","clear"],["update:modelValue"]),setup(a){const o=O(a,"modelValue"),n=a,e=S(null),p=$(()=>n.unit?n.format+" "+n.unit:n.format),m=$(()=>!n.multiple||n.multiple===0?!0:c(o.value,n.multiple));function c(s,l){const i=s/l;return Math.abs(Math.round(i)-i)<1e-15}function f(s){s.value!==void 0&&s.value!==null&&(o.value=s.value),e.value&&e.value.focusOut()}return(s,l)=>(r(),y("div",{class:L(["e-input-group e-small",{"e-error":!m.value}])},[U(t(Q),{value:o.value,width:n.width,enabled:!n.disabled,format:p.value,step:n.step,min:n.min,max:n.max,decimals:n.decimals,onChange:f,ref_key:"numerictextbox",ref:e,"data-testid":"numerictextbox","show-spin-button":s.$props.showSpinButton},null,8,["value","width","enabled","format","step","min","max","decimals","show-spin-button"])],2))}}),X={class:"e-input-group e-small"},Z=B({__name:"InputSettingDropdown",props:x({title:{type:String,default:""},left:{type:Number,default:0},top:{type:Number,default:0},width:{type:String,default:null},options:{type:Array,default:null},disabled:{type:Boolean,default:!1},modified:{type:Boolean,default:!1},parametrizationValue:{type:String,default:null},configurationValue:{type:String,default:null},projectValue:{type:String,default:null},description:{type:String,default:null}},{modelValue:{type:Number,required:!0},modelModifiers:{}}),emits:x(["apply","clear"],["update:modelValue"]),setup(a){const o=O(a,"modelValue"),n=a,e=S(null),p=$(()=>{const l=[];return n.options.forEach(i=>{l.push({text:i.text,id:i.id})}),l});function m(l){const i=l.itemData;i&&(o.value=i.id)}const c=S("");function f(l){let i;for(i=0;i<n.options.length;i++)if(n.options[i].text===l.target.textContent){c.value=n.options[i].text;break}}function s(l){var b;if(!e.value){console.warn("Dropdown tooltip not implemented");return}document.getElementsByClassName("e-input-group");const i=(b=document.getElementById("ddl-Base-type"))==null?void 0:b.parentNode;setTimeout(function(){i==null||i.appendChild(l.popup.element),l.popup.element})}return(l,i)=>(r(),C(t(A),{content:c.value,target:".e-list-item",onBeforeRender:f},{default:T(()=>[w("div",X,[U(t(R),{id:"ddl-"+n.title.replace(" ","-"),ref:"dropdownRef_disabled",value:o.value,onChange:m,"data-source":p.value,fields:{text:"text",value:"id"},width:l.$props.width,enabled:!l.$props.disabled,"data-testid":"dropdown",onOpen:s},null,8,["id","value","data-source","width","enabled"])])]),_:1},8,["content"]))}}),ee=B({props:{description:{type:String,default:null},parametrization:{type:String,default:null},configuration:{type:String,default:null},project:{type:String,default:null},unit:{type:String,default:null},info:{type:String,default:null}},data(){return{}}}),te={id:"input-setting-tooltip",class:"container"},ae={key:0},ne={key:1},le={key:2},ie={key:3},oe={key:4};function ue(a,o,n,e,p,m){return r(),y("div",te,[a.$props.description?(r(),y("div",ae,v(a.$props.description),1)):V("",!0),a.$props.parametrization?(r(),y("div",ne," Parametrization: "+v(a.$props.parametrization)+" "+v(a.$props.unit),1)):V("",!0),a.$props.configuration?(r(),y("div",le," Configuration: "+v(a.$props.configuration)+" "+v(a.$props.unit),1)):V("",!0),a.$props.project?(r(),y("div",ie,"AS Project: "+v(a.$props.project)+" "+v(a.$props.unit),1)):V("",!0),a.$props.info?(r(),y("div",oe,v(a.$props.info),1)):V("",!0)])}const re=q(ee,[["render",ue],["__scopeId","data-v-eafbbf16"]]);function se(a,o){const n=Y(a),e=S(),p=S("");_(async()=>{await n().initialize(),n().isInitialized&&m()}),j(()=>n().MeasurementUnit,()=>{var l;(l=e.value)!=null&&l.EnumMap||(p.value=c())}),j(()=>{var l;return(l=e.value)==null?void 0:l.Values.Input},(l,i)=>{l!=null&&i!=null&&F(a,o,i,l)}),W(()=>{n().unsubscribeValue(o)});function m(){n().subscribeValue(o),e.value=n().Data.get(o),p.value=c(),e.value.EnumMap!=null&&(e.value.Values.Configuration.getValue()==null&&e.value.Values.Configuration.setValue(P),e.value.Values.Parametrization.getValue()==null&&e.value.Values.Parametrization.setValue(P),e.value.Values.ProjectConfig.getValue()==null&&e.value.Values.ProjectConfig.setValue(P))}function c(){var g,h;if(!e.value||e.value.Unit==null||e.value.Unit=="")return"";const l="measurement units",i="Measurement units",b=e.value.Unit.indexOf(l),u=e.value.Unit.indexOf(i);if(b==-1&&u==-1)return e.value.Unit;const d=n().MeasurementUnit;return d?b!=-1?((g=e.value.Unit)==null?void 0:g.replace(l,d))||"":((h=e.value.Unit)==null?void 0:h.replace(i,d))||"":e.value.Unit||"???"}function f(){n().writeToPLC([o])}function s(){n().clear([o])}return{setting:e,unit:p,apply:f,clear:s}}const pe="Apply setting to axis parametrization",de="Setting can not be applied without OpcUa connection!",ce="Reset changed value",k={apply:pe,applyNoConnection:de,reset:ce},fe={id:"setting-card",class:"e-card setting","data-testid":"setting-card"},me={class:"e-card-header"},ve={class:"e-card-header-caption","data-testid":"e-card-header"},ye={class:"e-card-content"},ge={key:0},Ve=B({__name:"InputSetting",props:{componentid:{type:String,required:!0},reference:{type:String,required:!0},left:{type:Number,default:0},top:{type:Number,default:0},width:{type:String,default:null},step:{type:Number,default:null},min:{type:Number,default:null},max:{type:Number,default:null},format:{type:String,default:"0.######"},multiple:{type:Number,default:null},decimals:{type:Number,default:null},showSpinButton:{type:Boolean,default:!1},disableApply:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnlyValue:{type:Number,default:null}},setup(a){const o=a,n=S([]),{setting:e,unit:p,apply:m,clear:c}=se(o.componentid,o.reference),{connected:f}=G();function s(){return f.value?k.apply:k.applyNoConnection}const l=$(()=>{var u;return((u=e.value)==null?void 0:u.isLocked())||o.disabled}),i=$(()=>{var u;return((u=e.value)==null?void 0:u.EnumMap)!=null});j(()=>{var u;return(u=e.value)==null?void 0:u.EnumMap},u=>{var d;if(n.value=[],u!=null)for(const[g,h]of u){const z=((d=e.value)==null?void 0:d.Ref)+":EnumMap:"+g,N=J[z];n.value.push({id:g,text:N||h})}});function b(){if(!(e!=null&&e.value))return"";const u=Object.assign({},re);return u.props.description.default=e.value.Description?e.value.Description:"",i.value?(u.props.parametrization.default=f.value&&e.value.Values.Parametrization.isValidEnumValue()?e.value.asString(e.value.Values.Parametrization):"",u.props.configuration.default=e.value.Values.Configuration.isValidEnumValue()?e.value.asString(e.value.Values.Configuration):"",u.props.project.default=e.value.Values.ProjectConfig.isValidEnumValue()?e.value.Values.ProjectConfig.getValue():"",u.props.unit.default=""):(u.props.parametrization.default=f.value&&e.value.Values.Parametrization.getValue()!=null?e.value.Values.Parametrization.asString():"",u.props.configuration.default=e.value.Values.Configuration.getValue()!=null?e.value.Values.Configuration.asString():"",u.props.project.default=e.value.Values.ProjectConfig.getValue()!=null?e.value.Values.ProjectConfig.asString():"",u.props.unit.default=p.value),{template:K({}).component("inputSettingTooltip",u)}}return(u,d)=>(r(),y("div",{class:"input-container",style:H({top:o.top+"px",left:o.left+"px"})},[U(t(A),{ref:"tooltip",content:b,target:"#setting-card"},{default:T(()=>{var g,h,z,N,I;return[w("div",fe,[w("div",me,[w("div",ve,v(t(e)?t(e).getDisplayName():"Loading..."),1)]),w("div",ye,[((h=(g=t(e))==null?void 0:g.Values)==null?void 0:h.Input)!==void 0&&((N=(z=t(e))==null?void 0:z.Values)==null?void 0:N.Input)!==null?(r(),y("div",ge,[i.value?(r(),C(Z,{key:0,title:t(e).DisplayName,description:t(e).Description,options:n.value,left:o.left,top:o.top,width:o.width,modelValue:t(e).Values.Input,"onUpdate:modelValue":d[0]||(d[0]=D=>t(e).Values.Input=D),"parametrization-value":t(e).asString(t(e).Values.Parametrization),"configuration-value":t(e).asString(t(e).Values.Configuration),"project-value":t(e).asString(t(e).Values.ProjectConfig),disabled:l.value,modified:t(e).Values.isParametrizationValueDifferentToInput(),onApply:t(m),onClear:t(c)},null,8,["title","description","options","left","top","width","modelValue","parametrization-value","configuration-value","project-value","disabled","modified","onApply","onClear"])):a.readOnlyValue===null?(r(),C(E,{key:1,title:t(e).DisplayName,description:t(e).Description,unit:t(p),left:a.left,top:a.top,width:o.width,modelValue:t(e).Values.Input,"onUpdate:modelValue":d[1]||(d[1]=D=>t(e).Values.Input=D),"parametrization-value":t(e).Values.Parametrization.asNumber(),"configuration-value":t(e).Values.Configuration.asNumber(),"project-value":t(e).Values.ProjectConfig.asNumber(),disabled:l.value,modified:t(e).Values.isParametrizationValueDifferentToInput(),step:a.step,min:a.min,max:a.max,format:a.format,multiple:a.multiple,decimals:a.decimals,"show-spin-button":a.showSpinButton,onApply:t(m),onClear:t(c)},null,8,["title","description","unit","left","top","width","modelValue","parametrization-value","configuration-value","project-value","disabled","modified","step","min","max","format","multiple","decimals","show-spin-button","onApply","onClear"])):(r(),C(E,{key:2,title:t(e).DisplayName,description:t(e).Description,unit:t(p),left:a.left,top:a.top,width:o.width,"model-value":a.readOnlyValue,disabled:!0,format:a.format,decimals:a.decimals},null,8,["title","description","unit","left","top","width","model-value","format","decimals"]))])):V("",!0)])]),t(f)&&!a.disableApply&&t(e)&&!l.value&&t(e).Values.isParametrizationValueDifferentToInput()?(r(),C(t(M),{key:0,"css-class":"icon-apply e-round apply",title:s(),onClick:t(m),"data-testid":"btn-apply",disabled:(I=t(e))==null?void 0:I.isLocked()},null,8,["title","onClick","disabled"])):V("",!0),t(f)&&t(e)&&!l.value&&t(e).Values.isParametrizationValueDifferentToInput()?(r(),C(t(M),{key:1,"css-class":"icon-bin e-round clear",title:t(k).reset,onClick:t(c),"data-testid":"btn-clear"},null,8,["title","onClick"])):V("",!0)]}),_:1},512)],4))}}),Ce=q(Ve,[["__scopeId","data-v-4a196a3f"]]);export{Ce as I,se as u};
