import{c as Tt,E as te,O as $t,a as se,aK as Ue,i as u,aL as Rn,L as Ae,aM as ba,aN as ne,aO as sr,aP as wa,aQ as Qt,aR as Sa,aS as Mn,aT as nt,r as Se,aU as fe,aV as _t,aW as lr,aX as Pn,aY as et,H as ze,aZ as xa,P as A,f as j,N as jr,C as $r,I as ge,a_ as Tr,K as ue,a$ as Vi,b0 as Hi,b1 as di,b2 as Xt,b3 as Ca,b4 as Ro,b5 as ve,b6 as Tn,b7 as An,b8 as Ia,b9 as kn,ba as Ra,bb as Ma,bc as Fn,bd as Ar,be as Pa,bf as Ta,bg as Aa,bh as ka,bi as Fa,bj as kr,bk as Ln,g as Gr,v as Ot,h as Ur,bl as La,j as Ce,l as xi,bm as le,bn as Da,bo as Ea,k as ji,m as me,n as V,o as M,q as O,au as Oe,u as b,A as B,w as ke,x as Y,W as f,bp as W,_ as He,S as q,Y as ft,$ as vt,bq as Ve,br as Mo,a7 as Je,V as k,a5 as Ci,a6 as re,bs as Po,bt as To,bu as Ne,U as De,B as ee,bv as St,bw as Oa,bx as oe,a8 as qe,a9 as Va,by as Mi,y as Wr,ac as vi,bz as Ao,D as Ze,R as or,bA as Dt,bB as Fr,bC as Ba,bD as _a,J as he,bE as za,bF as qa,bG as Na,bH as Ha,bI as ko,bJ as ae,bK as Dn,bL as ja,bM as $a,bN as Ga,Q as Xe,bO as Ua,s as pe,bP as Fo,bQ as Ut,bR as Lo,M as Wa,bS as En,bT as dr,bU as Xa,bV as Gt,bW as Ya,bX as Za,bY as mt,bZ as Qa,b_ as hr,b$ as Ka,G as ot,c0 as Ja,c1 as es,c2 as On,c3 as Do,c4 as Xr,c5 as at,ai as It,Z as Ii,c6 as ct,c7 as mi,F as pr,z as cr,c8 as Vn,c9 as ts,ca as Eo,ap as Lr,cb as is,cc as $i,cd as Yt,ce as rs,aq as ns,ar as Bn,as as os}from"./index-BsJ70qdJ.js";import{I as H}from"./InputSetting-DoLxIi5W.js";import{_ as Kt}from"./ToggleButton.vue_vue_type_script_setup_true_lang-DkopjQqz.js";import{S as Wt}from"./numerictextbox.component-BoYdwtAt.js";import{f as _n,D as Oo,h as Vo,i as Lt,w as pi,t as Bo,l as ci,j as as,k as Ye,m as gt,n as Gi,o as At,p as ss,q as ui,r as zn,s as ls,P as Yr,v as ds,x as _o,y as Ui,z as hs,A as zo,B as ps,E as Wi,T as cs,F as Me,G as us,H as gs,I as Bi,J as qn,K as fs,M as vs,N as ur,O as ms,Q as Dr,g as gi,V as ys,W as Nn,X as bs,Y as ws,_ as Ss,$ as Jt,a0 as Er,a1 as Hn,a2 as xs,a3 as Cs,a4 as Is,a5 as Rs,a6 as Ms,a7 as Pi,a8 as Ps,a9 as jn,aa as $n,ab as Gn,ac as ei,ad as pt,ae as Un,af as Ts,L as ar,c as yi,d as Ke,C as bi,e as qo,b as No,a as Ho,Z as jo,U as Zr,ag as Le,R as As,u as ks}from"./UnderConstruction-DqvFiTHb.js";import{E as Fs}from"./edit-C46edU9r.js";import{N as Ti}from"./numerictextbox-CWVY5c2y.js";import"./textbox-Bf71oXsD.js";var Ls=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xe=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ti="e-apply",Ai="e-cancel",gr="e-current",Ds="e-container",ii="e-ctrl-btn",zt="e-switch-ctrl-btn",Wn="e-disabled",Xn="e-value-switch-btn",Yn="e-handler",Zn="e-hex",fr="e-hide-hex-value",vr="e-hide-opacity",qt="e-hide-switchable-value",kt="e-hide-value",Qn="e-hide-valueswitcher",ri="e-hsv-color",Kn="e-hsv-container",Nt="e-selected-value",ki="e-mode-switch-btn",mr="e-nocolor-item",yr="e-opacity-value",ni="e-palette",Fi="e-color-palette",br="e-color-picker",Li="e-preview-container",Di="e-previous",Es="e-rtl",Ht="e-show-value",oi="e-selected",Ei="e-split-preview",Oi="e-tile",Os={default:["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},Vs=function(a){Ls(e,a);function e(t,i){return a.call(this,t,i)||this}return e.prototype.preRender=function(){var t=this.element;this.formElement=Tt(this.element,"form"),this.formElement&&te.add(this.formElement,"reset",this.formResetHandler,this);var i={Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"};this.l10n=new $t("colorpicker",i,this.locale),t.getAttribute("ejs-for")&&!t.getAttribute("name")&&t.setAttribute("name",t.id)},e.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||se([this.container.parentElement],vr),this.renderComplete()},e.prototype.initWrapper=function(){var t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(t,this.element),t.appendChild(this.element),Ue(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:Ds}),this.getWrapper().appendChild(this.container);var i=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&this.mode==="Palette"&&this.value===""&&(i="");var r=i.slice(0,7);u(this.initialInputValue)&&(this.initialInputValue=r),this.element.value=r,this.enableOpacity?this.setProperties({value:i},!0):this.setProperties({value:r},!0),this.enableRtl&&t.classList.add(Es),this.cssClass&&se([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=Rn(this.container,{selector:"."+Oi}),this.ctrlBtnRipple=Rn(this.container,{selector:".e-btn"})},e.prototype.getWrapper=function(){return this.element.parentElement},e.prototype.createWidget=function(){this.mode==="Palette"?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),Ae.isDevice&&this.refreshPopupPos()},e.prototype.createSplitBtn=function(){var t=this,i=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(i),this.splitBtn=new ba({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){var s=new MouseEvent("click",{bubbles:!0,cancelable:!1});t.trigger("change",{currentValue:{hex:t.value.slice(0,7),rgba:t.convertToRgbString(t.hexToRgb(t.value))},previousValue:{hex:null,rgba:null},value:t.value,event:s})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(i);var r=this.createElement("span",{className:Ei});ne(".e-selected-color",i).appendChild(r),r.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(se([n],"e-colorpicker-popup"),this.cssClass&&se([n],this.cssClass.replace(/\s+/g," ").trim().split(" ")),Ae.isDevice&&!this.createPopupOnClick){var o=this.getPopupInst();o.relateTo=document.body,o.position={X:"center",Y:"center"},o.targetType="container",o.collision={X:"fit",Y:"fit"},o.offsetY=4,n.style.zIndex=sr(this.splitBtn.element).toString()}this.bindCallBackEvent()},e.prototype.onOpen=function(){if(this.trigger("open",{element:this.container}),!Ae.isDevice){var t=this.getPopupInst(),i=wa(t.element);i.length>0&&(t.collision={X:"flip",Y:"fit"},t.position={X:"right",Y:"bottom"},t.targetType="container")}},e.prototype.getPopupInst=function(){return Qt(this.getPopupEle(),Sa)},e.prototype.bindCallBackEvent=function(){var t=this;this.splitBtn.beforeOpen=function(i){var r=new Mn;return t.trigger("beforeOpen",i,function(n){if(!n.cancel){var o=t.getPopupEle();if(o.style.top=nt(0+pageYOffset),o.style.left=nt(0+pageXOffset),o.style.display="block",t.createWidget(),o.style.display="",Ae.isDevice){if(t.createPopupOnClick){var s=t.getPopupInst();s.relateTo=document.body,s.position={X:"center",Y:"center"},s.targetType="container",s.collision={X:"fit",Y:"fit"},s.offsetY=4,o.style.zIndex=sr(t.splitBtn.element).toString()}t.modal=t.createElement("div"),t.modal.className="e-"+t.getModuleName()+" e-modal",t.modal.style.display="none",document.body.insertBefore(t.modal,o),document.body.className+=" e-colorpicker-overflow",t.modal.style.display="block",t.modal.style.zIndex=(Number(o.style.zIndex)-1).toString()}}i.cancel=n.cancel,r.resolve(n)}),r},this.splitBtn.beforeClose=function(i){var r=new Mn;if(u(i.event))r.resolve(i);else{var n={element:t.container,event:i.event,cancel:!1};t.trigger("beforeClose",n,function(o){Ae.isDevice&&i.event.target===t.modal&&(o.cancel=!0),o.cancel||t.onPopupClose(),i.cancel=o.cancel,r.resolve(o)})}return r}},e.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",ne("."+Ei,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",Se([this.container],[br,Fi]),Ae.isDevice&&this.modal&&(Se([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.createPalette=function(){if(fe(this.container,[Fi],[br]),this.presetColors){var t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);var i=Object.keys(this.presetColors);if(i.length===1)this.appendPalette(this.presetColors[i[0]],i[0],t);else for(var r=0,n=i.length;r<n;r++)this.appendPalette(this.presetColors[i[r]],i[r],t);_t(".e-row",t).length>10&&se([t],"e-palette-group")}else this.appendPalette(Os.default,"default");this.mode==="Palette"&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var o=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=nt(this.container.children[0].offsetWidth+o+o),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},e.prototype.firstPaletteFocus=function(){ne("."+oi,this.container.children[0])||_t("."+ni,this.container)[0].focus()},e.prototype.appendPalette=function(t,i,r){var n=this.createElement("div",{className:ni,attrs:{tabindex:"0",role:"grid"}});r?r.appendChild(n):this.appendElement(n);for(var o,s,l,d=0,h=t.length;d<h;d++)(d===0||d%this.columns===0)&&(o=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),n.appendChild(o)),l=this.roundValue(t[d]).toLowerCase(),s=this.createElement("span",{className:Oi,attrs:{role:"gridcell","aria-label":l,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:s,presetName:i,value:t[d]}),o.appendChild(s),this.value===l&&(this.addTileSelection(s),n.focus()),s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(l))},e.prototype.setNoColor=function(){var t=this.container.querySelector(".e-row").children[0];t.classList.add(mr),this.value||(t.classList.add(oi),Tt(t,"."+ni).focus()),["aria-selected","aria-label"].forEach(function(i){t.removeAttribute(i)}),t.style.backgroundColor=""},e.prototype.appendElement=function(t,i){i===void 0&&(i=0);var r=this.container.children[i];r?this.container.insertBefore(t,r):this.container.appendChild(t)},e.prototype.addTileSelection=function(t){t.classList.add(oi),t.setAttribute("aria-selected","true")},e.prototype.createPicker=function(){fe(this.container,[br],[Fi]);var t=this.createElement("div",{className:Kn});this.appendElement(t),t.appendChild(this.createElement("div",{className:ri}));var i=this.createElement("span",{className:Yn,attrs:{tabindex:"0"}});t.appendChild(i),(this.value===null||this.value==="")&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},e.prototype.setHsvContainerBg=function(t){t===void 0&&(t=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(t,100,100,1))},e.prototype.getHsvContainer=function(){return ne("."+Kn,this.container)},e.prototype.setHandlerPosition=function(){var t=this.getDragHandler(),i=ne("."+ri,this.container);this.enableRtl?t.style.left=nt(i.offsetWidth*Math.abs(100-this.hsv[1])/100):t.style.left=nt(i.offsetWidth*this.hsv[1]/100),t.style.top=nt(i.offsetHeight*(100-this.hsv[2])/100)},e.prototype.createSlider=function(){var t=this.createElement("div",{className:"e-slider-preview"});this.appendElement(t,1),this.createPreview(t);var i=this.createElement("div",{className:"e-colorpicker-slider"});t.insertBefore(i,t.children[0]);var r=this.createElement("div",{className:"e-hue-slider"});i.appendChild(r),this.hueSlider=new _n({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(r),this.enableOpacity&&(r=this.createElement("div",{className:"e-opacity-slider"}),i.appendChild(r),this.createOpacitySlider(r))},e.prototype.createOpacitySlider=function(t){this.opacitySlider=new _n({value:this.rgb[3]*100,min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(t);var i=this.createElement("div",{className:"e-opacity-empty-track"});t.appendChild(i),this.updateOpacitySliderBg()},e.prototype.updateOpacitySliderBg=function(){var t=this.enableRtl?"to left":"to right",i=ne(".e-opacity-empty-track",this.opacitySlider.element);i&&(i.style.background="linear-gradient("+t+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},e.prototype.hueChange=function(t){this.hsv[0]=t.value,this.setHsvContainerBg(),this.convertToOtherFormat()},e.prototype.opacityChange=function(t){var i=t.value,r=this.rgbToHex(this.rgb);this.hsv[3]=i/100,this.rgb[3]=i/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(i);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(n,r,o)},e.prototype.updateOpacityInput=function(t){if(this.enableOpacity&&!this.getWrapper().classList.contains(kt)){var i=Qt(ne("."+yr,this.container),Ti);i.value=t,i.dataBind()}},e.prototype.createPreview=function(t){var i=this.createElement("div",{className:Li});t.appendChild(i);var r=this.createElement("span",{className:"e-preview "+gr});i.appendChild(r);var n=this.convertToRgbString(this.rgb);r.style.backgroundColor=n,r=this.createElement("span",{className:"e-preview "+Di}),i.appendChild(r),r.style.backgroundColor=n},e.prototype.isPicker=function(){return!this.container.classList.contains(Fi)},e.prototype.getPopupEle=function(){return this.container.parentElement},e.prototype.createNumericInput=function(t,i,r,n){var o=this,s=new Ti({value:i,placeholder:r,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(l){l.event&&o.inputHandler(l.event)}});s.createElement=this.createElement,s.appendTo(t)},e.prototype.createInput=function(){var t=this.isPicker(),i=this.getWrapper();if(t&&!i.classList.contains(kt)||!t&&i.classList.contains(Ht)){var r=this.createElement("div",{className:Nt});t?this.appendElement(r,2):this.appendElement(r,1);var n=this.createElement("div",{className:"e-input-container"});if(r.appendChild(n),i.classList.contains(Qn)||this.appendValueSwitchBtn(r),!i.classList.contains(fr)){var o=this.createElement("input",{className:Zn,attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});n.appendChild(o),lr.createInput({element:o,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),lr.setValue(this.value.slice(0,7),o),o.addEventListener("input",this.inputHandler.bind(this))}if(!i.classList.contains(qt)){var s=void 0,l=void 0;this.isRgb?(s="RGB",l=this.rgb):(s="HSV",l=this.hsv);for(var d=["rh","gs","bv"],h=0;h<3;h++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+d[h]+"-value"})),l[h],s[h],255);this.enableOpacity&&this.appendOpacityValue(n)}}},e.prototype.appendOpacityValue=function(t){this.createNumericInput(t.appendChild(this.createElement("input",{className:yr})),this.rgb[3]*100,"A",100)},e.prototype.appendValueSwitchBtn=function(t){var i=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+Xn,attrs:{title:"Toggle format"}});t.appendChild(i),this.isPicker()&&!this.getWrapper().classList.contains(qt)&&i.addEventListener("click",this.formatSwitchHandler.bind(this))},e.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var t=this.createElement("div",{className:zt});if(this.container.appendChild(t),this.showButtons){var i=this.createElement("div",{className:ii});t.appendChild(i);var r=this.l10n.getConstant("Apply");i.appendChild(this.createElement("button",{innerHTML:r,className:"e-btn e-css e-flat e-primary e-small "+ti,attrs:{title:r}}));var n=this.l10n.getConstant("Cancel");i.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small "+Ai,attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},e.prototype.appendModeSwitchBtn=function(){var t=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+ki,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});ne("."+zt,this.container).insertBefore(t,ne("."+ii,this.container))},e.prototype.createDragTooltip=function(){var t=this,i=new Pn({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",htmlAttributes:{title:"tooltip"},beforeOpen:function(r){t.tooltipEle=r.element},animation:{open:{effect:"None"},close:{effect:"None"}}});i.createElement=this.createElement,i.appendTo(this.container),i.open(this.container),this.tooltipEle.style.zIndex=sr(this.tooltipEle).toString(),this.tooltipEle.setAttribute("aria-label","colorpicker-tooltip"),ne(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},e.prototype.getTooltipInst=function(){return Qt(this.container,Pn)},e.prototype.setTooltipOffset=function(t){this.getTooltipInst().offsetY=t},e.prototype.toggleDisabled=function(t){t?this.getWrapper().classList.add(Wn):this.getWrapper().classList.remove(Wn),this.showButtons&&[].slice.call(_t(".e-btn",this.container)).forEach(function(i){t?Ue(i,{disabled:""}):i.removeAttribute("disabled")})},e.prototype.convertToRgbString=function(t){return t.length?t.length===4?"rgba("+t.join()+")":"rgb("+t.join()+")":""},e.prototype.convertToHsvString=function(t){return t.length===4?"hsva("+t.join()+")":"hsv("+t.join()+")"},e.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},e.prototype.convertToOtherFormat=function(t,i){t===void 0&&(t=!1);var r=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var n=this.rgbToHex(this.rgb),o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.updateInput(n),this.triggerEvent(n,r,o,t,i)},e.prototype.updateInput=function(t){var i=this.getWrapper();i.classList.contains(kt)||(i.classList.contains(fr)||lr.setValue(t.substr(0,7),ne("."+Zn,this.container)),i.classList.contains(qt)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},e.prototype.updatePreview=function(t){this.enableOpacity&&this.updateOpacitySliderBg(),ne(".e-tip-transparent",this.tooltipEle).style.backgroundColor=t,ne("."+Li+" ."+gr,this.container).style.backgroundColor=t,ne("."+Li+" ."+Di,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},e.prototype.getDragHandler=function(){return ne("."+Yn,this.container)},e.prototype.removeTileSelection=function(){var t=[].slice.call(_t("."+oi,this.container.children[0]));t.forEach(function(i){i.classList.remove(oi),i.setAttribute("aria-selected","false")})},e.prototype.convertRgbToNumberArray=function(t){return t.slice(t.indexOf("(")+1,t.indexOf(")")).split(",").map(function(i,r){return r!==3?parseInt(i,10):parseFloat(i)})},e.prototype.getValue=function(t,i){if(t||(t=this.value),i=i?i.toLowerCase():"hex",t[0]==="r"){var r=this.convertRgbToNumberArray(t);if(i==="hex"||i==="hexa"){var n=this.rgbToHex(r);return i==="hex"?n.slice(0,7):n}else return i==="hsv"?this.convertToHsvString(this.rgbToHsv.apply(this,r.slice(0,3))):i==="hsva"?this.convertToHsvString(this.rgbToHsv.apply(this,r)):"null"}else if(t[0]==="h"){var r=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(t));if(i==="rgba")return this.convertToRgbString(r);if(i==="hex"||i==="hexa"){var n=this.rgbToHex(r);return i==="hex"?n.slice(0,7):n}else return i==="rgb"?this.convertToRgbString(r.slice(0,3)):"null"}else{t=this.roundValue(t);var o=this.hexToRgb(t);return(i==="rgb"||i==="hsv")&&(o=o.slice(0,3)),i==="rgba"||i==="rgb"?this.convertToRgbString(o):i==="hsva"||i==="hsv"?this.convertToHsvString(this.rgbToHsv.apply(this,o)):i==="hex"?t.slice(0,7):i==="a"?o[3].toString():"null"}},e.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},e.prototype.getModuleName=function(){return"colorpicker"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.wireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();te.add(t,"keydown",this.pickerKeyDown,this);var i=ne("."+ii,this.container);i&&te.add(i,"keydown",this.ctrlBtnKeyDown,this),te.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),te.add(ne("."+Di,this.container),"click",this.previewHandler,this)}else te.add(this.container,"click",this.paletteClickHandler,this),te.add(this.container,"keydown",this.paletteKeyDown,this)},e.prototype.formResetHandler=function(){this.value=this.initialInputValue,Ue(this.element,{value:this.initialInputValue})},e.prototype.addCtrlSwitchEvent=function(){var t=ne("."+zt,this.container);t&&te.add(t,"click",this.btnClickHandler,this)},e.prototype.ctrlBtnKeyDown=function(t){if(t.keyCode===13){var i=ne("."+ti,this.container);if(i){var r=this.rgbToHex(this.rgb);this.triggerChangeEvent(r)}this.splitBtn.element.focus()}},e.prototype.pickerKeyDown=function(t){switch(t.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,t);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,t);break;case 38:this.handlerDragPosition(2,1,t);break;case 40:this.handlerDragPosition(2,-1,t);break;case 13:{t.preventDefault();var i=this.rgbToHex(this.rgb);this.enterKeyHandler(i,t)}}},e.prototype.enterKeyHandler=function(t,i){this.triggerChangeEvent(t),this.inline||this.splitBtn.element.focus()},e.prototype.closePopup=function(t){var i=this,r={element:this.container,event:t,cancel:!1};this.trigger("beforeClose",r,function(n){n.cancel||(i.splitBtn.toggle(),i.onPopupClose())})},e.prototype.triggerChangeEvent=function(t,i){var r=t.slice(0,7);this.trigger("change",{currentValue:{hex:r,rgba:this.convertToRgbString(this.rgb)},event:i,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?t:r}),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:r},!0),this.element.value=r||"#000000"},e.prototype.handlerDragPosition=function(t,i,r){r.preventDefault(),this.hsv[t]+=i*(r.ctrlKey?1:3),this.hsv[t]<0&&(this.hsv[t]=0),this.updateHsv(),this.convertToOtherFormat(!0,r)},e.prototype.handlerDown=function(t){t.preventDefault(),t.type==="mousedown"?(this.clientX=Math.abs(t.pageX-pageXOffset),this.clientY=Math.abs(t.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(t.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(t.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(!1,t),this.getDragHandler().focus(),te.add(document,"mousemove touchmove",this.handlerMove,this),te.add(document,"mouseup touchend",this.handlerEnd,this)},e.prototype.handlerMove=function(t){t.type!=="touchmove"&&t.preventDefault();var i,r;t.type==="mousemove"?(i=Math.abs(t.pageX-pageXOffset),r=Math.abs(t.pageY-pageYOffset)):(i=Math.abs(t.changedTouches[0].pageX-pageXOffset),r=Math.abs(t.changedTouches[0].pageY-pageYOffset)),this.setHsv(i,r);var n=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(!1,t),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-i)>8||Math.abs(this.clientY-r)>8)&&(ne("."+ri,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},e.prototype.setHsv=function(t,i){var r=ne("."+ri,this.container),n=r.getBoundingClientRect();this.enableRtl?t=t>n.right?0:Math.abs(t-n.right):t=t>n.left?Math.abs(t-n.left):0,i=i>n.top?Math.abs(i-n.top):0,this.hsv[2]=Math.round(Number(100*(r.offsetHeight-Math.max(0,Math.min(r.offsetHeight,i-r.offsetTop)))/r.offsetHeight)*10)/10,this.hsv[1]=Math.round(Number(100*Math.max(0,Math.min(r.offsetWidth,t-r.offsetLeft))/r.offsetWidth)*10)/10},e.prototype.handlerEnd=function(t){t.type!=="touchend"&&t.preventDefault(),te.remove(document,"mousemove touchmove",this.handlerMove),te.remove(document,"mouseup touchend",this.handlerEnd);var i=this.getDragHandler();ne("."+ri,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",i.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(t)},e.prototype.btnClickHandler=function(t){var i=t.target;Tt(i,"."+ki)?(t.stopPropagation(),this.switchToPalette()):(i.classList.contains(ti)||i.classList.contains(Ai))&&this.ctrlBtnClick(i,t)},e.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),et(ne(".e-slider-preview",this.container)),this.getWrapper().classList.contains(kt)||ze(ne("."+Nt,this.container)),et(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},e.prototype.refreshImageEditorPopupPos=function(){if(Ae.isDevice){var t=this.getPopupEle();t.style.left=nt(0+pageXOffset),t.style.top=nt(0+pageYOffset);var i=document.querySelector("#"+this.element.parentElement.parentElement.id.split("-popup")[0]);i&&t.parentElement.ej2_instances[0].refreshPosition(i)}},e.prototype.refreshPopupPos=function(){if(!this.inline){var t=this.getPopupEle();t.style.left=nt(0+pageXOffset),t.style.top=nt(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},e.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},e.prototype.updateValue=function(t,i,r,n){for(var o=["e-rh-value","e-gs-value","e-bv-value"],s,l=0,d=o.length;l<d;l++)s=Qt(ne("."+o[l],this.container),Ti),s.value=Math.round(t[l]),i&&(s.placeholder=o[l].substr(r,1).toUpperCase(),s.max=n?n[l]:255),s.dataBind()},e.prototype.previewHandler=function(t){var i=t.target,r=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(i.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),o=this.rgbToHsv.apply(this,this.rgb);o[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:o[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(o[0]),this.enableOpacity&&o[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:o[3]*100},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=o,this.setHandlerPosition(),this.updateInput(n),ne("."+Li+" ."+gr,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,r,this.convertToRgbString(this.rgb),!1,t)},e.prototype.paletteClickHandler=function(t){t.preventDefault();var i=t.target;if(i.classList.contains(Oi)){if(this.removeTileSelection(),this.addTileSelection(i),i.classList.contains(mr))this.noColorTile();else{var r=i.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(r)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Ht)&&this.updateInput(r),this.triggerEvent(r,n,this.convertToRgbString(this.rgb),!1,t)}!this.inline&&!this.showButtons&&this.closePopup(t)}else Tt(i,"."+ki)?this.switchToPicker():i.classList.contains(ti)||i.classList.contains(Ai)?this.ctrlBtnClick(i,t):this.getWrapper().classList.contains(Ht)&&Tt(i,"."+Xn)&&this.formatSwitchHandler()},e.prototype.noColorTile=function(t){t===void 0&&(t=!1);var i=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",i,"",t)},e.prototype.switchToPicker=function(){var t=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(_t("."+ni,this.container)).forEach(function(r){et(r)}),t.classList.contains(Ht)&&et(ne("."+Nt,this.container)),this.container.style.width="";var i=ne(".e-custom-palette",this.container);this.presetColors&&ze(i),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},e.prototype.ctrlBtnClick=function(t,i){if(t.classList.contains(ti)){var r=this.rgbToHex(this.rgb);this.triggerChangeEvent(r,i)}if(!this.inline)this.closePopup(i),this.splitBtn.element.focus();else if(t.classList.contains(Ai)){var n={element:this.container,event:i,cancel:!1};this.trigger("beforeClose",n)}},e.prototype.paletteKeyDown=function(t){var i=t.target;if(i.classList.contains(ni)){var r,n,o=[].slice.call(_t("."+Oi,i)),s=o.filter(function(d){return d.classList.contains("e-selected")}).pop();switch(!t.altKey&&t.keyCode){case 39:t.preventDefault(),r=s?o[this.tilePosition(o,s,this.enableRtl?-1:1)]:o[this.enableRtl?o.length-1:0],this.keySelectionChanges(r);break;case 37:t.preventDefault(),r=s?o[this.tilePosition(o,s,this.enableRtl?1:-1)]:o[this.enableRtl?0:o.length-1],this.keySelectionChanges(r);break;case 38:t.preventDefault(),n=s?this.tilePosition(o,s,-this.columns):0,r=o[n]?o[n]:o[n-this.columns],this.keySelectionChanges(r);break;case 40:t.preventDefault(),n=s?this.tilePosition(o,s,this.columns):o.length-1,o[n]||(n%=o.length,n+=o[o.length-1].parentElement.childElementCount),r=o[n],this.keySelectionChanges(r);break;case 13:if(t.preventDefault(),s){var l=s.getAttribute("aria-label");this.enterKeyHandler(l||"",t)}}}},e.prototype.keySelectionChanges=function(t){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(mr))this.noColorTile(!0);else{var i=t.getAttribute("aria-label"),r=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(i),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Ht)&&this.updateInput(i),this.triggerEvent(i,r,this.convertToRgbString(this.rgb),!0)}},e.prototype.tilePosition=function(t,i,r){t=Array.prototype.slice.call(t);var n=t.length,o=this.columns-t[n-1].parentElement.childElementCount,s=t.indexOf(i);return s+=r,s<0?s+=n+o:s%=n+o,s},e.prototype.inputHandler=function(t){var i=t.target;if(i.value.length){var r,n,o=ne(".e-float-text",i.parentElement).textContent;switch(o){case"HEX":{var s="";if((i.value[0]==="#"&&i.value.length!==5||i.value[0]!=="#"&&i.value.length!==4)&&(s=this.roundValue(i.value)),s.length===9)n=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(s+s.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),n,i.value,t);else return;break}case"R":this.rgb[0]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[0]=Number(i.value),r=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(r,n,null,t));break;case"G":this.rgb[1]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[1]=Number(i.value),r=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(r,n,null,t));break;case"B":this.rgb[2]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[2]=Number(i.value),r=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(r,n,null,t));break;case"H":this.hueSlider.value=Number(i.value);break;case"S":this.hsv[1]!==Number(i.value)&&(this.hsv[1]=Number(i.value),this.updateHsv(),this.convertToOtherFormat(!1,t));break;case"V":this.hsv[2]!==Number(i.value)&&(this.hsv[2]=Number(i.value),this.updateHsv(),this.convertToOtherFormat(!1,t));break;case"A":this.opacitySlider.value=Number(i.value);break}}},e.prototype.inputValueChange=function(t,i,r,n){t[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:t[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(t[0])),this.hsv=t;var o=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(r||o);var s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.triggerEvent(o,i,s,!1,n)},e.prototype.triggerEvent=function(t,i,r,n,o){n===void 0&&(n=!1);var s=t.slice(0,7);u(o)&&(o=new MouseEvent("click",{bubbles:!0,cancelable:!1})),!this.showButtons&&!n?(this.trigger("change",{currentValue:{hex:s,rgba:r},event:o,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:t}),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:s},!0),this.element.value=s||"#000000"):this.trigger("select",{currentValue:{hex:s,rgba:r},event:o,previousValue:{hex:i.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(i))}})},e.prototype.destroy=function(){var t=this,i=this.getWrapper();a.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(r){t.element.removeAttribute(r)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&et(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),et(i)),this.container=null,this.formElement&&te.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var t=Tt(this.hueSlider.element,".e-color-picker"),i=t.querySelectorAll(".e-numerictextbox"),r=0;r<i.length;r++)Qt(i[r],Ti).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var n=this.getTooltipInst();n.close(),n.destroy(),this.tooltipEle=null}},e.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},e.prototype.unWireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();te.remove(t,"keydown",this.pickerKeyDown);var i=ne("."+ii,this.container);i&&te.remove(i,"keydown",this.ctrlBtnKeyDown),te.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&te.remove(ne("."+zt,this.container),"click",this.btnClickHandler),te.remove(ne("."+Di,this.container),"click",this.previewHandler)}else te.remove(this.container,"click",this.paletteClickHandler),te.remove(this.container,"keydown",this.paletteKeyDown)},e.prototype.roundValue=function(t){if(!t)return"";t[0]!=="#"&&(t="#"+t);var i=t.length;if(i===4&&(t+="f",i=5),i===5){for(var r="",n=1,o=t.length;n<o;n++)r+=t.charAt(n)+t.charAt(n);t="#"+r,i=9}return i===7&&(t+="ff"),t},e.prototype.hexToRgb=function(t){if(!t)return[];t=t.trim(),t.length!==9&&(t=this.roundValue(t));var i=Number((parseInt(t.slice(-2),16)/255).toFixed(2));t=t.slice(1,7);var r=parseInt(t,16),n=[];return n.push(r>>16&255),n.push(r>>8&255),n.push(r&255),n.push(i),n},e.prototype.rgbToHsv=function(t,i,r,n){if(this.rgb&&!this.rgb.length)return[];t/=255,i/=255,r/=255;var o=Math.max(t,i,r),s=Math.min(t,i,r),l,d=o,h=o-s,p=o===0?0:h/o;if(o===s)l=0;else{switch(o){case t:l=(i-r)/h+(i<r?6:0);break;case i:l=(r-t)/h+2;break;case r:l=(t-i)/h+4;break}l/=6}var c=[Math.round(l*360),Math.round(p*1e3)/10,Math.round(d*1e3)/10];return u(n)||c.push(n),c},e.prototype.hsvToRgb=function(t,i,r,n){var o,s,l;if(i/=100,r/=100,i===0)return o=s=l=r,[Math.round(o*255),Math.round(s*255),Math.round(l*255),n];t/=60;var d=Math.floor(t),h=t-d,p=r*(1-i),c=r*(1-i*h),m=r*(1-i*(1-h));switch(d){case 0:o=r,s=m,l=p;break;case 1:o=c,s=r,l=p;break;case 2:o=p,s=r,l=m;break;case 3:o=p,s=c,l=r;break;case 4:o=m,s=p,l=r;break;default:o=r,s=p,l=c}var g=[Math.round(o*255),Math.round(s*255),Math.round(l*255)];return u(n)||g.push(n),g},e.prototype.rgbToHex=function(t){return t.length?"#"+this.hex(t[0])+this.hex(t[1])+this.hex(t[2])+(u(t[3])?"":t[3]!==0?(Math.round(t[3]*255)+65536).toString(16).substr(-2):"00"):""},e.prototype.hex=function(t){return("0"+t.toString(16)).slice(-2)},e.prototype.changeModeSwitcherProp=function(t){var i=ne("."+zt,this.container);t?i?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):i&&(this.showButtons?et(ne("."+ki,i)):ze(i))},e.prototype.changeShowBtnProps=function(t){var i=ne("."+zt,this.container);t?(i&&ze(i),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?et(ne("."+ii,i)):ze(i)},e.prototype.changeValueProp=function(t){if(this.isPicker())this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),et(Tt(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(t),this.rgb.length===4&&this.updateOpacityInput(this.rgb[3]*100);else{this.removeTileSelection();var i=this.container.querySelector('span[aria-label="'+this.roundValue(t)+'"]');i&&this.addTileSelection(i)}},e.prototype.setInputEleProps=function(){ze(ne("."+Nt,this.container)),this.createInput()},e.prototype.changeDisabledProp=function(t){this.isPicker()&&(this.hueSlider.enabled=!t,this.opacitySlider.enabled=!t,this.setInputEleProps()),t?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},e.prototype.changeCssClassProps=function(t,i){var r=this.getWrapper(),n=this.getPopupEle();i&&Se([r,n],i.split(" ")),t&&se([r,n],t.replace(/\s+/g," ").trim().split(" "))},e.prototype.changeRtlProps=function(t){t?se([this.getWrapper()],"e-rtl"):Se([this.getWrapper()],"e-rtl")},e.prototype.changePaletteProps=function(){et(this.container.children[0]),this.container.style.width="",this.createPalette()},e.prototype.changeOpacityProps=function(t){var i=this.getWrapper();t?(Se([this.container.parentElement],vr),this.createOpacitySlider(ne(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!i.classList.contains(kt)&&!i.classList.contains(qt)&&this.appendOpacityValue(ne(".e-input-container",this.container))):(se([this.container.parentElement],vr),this.opacitySlider.destroy(),ze(this.opacitySlider.element),this.opacitySlider=null,!i.classList.contains(kt)&&!i.classList.contains(qt)&&ze(ne("."+yr,this.container).parentElement))},e.prototype.onPropertyChanged=function(t,i){var r=this;if(!u(t.value)){var n=this.roundValue(t.value);if(n.length===9){this.element.value=this.roundValue(n).slice(0,7);var o=this.splitBtn&&ne("."+Ei,this.splitBtn.element);o&&(o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(t.value)))}else if(this.noColor&&this.mode==="Palette"&&this.value===""){var o=this.splitBtn&&ne("."+Ei,this.splitBtn.element);o.style.backgroundColor=""}else this.value=i.value}if(!this.inline&&u(t.inline)){var s=["disabled","enableRtl"];if(this.splitBtn.setProperties(xa(t,s)),!this.isPopupOpen()){this.changeCssClassProps(t.cssClass,i.cssClass),this.changeRtlProps(t.enableRtl);return}}for(var l=function(m){switch(m){case"inline":t.inline?(d.getWrapper().appendChild(d.container),d.splitBtn.destroy(),et(d.element.nextElementSibling),d.container.children.length||d.createWidget()):(d.destroyOtherComp(),d.unWireEvents(),d.container.innerHTML="",d.createSplitBtn());break;case"cssClass":{d.changeCssClassProps(t.cssClass,i.cssClass);var g=t.cssClass.split(" ").concat(i.cssClass.split(" "));g=g.reduce(function(w,v){return w.indexOf(v)<0&&w.push(v),w},[]);var y=0;g.forEach(function(w){if(y===0&&(w===kt||w===Qn||w===Ht||w===fr||w===qt)){var v=ne("."+Nt,r.container);v&&ze(ne("."+Nt,r.container)),r.createInput(),y++}});break}case"enableRtl":d.isPicker()&&(d.hueSlider.enableRtl=t.enableRtl,d.enableOpacity&&(d.opacitySlider.enableRtl=t.enableRtl),d.setInputEleProps()),d.changeRtlProps(t.enableRtl);break;case"disabled":d.changeDisabledProp(t.disabled);break;case"value":d.value!==i.value&&d.changeValueProp(t.value);break;case"showButtons":d.changeShowBtnProps(t.showButtons);break;case"mode":t.mode==="Picker"?d.switchToPicker():d.switchToPalette();break;case"modeSwitcher":d.changeModeSwitcherProp(t.modeSwitcher);break;case"columns":case"presetColors":d.isPicker()||d.changePaletteProps();break;case"noColor":t.noColor?d.mode==="Palette"&&!d.modeSwitcher&&d.setNoColor():d.changePaletteProps();break;case"enableOpacity":d.changeOpacityProps(t.enableOpacity);break}},d=this,h=0,p=Object.keys(t);h<p.length;h++){var c=p[h];l(c)}},e.prototype.focusIn=function(){this.element.parentElement.focus()},xe([A("#008000ff")],e.prototype,"value",void 0),xe([A("")],e.prototype,"cssClass",void 0),xe([A(!1)],e.prototype,"disabled",void 0),xe([A("Picker")],e.prototype,"mode",void 0),xe([A(!0)],e.prototype,"modeSwitcher",void 0),xe([A(null)],e.prototype,"presetColors",void 0),xe([A(!0)],e.prototype,"showButtons",void 0),xe([A(10)],e.prototype,"columns",void 0),xe([A(!1)],e.prototype,"inline",void 0),xe([A(!1)],e.prototype,"noColor",void 0),xe([A(!1)],e.prototype,"enablePersistence",void 0),xe([A(!0)],e.prototype,"enableOpacity",void 0),xe([A(!1)],e.prototype,"createPopupOnClick",void 0),xe([j()],e.prototype,"select",void 0),xe([j()],e.prototype,"change",void 0),xe([j()],e.prototype,"beforeTileRender",void 0),xe([j()],e.prototype,"beforeOpen",void 0),xe([j()],e.prototype,"open",void 0),xe([j()],e.prototype,"beforeClose",void 0),xe([j()],e.prototype,"beforeModeSwitch",void 0),xe([j()],e.prototype,"onModeSwitch",void 0),xe([j()],e.prototype,"created",void 0),e=xe([jr],e),e}($r),Bs=function(){function a(e){this.pagerModule=e}return a.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},a.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()},a.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),r=document.createDocumentFragment();i.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=ge("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{tabindex:"-1","aria-label":t.getLocalizedLabel("Page")+n+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"),href:"#"}}),t.currentPage===n&&(fe(e,["e-currentitem","e-active"],["e-pager-default"]),e.setAttribute("aria-current","page")),r.appendChild(e);i.appendChild(r),this.links=[].slice.call(i.childNodes)},a.prototype.wireEvents=function(){te.add(this.pagerElement,"click",this.clickHandler,this),te.add(this.pagerElement,"auxclick",this.auxiliaryClickHandler,this)},a.prototype.unwireEvents=function(){te.remove(this.pagerModule.element,"click",this.clickHandler),te.remove(this.pagerModule.element,"auxclick",this.auxiliaryClickHandler)},a.prototype.destroy=function(){this.unwireEvents()},a.prototype.refreshAriaAttrLabel=function(){for(var e=this.pagerModule,t=e.element.querySelector(".e-numericcontainer"),i=t.querySelectorAll("a"),r=0;r<i.length;r++)i[parseInt(r.toString(),10)].hasAttribute("aria-label")&&i[parseInt(r.toString(),10)].hasAttribute("index")&&i[parseInt(r.toString(),10)].setAttribute("aria-label",e.getLocalizedLabel("Page")+i[parseInt(r.toString(),10)].getAttribute("index")+e.getLocalizedLabel("Of")+e.totalPages+e.getLocalizedLabel("Pages"))},a.prototype.renderNumericContainer=function(){this.element=ge("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(ge("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},a.prototype.renderFirstNPrev=function(e){this.first=ge("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1",role:"button"}}),this.prev=ge("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1",role:"button"}}),Tr([this.first,this.prev],e)},a.prototype.renderPrevPagerSet=function(e){var t=ge("div");this.PP=ge("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.PP),e.appendChild(t)},a.prototype.renderNextPagerSet=function(e){var t=ge("div");this.NP=ge("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.NP),e.appendChild(t)},a.prototype.renderNextNLast=function(e){this.next=ge("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1",role:"button"}}),this.last=ge("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1",role:"button"}}),Tr([this.next,this.last],e)},a.prototype.clickHandler=function(e){var t=this.pagerModule;return this.target=e.target,this.target.classList.contains("e-numericitem")&&e.preventDefault(),t.previousPageNo=t.currentPage,!this.target.classList.contains("e-disable")&&!u(this.target.getAttribute("index"))&&(t.currentPage=parseInt(this.target.getAttribute("index"),10),this.pagerModule.isInteracted=!0,t.dataBind()),!1},a.prototype.auxiliaryClickHandler=function(e){this.target=e.target,this.target.classList.contains("e-numericitem")&&e.button===1&&e.preventDefault()},a.prototype.updateLinksHtml=function(){var e=this.pagerModule,t,i,r,n=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');e.currentPage=e.totalPages===1?1:e.currentPage,e.currentPage>e.totalPages&&e.totalPages&&(e.currentPage=e.totalPages),t=parseInt((e.currentPage/e.pageCount).toString(),10),e.currentPage%e.pageCount===0&&t>0&&(t=t-1);for(var o=0;o<e.pageCount;o++){if(e.isPagerResized){var s=this.pagerElement.querySelector(".e-focus"),l=this.target?this.target:s||null,d=!1,h=!1,p=!1,c=!1,m=!1,g=!1,y=!1;if(l){var w=l.classList;if(w.contains("e-icons"))switch(!0){case w.contains("e-prev"):d=!0;break;case w.contains("e-next"):h=!0;break;case w.contains("e-first"):p=!0;break;case w.contains("e-last"):c=!0;break}else if(w.contains("e-numericitem"))switch(!0){case w.contains("e-np"):g=!0;break;case w.contains("e-pp"):y=!0;break;default:m=w.contains("e-numericitem");break}}i=c||this.pagerModule.keyAction==="End",n=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');var v=Array.from(n).some(function(P){return parseInt(P.getAttribute("index"),10)===e.currentPage});p||this.pagerModule.keyAction==="Home"?r=1+o:c||this.pagerModule.keyAction==="End"?r=t*e.pageCount+1+o:h||this.pagerModule.keyAction==="ArrowRight"||d||this.pagerModule.keyAction==="ArrowLeft"?v?r=parseInt(n[0].getAttribute("index"),10)+o:d||this.pagerModule.keyAction==="ArrowLeft"?r=parseInt(this.PP.getAttribute("index"),10)+o:r=e.currentPage+o:g||y?r=e.currentPage+o:m?r=parseInt(n[0].getAttribute("index"),10)+o:r=t*e.pageCount+1+o}else r=t*e.pageCount+1+o;r<=e.totalPages?(this.links[parseInt(o.toString(),10)].classList.remove("e-hide"),this.links[parseInt(o.toString(),10)].style.display="",this.links[parseInt(o.toString(),10)].setAttribute("index",r.toString()),this.links[parseInt(o.toString(),10)].innerHTML=e.customText?e.customText+r:r.toString(),e.currentPage!==r?this.links[parseInt(o.toString(),10)].classList.add("e-pager-default"):this.links[parseInt(o.toString(),10)].classList.remove("e-pager-default")):(this.links[parseInt(o.toString(),10)].innerHTML=e.customText?e.customText+r:r.toString(),this.links[parseInt(o.toString(),10)].style.display="none"),fe(this.links[parseInt(o.toString(),10)],[],["e-currentitem","e-active"]),this.links[parseInt(o.toString(),10)].removeAttribute("aria-current")}Ue(this.first,{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),Ue(this.pagerElement.querySelector(".e-mfirst"),{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),Ue(this.last,{index:e.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),Ue(this.pagerElement.querySelector(".e-mlast"),{index:e.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),Ue(this.prev,{index:(e.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),Ue(this.pagerElement.querySelector(".e-mprev"),{index:(e.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),Ue(this.next,{index:(e.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")}),Ue(this.pagerElement.querySelector(".e-mnext"),{index:(e.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});var T=this.pagerModule.isPagerResized&&n.length?i?parseInt(n[0].getAttribute("index"),10)-e.avgNumItems:parseInt(n[0].getAttribute("index"),10)-n.length:parseInt(this.links[0].getAttribute("index"),10)-e.pageCount;Ue(this.PP,{index:T<1?"1":T.toString(),title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip")});var C=this.pagerModule.isPagerResized&&n.length?parseInt(n[n.length-1].getAttribute("index"),10):parseInt(this.links[this.links.length-1].getAttribute("index"),10);Ue(this.NP,{index:(C+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip")}),this.target=void 0},a.prototype.updateStyles=function(){var e=this;if(this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length){var t=this.links.findIndex(function(r){return r.getAttribute("index")===e.pagerModule.currentPage.toString()}),i=this.pagerModule.isPagerResized&&t!==-1?t:(this.pagerModule.currentPage-1)%this.pagerModule.pageCount;fe(this.links[parseInt(i.toString(),10)],["e-currentitem","e-active"],[]),this.links[parseInt(i.toString(),10)].setAttribute("aria-current","page")}},a.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],r=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(fe(this.prev,i,r),fe(this.first,e,t),fe(this.pagerElement.querySelector(".e-mfirst"),e,t),fe(this.pagerElement.querySelector(".e-mprev"),i,r)):(fe(this.prev,r,i),fe(this.first,t,e),fe(this.pagerElement.querySelector(".e-mprev"),r,i),fe(this.pagerElement.querySelector(".e-mfirst"),t,e))},a.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount||this.pagerModule.isPagerResized&&this.links.findIndex(function(e){return parseInt(e.getAttribute("index"),10)===1})?fe(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):fe(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},a.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,""),i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages||e.isPagerResized&&Array.from(i).some(function(r){return parseInt(r.getAttribute("index"),10)===e.totalPages})?fe(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):fe(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},a.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],r=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||n.totalRecordsCount===0?(fe(this.last,t,e),fe(this.next,r,i),fe(this.pagerElement.querySelector(".e-mlast"),t,e),fe(this.pagerElement.querySelector(".e-mnext"),r,i)):(fe(this.last,e,t),fe(this.next,i,r),fe(this.pagerElement.querySelector(".e-mlast"),e,t),fe(this.pagerElement.querySelector(".e-mnext"),i,r))},a}(),_s=function(){function a(e){this.pagerModule=e}return a.prototype.render=function(){var e=ge("div",{className:"e-parentmsgbar"});this.pageNoMsgElem=ge("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=ge("span",{className:"e-pagecountmsg",styles:"textalign:right"}),Tr([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},a.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[e.totalRecordsCount===0?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.classList.remove("e-hide")},a.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},a.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},a.prototype.destroy=function(){},a.prototype.format=function(e,t){for(var i,r=RegExp,n=0;n<t.length;n++)i=new r("\\{"+n+"\\}","gm"),e=e.replace(i,t[parseInt(n.toString(),10)].toLocaleString(this.pagerModule.locale));return e},a}(),zs=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_e=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Jn=function(a){zs(e,a);function e(t,i,r){var n=a.call(this,t,i)||this;return n.hasParent=!1,n.checkAll=!0,n.pageRefresh="pager-refresh",n.firstPagerFocus=!1,n.isCancel=!1,n.isInteracted=!1,n.parent=r,n}return e.prototype.requiredModules=function(){var t=[];return this.enableExternalMessage&&t.push({member:"externalMessage",args:[this],name:"ExternalMessage"}),this.checkpagesizes()&&t.push({member:"pagerdropdown",args:[this],name:"PagerDropDown"}),t},e.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"},this.containerModule=new Bs(this),this.pagerMessageModule=new _s(this)},e.prototype.render=function(){if(this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?se([this.element],this.cssClass.split(" ")):se([this.element],[this.cssClass])),this.hasParent||this.element.setAttribute("tabindex","0"),this.enableQueryString){var t=new URL(window.location.href).searchParams.get("page");if(!u(t)&&window.location.href.indexOf("?page=")>0){var i=parseInt(t,10);this.hasParent&&this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.currentPage=i}}this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()},e.prototype.getPersistData=function(){var t=["currentPage","pageSize"];return this.addOnPersist(t)},e.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["pagerTemplate"])),this.removeListener(),this.unwireEvents(),a.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))},e.prototype.destroyTemplate=function(t,i){this.clearTemplate(t,i)},e.prototype.getModuleName=function(){return"pager"},e.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed){if(t.pageSize===this.getLocalizedLabel("All")&&i.pageSize===this.totalRecordsCount){this.pageSize=this.totalRecordsCount;return}t.pageCount!==i.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];switch(o){case"currentPage":this.checkGoToPage(t.currentPage,i.currentPage)&&this.currentPageChanged(t,i);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(i.pageSize!==t.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),t.pageSize!==i.pageSize?(this.pageSize=t.pageSize,this.currentPageChanged(t,i),this.isCancel&&this.hasParent&&this.parent.setProperties({pageSettings:{pageSize:i.pageSize}},!0)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage();break}}this.resizePager()}},e.prototype.wireEvents=function(){this.hasParent||(te.add(this.element,"keydown",this.keyPressHandler,this),te.add(document.body,"keydown",this.keyDownHandler,this)),te.add(this.element,"focusin",this.onFocusIn,this),te.add(this.element,"focusout",this.onFocusOut,this),te.add(window,"resize",this.resizePager,this),te.add(window,"load",this.resizePager,this)},e.prototype.unwireEvents=function(){this.hasParent||(te.remove(this.element,"keydown",this.keyPressHandler),te.remove(document.body,"keydown",this.keyDownHandler)),te.remove(this.element,"focusin",this.onFocusIn),te.remove(this.element,"focusout",this.onFocusOut),te.remove(window,"resize",this.resizePager),te.remove(window,"load",this.resizePager)},e.prototype.onFocusIn=function(t){var i=this.getFocusedTabindexElement();if(u(i)){var r=t.target,n=this.getDropDownPage();if(this.hasParent||(this.element.tabIndex=-1),r===this.element&&!this.hasParent){var o=this.getFocusablePagerElements(this.element,[]);this.addFocus(o[0],!0);return}if(r===this.element){this.element.tabIndex=0;return}r!==n&&!r.classList.contains("e-disable")&&this.addFocus(r,!0)}},e.prototype.onFocusOut=function(t){var i=this.getFocusedElement(),r=this.getDropDownPage();u(i)||this.removeFocus(i,!0),this.pageSizes&&r&&r.classList.contains("e-input-focus")&&this.removeFocus(r,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)},e.prototype.keyDownHandler=function(t){if(t.altKey&&t.keyCode===74){var i=this.getFocusablePagerElements(this.element,[]);i.length>0&&i[0].focus()}},e.prototype.keyPressHandler=function(t){var i=ue(t,{cancel:!1});this.notify(Vi,i),i.cancel===!0&&t.stopImmediatePropagation()},e.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(Vi,this.onKeyPress,this)},e.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(Vi,this.onKeyPress)},e.prototype.onKeyPress=function(t){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(t):(t.preventDefault(),this.setPagerFocus()))},e.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},e.prototype.setPagerContainerFocus=function(){this.element.focus()},e.prototype.setPagerFocus=function(){var t=this.getFocusablePagerElements(this.element,[]);t.length>0&&t[0].focus()},e.prototype.setPagerFocusForActiveElement=function(){var t=this.getActiveElement();t&&t.focus()},e.prototype.setTabIndexForFocusLastElement=function(){var t=this.getFocusablePagerElements(this.element,[]),i=this.getDropDownPage();this.pageSizes&&i&&!u(i.offsetParent)?i.tabIndex=0:t.length>0&&(t[t.length-1].tabIndex=0)},e.prototype.changePagerFocus=function(t){this.keyAction=t.key,t.shiftKey&&t.keyCode===9?this.changeFocusByShiftTab(t):t.keyCode===9?this.changeFocusByTab(t):t.keyCode===13||t.keyCode===32?this.navigateToPageByEnterOrSpace(t):(t.keyCode===37||t.keyCode===39||t.keyCode===35||t.keyCode===36)&&this.navigateToPageByKey(t),this.keyAction=""},e.prototype.getFocusedTabindexElement=function(){for(var t,i=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)];if(n&&(n.classList.contains("e-focused")||n.classList.contains("e-input-focus"))){t=n;break}}return t},e.prototype.changeFocusByTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(r.length>0){if(this.pageSizes&&n&&i===r[r.length-1])n.tabIndex=0;else for(var o=0;o<r.length;o++)if(i===r[parseInt(o.toString(),10)]){var s=o+1;s<r.length&&(t.preventDefault(),r[parseInt(s.toString(),10)].focus());break}}},e.prototype.changeFocusByShiftTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(this.pageSizes&&n&&n.classList.contains("e-input-focus"))n.tabIndex=-1,this.addFocus(r[r.length-1],!0);else if(r.length>0){for(var o=0;o<r.length;o++)if(i===r[parseInt(o.toString(),10)]){var s=o-1;if(s>=0)t.preventDefault(),r[parseInt(s.toString(),10)].focus();else if(this.hasParent){var l=this.parent.getRows(),d=l[l.length-1],h=d.lastChild;t.preventDefault(),h.focus(),this.firstPagerFocus=!0}break}}},e.prototype.checkFirstPagerFocus=function(){return this.firstPagerFocus?(this.firstPagerFocus=!1,!0):!1},e.prototype.navigateToPageByEnterOrSpace=function(t){var i=this.getFocusedElement();if(i){this.goToPage(parseInt(i.getAttribute("index"),10));var r=this.getActiveElement(),n=this.getClass(i),o=this.getElementByClass(n);(n==="e-first"||n==="e-prev"||n==="e-next"||n==="e-last"||n==="e-pp"||n==="e-np")&&o&&!o.classList.contains("e-disable")?o.focus():this.checkFocusInAdaptiveMode(i)?this.changeFocusInAdaptiveMode(i):r&&r.focus()}},e.prototype.navigateToPageByKey=function(t){var i=t.keyCode===37?".e-prev":t.keyCode===39?".e-next":t.keyCode===35?".e-last":t.keyCode===36?".e-first":"",r=this.element.querySelector(i),n=this.getFocusedElement();if(!u(r)&&r.hasAttribute("index")&&!isNaN(parseInt(r.getAttribute("index"),10))){this.goToPage(parseInt(r.getAttribute("index"),10));var o=this.getActiveElement();this.checkFocusInAdaptiveMode(n)?this.changeFocusInAdaptiveMode(n):o&&o.focus()}},e.prototype.checkFocusInAdaptiveMode=function(t){var i=this.getClass(t);return i==="e-mfirst"||i==="e-mprev"||i==="e-mnext"||i==="e-mlast"},e.prototype.changeFocusInAdaptiveMode=function(t){var i=this.getClass(t),r=this.getElementByClass(i);if(r&&r.classList.contains("e-disable"))if(i==="e-mnext"||i==="e-mlast"){var n=this.element.querySelector(".e-mprev");n.focus()}else this.setPagerFocus()},e.prototype.removeTabindexLastElements=function(){var t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(t.length>1)for(var i=1;i<t.length;i++){var r=t[parseInt(i.toString(),10)];r&&(r.tabIndex=-1)}},e.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},e.prototype.getDropDownPage=function(){var t=this.element.querySelector(".e-pagerdropdown"),i;return t&&(i=t.children[0]),i},e.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},e.prototype.getClass=function(t){for(var i,r=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],n=0;n<r.length;n++)if(t&&t.classList.contains(r[parseInt(n.toString(),10)]))return i=r[parseInt(n.toString(),10)],i;return i},e.prototype.getElementByClass=function(t){return this.element.querySelector("."+t)},e.prototype.getFocusablePagerElements=function(t,i){for(var r=t,n=r.children,o=i,s=0;s<n.length;s++){var l=n[parseInt(s.toString(),10)];if(l.children.length>0&&!l.classList.contains("e-pagesizes"))o=this.getFocusablePagerElements(l,o);else{var d=n[parseInt(s.toString(),10)];d.hasAttribute("tabindex")&&!l.classList.contains("e-disable")&&l.style.display!=="none"&&!u(l.offsetParent)&&o.push(d)}}return o},e.prototype.addFocus=function(t,i){u(t)||(i&&se([t],["e-focused","e-focus"]),t.tabIndex=0)},e.prototype.removeFocus=function(t,i){i&&Se([t],["e-focused","e-focus"]),t.tabIndex=-1},e.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},e.prototype.goToPage=function(t){this.checkGoToPage(t)&&(this.currentPage=t,this.isInteracted=!1,this.dataBind())},e.prototype.setPageSize=function(t){this.pageSize=t,this.dataBind()},e.prototype.checkpagesizes=function(){return!!(this.pageSizes===!0||this.pageSizes.length)},e.prototype.checkGoToPage=function(t,i){return t!==this.currentPage&&(this.previousPageNo=this.currentPage),u(i)||(this.previousPageNo=i),this.previousPageNo!==t&&t>=1&&t<=this.totalPages},e.prototype.currentPageChanged=function(t,i){if(this.enableQueryString&&this.updateQueryString(this.currentPage),t.currentPage!==i.currentPage||t.pageSize!==i.pageSize){var r={currentPage:this.currentPage,newProp:t,oldProp:i,cancel:!1,isInteracted:this.isInteracted};this.trigger("click",r),r.cancel?(this.isCancel=!0,i&&i.pageSize&&(this.setProperties({pageSize:i.pageSize},!0),this.pagerdropdownModule&&(this.pagerdropdownModule.setDropDownValue("value",i.pageSize),this.pagerdropdownModule.dropDownListObject.text=i.pageSize+""))):(this.isCancel=!1,this.refresh())}},e.prototype.pagerTemplate=function(){if(!(this.isReactTemplate()&&this.hasParent)){var t;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var i={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},r=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(i,this,"pagerTemplate",r,null,null,this.element),this.renderReactTemplates()):(t=this.isVue?this.getPagerTemplate()(i,this,"pagerTemplate",null,null,null,null,this.root):this.getPagerTemplate()(i),Hi(this.element,t))}},e.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize===0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},e.prototype.getPagerTemplate=function(){return this.templateFn},e.prototype.compile=function(t){if(t)try{typeof t=="function"?this.templateFn=di(t):document.querySelectorAll(t).length?this.templateFn=di(document.querySelector(t).innerHTML.trim()):this.templateFn=di(t)}catch{this.templateFn=di(t)}},e.prototype.refresh=function(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();var t=this.getFocusedTabindexElement();this.containerModule.refresh(),this.removeTabindexLastElements(),t&&t.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement(),this.resizePager()}},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.initLocalization=function(){this.localeObj=new $t(this.getModuleName(),this.defaultConstants,this.locale)},e.prototype.updateQueryString=function(t){var i=this.getUpdatedURL(window.location.href,"page",t.toString());window.history.pushState({path:i},"",i)},e.prototype.getUpdatedURL=function(t,i,r){var n=RegExp,o=new n("([?|&])"+i+"=.*?(&|#|$)","i");if(t.match(o))return t.replace(o,"$1"+i+"="+r+"$2");var s="";return t.indexOf("#")!==-1&&(s=t.replace(/.*#/,"#"),t=t.replace(/#.*/,"")),t+(t.indexOf("?")!==-1?"&":"?")+i+"="+r+s},e.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(ge("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(ge("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},e.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(ge("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(ge("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},e.prototype.addAriaLabel=function(){var t=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!Ae.isDevice)for(var i=0;i<t.length;i++){var r=this.element.querySelector(t[parseInt(i.toString(),10)]);r.setAttribute("aria-label",r.getAttribute("title"))}},e.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&typeof this.template!="string"},e.prototype.calculateActualWidth=function(){for(var t=this.element.querySelectorAll(".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"),i=0,r=0;r<t.length;r++)getComputedStyle(t[parseInt(r.toString(),10)]).display!=="none"&&(i+=t[parseInt(r.toString(),10)].offsetWidth+parseFloat(getComputedStyle(t[parseInt(r.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(t[parseInt(r.toString(),10)]).marginRight));var n=this.element.querySelector(".e-pagercontainer");return i+=parseFloat(getComputedStyle(n).marginLeft)+parseFloat(getComputedStyle(n).marginRight),i},e.prototype.resizePager=function(){var t=this,i=this.element.classList.contains("e-pager")?getComputedStyle(this.element).getPropertyValue("border-style").includes("solid"):null;if(!this.template&&i){var r=this.element.querySelector(".e-pagercontainer"),n=this.calculateActualWidth(),o=this.element.clientWidth-parseFloat(getComputedStyle(this.element).paddingLeft)-parseFloat(getComputedStyle(this.element).paddingRight)-parseFloat(getComputedStyle(this.element).marginLeft)-parseFloat(getComputedStyle(this.element).marginRight),s=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),l=r.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])'),d=s.length,h=1,p=u(Xt(this.element,"e-bigger"))?5:10,c=r.querySelector(".e-np"),m=r.querySelector(".e-pp"),g=this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])'),y=0;g.length&&(g.forEach(function(Q){y+=Q.offsetWidth}),this.averageDetailWidth=y/g.length);for(var w=0,v=0;v<s.length;v++)w+=s[parseInt(v.toString(),10)].offsetWidth+parseFloat(getComputedStyle(s[parseInt(v.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(s[parseInt(v.toString(),10)]).marginRight);var T=w/s.length;if(o>0&&n>=o-(T||0)){this.isPagerResized=!0,this.currentPage!==this.totalPages&&fe(c,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]),n=this.calculateActualWidth();var C=Math.abs(n-o),P=Math.ceil(C/T);P=P===0?1:P>s.length?s.length-1:P;for(var v=1;v<=P;v++){var R=d-parseInt(v.toString(),10);s=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),this.currentPage!==1&&(parseInt(s[Math.abs(R)].getAttribute("index"),10)===this.currentPage||parseInt(s[s.length-1].getAttribute("index"),10)===this.currentPage)&&(R=0,fe(m,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])),s[Math.abs(R)]&&!s[Math.abs(R)].classList.contains("e-currentitem")&&s[Math.abs(R)].classList.add("e-hide")}if(s=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),s.length<=1&&g.length&&window.innerWidth>=768){var N=this.calculateActualWidth();if(N>o-p){var D=Math.floor((o-(N-y))/this.averageDetailWidth);D=g.length-D;for(var v=0;v<(D>g.length?g.length:D);v++)g[parseInt(v.toString(),10)].classList.add("e-hide")}}}else if(n<o&&l.length){var C=Math.abs(o-n),S=this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide");if(S.length&&C>this.averageDetailWidth+this.averageDetailWidth/4&&S[S.length-1].classList.remove("e-hide"),C>T*2&&!S.length&&window.innerWidth>=768){var x=Math.floor(C/(T+p));x=x>l.length?l.length:x-1;for(var I=Array.from(l).filter(function(ie){return parseInt(ie.getAttribute("index"),10)<t.currentPage}).sort(function(ie,Z){return parseInt(Z.getAttribute("index"),10)-parseInt(ie.getAttribute("index"),10)}),E=Array.from(l).filter(function(ie){return parseInt(ie.getAttribute("index"),10)>t.currentPage}),L=I.length&&I||E.length&&E,v=1;v<=x;v++){var z=L&&L[Math.abs(h-v)];z&&(z.classList.remove("e-hide"),z===L[L.length-1]&&(L=null))}}}if(s=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),s.length){parseInt(s[s.length-1].getAttribute("index"),10)===this.totalPages&&fe(c,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),parseInt(s[0].getAttribute("index"),10)===1&&fe(m,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]);var _=Array.from(s).some(function(Q){return parseInt(Q.getAttribute("index"),10)===t.totalPages}),G=parseInt(s[0].getAttribute("index"),10)-(_?this.avgNumItems:s.length);m.setAttribute("index",G<1?"1":G.toString()),c.setAttribute("index",(parseInt(s[s.length-1].getAttribute("index"),10)+1).toString()),this.avgNumItems=_?this.avgNumItems:s.length}this.element.offsetWidth<769&&window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display")!=="none"&&this.pageSizes?(this.element.querySelector(".e-pagesizes").classList.remove("e-hide"),this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide"),this.element.classList.add("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.element.offsetWidth<481?this.currentPage+" / "+this.totalPages:this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" "):(this.element.classList.remove("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" ")}},_e([A(!1)],e.prototype,"enableQueryString",void 0),_e([A(!1)],e.prototype,"enableExternalMessage",void 0),_e([A(!0)],e.prototype,"enablePagerMessage",void 0),_e([A(12)],e.prototype,"pageSize",void 0),_e([A(10)],e.prototype,"pageCount",void 0),_e([A(1)],e.prototype,"currentPage",void 0),_e([A()],e.prototype,"totalRecordsCount",void 0),_e([A()],e.prototype,"externalMessage",void 0),_e([A(!1)],e.prototype,"pageSizes",void 0),_e([A()],e.prototype,"template",void 0),_e([A("")],e.prototype,"customText",void 0),_e([j()],e.prototype,"click",void 0),_e([A("")],e.prototype,"cssClass",void 0),_e([j()],e.prototype,"dropDownChanged",void 0),_e([j()],e.prototype,"created",void 0),e=_e([jr],e),e}($r),qs=function(){function a(e){this.pagerModule=e}return a.prototype.getModuleName=function(){return"pagerdropdown"},a.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=ge("div",{className:"e-pagesizes"});var t=ge("div",{className:"e-pagerdropdown"}),i=ge("div",{className:"e-pagerconstant"}),r=ge("input",{attrs:{type:"text",tabindex:"-1"}});this.pagerCons=ge("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(r),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,o=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],s=this.pagerModule.pageSize;this.dropDownListObject=new Ca({dataSource:o,value:s.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(r),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=s,e.dataBind(),e.trigger("dropDownChanged",{pageSize:s}),this.addEventListener()},a.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.isCancel||this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage||this.pagerModule.isAllPage===void 0&&this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},a.prototype.refresh=function(){this.pagerCons&&(this.isPageSizeAll(this.pagerModule.pageSize)?(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerAllDropDown"),this.pagerCons.parentElement.classList.add("e-page-all")):(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerDropDown"),this.pagerCons.parentElement.classList.remove("e-page-all")),this.pagerDropDownDiv.classList.remove("e-hide"))},a.prototype.beforeValueChange=function(e){if(typeof e.newProp.value=="number"){var t=e.newProp.value.toString();e.newProp.value=t}},a.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[parseInt(i.toString(),10)]=parseInt(t[parseInt(i.toString(),10)],10)?t[parseInt(i.toString(),10)].toString():this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)])!==""?this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)]):t[parseInt(i.toString(),10)];return t},a.prototype.isPageSizeAll=function(e){var t=typeof e=="string"&&e!==this.pagerModule.getLocalizedLabel("All")?parseInt(e,10):e;return t===this.pagerModule.totalRecordsCount||e===this.pagerModule.getLocalizedLabel("All")},a.prototype.setDropDownValue=function(e,t){if(this.dropDownListObject){var i=this.pagerModule.isAllPage;this.pagerModule.isAllPage=this.isPageSizeAll(t),this.pagerModule.checkAll=!!(i&&this.pagerModule.isAllPage),this.dropDownListObject[""+e]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t}},a.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},a.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},a.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),ze(this.pagerDropDownDiv))},a}(),Ns=function(){function a(e){this.pagerModule=e}return a.prototype.getModuleName=function(){return"externalMessage"},a.prototype.render=function(){this.element=ge("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}}),this.pagerModule.element.appendChild(this.element),this.refresh()},a.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},a.prototype.hideMessage=function(){u(this.element)||(this.element.style.display="none")},a.prototype.showMessage=function(){this.element.style.display=""},a.prototype.destroy=function(){this.element&&this.element.parentElement&&ze(this.element)},a}(),Hs=function(){function a(e,t){this.isInitialRender=!0,this.isCancel=!1,Jn.Inject(Ns,qs),this.parent=e,this.pageSettings=t,this.addEventListener()}return a.prototype.getModuleName=function(){return"pager"},a.prototype.render=function(){var e=this.parent;this.pagerDestroy(),u(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"});var t=Ro({},ue({},ve(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:e.enableRtl,locale:e.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);t.cssClass=this.parent.cssClass?this.parent.cssClass:"",this.pagerObj=new Jn(t,void 0,this.parent),this.pagerObj.root=e.root?e.root:e,this.pagerObj.hasParent=!0,this.pagerObj.on(Tn,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},a.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},a.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),r=this.element.querySelector(".e-numericcontainer"),n=r.querySelectorAll("a"),o=0;o<n.length;o++){this.parent.getContentTable()?n[parseInt(o.toString(),10)].setAttribute("aria-owns",this.parent.getContentTable().id+" "+(o+1)):n[parseInt(o.toString(),10)].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table "+(o+1));var s=this.parent.createElement("div");s.appendChild(n[parseInt(o.toString(),10)]),i.appendChild(s)}e.appendChild(i),t.replaceChild(e,r);for(var l=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],d=0;d<l.length;d++){var h=this.element.querySelector(l[parseInt(d.toString(),10)]);this.parent.getContentTable()&&h.setAttribute("aria-owns",this.parent.getContentTable().id+l[parseInt(d.toString(),10)].replace(".e-"," "))}}},a.prototype.dataReady=function(e){this.updateModel(e)},a.prototype.refresh=function(){this.pagerObj.refresh()},a.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},a.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},a.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count;var t=e.action==="add"&&e.requestType==="save"||e.requestType==="batchsave";this.pagerObj.isAllPage&&!t&&(this.parent.pageSettings.pageSize=this.parent.pageSettings.totalRecordsCount),t&&this.pagerObj.isAllPage&&e.count===this.pageSettings.pageSize&&this.pagerObj.setProperties({pageSize:e.count},!0),this.parent.dataBind()},a.prototype.onActionComplete=function(e){this.parent.trigger(An,ue(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:An}))},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];this.pagerObj[""+n]=t[""+n]}this.pagerObj.dataBind()}},a.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||Ia(t)&&!t.prevPageMoving&&!this.isCancel){this.isForceCancel?this.isForceCancel=!1:(!u(e.newProp)&&!u(e.newProp.pageSize)?(t.notify(kn,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.setProperties({pageSize:e.oldProp.pageSize},!0),this.parent.setProperties({pageSettings:{pageSize:e.oldProp.pageSize}},!0),this.pagerObj.setProperties({currentPage:t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage},!0)):e.currentPage&&(t.notify(kn,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage),this.isForceCancel=!0,this.pagerObj.dataBind()),e.cancel=!0;return}t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;var i=this.pageSettings.currentPage,r={cancel:!1,requestType:"paging",previousPage:i,currentPage:e.currentPage,pageSize:t.pageSettings.pageSize,type:Ra};if(this.isCancel||(this.pageSettings.currentPage=e.currentPage,this.parent.notify(Ma,r),t.pageRequireRefresh=!1),r.cancel){e.cancel=!0,this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.pagerObj.setProperties({currentPage:i},!0),this.isCancel=!0;return}this.isCancel=!1,this.parent.requestTypeAction="paging"},a.prototype.keyPressHandler=function(e){e.action in eo&&(e.preventDefault(),this.element.querySelector(eo[e.action]).click())},a.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},a.prototype.appendToElement=function(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},a.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},a.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},!this.parent.isDestroyed&&((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(Fn,this.handlers.created.bind(this)),this.evtHandlers=[{event:Ar,handler:this.handlers.load},{event:Pa,handler:this.handlers.end},{event:Ta,handler:this.handlers.ready},{event:Aa,handler:this.handlers.complete},{event:ka,handler:this.handlers.updateLayout},{event:Fa,handler:this.handlers.inboundChange},{event:Vi,handler:this.handlers.keyPress},{event:kr,handler:this.destroy}],Ln(this.parent,this.evtHandlers,!0,this))},a.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},a.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&typeof this.pagerObj.template!="string"},a.prototype.renderReactPagerTemplate=function(){if(!this.isInitialRender&&this.isReactTemplate()){var e=void 0;this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);var t=this.parent.pageSettings,i={currentPage:t.currentPage,pageSize:t.pageSize,pageCount:t.pageCount,totalRecordsCount:t.totalRecordsCount,totalPages:this.pagerObj.totalPages},r=this.parent.id+"_pagertemplate";this.parent.isReact?(this.pagerObj.templateFn(i,this.parent,"pagerTemplate",r,null,null,this.pagerObj.element),this.parent.renderTemplates()):(e=this.pagerObj.templateFn(i,this.parent,"pagerTemplate"),Hi(this.pagerObj.element,e))}},a.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(Fn,this.handlers.created),this.parent.off(Tn,this.renderReactPagerTemplate),Ln(this.parent,this.evtHandlers,!1))},a.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},a.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),ze(this.element))},a}(),eo={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},js=function(){function a(e,t){this.parent=e,this.locator=t,this.addEventListener()}return a.prototype.getModuleName=function(){return"freeze"},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ar,this.instantiateRenderer,this),this.parent.on(kr,this.destroy,this))},a.prototype.instantiateRenderer=function(){this.parent.log("limitation",this.getModuleName())},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ar,this.instantiateRenderer),this.parent.off(kr,this.destroy))},a.prototype.destroy=function(){this.removeEventListener()},a}(),$o=["isLazyUpdate","plugins","closeActionEvents","content","createPopupOnClick","cssClass","disabled","enableHtmlSanitizer","enablePersistence","enableRtl","iconCss","iconPosition","items","locale","target","beforeClose","beforeItemRender","beforeOpen","close","created","open","select"],Go=[],Uo=Gr({props:$o}),$s=Uo[0],Wo=Uo[1],Qr=Object.keys(Wo);Qr.push("modelchanged","update:modelValue");for(var wr=0,to=Go;wr<to.length;wr++){var Gs=to[wr];Qr.push("update:"+Gs)}var Us=Ot({name:"DropDownButtonComponent",mixins:[Ur],props:$s,watch:Wo,emits:Qr,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new La({}),propKeys:$o,models:Go,hasChildDirective:!0,hasInjectedModules:!1,tagMapper:{"e-dropdownbuttonitems":"e-dropdownbuttonitem"},tagNameMapper:{"e-dropdownbuttonitems":"e-items"},isVue3:!Ce,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(a){var e=Ce?a:xi,t=null;return u(this.$slots.default)||(t=Ce?this.$slots.default:this.$slots.default()),e("button",t)},methods:{clearTemplate:function(a){if(a||(a=Object.keys(this.templateCollection||{})),a.length&&this.templateCollection)for(var e=0,t=a;e<t.length;e++){var i=t[e],r=this.templateCollection[i];if(r&&r.length){for(var n=0,o=r;n<o.length;n++){var s=o[n];this.destroyPortals(s)}delete this.templateCollection[i]}}},setProperties:function(a,e){var t=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(a,e),a&&this.models&&this.models.length&&Object.keys(a).map(function(i){t.models.map(function(r){i===r&&!/datasource/i.test(i)&&(t.isVue3?t.ej2Instances.vueInstance.$emit("update:"+i,a[i]):(t.$emit("update:"+i,a[i]),t.$emit("modelchanged",a[i])))})})},custom:function(){this.updated()},addItems:function(a,e){return this.ej2Instances.addItems(a,e)},focusIn:function(){return this.ej2Instances.focusIn()},removeItems:function(a,e){return this.ej2Instances.removeItems(a,e)},toggle:function(){return this.ej2Instances.toggle()}}}),Ws=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xs=function(a){Ws(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.calculateDateTimeNiceInterval=function(t,i,r,n,o){o===void 0&&(o=!0);var s=24*60*60*1e3,l=new Date(r),d=new Date(n),h=Math.abs((l.getTime()-d.getTime())/s),p;t.actualIntervalType=t.intervalType;var c=t.intervalType;switch(c){case"Years":p=this.calculateNumericNiceInterval(t,h/365,i);break;case"Quarter":p=this.calculateNumericNiceInterval(t,h/365*4,i);break;case"Months":p=this.calculateNumericNiceInterval(t,h/30,i);break;case"Weeks":p=this.calculateNumericNiceInterval(t,h/7,i);break;case"Days":p=this.calculateNumericNiceInterval(t,h,i);break;case"Hours":p=this.calculateNumericNiceInterval(t,h*24,i);break;case"Minutes":p=this.calculateNumericNiceInterval(t,h*24*60,i);break;case"Seconds":p=this.calculateNumericNiceInterval(t,h*24*60*60,i);break;case"Auto":return p=this.calculateNumericNiceInterval(t,h/365,i),p>=1?(t.actualIntervalType="Years",p):(p=this.calculateNumericNiceInterval(t,h/30,i),p>=1?(t.actualIntervalType="Months",p):(p=this.calculateNumericNiceInterval(t,h/7,i),p>=1&&!o?(t.actualIntervalType="Weeks",p):(p=this.calculateNumericNiceInterval(t,h,i),p>=1?(t.actualIntervalType="Days",p):(p=this.calculateNumericNiceInterval(t,h*24,i),p>=1?(t.actualIntervalType="Hours",p):(p=this.calculateNumericNiceInterval(t,h*24*60,i),p>=1?(t.actualIntervalType="Minutes",p):(p=this.calculateNumericNiceInterval(t,h*24*60*60,i),t.actualIntervalType="Seconds",p))))))}return p},e.prototype.getSkeleton=function(t,i,r,n){var o,s=t.actualIntervalType;return t.skeleton?t.skeleton:(s==="Years"?n?o=(t.isChart&&t.valueType==="DateTime","y"):o=t.isChart?t.valueType==="DateTime"&&t.isIntervalInDecimal?"y":"yMMM":"y":s==="Quarter"?o=n?"y":"yMMM":s==="Months"?n?o=(t.isChart,"m"):o=t.isChart?"MMMd":"MMM":s==="Weeks"?o=n?"m":"MEd":s==="Days"?n?o="d":o=t.isChart?t.valueType==="DateTime"?"MMMd":"yMd":"MMMd":s==="Hours"?n?o="t":o=t.isChart?t.valueType==="DateTime"?"Hm":"EHm":"h":s==="Minutes"?n?o="T":o=t.isChart?"Hms":"hm":n?o="T":o=t.isChart?"Hms":"hms",o)},e.prototype.findCustomFormats=function(t){var i=t.labelFormat?t.labelFormat:"";return t.isChart&&!t.skeleton&&t.actualIntervalType==="Months"&&!i&&(i=t.valueType==="DateTime"?"MMM yyyy":"yMMM"),i},e}(Oo),Ys=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zs=function(a){Ys(e,a);function e(t){return a.call(this,t)||this}return e.prototype.calculateRangeAndInterval=function(t,i){this.calculateRange(i),this.getActualRange(i,t),this.applyRangePadding(i,t),this.calculateVisibleLabels(i)},e.prototype.getActualRange=function(t,i){this.initializeDoubleRange(t),t.actualRange={},t.interval?t.actualRange.interval=Math.ceil(t.interval):t.actualRange.interval=Math.max(1,Math.floor(t.doubleRange.delta/Vo(i,t))),t.actualRange.min=t.doubleRange.start,t.actualRange.max=t.doubleRange.end,t.actualRange.delta=t.doubleRange.delta},e.prototype.applyRangePadding=function(t,i){var r;t.series.forEach(function(o){r||(r=(o.type.indexOf("Column")>-1||o.type.indexOf("Bar")>-1)&&!(t.zoomFactor<1||t.zoomPosition>0)&&u(t.minimum)&&u(t.maximum))});var n=(t.labelPlacement==="BetweenTicks"||r)&&!this.chart.stockChart&&this.chart.chartAreaType!=="PolarRadar"?.5:0;n>0?(t.actualRange.min-=n,t.actualRange.max+=n):t.actualRange.max+=t.actualRange.max?0:.5,t.doubleRange=new Lt(t.actualRange.min,t.actualRange.max),t.actualRange.delta=t.doubleRange.delta,this.calculateVisibleRange(i,t)},e.prototype.calculateVisibleLabels=function(t){t.visibleLabels=[],t.visibleRange.interval=t.visibleRange.interval<1?1:t.visibleRange.interval;var i=Math.ceil(t.visibleRange.min),r;(t.zoomFactor<1||t.zoomPosition>0)&&(i=t.visibleRange.min-t.visibleRange.min%t.visibleRange.interval);var n;for(t.startLabel=t.labels[Math.round(t.visibleRange.min)],t.endLabel=t.labels[Math.floor(t.visibleRange.max)];i<=t.visibleRange.max;i+=t.visibleRange.interval)r=ue({},le("properties",t.labelStyle),null,!0),pi(i,t.visibleRange)&&t.labels.length>0&&(n=Math.round(i),Bo(this.chart,n,t.labels[n]?t.labels[n].toString():"",r,t));t.getMaxLabelWidth&&t.getMaxLabelWidth(this.chart)},e.prototype.getModuleName=function(){return"Category"},e.prototype.destroy=function(){},e}(Xs),Qs=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xo=function(a){Qs(e,a);function e(t){return a.call(this,t)||this}return e.prototype.calculateRangeAndInterval=function(t,i){this.calculateRange(i),this.getActualRange(i,t),this.calculateVisibleRange(t,i),this.calculateVisibleLabels(i,this.chart)},e.prototype.getActualRange=function(t,i){this.initializeDoubleRange(t),this.min=this.min<0?0:this.min;var r=ci(this.min,t.logBase);r=isFinite(r)?r:this.min;var n=this.max===1?1:ci(this.max,t.logBase);n=isFinite(r)?n:this.max,this.min=Math.floor(r/1);var o=t.series&&t.series.some(function(s){return(s.type.indexOf("Column")!==-1||s.type.indexOf("Bar")!==-1)&&s.type.indexOf("Range")===-1});o&&(this.min=this.min<=0?+this.min-1:this.min),this.max=Math.ceil(n/1),this.max=this.max===this.min?this.max+1:this.max,t.actualRange.interval=t.interval||this.calculateLogNiceInterval(this.max-this.min,i,t),t.actualRange.min=this.min,t.actualRange.max=this.max,t.actualRange.delta=this.max-this.min},e.prototype.calculateVisibleRange=function(t,i){i.visibleRange={interval:i.actualRange.interval,max:i.actualRange.max,min:i.actualRange.min,delta:i.actualRange.delta};var r=u(i.zoomingScrollBar)?!1:i.zoomingScrollBar.isLazyLoad;(i.zoomFactor<1||i.zoomPosition>0)&&!r&&(i.calculateVisibleRangeOnZooming(),i.visibleRange.interval=i.enableAutoIntervalOnZooming?this.calculateLogNiceInterval(i.doubleRange.delta,t,i):i.visibleRange.interval,i.visibleRange.interval=Math.floor(i.visibleRange.interval)===0?1:Math.floor(i.visibleRange.interval),i.triggerRangeRender(this.chart,i.visibleRange.min,i.visibleRange.max,i.visibleRange.interval))},e.prototype.calculateLogNiceInterval=function(t,i,r){for(var n=Vo(i,r),o=t,s=Math.pow(r.logBase,Math.floor(ci(o,10))),l=0,d=r.intervalDivs.length;l<d;l++){var h=s*r.intervalDivs[l];if(n<t/h)break;o=h}return o},e.prototype.calculateVisibleLabels=function(t,i){var r=t.visibleRange.min;t.visibleLabels=[];var n,o;(t.zoomFactor<1||t.zoomPosition>0)&&(r=t.visibleRange.min-t.visibleRange.min%t.visibleRange.interval);var s=this.getFormat(t),l=s.match("{value}")!==null,d=Math.pow(t.logBase,t.visibleRange.min);for(t.format=i.intl.getNumberFormat({format:l?"":s,useGrouping:i.useGroupingSeparator,maximumFractionDigits:d<1?20:3}),t.startLabel=t.format(d<1?+d.toPrecision(1):d),t.endLabel=t.format(Math.pow(t.logBase,t.visibleRange.max));r<=t.visibleRange.max;r+=t.visibleRange.interval)n=ue({},le("properties",t.labelStyle),null,!0),pi(r,t.visibleRange)&&(o=Math.pow(t.logBase,r),Bo(this.chart,r,this.formatValue(t,l,s,o<1?+o.toPrecision(1):o),n,t));t.getMaxLabelWidth&&t.getMaxLabelWidth(this.chart)},e.prototype.getModuleName=function(){return"Logarithmic"},e.prototype.destroy=function(){},e}(Oo),Ks=function(){function a(){}return a.prototype.getSideBySideInfo=function(e){if(e.chart.enableSideBySidePlacement&&!e.position&&this.getSideBySidePositions(e),e.columnWidthInPixel)return new Lt(0,0);var t=e.type==="Histogram"||!e.chart.enableSideBySidePlacement?0:e.position,i=e.type==="Histogram"||!e.chart.enableSideBySidePlacement?1:e.rectCount;e.isRectSeries=!0;var r=e.chart.visibleSeries,n=e.chart.enableSideBySidePlacement?e.columnSpacing:0,o=e.columnWidth===null||isNaN(+e.columnWidth)?e.type==="Histogram"?1:.7:Math.min(e.columnWidth,1),s=as(e.xAxis,r),l=s*o,d,h=t/i-.5,p=new Lt(h,h+1/i);if(!(isNaN(p.start)||isNaN(p.end))){if(e.groupName&&e.type.indexOf("Stacking")===-1){var c=.7;e.chart.series.filter(function(w){w.columnWidth>c&&(c=w.columnWidth)});var m=s*c,g=new Lt(p.start*m,p.end*m),y=(g.delta-(p.end*l-p.start*l))/2;p=new Lt(g.start+y,g.end-y)}else p=new Lt(p.start*l,p.end*l);d=n*p.delta,p=new Lt(p.start+d/2,p.end-d/2)}return p},a.prototype.getRectangle=function(e,t,i,r,n){var o=Ye(e,t,n.xAxis,n.yAxis,n.chart.requireInvertedAxis),s=Ye(i,r,n.xAxis,n.yAxis,n.chart.requireInvertedAxis);return new gt(Math.min(o.x,s.x),Math.min(o.y,s.y),Math.abs(s.x-o.x),Math.abs(s.y-o.y))},a.prototype.drawCylinder=function(e,t,i,r,n){var o=r.width,s=r.height;if(n.chart.enableCanvas){var l=n.chart.canvasRender.ctx,d=l;l.save();var h=Gi(e.fill),p=r.x+n.clipRect.x,c=r.y+n.clipRect.y,m=2*Math.PI+.1,g=void 0,y=void 0,w=void 0,v=void 0,T=void 0,C=void 0,P=void 0,R=void 0,N=void 0,D=void 0,S=void 0,x=void 0,I=void 0,E=void 0,L=void 0,z=void 0,_=void 0,G=void 0,Q=void 0,ie=0,Z=0,U=0,ye=0,Ge=0;l.fillStyle=At(h,.9),l.lineWidth=0,l.strokeStyle=At(h,.9),l.globalAlpha=e.opacity,i.isColumn?(ie=p,Z=o+p,g=o/2,y=g/4,v=w=p+g,D=T=c-y,R=p,P=p+o,C=N=c+s-y,_=Math.PI,G=-g,Q=y,i.stacking&&(i.isLastSeries||(D=T=c+y))):(ye=s+c,U=c,y=s/2,g=y/4,R=w=p+g,P=v=p+o+g,N=c+s,D=c,C=T=c+y,Ge=Math.PI/2,_=Math.PI*1.5,i.stacking&&(i.isLastSeries||(P=v=p+o-g)),y=-y,g=-g,G=g,Q=-y);var je=At(h,.7),be=l.createLinearGradient(ie,U,Z,ye);be.addColorStop(0,h),be.addColorStop(.3,je),be.addColorStop(.7,je),be.addColorStop(1,h);for(var Ee=1;Ee<=4;Ee++){var Fe=0;for(Ee<4&&l.beginPath(),Ee%2===0?(S=v,x=C,I=R,E=D):(S=w,x=T,I=P,E=N),Ee===4&&(g=G,y=Q,l.fillStyle=be),Ee>2&&(Fe=Ge,m=_);Fe<=m;Fe+=.1)L=S-g*Math.cos(Fe),z=x+y*Math.sin(Fe),Fe===0?l.moveTo(L,z):l.lineTo(L,z);Ee>2&&l.lineTo(I,E),Ee!==3&&(l.stroke(),l.fill())}e.id.indexOf("Series")>=0&&(l.clip(),l.restore(),l=d)}else{var Qe=n.chart,p=r.x,c=r.y,st=e.id,h=e.fill,Zt=h,Mt=ss(h);Mt||(h=Gi(h));var lt=0,dt=0,de=0,we=0,K=0,$=0,Be=void 0,Re=void 0,ht=void 0,rt=void 0,Pt=void 0,Vt=void 0,g=void 0,y=void 0,Fe=2;for(i.isColumn?(g=o/2,y=g/4,Be=ht=p,Re=y<c?c-y:i.stacking?c+y:c-y,rt=Re,lt=2*g,we=y<c||s<2*y?s:i.stacking?s-2*y:s,Pt=Be,Vt=y<c?Re+s:s<Re?s+Re:i.stacking?s+(c-y):s+Re,K=100,i.stacking&&(i.isLastSeries||(Re=rt=c+y,we=s<g/2?s:s-g/2))):(y=s/2,g=y/4,Re=rt=c,Be=ht=Math.abs(p-g),dt=2*y,de=o,Pt=Be+o,Vt=Re,$=100,i.stacking&&(i.isLastSeries||(Pt=Be+o-g*2,de=o-g*2))),ze(this.element);Fe--;)e.d="M"+Be.toString()+","+Re.toString()+"a"+g.toString()+","+y.toString()+" 0 1,0 "+lt.toString()+","+dt.toString()+"a"+g.toString()+","+y.toString()+" 0 1,0 "+(-1*lt).toString()+","+(-1*dt).toString(),e.id=st+"_Region_"+Fe,e.fill=At(h,.9),Fe%2===0&&n.type!=="StackingBar100"&&n.type!=="StackingBar"&&n.type!=="Bar"&&(e.fill=e.fill+"10"),this.element=Qe.renderer.drawPath(this.options,new Int32Array([n.clipRect.x,n.clipRect.y])),ui(n.chart.enableCanvas,n.seriesElement,this.element,Qe.redraw),Be=Pt,Re=Vt;e.d="M"+ht.toString()+","+rt.toString()+"a"+g.toString()+","+y.toString()+" 0 1,0 "+lt.toString()+","+dt.toString()+"l"+de.toString()+" "+we.toString()+"a"+g.toString()+","+y.toString()+" 0 1,1 "+(-1*lt).toString()+","+(-1*dt).toString()+" z",e.id=st+"_Region_2",e.fill=At(h,.7);var Bt=void 0;if(Zt.indexOf("url")===-1){if(!document.getElementById(st)){Bt={id:st,x1:"0%",y1:"0%",x2:K.toString()+"%",y2:$.toString()+"%"};var Ri=[{colorStop:"0%",color:h},{colorStop:"30%",color:At(h,.7)},{colorStop:"70%",color:At(h,.7)},{colorStop:"100%",color:h}];this.drawGradient(Bt,Ri,n)}e.fill="url(#"+Bt.id+")"}this.element=Qe.renderer.drawPath(this.options,new Int32Array([n.clipRect.x,n.clipRect.y])),ui(n.chart.enableCanvas,n.seriesElement,this.element,Qe.redraw)}},a.prototype.drawGradient=function(e,t,i){var r=i.chart,n=r.renderer.createDefs(),o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"linearGradient");s.setAttribute("id",e.id),s.setAttribute("x1",e.x1),s.setAttribute("y1",e.y1),s.setAttribute("x2",e.x2),s.setAttribute("y2",e.y2);for(var l=0;l<t.length;l++){var d=document.createElementNS(o,"stop");d.setAttribute("offset",t[l].colorStop),d.setAttribute("stop-color",t[l].color),d.setAttribute("stop-opacity","1"),s.appendChild(d)}i.seriesElement.appendChild(n),n.appendChild(s)},a.prototype.getSideBySidePositions=function(e){for(var t=e.chart,i=0,r=t.columns;i<r.length;i++)for(var n=r[i],o=0,s=t.rows;o<s.length;o++){var l=s[o];this.findRectPosition(e.findSeriesCollection(n,l,!1))}},a.prototype.findRectPosition=function(e){for(var t=[],i={rectCount:0,position:null},r=0;r<e.length;r++){var n=e[r];if(n.type.indexOf("Stacking")!==-1||n.groupName!==""){var o=n.type.indexOf("Stacking")!==-1?n.stackingGroup:n.type+n.groupName;o?t[o]===void 0?(n.position=i.rectCount,t[o]=i.rectCount++):n.position=t[o]:i.position===null?(n.position=i.rectCount,i.position=i.rectCount++):n.position=i.position}else n.position=i.rectCount++}for(var r=0;r<e.length;r++){var n=e[r];n.rectCount=i.rectCount}},a.prototype.updateSymbolLocation=function(e,t,i){i.chart.requireInvertedAxis?this.updateYRegion(e,t,i):this.updateXRegion(e,t,i),i.type==="Histogram"&&(e.minimum=+e.x-i.histogramValues.binWidth/2,e.maximum=+e.x+i.histogramValues.binWidth/2)},a.prototype.updateXRegion=function(e,t,i){e.symbolLocations.push({x:t.x+t.width/2,y:i.seriesType==="BoxPlot"||i.seriesType.indexOf("HighLow")!==-1||e.yValue>=0==!i.yAxis.isAxisInverse?t.y:t.y+t.height}),this.getRegion(e,t,i),i.type==="RangeColumn"&&e.symbolLocations.push({x:t.x+t.width/2,y:t.y+t.height})},a.prototype.updateYRegion=function(e,t,i){e.symbolLocations.push({x:i.seriesType==="BoxPlot"||i.seriesType.indexOf("HighLow")!==-1||e.yValue>=0==!i.yAxis.isAxisInverse?t.x+t.width:t.x,y:t.y+t.height/2}),this.getRegion(e,t,i),i.type==="RangeColumn"&&e.symbolLocations.push({x:t.x,y:t.y+t.height/2})},a.prototype.renderMarker=function(e){e.marker&&e.marker.visible&&e.chart.markerRender.render(e)},a.prototype.getRegion=function(e,t,i){if(e.y===0){var r=i.marker&&i.marker.width?i.marker.width:0,n=i.marker&&i.marker.height?i.marker.height:0;e.regions.push(new gt(e.symbolLocations[0].x-r,e.symbolLocations[0].y-n,2*r,2*n))}else e.regions.push(t)},a.prototype.triggerEvent=function(e,t,i,r){var n={cancel:!1,name:zn,series:e,point:t,fill:e.setPointColor(t,i),border:e.setBorderColor(t,r)};return e.chart.trigger(zn,n),t.color=n.fill,n},a.prototype.drawRectangle=function(e,t,i,r){var n=e.chart,o=n.requireInvertedAxis?i.height:i.width;if(o<=0)return null;var s;t.y===0?s=this.calculateRoundedRectPath(i,0,0,0,0):s=this.calculateRoundedRectPath(i,e.cornerRadius.topLeft,e.cornerRadius.topRight,e.cornerRadius.bottomLeft,e.cornerRadius.bottomRight,n.requireInvertedAxis);var l=e.category==="Indicator"?n.element.id+"_Indicator_"+e.index+"_"+e.name+"_Point_"+t.index:n.element.id+"_Series_"+e.index+"_Point_"+(e.removedPointIndex!==null&&e.removedPointIndex<=t.index?t.index+1:t.index),d=ls(n.redraw,l),h=d?d.getAttribute("d"):"";switch(this.options=new Yr(l,r.fill,r.border.width,r.border.color,e.opacity,e.dashArray,e.columnFacet==="Cylinder"?"":s),this.element=n.renderer.drawPath(this.options,new Int32Array([e.clipRect.x,e.clipRect.y])),e.removedPointIndex!==null&&e.removedPointIndex<=t.index&&(this.element.id=n.element.id+"_Series_"+e.index+"_Point_"+t.index),e.seriesType){case"XY":this.element.setAttribute("role","img"),this.element.setAttribute("aria-label",t.x+":"+t.yValue+", "+e.name);break;case"HighLow":this.element.setAttribute("role","img"),this.element.setAttribute("aria-label",t.x+":"+t.high+", "+t.low+", "+e.name);break}e.columnFacet==="Cylinder"&&(n.redraw||!n.enableAnimation)&&e.seriesElement.querySelector("#"+this.element.id)||ui(e.chart.enableCanvas,e.seriesElement,this.element,n.redraw),e.chart.enableCanvas||ds(this.element,e.columnFacet==="Cylinder"?"":s,n.redraw,h,n.duration)},a.prototype.animate=function(e){for(var t=e.seriesElement.childNodes,i=e.category==="Indicator"?0:1,r=_o(e),n=0,o=r;n<o.length;n++){var s=o[n];if(!(!s.symbolLocations.length&&!(e.type==="BoxAndWhisker"&&s.regions.length)))if((e.type==="Column"||e.type==="Bar"||e.type==="StackingColumn"||e.type==="StackingColumn100"||e.type==="StackingBar"||e.type==="StackingBar100")&&e.columnFacet==="Cylinder")for(var l=0;l<t.length;l++)this.animateRect(t[l],e,s);else this.animateRect(t[i],e,s),i++}},a.prototype.animateRect=function(e,t,i){var r=t.animation,n=t.chart.animated?t.chart.duration:r.duration,o=hs("Linear"),s=i.yValue<0,l,d,h=+i.regions[0].height,p=+i.regions[0].width,c,m;t.chart.requireInvertedAxis?(d=+i.regions[0].y,t.type.indexOf("Stacking")>-1?(l=Ui(0,t.yAxis)*t.yAxis.rect.width,c=l,m=d):(l=+i.regions[0].x,m=s?d:d+h,c=t.seriesType.indexOf("HighLow")!==-1||t.type.indexOf("Waterfall")!==-1?l+p/2:s!==t.yAxis.isAxisInverse?l+p:l)):(l=+i.regions[0].x,t.type.indexOf("Stacking")>-1?(d=(1-Ui(0,t.yAxis))*t.yAxis.rect.height,c=l,m=d):(d=+i.regions[0].y,m=t.seriesType.indexOf("HighLow")!==-1||t.type.indexOf("Waterfall")!==-1?d+h/2:s!==t.yAxis.isAxisInverse?d:d+h,c=s?l:l+p));var g;u(e)||(e.style.visibility="hidden",new Da({}).animate(e,{duration:n===0&&Ea==="Enable"?1e3:n,delay:r.delay,progress:function(y){y.timeStamp>=y.delay&&(e.style.visibility="visible",t.chart.requireInvertedAxis?(p=p||1,g=o(y.timeStamp-y.delay,0,p,y.duration),e.setAttribute("transform","translate("+c+" "+m+") scale("+g/p+", 1) translate("+-c+" "+-m+")")):(h=h||1,g=o(y.timeStamp-y.delay,0,h,y.duration),e.setAttribute("transform","translate("+c+" "+m+") scale(1,"+g/h+") translate("+-c+" "+-m+")")))},end:function(){e.setAttribute("transform","translate(0,0)");var y=t.seriesElement;if((e===y.lastElementChild||i.index===t.points.length-1||t.type==="Waterfall"&&e===y.children[y.childElementCount-2])&&(t.chart.trigger("animationComplete",{series:t.chart.isBlazor?{}:t}),t.type==="Waterfall"))for(var w=y.childNodes,v=0;v<w.length;v++)w[v].id.indexOf("Connector")!==-1&&(w[v].style.visibility="visible",w[v].setAttribute("transform","translate(0,0)"))}}))},a.prototype.calculateRoundedRectPath=function(e,t,i,r,n,o){o===void 0&&(o=!1);var s=o?e.width/2:e.height/2;return t=Math.min(t,s),i=Math.min(i,s),r=Math.min(r,s),n=Math.min(n,s),"M "+e.x+" "+(t+e.y)+" Q "+e.x+" "+e.y+" "+(e.x+t)+" "+e.y+" L "+(e.x+e.width-i)+" "+e.y+" Q "+(e.x+e.width)+" "+e.y+" "+(e.x+e.width)+" "+(e.y+i)+" L "+(e.x+e.width)+" "+(e.y+e.height-n)+" Q "+(e.x+e.width)+" "+(e.y+e.height)+" "+(e.x+e.width-n)+" "+(e.y+e.height)+" L "+(e.x+r)+" "+(e.y+e.height)+" Q "+e.x+" "+(e.y+e.height)+" "+e.x+" "+(e.y+e.height-r)+" L "+e.x+" "+(t+e.y)+" Z"},a}(),Js=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),el=function(a){Js(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.sideBySideInfo=[],t}return e.prototype.render=function(t){this.sideBySideInfo[t.index]=this.getSideBySideInfo(t);for(var i=Math.max(t.yAxis.visibleRange.min,0),r=0,n=t.points;r<n.length;r++){var o=n[r];this.renderPoint(t,o,this.sideBySideInfo[t.index],i)}this.renderMarker(t)},e.prototype.renderPoint=function(t,i,r,n){if(i.symbolLocations=[],i.regions=[],i.visible&&zo(t.points[i.index-1],i,t.points[i.index+1],t)){this.rect=this.getRectangle(i.xValue+r.start,i.yValue,i.xValue+r.end,n,t),this.rect.width=t.columnWidthInPixel?t.columnWidthInPixel-(t.chart.enableSideBySidePlacement?t.columnWidthInPixel*t.columnSpacing:0):this.rect.width,this.rect.x=t.columnWidthInPixel?this.rect.x-(t.columnWidthInPixel/2*t.rectCount-t.columnWidthInPixel*t.index):this.rect.x;var o=t.category==="Indicator"?i.color:t.interior,s=this.triggerEvent(t,i,o,{width:t.border.width,color:t.border.color});if(!s.cancel&&(this.updateSymbolLocation(i,this.rect,t),this.drawRectangle(t,i,this.rect,s),t.columnFacet==="Cylinder")){var l={isColumn:!0,stacking:!1,isLastSeries:!0};this.drawCylinder(this.options,this.element,l,this.rect,t)}}},e.prototype.updateDirection=function(t,i){for(var r=Math.max(t.yAxis.visibleRange.min,0),n=0;n<i.length;n++)if(this.renderPoint(t,t.points[i[n]],this.sideBySideInfo[t.index],r),t.marker&&t.marker.visible&&t.chart.markerRender.renderMarker(t,t.points[i[n]],t.points[i[n]].symbolLocations[0],null,!0),t.marker.dataLabel.visible&&t.chart.dataLabelModule){t.chart.dataLabelModule.commonId=t.chart.element.id+"_Series_"+t.index+"_Point_";for(var o=t.chart.dataLabelModule.renderDataLabel(t,t.points[i[n]],null,t.marker.dataLabel),s=0;s<o.length;s++)t.chart.dataLabelModule.doDataLabelAnimation(t,o[s])}},e.prototype.doAnimation=function(t){this.animate(t)},e.prototype.getModuleName=function(){return"ColumnSeries"},e.prototype.destroy=function(){},e}(Ks),tl=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),il=function(a){tl(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,i,r,n,o,s){var l="",d="M",h=null,p,c,m,g=this.enableComplexProperty(t);i.valueType==="Category"&&i.labelPlacement==="BetweenTicks"?p=.5:p=0;for(var y=0,w=g;y<w.length;y++){var v=w[y];v.symbolLocations=[],v.regions=[],v.visible&&zo(g[v.index-1],v,g[v.index+1],t)?(d==="M"&&(!g[v.index+1]||!g[v.index+1].visible)&&(l=""),h!=null?(m=Ye(v.xValue,v.yValue,i,r,n),c=Ye(h.xValue,h.yValue,i,r,n),l=l.concat(d+" "+c.x+" "+c.y+this.GetStepLineDirection(m,c,t.step)),d="L"):(c=Ye(v.xValue-p,v.yValue,i,r,n),l=l.concat(d+" "+c.x+" "+c.y+" "),d="L"),this.storePointLocation(v,t,n,Ye),l===""&&(l="M "+v.symbolLocations[0].x+" "+v.symbolLocations[0].y),h=v):(h=t.emptyPointSettings.mode==="Drop"?h:null,d=t.emptyPointSettings.mode==="Drop"?d:"M")}g.length>0&&(c=Ye(g[g.length-1].xValue+p,g[g.length-1].yValue,i,r,n),l=l.concat(d+" "+c.x+" "+c.y+" "));var T=new Yr(t.chart.element.id+"_Series_"+t.index,"transparent",t.width,t.interior,t.opacity,t.dashArray,l);this[o?"addPath":"appendLinePath"](T,t,""),s||this.renderMarker(t)},e.prototype.updateDirection=function(t,i){this.render(t,t.xAxis,t.yAxis,t.chart.requireInvertedAxis,!1,!0);for(var r=0;r<i.length;r++)if(t.marker&&t.marker.visible&&t.chart.markerRender.renderMarker(t,t.points[i[r]],t.points[i[r]].symbolLocations[0],null,!0),t.marker.dataLabel.visible&&t.chart.dataLabelModule){t.chart.dataLabelModule.commonId=t.chart.element.id+"_Series_"+t.index+"_Point_";for(var n=t.chart.dataLabelModule.renderDataLabel(t,t.points[i[r]],null,t.marker.dataLabel),o=0;o<n.length;o++)t.chart.dataLabelModule.doDataLabelAnimation(t,n[o])}},e.prototype.doAnimation=function(t){var i=t.animation;this.doLinearAnimation(t,i)},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"StepLineSeries"},e}(ps),rl=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nl=function(a){rl(e,a);function e(t){var i=a.call(this,t)||this;return i.element=i.chart.element,i.textStyle=t.tooltip.textStyle,i.control=t,i.template=t.tooltip.template,i}return e.prototype.getElement=function(t){return document.getElementById(t)},e.prototype.getTooltipElement=function(t){this.inverted=this.chart.requireInvertedAxis,this.header=this.control.tooltip.header===null?this.control.tooltip.shared?"${point.x}":"${series.name}":this.control.tooltip.header,this.formattedText=[];var i=document.getElementById(this.chart.element.id+"_tooltip"),r=this.chart.element.id.indexOf("stockChart")>-1;return!t&&!i||r?this.createElement():null},e.prototype.createElement=function(){var t=document.createElement("div");return t.id=this.element.id+"_tooltip",t.className="ejSVGTooltip",t.style.pointerEvents="none",t.style.position="absolute",t.style.zIndex="1",t},e.prototype.pushData=function(t,i,r,n,o){return t.series.enableTooltip?(o?this.currentPoints.push(t):n?this.currentPoints.push(t):this.currentPoints.push(t),this.stopAnimation(),r&&!document.getElementById(r.id)&&(this.chart.stockChart?document.getElementById(this.chart.stockChart.element.id+"_Secondary_Element").appendChild(r):document.getElementById(this.element.id+"_Secondary_Element").appendChild(r)),!0):!1},e.prototype.removeHighlight=function(){for(var t,i=0,r=this.previousPoints.length;i<r;i++)if(t=this.previousPoints[i],t.series.isRectSeries){t.series.visible&&this.highlightPoint(t.series,t.point.index,!1);continue}},e.prototype.highlightPoint=function(t,i,r){var n=this.getElement(this.element.id+"_Series_"+t.index+"_Point_"+i),o=this.control.accumulationSelectionModule,s=!!(o&&o.selectedDataIndexes.length>0);n&&(!s||s&&n.getAttribute("class")&&n.getAttribute("class").indexOf("_ej2_chart_selection_series_")===-1?this.chart.highlightColor!==""&&!u(this.chart.highlightColor)?n.setAttribute("fill",r&&this.chart.highlightColor!=="transparent"?this.chart.highlightColor:t.pointColorMapping!==""?t.points[0].color:t.points[i].color||t.interior):n.setAttribute("opacity",(r&&this.chart.highlightColor!=="transparent"?t.opacity/2:t.opacity).toString()):n.setAttribute("opacity",t.opacity.toString()))},e.prototype.highlightPoints=function(){for(var t=0,i=this.currentPoints;t<i.length;t++){var r=i[t];r.series.isRectSeries&&r.series.category==="Series"&&this.highlightPoint(r.series,r.point.index,!0)}},e.prototype.createTooltip=function(t,i,r,n,o,s,l,d,h,p,c,m){h===void 0&&(h=!1),p===void 0&&(p=null),c===void 0&&(c=null);var g=this.currentPoints[0].series,y=t.tooltipModule||t.tooltip3DModule||t.accumulationTooltipModule;if(!y||r===null){Wi(this.chart.element.id+"_tooltip");return}i?(this.svgTooltip=new cs({opacity:t.tooltip.opacity?t.tooltip.opacity:this.chart.theme==="Material3"||this.chart.theme==="Material3Dark"?1:.75,header:this.headerText,content:this.text,fill:t.tooltip.fill,border:t.tooltip.border,enableAnimation:t.tooltip.enableAnimation,location:r,shared:this.control.tooltip.shared,crosshair:h,shapes:s,clipBounds:this.chart.chartAreaType==="PolarRadar"?new Me(0,0):n,areaBounds:d,palette:this.findPalette(),template:m||this.template,data:c,theme:t.theme,offset:l,textStyle:t.tooltip.textStyle,isNegative:g.isRectSeries&&g.type!=="Waterfall"&&o&&o.y<0,inverted:this.chart.requireInvertedAxis&&g.isRectSeries,arrowPadding:this.text.length>1||this.chart.stockChart||this.chart.tooltip.location.x!==null||this.chart.tooltip.location.y!==null?0:7,availableSize:t.availableSize,duration:this.chart.tooltip.duration,isCanvas:this.chart.enableCanvas,isFixed:this.chart.tooltip.location.x!==null||this.chart.tooltip.location.y!==null,isTextWrap:t.tooltip.enableTextWrap&&t.getModuleName()==="chart",blazorTemplate:{name:"Template",parent:this.chart.tooltip},controlInstance:this.chart,enableRTL:t.enableRtl,controlName:"Chart",allowHighlight:t.getModuleName()==="chart"&&!g.marker.allowHighlight,tooltipRender:function(){y.removeHighlight(),y.highlightPoints(),y.updatePreviousPoint(p)},animationComplete:function(w){w.tooltip.fadeOuted&&y.fadeOut(y.previousPoints)}}),this.svgTooltip.appendTo(this.getElement(this.element.id+"_tooltip"))):this.svgTooltip&&(this.svgTooltip.location=r,this.svgTooltip.content=this.text,this.svgTooltip.header=this.headerText,this.svgTooltip.offset=l,this.svgTooltip.palette=this.findPalette(),this.svgTooltip.shapes=s,this.svgTooltip.data=c,this.svgTooltip.template=this.template,this.svgTooltip.controlName="Chart",this.svgTooltip.crosshair=h,this.svgTooltip.textStyle=t.tooltip.textStyle,this.svgTooltip.isNegative=g.isRectSeries&&g.type!=="Waterfall"&&o&&o.y<0,this.svgTooltip.clipBounds=this.chart.chartAreaType==="PolarRadar"?new Me(0,0):n,this.svgTooltip.arrowPadding=this.text.length>1||this.chart.stockChart||this.chart.tooltip.location.x!==null||this.chart.tooltip.location.y!==null?0:7,this.svgTooltip.allowHighlight=t.getModuleName()==="chart"&&!g.marker.allowHighlight,this.svgTooltip.dataBind()),this.chart.isReact&&this.chart.renderReactTemplates()},e.prototype.findPalette=function(){for(var t=[],i=0,r=this.currentPoints;i<r.length;i++){var n=r[i];t.push(this.findColor(n,n.series))}return t},e.prototype.findColor=function(t,i){return i.isRectSeries&&(i.type==="Candle"||i.type==="Hilo"||i.type==="HiloOpenClose")?t.point.color:(t.point.color&&t.point.color!=="#ffffff"?t.point.color:t.point.interior)||i.marker.fill||i.interior},e.prototype.updatePreviousPoint=function(t){t&&(this.currentPoints=this.currentPoints.concat(t)),this.previousPoints=ue([],this.currentPoints,null,!0)},e.prototype.fadeOut=function(t){var i=this.chart.enableCanvas?this.getElement(this.element.id+"_tooltip_group"):this.getElement(this.element.id+"_tooltip_svg"),r=i&&parseInt(i.getAttribute("opacity"),10)>0;r||(this.valueX=null,this.valueY=null,this.currentPoints=[],this.removeHighlight(),this.removeHighlightedMarker(t,!0),this.svgTooltip=null,this.control.trigger("animationComplete",{}))},e.prototype.removeHighlightedMarker=function(t,i){if(this.chart.markerRender)for(var r=0,n=t;r<n.length;r++){var o=n[r];Wi(this.element.id+"_Series_"+o.series.index+"_Point_"+o.point.index+"_Trackball"),this.chart.markerRender.removeHighlightedMarker(o.series,o.point,i)}this.previousPoints=[]},e.prototype.removeText=function(){this.textElements=[];var t=this.getElement(this.element.id+"_tooltip_group");if(t&&t.childNodes.length>0)for(;t.lastChild&&t.childNodes.length!==1;)t.removeChild(t.lastChild)},e.prototype.stopAnimation=function(){us(this.toolTipInterval)},e.prototype.removeTooltip=function(t){var i=this,r=this.getElement(this.element.id+"_tooltip");this.stopAnimation(),r&&this.previousPoints.length>0&&(this.toolTipInterval=+setTimeout(function(){i.svgTooltip&&i.svgTooltip.fadeOut()},t))},e}(gs),ol=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yo=function(a){ol(e,a);function e(t){var i=a.call(this,t)||this;return i.commonXvalues=[],i.addEventListener(),i}return e.prototype.addEventListener=function(){if(!this.chart.isDestroyed){var t=Ae.isPointer?"pointerleave":"mouseleave";this.chart.on(t,this.mouseLeaveHandler,this),this.chart.on("tapHold",this.longPress,this),this.chart.on(Ae.touchMoveEvent,this.mouseMoveHandler,this),this.chart.on(Ae.touchEndEvent,this.mouseUpHandler,this)}},e.prototype.mouseUpHandler=function(){var t=this.control,i=this.getData();i.lierIndex=this.lierIndex,t.isTouch&&!this.isSelected(t)&&(Bi(t.mouseX,t.mouseY,t.chartAxisLayoutPanel.seriesClipRect)&&t.tooltip.shared||!t.tooltip.shared)?t.crosshair.enable?t.startMove&&t.tooltip.fadeOutMode==="Move"&&this.removeTooltip(2e3):(this.tooltip(),t.tooltip.fadeOutMode==="Move"&&this.removeTooltip(t.tooltip.fadeOutDuration)):!this.findData(i,this.previousPoints[0])&&t.tooltip.fadeOutMode==="Click"&&this.removeTooltip(0)},e.prototype.mouseLeaveHandler=function(){this.removeTooltip(this.chart.tooltip.fadeOutDuration)},e.prototype.mouseMoveHandler=function(){var t=this.chart;t.stockChart&&t.stockChart.onPanning&&(t.mouseY<t.chartAxisLayoutPanel.seriesClipRect.y?t.mouseY=t.chartAxisLayoutPanel.seriesClipRect.y:t.mouseY>t.chartAxisLayoutPanel.seriesClipRect.y+t.chartAxisLayoutPanel.seriesClipRect.height&&(t.mouseY=t.chartAxisLayoutPanel.seriesClipRect.y+t.chartAxisLayoutPanel.seriesClipRect.height)),!t.disableTrackTooltip&&!this.isSelected(t)&&(!t.tooltip.shared&&(!t.isTouch||t.startMove)&&this.tooltip(),Bi(t.mouseX,t.mouseY,t.chartAxisLayoutPanel.seriesClipRect)?t.tooltip.shared&&(!t.isTouch||t.startMove)&&this.tooltip():t.tooltip.shared&&t.tooltip.fadeOutMode==="Move"&&this.removeTooltip(this.chart.tooltip.fadeOutDuration))},e.prototype.longPress=function(){var t=this.chart;return t.crosshair.enable&&Bi(t.mouseX,t.mouseY,t.chartAxisLayoutPanel.seriesClipRect)&&(this.tooltip(),t.markerRender.markerMove(!1)),!1},e.prototype.tooltip=function(){var t=this.chart.enableCanvas?this.element.id+"_tooltip_group":this.element.id+"_tooltip_svg",i=this.getElement(t),r=this.chart.stockChart&&i&&i.firstChild.childNodes.length>1,n=i&&parseInt(i.getAttribute("opacity"),10)>0&&!r,o=this.getTooltipElement(n);this.chart.enableCanvas&&o&&(document.getElementById(this.chart.element.id+"_Secondary_Element").appendChild(o),o.appendChild(document.getElementById(this.chart.element.id+"_tooltip_svg"))),this.chart.tooltip.shared?this.renderGroupedTooltip(this.chart,!n,o):this.renderSeriesTooltip(this.chart,!n,o)},e.prototype.findHeader=function(t){return this.header===""?"":(this.header=this.parseTemplate(t.point,t.series,this.header,t.series.xAxis,t.series.yAxis),this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()!==""?this.header:"")},e.prototype.findShapes=function(){if(!this.chart.tooltip.enableMarker)return[];for(var t=[],i=0,r=this.currentPoints;i<r.length;i++){var n=r[i];t.push(n.point.marker.shape||n.series.marker.shape||"Circle")}return t},e.prototype.renderSeriesTooltip=function(t,i,r){var n=this.getData();if(n.lierIndex=this.lierIndex,this.currentPoints=[],this.findData(n,this.previousPoints[0])){if(!(t.dataEditingModule&&t.dataEditingModule.isPointDragging)&&this.previousPoints[0]&&n.point.index===this.previousPoints[0].point.index&&n.series.index===this.previousPoints[0].series.index)return null;this.pushData(n,i,r,!0)&&this.triggerTooltipRender(n,i,this.getTooltipText(n),this.findHeader(n))}else if(!n.point&&this.isRemove&&t.tooltip.fadeOutMode==="Move")this.removeTooltip(this.chart.tooltip.fadeOutDuration),this.isRemove=!1;else for(var o=this.mergeXvalues(this.chart.visibleSeries),s=0,l=t.visibleSeries;s<l.length;s++){var d=l[s];d.visible&&d.category!=="TrendLine"&&(n=this.getClosestX(t,d,o)||n)}n&&n.point&&this.findMouseValue(n,t)},e.prototype.triggerTooltipRender=function(t,i,r,n){var o=this,s,l={cancel:!1,name:qn,text:r,headerText:n,template:s,series:this.chart.isBlazor?{}:t.series,textStyle:this.textStyle,point:t.point,data:{pointX:t.point.x,pointY:t.point.y,seriesIndex:t.series.index,seriesName:t.series.name,pointIndex:t.point.index,pointText:t.point.text}},d=this.chart.border.width,h=3,p=this.chart.tooltip,c=function(m){if(m.cancel)o.removeHighlight(),ze(o.getElement(o.element.id+"_tooltip"));else{t.series.type==="BoxAndWhisker"&&(o.removeText(),i=!0),o.headerText=m.headerText,o.formattedText=o.formattedText.concat(m.text),o.text=o.formattedText;var g=o.getSymbolLocation(t);g=g||new Me(null,null),g.x=p.location.x!==null?p.location.x:g.x,g.y=p.location.y!==null?p.location.y:g.y,g=g.x===null&&g.y===null?null:g,o.createTooltip(o.chart,i,g,t.series.clipRect,t.point,o.findShapes(),o.findMarkerHeight(o.currentPoints[0]),new gt(d,d,o.chart.availableSize.width-h-d*2,o.chart.availableSize.height-h-d*2),o.chart.crosshair.enable,null,o.getTemplateText(t),o.template?m.template:"")}o.isRemove=!0};c.bind(this,t),this.chart.trigger(qn,l,c)},e.prototype.findMarkerHeight=function(t){var i=0,r=t.series;return i=(r.marker.visible||this.chart.tooltip.shared&&(!r.isRectSeries||r.marker.visible)||r.type==="Scatter"||r.drawType==="Scatter")&&!(r.type==="Candle"||r.type==="Hilo"||r.type==="HiloOpenClose")?(r.marker.height+2)/2+2*r.marker.border.width:0,i},e.prototype.findData=function(t,i){return t.point&&(!i||i.point!==t.point||i&&i.lierIndex>3&&i.lierIndex!==this.lierIndex||i.point===t.point)},e.prototype.getSymbolLocation=function(t){var i;if(t.series.type!=="BoxAndWhisker"){if(!t.point.symbolLocations[0])return null;i=new Me(t.point.symbolLocations[0].x,t.point.symbolLocations[0].y)}switch(t.series.type){case"BoxAndWhisker":return this.getBoxLocation(t);case"Waterfall":return this.getWaterfallRegion(t,i);case"RangeArea":case"RangeStepArea":case"SplineRangeArea":case"RangeColumn":return this.getRangeArea(t,i);default:return i}},e.prototype.getRangeArea=function(t,i){return t.point.regions[0]&&(this.inverted?i.x=t.point.regions[0].x+t.point.regions[0].width/2:i.y=t.point.regions[0].y+t.point.regions[0].height/2,t.series.type==="RangeStepArea"&&(i.y=t.point.regions[0].y+t.point.regions[0].height/2+t.point.regions[0].width)),i},e.prototype.getWaterfallRegion=function(t,i){return this.inverted?i.x=t.point.y<0?i.x+t.point.regions[0].width:i.x:i.y=t.point.y<0?i.y-t.point.regions[0].height:i.y,i},e.prototype.getTooltipText=function(t){var i=t.series;return this.parseTemplate(t.point,i,this.getFormat(this.chart,i),i.xAxis,i.yAxis)},e.prototype.getTemplateText=function(t){if(this.template&&this.chart.tooltip.shared){for(var i=[],r=0;r<t.length;r++)i[r]=ue({},t[r].point),i[r].x=this.formatPointValue(t[r].point,t[r].series.xAxis,"x",!0,!1),t[r].series.seriesType==="XY"?i[r].y=this.formatPointValue(t[r].point,t[r].series.yAxis,"y",!1,!0):(i[r].low=this.formatPointValue(t[r].point,t[r].series.yAxis,"low",!1,!0),i[r].high=this.formatPointValue(t[r].point,t[r].series.yAxis,"high",!1,!0));return i}else if(this.template){var i=ue({},t.point);return i.x=this.formatPointValue(t.point,t.series.xAxis,"x",!0,!1),t.series.seriesType==="XY"?i.y=this.formatPointValue(t.point,t.series.yAxis,"y",!1,!0):(i.low=this.formatPointValue(t.point,t.series.yAxis,"low",!1,!0),i.high=this.formatPointValue(t.point,t.series.yAxis,"high",!1,!0)),i}else return t.point},e.prototype.findMouseValue=function(t,i){i.requireInvertedAxis?(this.valueY=(1-Ui(t.point.xValue,t.series.xAxis))*t.series.xAxis.rect.height+t.series.xAxis.rect.y,this.valueX=i.mouseX):(i.chartAreaType==="PolarRadar"?this.valueX=fs(t.point.xValue,t.series.xAxis)*t.series.xAxis.rect.width+t.series.xAxis.rect.x:this.valueX=t.series.category==="TrendLine"&&i.tooltip.shared?this.valueX:Ui(t.point.xValue,t.series.xAxis)*t.series.xAxis.rect.width+t.series.xAxis.rect.x,this.valueY=i.mouseY)},e.prototype.renderGroupedTooltip=function(t,i,r){var n,o=[],s,l=t.chartAreaType==="PolarRadar"?this.getData():null;this.stopAnimation(),this.removeHighlight(),this.currentPoints=[];var d=[],h=Number.MAX_VALUE,p=Number.MAX_VALUE,c,m,g;i&&(t.stockChart?r&&!vs(r.id)&&document.getElementById(t.stockChart.element.id+"_Secondary_Element").appendChild(r):r&&document.getElementById(this.element.id+"_Secondary_Element").appendChild(r)),this.removeText();for(var y={text:[],cancel:!1,name:ur,data:[],point:[],series:[],headerText:"",textStyle:this.textStyle,template:[]},w=0,v=0,T=t.visibleSeries;v<T.length;v++){var C=T[v];!C.enableTooltip||!C.visible||(t.chartAreaType==="Cartesian"&&C.visible?n=this.getClosestX(t,C,this.commonXValue(this.chart.visibleSeries)):t.chartAreaType==="PolarRadar"&&C.visible&&l.point!==null&&(n=new ms(C.points[l.point.index],C)),t.tooltip.showNearestPoint&&!n&&(n=this.getClosestX(t,C,this.commonXValue([C]))),n&&(y.data.push({pointX:n.point.x,pointY:n.point.y,seriesIndex:n.series.index,seriesName:n.series.name,pointIndex:n.point.index,pointText:n.point.text}),y.series[w]=n.series,y.point[w]=n.point,y.headerText=this.findHeader(n),this.currentPoints.push(n),this.template!=null&&y.template.push(this.template.toString()),y.text.push(this.getTooltipText(n)),c=t.requireInvertedAxis?t.mouseY-n.series.clipRect.y:t.mouseX-n.series.clipRect.x,m=t.mouseY-n.series.clipRect.y,n.point.symbolLocations&&n.point.symbolLocations.length&&Math.abs(c-n.point.symbolLocations[0].x)<=h&&Math.abs(n.point.symbolLocations[0].y-m)<Math.abs(p-m)&&(h=Math.abs(c-n.point.symbolLocations[0].x),p=n.point.symbolLocations[0].y,g=n),s=n.series.category==="TrendLine"&&t.tooltip.shared?s:g||n,o.push(n)),w++)}if(!t.tooltip.showNearestPoint){var P=[];this.currentPoints=[],y.point=[],y.series=[],y.data=[],y.text=[];for(var R=0,N=o;R<N.length;R++){var D=N[R];(D.point.symbolLocations[0].x===s.point.symbolLocations[0].x||(D.series.type.indexOf("Column")!==-1||s.series.type.indexOf("Column")!==-1)&&D.point.xValue===s.point.xValue)&&(y.point.push(D.point),y.series.push(D.series),y.text.push(this.getTooltipText(D)),y.headerText=this.findHeader(D),P.push(D),y.data.push({pointX:D.point.x,pointY:D.point.y,seriesIndex:D.series.index,seriesName:D.series.name,pointIndex:D.point.index,pointText:D.point.text}))}o=P,this.currentPoints=P}o.length>0&&this.currentPoints.length>0?this.triggerSharedTooltip(y,s,d,t,i,o):this.getElement(this.element.id+"_tooltip_path")&&this.getElement(this.element.id+"_tooltip_path").setAttribute("d","")},e.prototype.triggerSharedTooltip=function(t,i,r,n,o,s){var l=this,d=t.template,h={cancel:!1,name:ur,text:t.text,headerText:t.headerText,textStyle:t.textStyle,template:d,point:t.point,series:t.series,data:t.data},p=this.chart.border.width,c=3,m,g,y=[];n.stockChart&&(m=n.stockChart.enablePeriodSelector?n.stockChart.toolbarHeight:0,g=Dr(this.chart.stockChart.title,this.chart.stockChart.titleStyle,this.chart.themeStyle.tooltipLabelFont).height+10);var w=function(v){if(v.cancel)Wi(l.element.id+"_tooltip"),r.push(i);else{i.series.type==="BoxAndWhisker"&&(l.removeText(),o=!0);for(var T=0;T<v.text.length;T++)v.text[T]&&y.push(l.currentPoints[T]);l.currentPoints=y,l.formattedText=l.formattedText.concat(v.text),l.text=v.text,l.headerText=v.headerText,typeof v.template!="object"?(v.template=v.template.split(","),v.template.length>y.length&&(v.template=v.template.splice(v.template.length-1))):v.template.length>y.length&&v.template.splice(v.template.length-1);var C=l.chart.tooltip;l.findMouseValue(i,l.chart);var P=l.findSharedLocation();P=P||new Me(null,null),P.x=C.location.x!==null?C.location.x:P.x,P.y=C.location.y!==null?C.location.y:P.y,P=P.x===null&&P.y===null?null:P,l.createTooltip(n,o,P,l.currentPoints.length===1?l.currentPoints[0].series.clipRect:null,s.length===1?s[0].point:null,l.findShapes(),l.findMarkerHeight(l.currentPoints[0]),new gt(p,n.stockChart?m+g+p:p,l.chart.availableSize.width-c-p*2,l.chart.availableSize.height-c-p*2),l.chart.crosshair.enable,r,l.template?l.getTemplateText(s):null,l.template?v.template.join(""):""),i=null}};w.bind(this,i,r),this.chart.trigger(ur,h,w)},e.prototype.findSharedLocation=function(){var t=this.chart.stockChart;if(t){this.text.length===1&&this.text.push("");var i=t.enablePeriodSelector?t.toolbarHeight:0,r=document.getElementById(t.element.id+"_ChartTitle"),n=t.title!==""?r.getBoundingClientRect().height+10:0;return t.tooltip.position==="Nearest"?new Me(this.valueX,this.valueY+i+n):new Me(this.chart.chartAxisLayoutPanel.seriesClipRect.x+5,this.chart.chartAxisLayoutPanel.seriesClipRect.y+i+5+n)}else return this.currentPoints.length>1?new Me(this.valueX,this.valueY):this.getSymbolLocation(this.currentPoints[0])},e.prototype.getBoxLocation=function(t){var i=this.lierIndex>3?t.point.outliers.length>0?t.point.symbolLocations[this.lierIndex-4]:null:{x:t.point.regions[0].x+t.point.regions[0].width/2,y:t.point.regions[0].y+t.point.regions[0].height/2};return i},e.prototype.parseTemplate=function(t,i,r,n,o){for(var s,l,d=RegExp,h=0,p=Object.keys(t);h<p.length;h++){var c=p[h];s=new d("${point."+c+"}","gm"),r=r.replace(s.source,this.formatPointValue(t,s.source==="${point.x}"?n:o,c,s.source==="${point.x}",s.source==="${point.high}"||s.source==="${point.open}"||s.source==="${point.close}"||s.source==="${point.low}"||s.source==="${point.y}"||s.source==="${point.minimum}"||s.source==="${point.maximum}"||s.source==="${point.outliers}"||s.source==="${point.upperQuartile}"||s.source==="${point.lowerQuartile}"||s.source==="${point.median}"))}for(var m=0,g=Object.keys(Object.getPrototypeOf(i));m<g.length;m++){var c=g[m];s=new d("${series."+c+"}","gm"),l=i[c],r=r.replace(s.source,l)}return r},e.prototype.formatPointValue=function(t,i,r,n,o){var s,l,d;if(i.valueType!=="Category"&&n)l=i.labelFormat&&i.labelFormat.match("{value}")!==null,s=l?i.labelFormat.replace("{value}",i.format(t[r])):i.format(t[r]);else if(o&&!u(t[r]))l=i.labelFormat&&i.labelFormat.match("{value}")!==null,d=r==="outliers"?i.format(t[r][this.lierIndex-4]):i.format(+t[r]),s=l?i.labelFormat.replace("{value}",d):d;else if(r==="size"){var h=this.chart.intl.getNumberFormat({format:"",useGrouping:this.chart.useGroupingSeparator});s=typeof t[r]=="number"?h(t[r]):t[r]}else s=t[r];return s},e.prototype.getFormat=function(t,i){if(i.tooltipFormat)return i.seriesType==="XY"&&i.category==="Indicator"?this.getIndicatorTooltipFormat(i,t,t.tooltip.format):i.tooltipFormat;if(!i.tooltipFormat&&t.tooltip.format)return i.seriesType==="XY"&&i.category==="Indicator"?this.getIndicatorTooltipFormat(i,t,t.tooltip.format):t.tooltip.format;var r=i.type==="Histogram"?"${point.minimum}-${point.maximum}":"${point.x}",n=t.tooltip.shared?"${series.name}":r;switch(i.seriesType){case"XY":return i.category==="Indicator"&&this.getIndicatorTooltipFormat(i,t,t.tooltip.format),n+" : "+(i.type==="Bubble"?"<b>${point.y}</b>  Size : <b>${point.size}</b>":"<b>${point.y}</b>");case"HighLow":return n+"<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>";case"HighLowOpenClose":return n+"<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>";case"BoxPlot":return n+"<br/>"+(this.lierIndex>3?"Outliers : <b>${point.outliers}</b>":"Maximum : <b>${point.maximum}</b><br/>Q3 : <b>${point.upperQuartile}</b><br/>Median : <b>${point.median}</b><br/>Q1 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>");default:return""}},e.prototype.getIndicatorTooltipFormat=function(t,i,r){var n;return t.seriesType==="XY"?n=t.name+" : <b>${point.y}</b>":n=r,n},e.prototype.removeHighlightedMarker=function(t,i){for(var r=0,n=t;r<n.length;r++){var o=n[r];Wi(this.element.id+"_Series_"+o.series.index+"_Point_"+o.point.index+"_Trackball"),this.chart.markerRender&&this.chart.markerRender.removeHighlightedMarker(o.series,o.point,i)}this.previousPoints=[]},e.prototype.getModuleName=function(){return"Tooltip"},e.prototype.destroy=function(){},e}(nl),al=function(){function a(e){this.errorHeight=0,this.chart=e}return a.prototype.initPrivateVariables=function(e,t){var i="",r="",n=e.chart.renderer,o=e.index===void 0?e.category:e.index;e.chart.chartAreaType==="Cartesian"&&(i="translate("+e.clipRect.x+","+e.clipRect.y+")",r="url(#"+this.chart.element.id+"_ChartSeriesClipRect_"+o+")"),t.dataLabel.visible&&!this.chart.enableCanvas&&(e.shapeElement=n.createGroup({id:this.chart.element.id+"ShapeGroup"+o,transform:i,"clip-path":"url(#"+this.chart.element.id+"_ChartSeriesClipRect_"+o+")"}),e.textElement=n.createGroup({id:this.chart.element.id+"TextGroup"+o,transform:i,"clip-path":r}),e.textElement.setAttribute("aria-hidden","true")),this.markerHeight=e.type==="Scatter"||t.visible?t.height/2:0,this.commonId=this.chart.element.id+"_Series_"+o+"_Point_",this.calculateErrorHeight(e,e.marker.dataLabel.position),this.chartBackground=this.chart.chartArea.background==="transparent"?this.chart.background||this.chart.themeStyle.background:this.chart.chartArea.background},a.prototype.calculateErrorHeight=function(e,t){if(e.errorBar.visible)if(e.errorBar.visible&&this.chart.chartAreaType!=="PolarRadar"){var i=e.errorBar.direction,r=this.chart.errorBarModule.positiveHeight,n=this.chart.errorBarModule.negativeHeight;this.isRectSeries(e)?((t==="Top"||t==="Auto")&&(i==="Both"||i==="Minus"?this.errorHeight=n:this.errorHeight=0),(t==="Outer"||t==="Auto")&&(i==="Both"||i==="Plus"?this.errorHeight=r:this.errorHeight=0)):((t==="Top"||t==="Outer"||t==="Auto")&&((i==="Both"||i==="Plus")&&!e.chart.isTransposed?this.errorHeight=r:this.errorHeight=0),(t==="Bottom"||t==="Auto")&&(i==="Both"||i==="Minus"?this.errorHeight=n:this.errorHeight=0))}else this.errorHeight=0;else return null},a.prototype.isRectSeries=function(e){return e.isRectSeries||e.type==="RangeArea"||e.type==="SplineRangeArea"||e.type==="RangeStepArea"},a.prototype.render=function(e,t,i){this.initPrivateVariables(e,e.marker),this.inverted=t.requireInvertedAxis,this.yAxisInversed=e.yAxis.isAxisInverse;var r=t.element.id+"_Series_"+(e.index===void 0?e.category:e.index)+"_DataLabelCollections",n=ge("div",{id:r}),o=_o(e);if(e.visible)for(var s=0;s<o.length;s++)this.renderDataLabel(e,o[s],n,i);n.childElementCount&&(t.enableCanvas?gi(t.element.id+"_Secondary_Element").appendChild(n):ui(t.enableCanvas,gi(t.element.id+"_Secondary_Element"),n,t.redraw,!1,"x","y",null,"",!1,!1,null,t.duration))},a.prototype.renderDataLabel=function(e,t,i,r){if(!r.showZero&&(t.y===0||t.y===0&&e.emptyPointSettings.mode==="Zero"))return null;this.margin=r.margin;var n=[],o,s,l,d,h,p,c=!0,m,g,y={x:0,y:0},w,v=e.clipRect,T,C=!1,P=[];r.angle=r.labelIntersectAction==="Rotate90"?90:r.angle,r.enableRotation=r.labelIntersectAction==="Rotate90"?!0:r.enableRotation;var R=p=r.angle,N={width:r.border.width,color:r.border.color},D=ue({},le("properties",r.font),null,!0);if(t.symbolLocations.length&&t.symbolLocations[0]||e.type==="BoxAndWhisker"&&t.regions.length){n=t.text!==null?ys(t,e,this.chart):[],o=n.length;for(var S=0;S<o;S++){var x={cancel:!1,name:Nn,series:e,point:t,text:n[S],border:N,color:r.fill,template:r.template,font:D,location:y,textSize:Dr(n[S],r.font,this.chart.themeStyle.datalabelFont)};if(this.chart.trigger(Nn,x),!x.cancel)if(this.fontBackground=x.color,this.isDataLabelShape(x),this.markerHeight=e.type==="Bubble"?t.regions[0].height/2:this.markerHeight,x.template!==null)this.createDataLabelTemplate(i,e,r,t,x,S,this.chart.redraw);else{r.enableRotation?w=bs(r.font,x.text,r.angle,this.chart,this.chart.themeStyle.datalabelFont):w=Dr(x.text,r.font,this.chart.themeStyle.datalabelFont);var I=this.calculateTextPosition(t,e,w,r,S);if(this.chart.chartAreaType==="PolarRadar")for(var E=0,L=this.chart.chartAxisLayoutPanel.visibleAxisLabelRect;E<L.length;E++){var z=L[E];if(ws(new gt(I.x,I.y,I.width,I.height),z)){c=!1;break}}var _=new gt(I.x+v.x,I.y+v.y,I.width,I.height);if(r.enableRotation){var G=this.getRectanglePoints(I);if(m=I.x+I.width/2,g=I.y+I.height/2,C=r.labelIntersectAction==="Rotate90"||R===-90?!1:this.isDataLabelOverlapWithChartBound(G,this.chart,v),!C){this.chart.rotatedDataLabelCollections.push(G);for(var Q=this.chart.rotatedDataLabelCollections.length-1,ie=Q;ie>=0;ie--)if(this.chart.rotatedDataLabelCollections[Q]&&this.chart.rotatedDataLabelCollections[ie-1]&&Ss(this.chart.rotatedDataLabelCollections[Q],this.chart.rotatedDataLabelCollections[ie-1])){C=!0,this.chart.rotatedDataLabelCollections[Q]=null;break}}}else C=Jt(I,this.chart.dataLabelCollections,v);if((!C||r.labelIntersectAction==="None")&&c){this.chart.dataLabelCollections.push(_),this.isShape&&(T=this.chart.renderer.drawRectangle(new Er(this.commonId+t.index+"_TextShape_"+S,x.color,x.border,r.opacity,I,r.rx,r.ry,"",r.border.dashArray),new Int32Array([v.x,v.y])),e.shapeElement&&e.shapeElement.appendChild(T));var Z=this.fontBackground==="transparent"?this.chart.theme.indexOf("Dark")>-1||this.chart.theme.indexOf("HighContrast")>-1?"black":"white":this.fontBackground,U=Hn(Gi(Z)),ye=Math.round((U.r*299+U.g*587+U.b*114)/1e3);s=I.x+this.margin.left+w.width/2+y.x,l=r.enableRotation&&this.chart.chartAreaType!=="PolarRadar"?I.y+this.margin.top+w.height/2+w.width/4+(r.position==="Auto"?t.regions[0].width/10:0)+y.y:I.y+this.margin.top+w.height*3/4+y.y,y={x:0,y:0},R!==0&&r.enableRotation?(d=m,h=g,p=R>360?R-360:R<-360?R+360:R):(p=0,d=I.x,h=I.y,s-=this.chart.chartAreaType==="Cartesian"&&s+w.width/2>v.width?!this.chart.requireInvertedAxis&&s>v.width?0:s+w.width/2-v.width:0,l-=l+w.height>v.y+v.height&&!(e.type.indexOf("Bar")>-1)?l+w.height-(v.y+v.height):0);var Ge=r.labelIntersectAction==="Rotate90"?r.position==="Top"?"start":r.position==="Middle"?"middle":"end":R===-90&&r.enableRotation?r.position==="Top"?"end":r.position==="Middle"?"middle":"start":"middle";P.push(xs(this.chart.renderer,new Cs(this.commonId+(e.removedPointIndex!==null&&e.removedPointIndex<=t.index?t.index+1:t.index)+"_Text_"+S,s,l,Ge,x.text,"rotate("+p+","+d+","+h+")","auto",p),x.font,x.font.color||(ye>=128||e.type==="Hilo"||e.type==="HiloOpenClose"?"black":"white"),e.textElement,!1,this.chart.redraw,!0,!1,e.chart.duration,e.clipRect,null,null,this.chart.enableCanvas,null,this.chart.themeStyle.datalabelFont,new Me(d,h))),e.removedPointIndex!==null&&e.removedPointIndex<=t.index&&(e.textElement.lastChild.id=this.commonId+t.index+"_Text_"+S)}}}}return P},a.prototype.getRectanglePoints=function(e){var t=new Me(e.x,e.y),i=new Me(e.x+e.width,e.y),r=new Me(e.x+e.width,e.y+e.height),n=new Me(e.x,e.y+e.height);return[t,i,r,n]},a.prototype.isDataLabelOverlapWithChartBound=function(e,t,i){for(var r=0;r<e.length;r++)if(!Bi(e[r].x+i.x,e[r].y+i.y,t.initialClipRect))return!0;return!1},a.prototype.createDataLabelTemplate=function(e,t,i,r,n,o,s){this.margin={left:0,right:0,bottom:0,top:0};var l=t.clipRect,d=Is(ge("div",{id:this.chart.element.id+"_Series_"+(t.index===void 0?t.category:t.index)+"_DataLabel_"+r.index+(o?"_"+o:""),styles:"position: absolute;background-color:"+n.color+";"+Rs(i.font,this.chart.themeStyle.datalabelFont)+";border:"+n.border.width+"px solid "+n.border.color+";"}),r.index,n.template,this.chart,r,t,this.chart.element.id+"_DataLabel",o);this.calculateTemplateLabelSize(e,d,r,t,i,o,l,s)},a.prototype.calculateTemplateLabelSize=function(e,t,i,r,n,o,s,l,d){var h=Ms(t,l,d),p=this.calculateTextPosition(i,r,{width:h.width,height:h.height},n,o),c=0,m=0,g=!1;d&&(g=h.width===0||h.height===0),t.style.left=(this.chart.chartAreaType==="PolarRadar"?0:r.clipRect.x)+p.x-c+"px",t.style.top=(this.chart.chartAreaType==="PolarRadar"?0:r.clipRect.y)+p.y+m+"px";var y=this.fontBackground==="transparent"?this.chart.theme.indexOf("Dark")>-1?"black":"white":this.fontBackground,w=Hn(Gi(y)),v=r.chart.requireInvertedAxis?r.xAxis:r.yAxis,T=r.chart.requireInvertedAxis?r.yAxis:r.xAxis;t.style.color=n.font.color||(Math.round((w.r*299+w.g*587+w.b*114)/1e3)>=128?"black":"white"),t.childElementCount&&!g&&(!Jt(p,this.chart.dataLabelCollections,s)||n.labelIntersectAction==="None")&&(r.seriesType!=="XY"||i.yValue===void 0||pi(i.yValue,r.yAxis.visibleRange)||r.type.indexOf("Stacking")>-1||r.type.indexOf("100")>-1&&pi(r.stackedValues.endValues[i.index],r.yAxis.visibleRange))&&pi(i.xValue,r.xAxis.visibleRange)&&parseFloat(t.style.top)>=v.rect.y&&parseFloat(t.style.left)>=T.rect.x&&parseFloat(t.style.top)<=v.rect.y+v.rect.height&&parseFloat(t.style.left)<=T.rect.x+T.rect.width&&(this.chart.dataLabelCollections.push(new gt(p.x+s.x,p.y+s.y,p.width,p.height)),ui(this.chart.enableCanvas,e,t,l,!0,"left","top"),r.animation.enable&&this.chart.animateSeries&&!this.chart.enableCanvas?this.doDataLabelAnimation(r,t):this.chart.enableCanvas&&e.appendChild(t))},a.prototype.calculateTextPosition=function(e,t,i,r,n){var o=n>1&&t.type==="Candle"?e.regions[1]:e.regions[0];n>1&&t.type==="HiloOpenClose"&&(o=n===2?e.regions[1]:e.regions[2]);var s;s=this.getLabelLocation(e,t,i,n);var l=5,d=t.clipRect;if(!this.chart.requireInvertedAxis||!this.isRectSeries(t)||t.type==="BoxAndWhisker"){this.locationX=s.x;var h=i.height+this.borderWidth*2+this.markerHeight+this.margin.bottom+this.margin.top+l;s.x=r.position==="Auto"?s.x:this.calculateAlignment(h,s.x,r.alignment,this.isRectSeries(t)?e.yValue<0:!1),s.y=!this.isRectSeries(t)||t.type==="BoxAndWhisker"?this.calculatePathPosition(s.y,r.position,t,e,i,n):this.calculateRectPosition(s.y,o,e.yValue<0!==this.yAxisInversed,r.position,t,i,n,e),this.isRectSeries(t)&&this.chart.chartAreaType==="PolarRadar"&&(s=this.calculatePolarRectPosition(s,r.position,t,e,i,n,r.alignment,h))}else{this.locationY=s.y;var h=i.width+this.borderWidth+this.margin.left+this.margin.right-l;s.x=r.position==="Auto"?s.x:this.calculateAlignment(h,s.x,r.alignment,e.yValue<0),s.x=this.calculateRectPosition(s.x,o,e.yValue<0!==this.yAxisInversed,r.position,t,i,n,e)}var p=Pi(s,i,this.margin);!(r.enableRotation===!0&&r.angle!==0)&&!(p.y>d.y+d.height||p.x>d.x+d.width||p.x+p.width<0||p.y+p.height<0)&&(p.x=p.x<0?l:p.x,p.y=p.y<0&&r.labelIntersectAction!=="None"?l:p.y,p.x-=p.x+p.width>d.x+d.width?p.x+p.width-(d.x+d.width)+l:0,p.y-=p.y+p.height>d.y+d.height?p.y+p.height-(d.y+d.height)+l:0,this.fontBackground=this.fontBackground==="transparent"?this.chartBackground:this.fontBackground);var c;return this.inverted&&t.isRectSeries&&p.x+p.width>o.x+o.width&&(c=!0),this.fontBackground=c?this.chartBackground:this.fontBackground,p},a.prototype.calculatePolarRectPosition=function(e,t,i,r,n,o,s,l){var d=5,h,p=this.chart.availableSize.width,c=s==="Center"?0:s==="Far"?1:-1,m=r.regionData.startAngle-.5*Math.PI+(r.regionData.endAngle-r.regionData.startAngle)/2;return o===0?h=r.regionData.radius<r.regionData.innerRadius?r.regionData.innerRadius:r.regionData.radius:h=r.regionData.radius>r.regionData.innerRadius?r.regionData.innerRadius:r.regionData.radius,this.fontBackground=this.fontBackground==="transparent"?this.chartBackground:this.fontBackground,i.drawType.indexOf("Stacking")>-1?t=t==="Outer"?"Top":t:i.drawType.indexOf("Range")>-1&&(t=t==="Outer"||t==="Top"?t:"Auto"),t==="Outer"?h=o===0?h+2*d+this.markerHeight:h-2*d-this.markerHeight:t==="Middle"?(h=h/2+d,i.drawType==="StackingColumn"&&(h=r.regionData.innerRadius+(r.regionData.radius-r.regionData.innerRadius)/2+d-n.height/2)):t==="Top"?h=o===0?h-2*d-this.markerHeight:h+2*d+this.markerHeight:t==="Bottom"?(h=2*d,h+=i.drawType==="StackingColumn"?r.regionData.innerRadius+this.markerHeight:0):o===0?h=h>=i.chart.radius?h-d:i.drawType==="StackingColumn"?h-2*d:h+2*d:h=h>=i.chart.radius?h+d:h-2*d,h+=l*c,e.x=i.clipRect.width/2+i.clipRect.x+h*Math.cos(m),i.drawType==="StackingColumn"?e.x=e.x<p/2?e.x+n.width/2:e.x>p/2?e.x-n.width/2:e.x:i.drawType==="Column"&&(e.x=e.x<p/2?e.x-n.width/2:e.x>p/2?e.x+n.width/2:e.x),e.y=i.clipRect.height/2+i.clipRect.y+h*Math.sin(m),e},a.prototype.getLabelLocation=function(e,t,i,r){var n=new Me(0,0),o=t.type==="Candle"&&r>1?e.regions[1]:e.regions[0];t.type==="HiloOpenClose"&&(o=r===2?e.regions[1]:e.regions[2]);var s=t.xAxis,l=t.yAxis,d=t.chart.requireInvertedAxis;if(t.type==="BoxAndWhisker"){switch(this.markerHeight=0,r){case 0:n=Ye(e.xValue,e.median,s,l,d);break;case 1:n=Ye(e.xValue,e.maximum,s,l,d);break;case 2:n=Ye(e.xValue,e.minimum,s,l,d);break;case 3:n=Ye(e.xValue,e.upperQuartile,s,l,d);break;case 4:n=Ye(e.xValue,e.lowerQuartile,s,l,d);break;default:{n=Ye(e.xValue,e.outliers[r-5],s,l,d),this.markerHeight=t.marker.height/2;break}}d?n.y=e.regions[0].y+e.regions[0].height/2:n.x=e.regions[0].x+e.regions[0].width/2}else r===0||r===1?n=new Me(e.symbolLocations[0].x,e.symbolLocations[0].y):(r===2||r===3)&&t.type==="Candle"?n=new Me(e.symbolLocations[1].x,e.symbolLocations[1].y):d?n={x:o.x+o.width/2,y:o.y}:n={x:o.x+o.width,y:o.y+o.height/2};if(r>1&&t.type==="HiloOpenClose")if(t.chart.requireInvertedAxis){var h=o.height;n.y=o.y+h/2+2*(r===2?1:-1)}else{var p=o.width;n.x=o.x+p/2+2*(r===2?1:-1)}return n},a.prototype.calculateRectPosition=function(e,t,i,r,n,o,s,l){if(n.chart.chartAreaType==="PolarRadar")return null;var d=5,h=this.margin,p=n.marker.dataLabel.enableRotation||this.inverted?o.width:o.height;switch(this.extraSpace=this.borderWidth+p/2+(r!=="Outer"&&n.type.indexOf("Column")>-1&&Math.abs(t.height-o.height)<d?0:d),n.type==="StackingColumn100"||n.type==="StackingBar100"?r=r==="Outer"?"Top":r:n.type.indexOf("Range")>-1?r=r==="Outer"||r==="Top"?r:"Auto":n.type==="Waterfall"&&(r=r==="Auto"?"Middle":r),r){case"Bottom":e=this.inverted?i?e+(n.type==="Waterfall"?+this.extraSpace+h.left+this.markerHeight:+t.width-this.extraSpace-h.left):e-t.width+this.extraSpace+h.right:i?e+(n.type==="Waterfall"?-this.extraSpace-h.top-this.markerHeight:-t.height+this.extraSpace+h.top):e+t.height-this.extraSpace-h.bottom;break;case"Middle":e=e=this.inverted?i?e+t.width/2:e-t.width/2:i?e-t.height/2:e+t.height/2;break;case"Auto":e=this.calculateRectActualPosition(e,t,i,n,o,s,l);break;default:this.extraSpace+=this.errorHeight,e=this.calculateTopAndOuterPosition(e,t,r,n,s,this.extraSpace,i,l);break}var c=this.inverted?e<t.x||e>t.x+t.width:e<t.y||e>t.y+t.height;this.fontBackground=c?this.fontBackground==="transparent"?this.chartBackground:this.fontBackground:this.fontBackground==="transparent"?l.color||n.interior:this.fontBackground;var m=n.chart.series.length;if(r==="Outer"&&n.type.indexOf("Stacking")>-1&&m-1>n.index){for(var g=void 0,y=void 0,w=n.index+1;w<m;w++)if(g=n.chart.series[w],y=g.points[l.index],g.type.indexOf("Stacking")>-1&&g.type.indexOf("100")===-1){this.fontBackground=y&&(y.yValue<0&&l.yValue<0||y.yValue>0&&l.yValue>0)?y?y.color:g.interior:this.fontBackground;break}}return e},a.prototype.calculatePathPosition=function(e,t,i,r,n,o){var s=5;switch(i.type.indexOf("Area")>-1&&i.type!=="RangeArea"&&i.type!=="SplineRangeArea"&&i.type!=="RangeStepArea"&&this.yAxisInversed&&i.marker.dataLabel.position!=="Auto"&&(t=t==="Top"?"Bottom":t==="Bottom"?"Top":t),this.fontBackground=this.fontBackground==="transparent"?this.chartBackground:this.fontBackground,t){case"Top":case"Outer":e=e-this.markerHeight-this.borderWidth-n.height/2-this.margin.bottom-s-this.errorHeight;break;case"Bottom":e=e+this.markerHeight+this.borderWidth+n.height/2+this.margin.top+s+this.errorHeight;break;case"Auto":e=this.calculatePathActualPosition(e,this.markerHeight,i,r,n,o);break}return e},a.prototype.isDataLabelShape=function(e){this.isShape=e.color!=="transparent"||e.border.width>0,this.borderWidth=e.border.width,this.isShape||(this.margin={left:0,right:0,bottom:0,top:0})},a.prototype.calculateRectActualPosition=function(e,t,i,r,n,o,s){for(var l,d,h=!0,p=0,c=this.chart.dataLabelCollections,m=r.type.indexOf("Range")!==-1||r.type==="Hilo"?2:4;h&&p<m;){var g=this.getPosition(p);this.fontBackground=r.marker.dataLabel.fill,r.type.indexOf("Stacking")>-1&&g==="Outer"&&(g="Top",p++),l=this.calculateRectPosition(e,t,i,g,r,n,o,s),this.inverted?(d=Pi(new Me(l,this.locationY),n,this.margin),h=d.x<0||Jt(d,c,r.clipRect)||d.x+d.width>r.clipRect.width):(r.marker.dataLabel.enableRotation&&(n.width=n.width-s.regions[0].width/10),d=Pi(new Me(this.locationX,l),n,this.margin),h=d.y<0||Jt(d,c,r.clipRect)||d.y>r.clipRect.height,r.marker.dataLabel.template===null&&h!==!0&&(h=d.y/2+n.height+(g==="Outer"?s.regions[0].height+this.extraSpace:s.regions[0].height-2*this.extraSpace)>r.clipRect.height)),p++}return l},a.prototype.calculateAlignment=function(e,t,i,r){switch(i){case"Far":t=this.inverted?r?t-e:t+e:r?t+e:t-e;break;case"Near":t=this.inverted?r?t+e:t-e:r?t-e:t+e;break}return t},a.prototype.calculateTopAndOuterPosition=function(e,t,i,r,n,o,s,l){var d=this.margin,h;switch(r.type){case"RangeColumn":case"RangeArea":case"RangeStepArea":case"SplineRangeArea":case"Hilo":h=n===0&&!this.yAxisInversed||n===1&&this.yAxisInversed,e=this.updateLabelLocation(i,e,o,d,t,h);break;case"Candle":h=(n===0||n===2)&&!this.yAxisInversed||(n===1||n===3)&&this.yAxisInversed,e=this.updateLabelLocation(i,e,o,d,t,h,n>1);break;case"HiloOpenClose":n<=1?(h=n===0&&!this.yAxisInversed||n===1&&this.yAxisInversed,e=this.updateLabelLocation(i,e,o,d,t,h)):this.yAxisInversed?e=this.inverted?e-o-d.right:e+o+d.top:e=this.inverted?e+o+d.left:e-o-d.bottom;break;default:s&&i==="Top"||!s&&i==="Outer"||i==="Top"&&r.visiblePoints[l.index].yValue===0?e=this.inverted?e+(s&&r.type==="Waterfall"?+t.width-o-d.left:+o+d.left+this.markerHeight):e+(s&&r.type==="Waterfall"?-t.height+o+d.bottom:-o-d.bottom-this.markerHeight):e=this.inverted?e+(s&&r.type==="Waterfall"?+t.width+o+d.top:-o-d.right-this.markerHeight):e+(s&&r.type==="Waterfall"?-t.height-o-d.top:+o+d.top+this.markerHeight);break}return e},a.prototype.updateLabelLocation=function(e,t,i,r,n,o,s){return s===void 0&&(s=!1),this.inverted?o?t=e==="Outer"&&!s?t+i+r.left+this.markerHeight:t-i-r.right-this.markerHeight:t=e==="Outer"&&!s?t-n.width-i-r.right-this.markerHeight:t-n.width+i+r.left+this.markerHeight:o?t=e==="Outer"&&!s?t-i-r.bottom-this.markerHeight:t+i+r.top+this.markerHeight:t=e==="Outer"&&!s?t+n.height+i+r.top+this.markerHeight:t+n.height-i-r.bottom-this.markerHeight,t},a.prototype.calculatePathActualPosition=function(e,t,i,r,n,o){var s=i.points,l=r.index,d=s[l].yValue,h,p=s.length-1>l?s[l+1]:null,c=l>0?s[l-1]:null,m,g=!0,y,w,v,T=this.chart.dataLabelCollections;if(i.type==="Bubble")h="Top";else if(i.type.indexOf("Step")>-1)h="Top",l&&(h=!c||!c.visible||d>c.yValue!==this.yAxisInversed||d===c.yValue?"Top":"Bottom");else if(i.type==="BoxAndWhisker")o===1||o===3||o>4?h=i.yAxis.isAxisInverse?"Bottom":"Top":o===2||o===4?h=i.yAxis.isAxisInverse?"Top":"Bottom":(g=!1,h="Middle",m=this.calculatePathPosition(e,h,i,r,n,o));else if(l===0)h=!p||!p.visible||d>p.yValue||d<p.yValue&&this.yAxisInversed?"Top":"Bottom";else if(l===s.length-1)h=!c||!c.visible||d>c.yValue||d<c.yValue&&this.yAxisInversed?"Top":"Bottom";else if(!p.visible&&!(c&&c.visible))h="Top";else if(!p.visible||!c)h=p.yValue>d||c&&c.yValue>d?"Bottom":"Top";else{var C=(p.yValue-c.yValue)/2,P=C*l+(p.yValue-C*(l+1));h=this.yAxisInversed?P<d?"Bottom":"Top":P<d?"Top":"Bottom"}for(w=h==="Bottom",v=["Outer","Top","Bottom","Middle","Auto"].indexOf(h);g&&v<4;)m=this.calculatePathPosition(e,this.getPosition(v),i,r,n,o),y=Pi(new Me(this.locationX,m),n,this.margin),g=y.y<0||Jt(y,T,i.clipRect)||y.y+y.height>i.clipRect.height,v=w?v-1:v+1,w=!1;return m},a.prototype.doDataLabelAnimation=function(e,t){for(var i=e.shapeElement.childNodes,r=e.textElement.childNodes,n=e.animation.delay+e.animation.duration,o=e.chart.animated?e.chart.duration:200,s,l=t?1:r.length,d,h=0;h<l;h++)d=r[h],t?(t.style.visibility="hidden",Ps(t,n,o,"ZoomIn")):(s=new Me(+d.getAttribute("x")+ +d.getAttribute("width")/2,+d.getAttribute("y")+ +d.getAttribute("height")/2),jn(d,n,o,e,null,s,!0),i[h]&&(d=i[h],s=new Me(+d.getAttribute("x")+ +d.getAttribute("width")/2,+d.getAttribute("y")+ +d.getAttribute("height")/2),jn(d,n,o,e,null,s,!0)))},a.prototype.getPosition=function(e){return["Outer","Top","Bottom","Middle","Auto"][e]},a.prototype.getModuleName=function(){return"DataLabel"},a.prototype.destroy=function(){},a}();function sl(a,e){for(var t=a.axis.rect,i=a.axis.orientation==="Horizontal",r=!1,n=0,o,s=0,l=a.axis.series;s<l.length;s++){var d=l[s];d.marker.visible&&d.marker.height>n&&(n=d.marker.height)}for(var h=0,p=a.axis.series;h<p.length;h++){var d=p[h];if(d.visible&&(o=d.yMin.toString(),r=d.yData.some(function(m){return m===o})),r)break}a.svgObject=e.createSvg({id:a.component.element.id+"_scrollBar_svg"+a.axis.name,width:a.isVertical?a.height:a.width,height:a.isVertical?a.width:a.height,style:"position: absolute;top: "+((a.axis.isAxisOpposedPosition&&i?-16:r?n:0)+t.y+Math.max(.5,a.axis.lineStyle.width/2))+"px;left: "+((a.axis.isAxisOpposedPosition&&!i?16:0)+t.x-(a.isVertical?a.height:0))+"px;cursor:auto;"}),a.elements.push(a.svgObject)}var ll=function(){function a(e){this.chartId=e.element.id+"_"}return a.prototype.renderElements=function(e,t){var i=e.axis.isAxisInverse,r=e.axis.scrollbarSettings,n=t.createGroup({id:this.chartId+"scrollBar_"+e.axis.name,transform:"translate("+(e.isVertical&&i?e.height:i?e.width:"0")+","+(e.isVertical&&i?"0":i?e.height:e.isVertical?e.width:"0")+") rotate("+(e.isVertical&&i?"90":e.isVertical?"270":i?"180":"0")+")"}),o=t.createGroup({id:this.chartId+"scrollBar_backRect_"+e.axis.name}),s=t.createGroup({id:this.chartId+"scrollBar_thumb_"+e.axis.name,transform:"translate(0,0)"});return this.backRect(e,t,o,r),this.thumb(e,t,s,r),this.renderCircle(e,t,s,r),this.arrows(e,t,s,r),this.thumbGrip(e,t,s,r),n.appendChild(o),n.appendChild(s),n},a.prototype.backRect=function(e,t,i,r){var n=e.scrollbarThemeStyle,o=t.drawRectangle(new Er(this.chartId+"scrollBarBackRect_"+e.axis.name,r.trackColor||n.backRect,{width:1,color:r.trackColor||n.backRect},1,new gt(0,0,e.width,e.height),r.trackRadius,r.trackRadius));i.appendChild(o)},a.prototype.arrows=function(e,t,i,r){var n=e.scrollbarThemeStyle,o=new Yr(this.chartId+"scrollBar_leftArrow_"+e.axis.name,n.arrow,1,n.arrow,1,"","");this.leftArrowEle=t.drawPath(o),o.id=this.chartId+"scrollBar_rightArrow_"+e.axis.name,this.rightArrowEle=t.drawPath(o),this.setArrowDirection(this.thumbRectX,this.thumbRectWidth,e.height),r.enableZoom&&(i.appendChild(this.leftArrowEle),i.appendChild(this.rightArrowEle))},a.prototype.setArrowDirection=function(e,t,i){var r=i/2,n="M "+(e-r/2)+" "+i/2+" L "+(e-r/2+(i/2-r/4))+" "+(i-r/2)+" L "+(e-r/2+(i/2-r/4))+" "+r/2+" Z",o="M "+(e+t+r/2)+" "+i/2+" L "+(e+t+r/2-(i/2-r/4))+" "+(i-r/2)+" L "+(e+t+r/2-(i/2-r/4))+" "+r/2+" Z";this.leftArrowEle.setAttribute("d",n),this.rightArrowEle.setAttribute("d",o)},a.prototype.thumb=function(e,t,i,r){e.startX=this.thumbRectX;var n=e.scrollbarThemeStyle;this.slider=t.drawRectangle(new Er(this.chartId+"scrollBarThumb_"+e.axis.name,r.scrollbarColor||n.thumb,{width:1,color:r.scrollbarColor||n.thumb},1,new gt(r.enableZoom?this.thumbRectX:this.thumbRectX-e.height/2,0,r.enableZoom?this.thumbRectWidth:this.thumbRectWidth+e.height/2,e.height),r.scrollbarRadius,r.scrollbarRadius)),i.appendChild(this.slider)},a.prototype.renderCircle=function(e,t,i,r){var n=e.scrollbarThemeStyle,o=new $n(this.chartId+"scrollBar_leftCircle_"+e.axis.name,n.circle,{width:1,color:n.circle},1,this.thumbRectX,e.height/2,e.height/2),s='<filter x="-25.0%" y="-20.0%" width="150.0%" height="150.0%" filterUnits="objectBoundingBox"id="scrollbar_shadow"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.16 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter>',l=t.createDefs(),d=t.createGroup({id:this.chartId+e.axis.name+"_thumb_shadow"});l.innerText=s,d.innerText='<use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#'+this.chartId+"scrollBar_leftCircle_"+e.axis.name+'"></use><use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#'+this.chartId+"scrollBar_rightCircle_"+e.axis.name+'"></use>',this.leftCircleEle=t.drawCircle(o),o.id=this.chartId+"scrollBar_rightCircle_"+e.axis.name,o.cx=this.thumbRectX+this.thumbRectWidth,this.rightCircleEle=t.drawCircle(o),i.appendChild(l),r.enableZoom&&(i.appendChild(this.leftCircleEle),i.appendChild(this.rightCircleEle)),i.appendChild(d)},a.prototype.thumbGrip=function(e,t,i,r){var n=0,o=0,s=14,l=2,d=s/2-l,h=e.scrollbarThemeStyle,p=new $n(this.chartId+"scrollBar_gripCircle0_"+e.axis.name,r.gripColor||h.grip,{width:1,color:r.gripColor||h.grip},1,0,0,1);this.gripCircle=t.createGroup({id:this.chartId+"scrollBar_gripCircle_"+e.axis.name,transform:"translate("+(r.enableZoom?this.thumbRectX+this.thumbRectWidth/2+(e.isVertical?1:-1)*d:this.thumbRectX+this.thumbRectWidth/2+(e.isVertical?2:0)*d-r.height/2)+","+(e.isVertical?e.height/2+d/2-.5:e.height/2-d/2-.5)+") rotate("+(e.isVertical?"180":"0")+")"});for(var c=1;c<=(e.component.theme.indexOf("Fluent2")>-1?10:6);c++)p.id=this.chartId+"scrollBar_gripCircle"+c+"_"+e.axis.name,p.cx=n,p.cy=o,this.gripCircle.appendChild(t.drawCircle(p)),n=c===(e.component.theme.indexOf("Fluent2")>-1?5:3)?0:n+5,o=c>=(e.component.theme.indexOf("Fluent2")>-1?5:3)?5:0;r.height>=12&&i.appendChild(this.gripCircle)},a}(),dl=function(){function a(e,t){this.scrollRange={max:null,min:null,interval:null,delta:null},this.component=e,this.elements=[],this.scrollElements=new ll(e),this.axis=t,this.mouseMoveListener=this.scrollMouseMove.bind(this),this.mouseUpListener=this.scrollMouseUp.bind(this),this.animateDuration=500,this.isPointer=Ae.isPointer,this.browserName=Ae.info.name}return a.prototype.getMouseXY=function(e){var t,i,r;e.type.indexOf("touch")>-1?(r=e,t=r.changedTouches[0].clientX,i=r.changedTouches[0].clientY):(t=e.clientX,i=e.clientY);var n=gi(this.component.element.id+"_scrollBar_svg"+this.axis.name).getBoundingClientRect();this.mouseX=t-Math.max(n.left,0),this.mouseY=i-Math.max(n.top,0)},a.prototype.wireEvents=function(e){te.add(e,Ae.touchStartEvent,this.scrollMouseDown,this),te.add(e,Ae.touchMoveEvent,this.scrollMouseMove,this),te.add(e,Ae.touchEndEvent,this.scrollMouseUp,this),te.add(e,"mousewheel",this.scrollMouseWheel,this),window.addEventListener("mousemove",this.mouseMoveListener,!1),window.addEventListener("mouseup",this.mouseUpListener,!1)},a.prototype.unWireEvents=function(e){te.remove(e,Ae.touchStartEvent,this.scrollMouseDown),te.remove(e,Ae.touchMoveEvent,this.scrollMouseMove),te.remove(e,Ae.touchEndEvent,this.scrollMouseUp),te.remove(e,"mousewheel",this.scrollMouseWheel),window.removeEventListener("mousemove",this.mouseMoveListener,!1),window.removeEventListener("mouseup",this.mouseUpListener,!1)},a.prototype.scrollMouseDown=function(e){var t=e.target.id,i=this.scrollElements,r=this.axis.isAxisInverse;if(this.getMouseXY(e),this.isResizeLeft=this.isExist(t,"_leftCircle_")||this.isExist(t,"_leftArrow_"),this.isResizeRight=this.isExist(t,"_rightCircle_")||this.isExist(t,"_rightArrow_"),this.previousXY=this.isVertical&&r?this.mouseY:this.isVertical?this.width-this.mouseY:r?this.width-this.mouseX:this.mouseX,this.previousWidth=i.thumbRectWidth,this.previousRectX=i.thumbRectX,this.startZoomPosition=this.axis.zoomPosition,this.startZoomFactor=this.axis.zoomFactor,this.startRange=this.axis.visibleRange,this.scrollStarted=!0,this.component.trigger(Gn,this.getArgs(Gn)),this.isExist(t,"scrollBarThumb_")||this.isExist(t,"gripCircle"))this.isThumbDrag=!0,this.axis.scrollbarSettings.height>=12&&(this.svgObject.style.cursor="-webkit-grabbing");else if(this.isExist(t,"scrollBarBackRect_")){var n=this.moveLength(this.previousXY,this.previousRectX);if(i.thumbRectX=this.isWithIn(n)?n:i.thumbRectX,this.positionThumb(i.thumbRectX,i.thumbRectWidth),this.setZoomFactorPosition(i.thumbRectX,i.thumbRectWidth),this.axis.zoomPosition=this.zoomPosition<0?0:this.zoomPosition>.9?1:this.zoomPosition,this.isLazyLoad){var o=i.thumbRectX>this.previousRectX?"RightMove":"LeftMove",s=this.calculateLazyRange(i.thumbRectX,i.thumbRectWidth,o);s&&this.component.trigger(ei,s)}}this.component.element.style.height===""&&(this.isCustomHeight=!0,this.component.element.style.height=this.component.availableSize.height+"px")},a.prototype.isExist=function(e,t){return e.indexOf(t)>-1},a.prototype.isWithIn=function(e){var t=this.axis.scrollbarSettings.height/2;return e-t>=0&&e+this.scrollElements.thumbRectWidth+t<=this.width},a.prototype.moveLength=function(e,t,i){i===void 0&&(i=this.axis.scrollbarSettings.height/2);var r=10/100*(this.width-i*2);return e<t?r=t-(t-r>i?r:i):r=t+(t+this.scrollElements.thumbRectWidth+r<this.width-i?r:i),r},a.prototype.setZoomFactorPosition=function(e,t){this.isScrollUI=!0;var i=this.axis,r=this.axis.scrollbarSettings.height/2,n=1,o=e+t+r+n,s=r+n/2,l=this.isVertical?i.rect.height:this.width;this.zoomFactor=(t+(o>=this.width?r+n:0))/l,this.zoomPosition=o>l?1-i.zoomFactor:e<r+n?0:(e-(e-s<=0?s:0))/l,this.zoomPosition=this.component.enableRtl&&!this.isVertical&&!i.isInversed||i.isInversed&&!(this.component.enableRtl&&!this.isVertical)?1-(this.zoomPosition+i.zoomFactor):this.zoomPosition},a.prototype.scrollMouseMove=function(e){var t=e.target,i=this.scrollElements,r=this.axis.isAxisInverse;if(!gi(this.svgObject.id))return null;this.getMouseXY(e),u(t.id)||(this.setCursor(t),this.setTheme(t));var n=this.isVertical&&r?this.width-this.mouseY:this.isVertical?this.mouseY:this.mouseX,o=this.axis.visibleRange,s=this.zoomPosition,l=this.zoomFactor,d=this.previousRectX-i.thumbRectX,h=d<0?"RightMove":"LeftMove",p;this.isLazyLoad&&(this.isThumbDrag||this.isResizeLeft||this.isResizeRight)&&(p=this.calculateLazyRange(i.thumbRectX,i.thumbRectWidth,h));var c=p?p.currentRange:null;if(this.isThumbDrag){this.component.isScrolling=this.isThumbDrag,n=this.isVertical||r?this.width-n:n;var m=i.thumbRectX+(n-this.previousXY);n>=m+i.thumbRectWidth?this.setCursor(t):this.axis.scrollbarSettings.height>=12&&(this.svgObject.style.cursor="-webkit-grabbing"),n>=0&&n<=m+i.thumbRectWidth&&(i.thumbRectX=this.isWithIn(m)?m:i.thumbRectX,this.positionThumb(i.thumbRectX,i.thumbRectWidth),this.previousXY=n,this.setZoomFactorPosition(m,i.thumbRectWidth),this.axis.zoomPosition=this.zoomPosition<0?0:this.zoomPosition>.9?1:this.zoomPosition),this.component.trigger(pt,this.getArgs(pt,o,s,l,c))}else(this.isResizeLeft||this.isResizeRight)&&this.resizeThumb()},a.prototype.scrollMouseWheel=function(e){if(!this.axis.scrollbarSettings.enableZoom)return null;var t=gi(this.component.element.id+"_scrollBar_svg"+this.axis.name).getBoundingClientRect();this.mouseX=e.clientX-Math.max(t.left,0),this.mouseY=e.clientY-Math.max(t.top,0);var i=.5,r=this.scrollElements,n=this.axis,o=this.browserName==="mozilla"&&!this.isPointer?-e.detail/3>0?1:-1:e.wheelDelta/120>0?1:-1,s=Math.max(Math.max(1/Un(n.zoomFactor,0,1),1)+.25*o,1),l=this.axis.visibleRange,d=this.zoomPosition,h=this.zoomFactor,p;s>=1&&(i=n.orientation==="Horizontal"?this.mouseX/n.rect.width:1-this.mouseY/n.rect.height,i=i>1?1:i<0?0:i,this.zoomFactor=s===1?1:Un(1/s,0,1),this.zoomPosition=s===1?0:n.zoomPosition+(n.zoomFactor-this.zoomFactor)*i),r.thumbRectX=this.isWithIn(this.zoomPosition*this.width)?this.zoomPosition*this.width:r.thumbRectX,this.isScrollUI=!0,this.positionThumb(r.thumbRectX,r.thumbRectWidth),this.isLazyLoad&&(this.setZoomFactorPosition(r.thumbRectX,r.thumbRectWidth),this.axis.zoomFactor=this.zoomFactor,this.axis.zoomPosition=this.zoomPosition<0?0:this.zoomPosition>.9?1:this.zoomPosition),n.zoomFactor=this.zoomFactor,n.zoomPosition=this.zoomPosition,this.isLazyLoad&&(p=this.calculateMouseWheelRange(r.thumbRectX,r.thumbRectWidth),p&&p.currentRange.minimum!==p.previousAxisRange.minimum&&p.currentRange.maximum!==p.previousAxisRange.maximum&&(this.component.trigger(ei,p),this.isScrollEnd=!1)),this.isLazyLoad||this.component.trigger(pt,this.getArgs(pt,l,d,h))},a.prototype.scrollMouseUp=function(){var e;this.startX=this.scrollElements.thumbRectX;var t=this.axis.scrollbarSettings.height/2,i=1,r=this.startX+this.scrollElements.thumbRectWidth+t+i,n=t+i/2;if((this.isResizeLeft||this.isResizeRight)&&!this.isLazyLoad&&(this.axis.zoomFactor=r>=this.width-1&&this.startX-n<=0?1:this.zoomFactor),this.isLazyLoad){var o=this.previousRectX-this.startX;if((o>0||o<0)&&this.isThumbDrag){var s=o<0?"RightMove":"LeftMove";s==="RightMove"?this.startX=this.startX+Math.abs(o)<this.width-t?this.startX:this.width-t-this.scrollElements.thumbRectWidth:this.startX=this.startX+this.scrollElements.thumbRectWidth-Math.abs(o)>t?this.startX:t,e=this.calculateLazyRange(this.startX,this.scrollElements.thumbRectWidth,s),e&&(this.component.trigger(ei,e),this.scrollStarted=!1)}(this.isResizeLeft||this.isResizeRight)&&(e=this.calculateLazyRange(this.startX,this.scrollElements.thumbRectWidth),e&&(this.component.trigger(ei,e),this.scrollStarted=!1))}this.isThumbDrag=!1,this.isResizeLeft=!1,this.isResizeRight=!1,this.isScrollEnd=!1,this.component.isScrolling=!1,this.scrollStarted&&!this.isLazyLoad&&(this.component.trigger(ei,this.getArgs(pt,this.startRange,this.startZoomPosition,this.startZoomFactor)),this.scrollStarted=!1),this.isCustomHeight&&(this.component.element.style.height=null)},a.prototype.calculateMouseWheelRange=function(e,t){var i,r,n,o=this.scrollRange,s=this.getStartEnd(this.previousStart,this.previousEnd,!1),l=this.axis.scrollbarSettings.height/2;e+t+l<=this.width&&(r=(e-l)/this.width,i=t/this.width);var d=o.min+r*o.delta,h=d+i*o.delta;return h&&(n={axis:this.axis,currentRange:this.getStartEnd(d,h,!0),previousAxisRange:s}),n},a.prototype.calculateLazyRange=function(e,t,i){var r=t,n,o,s,l,d,h=this.scrollRange,p=this.getStartEnd(this.previousStart,this.previousEnd,!1),c=this.axis.scrollbarSettings.height/2,m=16;return this.isResizeRight||i==="RightMove"?(r=this.isResizeRight?r+m:r,n=r/this.width,o=i==="RightMove"?(e+c)/this.width:this.axis.zoomPosition,s=i==="RightMove"?h.min+o*h.delta:this.previousStart,l=s+n*h.delta):this.isResizeLeft||i==="LeftMove"?(o=(e-c)/this.width,n=r/this.width,s=h.min+o*h.delta,s=s>=h.min?s:h.min,l=i==="LeftMove"?s+n*h.delta:this.previousEnd):this.isThumbDrag&&(o=i==="RightMove"?(e+c)/this.width:(e-c)/this.width,n=this.scrollElements.thumbRectWidth/this.width,s=h.min+o*h.delta,s=s>=h.min?s:h.min,l=s+n*h.delta),l&&(d={axis:this.component.isBlazor?{}:this.axis,currentRange:this.getStartEnd(s,l,!0),previousAxisRange:p}),d},a.prototype.getStartEnd=function(e,t,i){var r=this.valueType;if((r==="DateTime"||r==="DateTimeCategory")&&i)this.previousStart=e,this.previousEnd=t;else if(i){var n=Math.round(e),o=Math.ceil(t);this.axis.valueType==="Category"&&(o-=!this.axis.scrollbarSettings.enableZoom&&o-n>this.previousEnd-this.previousStart?o-n-(this.previousEnd-this.previousStart):0),this.previousStart=e=n,this.previousEnd=t=o}switch(r){case"Double":case"Category":case"Logarithmic":e=Math.round(e),t=Math.ceil(t);break;case"DateTime":case"DateTimeCategory":e=new Date(e),t=new Date(t);break}return{minimum:e,maximum:t}},a.prototype.render=function(e){return(this.component.zoomModule||e&&this.axis.scrollbarSettings.enable)&&this.getDefaults(),this.getTheme(),this.removeScrollSvg(),sl(this,this.component.svgRenderer),this.wireEvents(this.svgObject),this.svgObject.appendChild(this.scrollElements.renderElements(this,this.component.svgRenderer)),this.svgObject},a.prototype.getTheme=function(){this.scrollbarThemeStyle=Ts(this.component.theme)},a.prototype.removeScrollSvg=function(){document.getElementById(this.component.element.id+"_scrollBar_svg"+this.axis.name)&&ze(document.getElementById(this.component.element.id+"_scrollBar_svg"+this.axis.name))},a.prototype.setCursor=function(e){var t=e.id;this.svgObject.style.cursor=(t.indexOf("scrollBarThumb_")>-1||t.indexOf("_gripCircle")>-1)&&this.axis.scrollbarSettings.height>=12?"-webkit-grab":t.indexOf("Circle_")>-1||t.indexOf("Arrow_")>-1?this.isVertical?"ns-resize":"ew-resize":"auto"},a.prototype.setTheme=function(e){var t=e.id,i=t.indexOf("_leftCircle_")>-1||t.indexOf("_leftArrow_")>-1,r=t.indexOf("_rightCircle_")>-1||t.indexOf("_rightArrow_")>-1,n=this.scrollbarThemeStyle,o=this.scrollElements.leftArrowEle,s=this.scrollElements.rightArrowEle,l=this.scrollElements.leftCircleEle,d=this.scrollElements.rightCircleEle,h=this.isCurrentAxis(e,o);l.style.fill=i&&h?n.circleHover:n.circle,d.style.fill=r&&h?n.circleHover:n.circle,l.style.stroke=i&&h?n.circleHover:n.circle,d.style.stroke=r&&h?n.circleHover:n.circle,this.component.theme==="HighContrastLight"&&(o.style.fill=i&&h?n.arrowHover:n.arrow,o.style.stroke=i&&h?n.arrowHover:n.arrow,s.style.fill=r&&h?n.arrowHover:n.arrow,s.style.stroke=r&&h?n.arrowHover:n.arrow,l.style.stroke=i&&h?n.circleHover:n.circle,d.style.stroke=r&&h?n.circleHover:n.circle)},a.prototype.isCurrentAxis=function(e,t){return e.id.split("_")[2]===t.id.split("_")[2]},a.prototype.resizeThumb=function(){var e,t=this.axis.scrollbarSettings.height/2,i=5,r=14,n=t*2+i*2+r,o=this.previousRectX,s=this.axis.isAxisInverse,l=this.isVertical&&s?this.mouseY:this.isVertical?this.width-this.mouseY:s?this.width-this.mouseX:this.mouseX,d=Math.abs(this.previousXY-l);if(this.isResizeLeft&&l>=0){var h=o+(l>this.previousXY?d:-d);if(e=h-t>=0?this.previousWidth+(l>this.previousXY?-d:d):this.previousWidth,h=h-t>=0?h:o,e>=n&&l<h+e){this.scrollElements.thumbRectX=this.previousRectX=h,this.scrollElements.thumbRectWidth=this.previousWidth=e,this.previousXY=l,this.setZoomFactorPosition(h,e);var p={axis:this.component.isBlazor?{}:this.axis,name:pt,range:this.axis.visibleRange,zoomFactor:this.zoomFactor,zoomPosition:this.zoomPosition,previousRange:this.axis.visibleRange,previousZoomFactor:this.axis.zoomFactor,previousZoomPosition:this.axis.zoomPosition,currentRange:null,cancel:!1};this.component.trigger(pt,p),p.cancel?(this.zoomFactor=p.previousZoomFactor,this.zoomPosition=p.previousZoomPosition):(this.positionThumb(h,e),this.axis.zoomFactor=p.zoomFactor,this.axis.zoomPosition=p.zoomPosition)}}else if(this.isResizeRight){e=l>=n+this.scrollElements.thumbRectX&&l<=this.width-t?l-this.scrollElements.thumbRectX:this.previousWidth,this.scrollElements.thumbRectWidth=this.previousWidth=e,this.previousXY=l,this.setZoomFactorPosition(this.startX,e),this.isLazyLoad||this.setZoomFactorPosition(this.startX,e);var p={axis:this.component.isBlazor?{}:this.axis,name:pt,range:this.axis.visibleRange,zoomFactor:this.zoomFactor,zoomPosition:this.zoomPosition,previousRange:this.axis.visibleRange,previousZoomFactor:this.axis.zoomFactor,previousZoomPosition:this.axis.zoomPosition,currentRange:null,cancel:!1};this.component.trigger(pt,p),p.cancel?(this.zoomFactor=p.previousZoomFactor,this.zoomPosition=p.previousZoomPosition):(this.positionThumb(this.startX,e),this.axis.zoomFactor=p.zoomFactor,this.axis.zoomPosition=p.zoomPosition)}},a.prototype.positionThumb=function(e,t){var i=this.scrollElements,r=14,n=2,o=r/2-n;i.slider.setAttribute("x",this.axis.scrollbarSettings.enableZoom?e.toString():(e-this.axis.scrollbarSettings.height/2).toString()),i.slider.setAttribute("width",this.axis.scrollbarSettings.enableZoom?t.toString():(t+this.axis.scrollbarSettings.height).toString()),i.leftCircleEle.setAttribute("cx",e.toString()),i.rightCircleEle.setAttribute("cx",(e+t).toString()),i.setArrowDirection(e,t,this.height),i.gripCircle.setAttribute("transform","translate("+(e+t/2+(this.isVertical?1:-1)*o)+","+(this.isVertical?this.axis.scrollbarSettings.height/2+o/2-.5:this.axis.scrollbarSettings.height/2-o/2-.5)+") rotate("+(this.isVertical?"180":"0")+")")},a.prototype.getDefaults=function(){var e=this.axis,t=this.axis.scrollbarSettings.height/2,i=5,r=14,n=t*2+i*2+r;this.axis.scrollbarSettings.enable&&(this.isLazyLoad=!0,this.getLazyDefaults(e)),this.isVertical=e.orientation==="Vertical";var o=this.component.enableRtl&&!this.isVertical&&!e.isInversed||e.isInversed&&!(this.component.enableRtl&&!this.isVertical);this.zoomFactor=this.isLazyLoad?this.zoomFactor:e.zoomFactor,this.zoomPosition=this.isLazyLoad?o?1-(this.zoomPosition+this.zoomFactor):this.zoomPosition:o?1-(e.zoomPosition+e.zoomFactor):e.zoomPosition;var s=this.zoomFactor*(this.isVertical?e.rect.height:e.rect.width);s=this.isLazyLoad&&!this.axis.scrollbarSettings.enableZoom||s>n?s:n,this.scrollX=e.rect.x,this.scrollY=e.rect.y,this.width=this.isVertical?e.rect.height:e.rect.width,this.height=this.axis.scrollbarSettings.height;var l=this.zoomPosition*(this.isVertical?e.rect.height:this.width),d=this.width-n-t;this.scrollElements.thumbRectX=l>d?d:l<t?t:l,this.scrollElements.thumbRectWidth=this.isThumbDrag?this.scrollElements.thumbRectWidth:s+this.scrollElements.thumbRectX<this.width-t*2?s:this.width-this.scrollElements.thumbRectX-t},a.prototype.getLazyDefaults=function(e){var t,i,r=e.valueType,n=e.scrollbarSettings,o=e.scrollbarSettings.range,s=e.visibleRange,l=e.scrollbarSettings.pointsLength;this.valueType=r=(!n.range.minimum||!n.range.maximum)&&n.pointsLength?"Double":r;var d={skeleton:"full",type:"dateTime"},h=this.component.intl.getDateParser(d),p=this.component.intl.getDateFormat(d);switch(r){case"Double":case"Category":case"Logarithmic":t=o.minimum?o.minimum:l?0:s.min,i=o.maximum?o.maximum:l?l-1:s.max;break;case"DateTime":case"DateTimeCategory":t=o.minimum?Date.parse(h(p(o.minimum))):s.min,i=o.maximum?Date.parse(h(p(o.maximum))):s.max;break}t=Math.min(t,s.min),i=Math.max(i,s.max);var c=(s.max-s.min)/(i-t),m=(s.min-t)/(i-t);this.zoomFactor=o.minimum||o.maximum?c:this.axis.maxPointLength/e.scrollbarSettings.pointsLength,this.zoomPosition=o.minimum||o.maximum?m:e.zoomPosition,this.zoomPosition=this.component.enableRtl&&e.orientation==="Horizontal"&&!e.isInversed||e.isInversed&&!(this.component.enableRtl&&e.orientation==="Horizontal")?1-(this.zoomPosition+this.zoomFactor):this.zoomPosition,this.scrollRange.min=t,this.scrollRange.max=i,this.scrollRange.delta=i-t,this.previousStart=s.min,this.previousEnd=s.max},a.prototype.getLogRange=function(e){var t=e.scrollbarSettings.range,i=ci(t.minimum,e.logBase),r=ci(t.maximum,e.logBase);return i=isFinite(i)?i:t.minimum,r=isFinite(i)?r:t.maximum,{minimum:Math.floor(i/1),maximum:Math.ceil(r/1)}},a.prototype.injectTo=function(e,t){e.zoomingScrollBar=new a(t,e)},a.prototype.destroy=function(){var e=this;this.axes?this.axes.map(function(t){t.zoomingScrollBar.destroy()}):(this.elements.map(function(t){e.unWireEvents(t),ze(t.firstChild)}),this.elements=[])},a.prototype.getModuleName=function(){return"ScrollBar"},a.prototype.getArgs=function(e,t,i,r,n){var o={axis:this.component.isBlazor?{}:this.axis,name:e,range:this.axis.visibleRange,zoomFactor:this.axis.zoomFactor,zoomPosition:this.axis.zoomPosition,previousRange:t,previousZoomFactor:r,previousZoomPosition:i,currentRange:n};return o},a}(),hl=Ot({inject:{custom:{default:null}},render:function(a){if(!Ce){var e=Ce?a:xi,t=null;return u(this.$slots.default)||(t=Ce?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},t)}},updated:function(){!Ce&&this.custom&&this.custom()},methods:{getTag:function(){return"e-axes"}}}),pl=Ot({render:function(){},methods:{getTag:function(){return"e-axis"}}}),Zo=["isLazyUpdate","plugins","columns","createPopupOnClick","cssClass","disabled","enableOpacity","enablePersistence","enableRtl","inline","locale","mode","modeSwitcher","noColor","presetColors","showButtons","value","beforeClose","beforeModeSwitch","beforeOpen","beforeTileRender","change","created","onModeSwitch","open","select"],Qo=["value"],Ko=Gr({props:Zo}),cl=Ko[0],Jo=Ko[1],Kr=Object.keys(Jo);Kr.push("modelchanged","update:modelValue");for(var Sr=0,io=Qo;Sr<io.length;Sr++){var ul=io[Sr];Kr.push("update:"+ul)}var gl=Ot({name:"ColorPickerComponent",mixins:[Ur],props:cl,watch:Jo,emits:Kr,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Vs({}),propKeys:Zo,models:Qo,hasChildDirective:!1,hasInjectedModules:!1,tagMapper:{},tagNameMapper:{},isVue3:!Ce,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(a){var e=Ce?a:xi,t=null;return u(this.$slots.default)||(t=Ce?this.$slots.default:this.$slots.default()),e("input",t)},methods:{clearTemplate:function(a){if(a||(a=Object.keys(this.templateCollection||{})),a.length&&this.templateCollection)for(var e=0,t=a;e<t.length;e++){var i=t[e],r=this.templateCollection[i];if(r&&r.length){for(var n=0,o=r;n<o.length;n++){var s=o[n];this.destroyPortals(s)}delete this.templateCollection[i]}}},setProperties:function(a,e){var t=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(a,e),a&&this.models&&this.models.length&&Object.keys(a).map(function(i){t.models.map(function(r){i===r&&!/datasource/i.test(i)&&(t.isVue3?t.ej2Instances.vueInstance.$emit("update:"+i,a[i]):(t.$emit("update:"+i,a[i]),t.$emit("modelchanged",a[i])))})})},trigger:function(a,e,t){if(Ce||(this.models=this.models?this.models:this.ej2Instances.referModels),(a==="change"||a==="input")&&this.models&&this.models.length!==0){var i=this.models.toString().match(/checked|value/)||[],r=i[0];e&&i&&!ji(e[r])&&(Ce?(a==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,e[r]),this.$emit("modelchanged",e[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,e[r]),this.ej2Instances.vueInstance.$emit("modelchanged",e[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",e[r])))}else if(a==="actionBegin"&&e.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var i=this.models.toString().match(/currentView|selectedDate/)||[],r=i[0];e&&i&&!ji(e[r])&&(Ce?(this.$emit("update:"+r,e[r]),this.$emit("modelchanged",e[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,e[r]),this.ej2Instances.vueInstance.$emit("modelchanged",e[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(a,e,t)},custom:function(){this.updated()},focusIn:function(){return this.ej2Instances.focusIn()},getValue:function(a,e){return this.ej2Instances.getValue(a,e)},toggle:function(){return this.ej2Instances.toggle()}}});const fl={width:"900",height:"210",version:"1.1"},vl={transform:"translate(50 0)"},ml={class:"line"},yl={key:0,d:"M366 36H610"},bl={key:1,d:"M610 36v70"},wl={key:2,d:"M350 36v80"},Sl={class:"arrow"},xl={key:0,x:"350",y:"80",href:"#arrow-down"},Cl={key:1,x:"610",y:"80",href:"#arrow-down"},Il={key:0},Rl={"text-anchor":"middle",x:"166",y:"109",class:"text"},Ml={"text-anchor":"middle",x:"366",y:"39",class:"text"},Pl={"text-anchor":"middle",x:"366",y:"102",class:"text"},Tl={"text-anchor":"middle",x:"366",y:"116",class:"text"},Al={"text-anchor":"middle",x:"566",y:"109",class:"text"},kl={"text-anchor":"middle",x:"766",y:"39",class:"text"},Fl={key:2},Ll={"text-anchor":"middle",x:"766",y:"109",class:"text"},Dl={key:3},El={"text-anchor":"middle",x:"766",y:"109",class:"text"},Ol={"text-anchor":"middle",x:"766",y:"179",class:"text"},Vl=me({__name:"ControllerOverviewDiagram.svg",props:{activeTab:{},showMechanicalModel:{type:Boolean},showTorqueFeedForward:{type:Boolean},modelBasedControl:{type:Boolean},voltageFrequencyControl:{type:Boolean}},emits:["changeTab"],setup(a,{emit:e}){const t=a,i=e,r=V(()=>t.activeTab==="profile-generator"),n=V(()=>t.activeTab==="feed-forward"),o=V(()=>t.activeTab==="position-controller"),s=V(()=>t.activeTab==="speed-controller"),l=V(()=>t.activeTab==="mechanical-model"),d=V(()=>t.activeTab==="voltage-frequency");return(h,p)=>(M(),O("svg",fl,[p[20]||(p[20]=Oe('<defs data-v-d54ae472><filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="shadow-filter" data-v-d54ae472><feOffset dx="1" dy="2" in="SourceAlpha" result="shadowOffsetOuter1" data-v-d54ae472></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1" data-v-d54ae472></feGaussianBlur><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.3 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1" data-v-d54ae472></feColorMatrix><feMerge data-v-d54ae472><feMergeNode in="shadowMatrixOuter1" data-v-d54ae472></feMergeNode><feMergeNode in="SourceGraphic" data-v-d54ae472></feMergeNode></feMerge></filter><rect id="rectIcon" width="132" height="52" rx="6" ry="6" data-v-d54ae472></rect><path id="arrow-right" d="M0 0l-8 -3v6z" data-v-d54ae472></path><path id="arrow-up" d="M0 0l-3 8h6z" data-v-d54ae472></path><path id="arrow-down" d="M0 0l3 -8h-6z" data-v-d54ae472></path><path id="arrow-left" d="M0 0l8 3v-6z" data-v-d54ae472></path><g id="tuning-symbol" data-v-d54ae472><path d="M27.728 17.96h-2.244v-2.164h2.23a11.874 11.874 0 00-3.123-6.948l-1.211 1.211-1.521-1.533 1.13-1.13a11.87 11.87 0 00-6.397-2.356V6.62H14.43v-1.52a11.874 11.874 0 00-6.246 2.712l1.187 1.186-1.528 1.528-1.18-1.18a11.86 11.86 0 00-2.677 6.445h1.945v2.168h-1.97a11.865 11.865 0 002.6 6.47l1.648-1.65 1.528 1.529-1.673 1.673.022.018-1.153 1.338a13.712 13.712 0 1118.183-.299l-.783-.85-1.894-1.878 1.528-1.528 1.372 1.38a12.01 12.01 0 001.43-2.424 11.85 11.85 0 00.959-3.792zm-11.883-5.577a3.993 3.993 0 01.805.08l-2.51 1.89a.69.69 0 00-.087.074c-.961.807-1.182 1.827-.943 2.712a2.639 2.639 0 00.696 1.19 2.579 2.579 0 001.216.668c.923.223 2.007-.062 2.9-1.202a.732.732 0 00.06-.085l1.74-2.391a4.026 4.026 0 01-1.618 4.381 4.015 4.015 0 11-2.26-7.339z" data-v-d54ae472></path><path d="M21.239 10.088l-6.563 4.972c-2.11 1.691.624 4.631 2.547 2.195l4.74-6.511z" data-v-d54ae472></path></g></defs>',1)),b("g",vl,[b("g",ml,[h.showTorqueFeedForward?(M(),O("path",yl)):B("",!0),h.showTorqueFeedForward?(M(),O("path",bl)):B("",!0),p[6]||(p[6]=b("path",{d:"M200 106H700"},null,-1)),p[7]||(p[7]=b("path",{d:"M320 36v80"},null,-1)),h.modelBasedControl?(M(),O("path",wl)):B("",!0),p[8]||(p[8]=b("path",{d:"M410 36v80"},null,-1)),p[9]||(p[9]=b("path",{d:"M760 106v80"},null,-1))]),b("g",Sl,[p[10]||(p[10]=Oe('<use x="400" y="36" href="#arrow-right" data-v-d54ae472></use><use x="300" y="106" href="#arrow-right" data-v-d54ae472></use><use x="500" y="106" href="#arrow-right" data-v-d54ae472></use><use x="700" y="106" href="#arrow-right" data-v-d54ae472></use><use x="320" y="62" href="#arrow-up" data-v-d54ae472></use>',5)),h.modelBasedControl?(M(),O("use",xl)):B("",!0),p[11]||(p[11]=b("use",{x:"410",y:"80",href:"#arrow-down"},null,-1)),h.showTorqueFeedForward?(M(),O("use",Cl)):B("",!0),p[12]||(p[12]=b("use",{x:"760",y:"150",href:"#arrow-down"},null,-1))]),h.voltageFrequencyControl?B("",!0):(M(),O("g",Il,p[13]||(p[13]=[Oe('<g class="line" data-v-d54ae472><path d="M566 176v-80" data-v-d54ae472></path><path d="M366 176H700" data-v-d54ae472></path><path d="M366 176v-80" data-v-d54ae472></path></g><g class="arrow" data-v-d54ae472><use x="366" y="132" href="#arrow-up" data-v-d54ae472></use><use x="566" y="132" href="#arrow-up" data-v-d54ae472></use></g>',2)]))),b("g",{onClick:p[0]||(p[0]=c=>i("changeTab","profile-generator")),class:"navigation-element"},[b("use",{x:"100",y:"80",class:ke(["shape",{active:r.value}]),href:"#rectIcon",filter:"url(#shadow-filter)"},null,2),b("text",Rl,Y(f(W).tabProfileGenerator),1)]),b("g",{onClick:p[1]||(p[1]=c=>i("changeTab","feed-forward")),class:"navigation-element"},[b("use",{x:"300",y:"10",class:ke(["shape",{active:n.value}]),href:"#rectIcon",filter:"url(#shadow-filter)"},null,2),b("text",Ml,Y(f(W).tabFeedForward),1)]),b("g",{onClick:p[2]||(p[2]=c=>i("changeTab","position-controller")),class:"navigation-element"},[b("use",{x:"300",y:"80",class:ke(["shape",{active:o.value}]),href:"#rectIcon",filter:"url(#shadow-filter)"},null,2),p[14]||(p[14]=b("g",{transform:"translate(306, 91) scale(0.8 0.8)"},[b("path",{class:"arrow",d:"M16 6.038v-2.038h4v-2c0-1.105-0.895-2-2-2h-6c-1.105 0-2 0.895-2 2v2h4v2.038c-6.712 0.511-12 6.119-12 12.962 0 7.18 5.82 13 13 13s13-5.82 13-13c0-6.843-5.288-12.451-12-12.962zM22.071 26.071c-1.889 1.889-4.4 2.929-7.071 2.929s-5.182-1.040-7.071-2.929c-1.889-1.889-2.929-4.4-2.929-7.071s1.040-5.182 2.929-7.071c1.814-1.814 4.201-2.844 6.754-2.923l-0.677 9.813c-0.058 0.822 0.389 1.181 0.995 1.181s1.053-0.36 0.995-1.181l-0.677-9.813c2.552 0.079 4.94 1.11 6.754 2.923 1.889 1.889 2.929 4.4 2.929 7.071s-1.040 5.182-2.929 7.071z"})],-1)),p[15]||(p[15]=b("path",{d:"M336 80V132",class:"line"},null,-1)),b("text",Pl,Y(f(W).tabPositionControllerLine1),1),b("text",Tl,Y(f(W).tabPositionControllerLine2),1)]),b("g",{onClick:p[3]||(p[3]=c=>i("changeTab","speed-controller")),class:"navigation-element"},[b("use",{x:"500",y:"80",class:ke(["shape",{active:s.value}]),href:"#rectIcon",filter:"url(#shadow-filter)"},null,2),b("text",Al,Y(f(W).tabSpeedController),1)]),h.showMechanicalModel?(M(),O("g",{key:1,onClick:p[4]||(p[4]=c=>i("changeTab","mechanical-model")),class:"navigation-element"},[b("use",{x:"700",y:"10",class:ke(["shape",{active:l.value}]),href:"#rectIcon",filter:"url(#shadow-filter)"},null,2),b("text",kl,Y(f(W).tabMechanicalModel),1)])):B("",!0),h.voltageFrequencyControl?(M(),O("g",Fl,[b("g",{onClick:p[5]||(p[5]=c=>i("changeTab","voltage-frequency")),class:"navigation-element"},[b("use",{x:"700",y:"80",class:ke(["shape",{active:d.value}]),href:"#rectIcon",filter:"url(#shadow-filter)"},null,2),b("text",Ll,Y(f(W).tabVoltageFrequency),1)])])):(M(),O("g",Dl,[p[16]||(p[16]=b("path",{class:"line",d:"M740 106v80"},null,-1)),p[17]||(p[17]=b("use",{class:"arrow",x:"740",y:"132",href:"#arrow-up"},null,-1)),p[18]||(p[18]=b("use",{x:"700",y:"80",class:"shape",href:"#rectIcon"},null,-1)),b("text",El,Y(f(W).currentController),1)])),b("g",null,[p[19]||(p[19]=b("use",{x:"700",y:"150",class:"shape",href:"#rectIcon"},null,-1)),b("text",Ol,Y(f(W).motor)+" / "+Y(f(W).driveChain),1)])])]))}}),Bl=He(Vl,[["__scopeId","data-v-d54ae472"]]);function _l(a){const e=Je(a),t=q(),i=q(),r=["Controller:Mode:ModeType","Controller:Mode:Feedforward:FeedforwardType","Controller:Mode:FeedForward:FeedForwardType","Controller:Mode:Feedback:FeedbackType"];ft(async()=>{await e().initialize(),e().isInitialized&&n()}),vt(()=>{for(const l of r)e().unsubscribeValue(l)});function n(){for(const l of r)e().subscribeValue(l);t.value=o("Controller:Mode:ModeType"),i.value=o("Controller:Mode:Feedforward:FeedforwardType")}function o(l){return e().Data.get(l)}const s=V(()=>{var l,d;return((l=t.value)==null?void 0:l.Values.inputAsNumber())===Ve.PositionControllerModelBased&&((d=i.value)==null?void 0:d.Values.inputAsNumber())===Mo.TwoMassModelBased});return{settingControllerMode:t,controllerIsModelBased:s}}const zl={class:"diagram-container"},ql={class:"diagram-drawing"},Nl=me({__name:"MovementAndTuningOverview",props:{componentid:{},activeTab:{}},emits:["changeTab"],setup(a){const e=a,{settingControllerMode:t,controllerIsModelBased:i}=_l(e.componentid),r=V(()=>{var n;return(n=t.value)==null?void 0:n.Values.inputAsNumber()});return(n,o)=>(M(),O("div",zl,[b("div",ql,[k(Bl,{"active-tab":e.activeTab,"show-mechanical-model":r.value===f(Ve).PositionControllerModelBased,"show-torque-feed-forward":r.value===f(Ve).PositionControllerTorqueFf||r.value===f(Ve).PositionControllerModelBased,"model-based-control":f(i),"voltage-frequency-control":r.value===f(Ve).VoltageFrequencyControl,onChangeTab:o[0]||(o[0]=s=>{n.$emit("changeTab",s)})},null,8,["active-tab","show-mechanical-model","show-torque-feed-forward","model-based-control","voltage-frequency-control"])]),k(H,{componentid:e.componentid,reference:"Controller:Mode:ModeType",left:20,top:15,width:"300"},null,8,["componentid"])]))}}),ro=He(Nl,[["__scopeId","data-v-5e554d0d"]]),jt=1e-6;function ea(a,e,t,i,r,n,o,s=!1){const l=[];let d=0,h=0;return a&&(h=a/t,l.push({time:d,velocity:0,acceleration:0}),d=0,l.push({time:d,velocity:0,acceleration:0}),l.push({time:d,velocity:0,acceleration:t}),d+=h,l.push({time:d-jt,velocity:a,acceleration:t}),l.push({time:d,velocity:a,acceleration:0}),d+=o,l.push({time:d-jt,velocity:a,acceleration:0}),l.push({time:d,velocity:a,acceleration:-i}),d+=a/i,l.push({time:d-jt,velocity:0,acceleration:-i}),l.push({time:d,velocity:0,acceleration:0})),(s||a!==e||t!==r||i!==n)&&(h=e/r,d+=o,l.push({time:d-jt,velocity:0,acceleration:0}),l.push({time:d,velocity:0,acceleration:-r}),d+=h,l.push({time:d,velocity:-e,acceleration:-r}),l.push({time:d,velocity:-e,acceleration:0}),d+=o,l.push({time:d-jt,velocity:-e,acceleration:0}),l.push({time:d,velocity:-e,acceleration:n}),d+=e/n,l.push({time:d-jt,velocity:0,acceleration:n}),l.push({time:d,velocity:0,acceleration:0})),d+=o/2,l.push({time:d,velocity:0,acceleration:0}),l}function ta(a,e,t,i,r,n,o,s){const l=a/t,d=a/i,h=e/r,p=e/n;return Math.max(l,d,h,p,2*(o+s))}function ia(a,e){const t=[];let i=0,r=a[0].time;for(;i<a.length-1;)t.push(Hl(r,a[i],a[i+1])),r+=e,r>=a[i+1].time&&(i<a.length-2&&r>=a[i+2].time?i+=2:i+=1);return t}function Hl(a,e,t){if(a<=e.time)return{time:a,velocity:e.velocity,acceleration:e.acceleration};if(e.velocity===t.velocity&&e.acceleration===t.acceleration)return{time:a,velocity:e.velocity,acceleration:e.acceleration};const i=(a-e.time)/(t.time-e.time);let r=e.velocity,n=e.acceleration;return e.velocity!==t.velocity&&(r=e.velocity+(t.velocity-e.velocity)*i),e.acceleration!==t.acceleration&&(n=e.acceleration+(t.acceleration-e.acceleration)*i),{time:a,velocity:r,acceleration:n}}function ra(a,e,t){const i=a[1].time-a[0].time,r=Math.floor(e/i);if(r<2)return a;const n=[];for(let o=0;o<a.length;o++){let s=0,l=0;if(o>=r){const p=o-r;s=a[p].velocity,l=a[p].acceleration}const d=a[o].velocity+t*(s-a[o].velocity),h=a[o].acceleration+t*(l-a[o].acceleration);n.push({time:a[o].time,velocity:d,acceleration:h})}return n}function na(a,e){const t=a[1].time-a[0].time,i=Math.floor(e/t);if(i<2)return a;let r=0,n=0;const o=[];for(let s=0;s<a.length;s++){if(r+=a[s].velocity/i,n+=a[s].acceleration/i,s>=i){const l=s-i;r-=a[l].velocity/i,n-=a[l].acceleration/i}o.push({time:a[s].time,velocity:r,acceleration:n})}return o}const jl=me({__name:"DynamicProfile",props:{velocityPos:{type:Number,default:1},velocityNeg:{type:Number,default:0},accelerationPos:{type:Number,default:10},decelerationPos:{type:Number,default:20},accelerationNeg:{type:Number,default:10},decelerationNeg:{type:Number,default:10},jerkFilterTime:{type:Number,default:.02},zeroVibrationFilterTime:{type:Number,default:0},zeroVibrationCoefficient:{type:Number,default:.5},unitTime:{type:String,default:""},unitVelocity:{type:String,default:""},unitAcceleration:{type:String,default:""}},setup(a,{expose:e}){const t=a,i=V(()=>ta(t.velocityPos,t.velocityNeg,t.accelerationPos,t.decelerationPos,t.accelerationNeg,t.decelerationNeg,t.jerkFilterTime,t.zeroVibrationFilterTime)),r=V(()=>Math.max(t.velocityPos,t.velocityNeg)*1.1),n=V(()=>Math.max(t.accelerationPos,t.decelerationPos,t.accelerationNeg,t.decelerationNeg)*1.1),o=V(()=>ea(t.velocityPos,t.velocityNeg,t.accelerationPos,t.decelerationPos,t.accelerationNeg,t.decelerationNeg,i.value)),s=V(()=>{const m=o.value[o.value.length-1].time/1e3;return ia(o.value,m)}),l=V(()=>t.zeroVibrationFilterTime<=4e-4?s.value:ra(s.value,t.zeroVibrationFilterTime,t.zeroVibrationCoefficient)),d=V(()=>t.jerkFilterTime<=4e-4?l.value:na(l.value,t.jerkFilterTime)),h=V(()=>({title:"Time "+t.unitTime,crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#666"},labelStyle:{size:"8pt",color:"#999"},interval:i.value/2})),p=V(()=>({title:"Velocity "+t.unitVelocity,crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#FF8F0F"},labelStyle:{size:"8pt",color:"#999"},minimum:-r.value,maximum:r.value,interval:r.value*2})),c=V(()=>[{name:"acceleration",title:"Acceleration "+t.unitAcceleration,opposedPosition:!0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#999"},labelStyle:{size:"8pt",color:"#999"},minimum:-n.value,maximum:n.value,interval:n.value*2}]);return e({dataWithoutFilter:o,sampledDataWithJoltFilter:d}),Ci("chart",[ar]),(m,g)=>(M(),O("div",null,[k(f(bi),{"primary-x-axis":h.value,"primary-y-axis":p.value,axes:c.value,"chart-area":{border:{width:0}},"legend-settings":{visible:!1},width:"630px;",height:"280px;","data-testid":"dynamicProfileData"},{default:re(()=>[k(f(yi),null,{default:re(()=>[k(f(Ke),{"data-source":o.value,type:"Line","x-name":"time","y-name":"acceleration",name:"Acceleration profile without jolt","y-axis-name":"acceleration",width:1,opacity:.5,"dash-array-disabled":[3,3],fill:"#999999"},null,8,["data-source"]),k(f(Ke),{"data-source":o.value,type:"Line","x-name":"time","y-name":"velocity",name:"Speed profile without jolt",width:1,opacity:.5,"dash-array-disabled":[3,3],fill:"#FF8F0F"},null,8,["data-source"]),k(f(Ke),{"data-source":d.value,type:"Line","x-name":"time","y-name":"acceleration",name:"Acceleration profile","y-axis-name":"acceleration",width:2,opacity:1,fill:"#999"},null,8,["data-source"]),k(f(Ke),{"data-source":d.value,type:"Line","x-name":"time","y-name":"velocity",name:"Speed profile",width:3,opacity:1,fill:"#FF8F0F"},null,8,["data-source"])]),_:1})]),_:1},8,["primary-x-axis","primary-y-axis","axes"])]))}});function oa(a){const e=Je(a),t=q(),i=q(),r=q(),n=q(),o=q(),s=["JerkFilter:JerkFilterType","JerkFilter:JerkTime","ZeroVibrationFilter:ZeroVibrationFilterType","ZeroVibrationFilter:ZeroVibrationTime","ZeroVibrationFilter:ZeroVibrationCoefficient"],{connected:l}=Po(),d=V(()=>{var T,C,P,R,N;return l.value===!1?!1:((T=t.value)==null?void 0:T.Values.isParametrizationValueDifferentToInput())||((C=r.value)==null?void 0:C.Values.isParametrizationValueDifferentToInput())||((P=i.value)==null?void 0:P.Values.isParametrizationValueDifferentToInput())||((R=n.value)==null?void 0:R.Values.isParametrizationValueDifferentToInput())||((N=o.value)==null?void 0:N.Values.isParametrizationValueDifferentToInput())});ft(async()=>{await e().initialize(),e().isInitialized&&y()}),vt(()=>{for(const T of s)e().unsubscribeValue(T)});let h;(T=>{T[T.NotUsed=0]="NotUsed",T[T.Used=1]="Used"})(h||(h={}));const p=V(()=>{var T;return((T=t.value)==null?void 0:T.Values.inputAsNumber())==0}),c=V(()=>{var T;return p.value?0:(T=i.value)==null?void 0:T.Values.inputAsNumber()}),m=V(()=>{var T;return((T=r.value)==null?void 0:T.Values.inputAsNumber())==0}),g=V(()=>{var T;return m.value?0:(T=n.value)==null?void 0:T.Values.inputAsNumber()});function y(){for(const T of s)e().subscribeValue(T);t.value=e().Data.get("JerkFilter:JerkFilterType"),i.value=e().Data.get("JerkFilter:JerkTime"),r.value=e().Data.get("ZeroVibrationFilter:ZeroVibrationFilterType"),n.value=e().Data.get("ZeroVibrationFilter:ZeroVibrationTime"),o.value=e().Data.get("ZeroVibrationFilter:ZeroVibrationCoefficient")}function w(){e().writeToPLC(s)}function v(){e().clear(s)}return{settingJerkType:t,settingJerkTime:i,settingZvfType:r,settingZvfTime:n,settingZvfCoe:o,anyFilterChanged:d,applyFilterSettings:w,clearFilterSettings:v,jerkFilterTime:c,zvfTime:g}}function $l(a){const e=Je(a),t=q(),i=q(),r=q(),n=["MovementErrorLimits:PositionError","MovementErrorLimits:VelocityErrorMonitoring:VelocityErrorMonitoringType","MovementErrorLimits:VelocityErrorMonitoring:VelocityError"],{connected:o}=Po(),s=V(()=>{var p,c,m,g;return o.value===!1?!1:!!((p=i.value)!=null&&p.Values.isParametrizationValueDifferentToInput()||(c=t.value)!=null&&c.Values.isParametrizationValueDifferentToInput()||((m=i.value)==null?void 0:m.Values.Parametrization.asNumber())==To.UserDefined&&((g=r.value)!=null&&g.Values.isParametrizationValueDifferentToInput()))});ft(async()=>{await e().initialize(),e().isInitialized&&l()}),vt(()=>{for(const p of n)e().unsubscribeValue(p)});function l(){for(const p of n)e().subscribeValue(p);t.value=e().Data.get("MovementErrorLimits:PositionError"),i.value=e().Data.get("MovementErrorLimits:VelocityErrorMonitoring:VelocityErrorMonitoringType"),r.value=e().Data.get("MovementErrorLimits:VelocityErrorMonitoring:VelocityError")}function d(){e().writeToPLC(n)}function h(){e().clear(n)}return{settingPosError:t,settingVelErrorType:i,settingVelError:r,anyErrorLimitChanged:s,applyErrorLimitSettings:d,clearErrorLimitSettings:h}}const Gl={class:"container"},Ul={class:"container-item",style:{width:"640px"}},Wl=me({__name:"ProfileGeneratorSettings",props:{componentid:{type:String,required:!0}},setup(a){const e=a,{settingVelType:t,settingVel:i,settingVelPos:r,settingVelNeg:n,settingAccType:o,settingAcc:s,settingAccPos:l,settingAccNeg:d,settingDecType:h,settingDec:p,settingDecPos:c,settingDecNeg:m,anyLimitChanged:g,applyLimitSettings:y,clearLimitSettings:w}=qo(e.componentid),v=V(()=>{var K;return((K=t.value)==null?void 0:K.Values.inputAsNumber())==Ne.Standard}),T=V(()=>{var K;return((K=o.value)==null?void 0:K.Values.inputAsNumber())==Ne.Standard}),C=V(()=>{var K;return((K=h.value)==null?void 0:K.Values.inputAsNumber())==Ne.Standard}),P=V(()=>v.value&&T.value&&C.value?160:280),R=V(()=>{var K,$;return v.value?(K=i.value)==null?void 0:K.Values.inputAsNumber():($=r.value)==null?void 0:$.Values.inputAsNumber()}),N=V(()=>{var K,$;return v.value?(K=i.value)==null?void 0:K.Values.inputAsNumber():($=n.value)==null?void 0:$.Values.inputAsNumber()}),D=V(()=>{var K,$;return T.value?(K=s.value)==null?void 0:K.Values.inputAsNumber():($=l.value)==null?void 0:$.Values.inputAsNumber()}),S=V(()=>{var K,$;return T.value?(K=s.value)==null?void 0:K.Values.inputAsNumber():($=d.value)==null?void 0:$.Values.inputAsNumber()}),x=V(()=>{var K,$;return C.value?(K=p.value)==null?void 0:K.Values.inputAsNumber():($=c.value)==null?void 0:$.Values.inputAsNumber()}),I=V(()=>{var K,$;return C.value?(K=p.value)==null?void 0:K.Values.inputAsNumber():($=m.value)==null?void 0:$.Values.inputAsNumber()});function E(){t.value&&(t.value.Values.Input=t.value.Values.Input==Ne.Standard?Ne.Advanced:Ne.Standard,!(!i.value||!r.value||!n.value)&&(t.value.Values.Input==Ne.Standard?i.value.Values.Input=r.value.Values.Input:(r.value.Values.Input=i.value.Values.Input,n.value.Values.Input=i.value.Values.Input)))}function L(){o.value&&(o.value.Values.Input=o.value.Values.Input==Ne.Standard?Ne.Advanced:Ne.Standard,!(!s.value||!l.value||!d.value)&&(o.value.Values.Input==Ne.Standard?s.value.Values.Input=l.value.Values.Input:(l.value.Values.Input=s.value.Values.Input,d.value.Values.Input=s.value.Values.Input)))}function z(){h.value&&(h.value.Values.Input=h.value.Values.Input==Ne.Standard?Ne.Advanced:Ne.Standard,!(!p.value||!c.value||!m.value)&&(h.value.Values.Input==Ne.Standard?p.value.Values.Input=c.value.Values.Input:(c.value.Values.Input=p.value.Values.Input,m.value.Values.Input=p.value.Values.Input)))}const{settingJerkType:_,settingJerkTime:G,settingZvfType:Q,settingZvfTime:ie,settingZvfCoe:Z,anyFilterChanged:U,applyFilterSettings:ye,clearFilterSettings:Ge}=oa(e.componentid),je=V(()=>{var K;return((K=_.value)==null?void 0:K.Values.inputAsNumber())==0}),be=V(()=>{var K;return((K=Q.value)==null?void 0:K.Values.inputAsNumber())==0}),Ee=V(()=>{var K;return je.value?0:(K=G.value)==null?void 0:K.Values.inputAsNumber()}),Fe=V(()=>{var K;return be.value?0:(K=ie.value)==null?void 0:K.Values.inputAsNumber()});function Qe(K){_.value&&(_.value.Values.Input=K?0:1)}function st(K){Q.value&&(Q.value.Values.Input=K?0:1)}const{settingVelErrorType:Zt,settingVelError:Mt,anyErrorLimitChanged:lt,applyErrorLimitSettings:dt,clearErrorLimitSettings:de}=$l(e.componentid),we=V(()=>{var K;return((K=Zt.value)==null?void 0:K.Values.inputAsNumber())==To.UserDefined});return De(we,K=>{Mt.value&&(K||(Mt.value.Values.Input=0))}),(K,$)=>{var Be,Re,ht,rt;return M(),O("div",Gl,[k(Wt,{title:f(W).limitsGroupTitle,width:P.value.toString(),height:"240",modified:f(g),onApply:f(y),onClear:f(w)},{default:re(()=>[k(Kt,{description:f(W).velocityAdvancedButtonDescription,left:5,top:50,"icon-css":"icon-link",value:v.value,onClick:E},null,8,["description","value"]),v.value?(M(),ee(H,{key:0,componentid:e.componentid,reference:"MovementLimits:Velocity:Velocity",min:0,left:40,top:50,width:"100","disable-apply":!0},null,8,["componentid"])):B("",!0),v.value?B("",!0):(M(),ee(H,{key:1,componentid:e.componentid,reference:"MovementLimits:Velocity:VelocityPositive",min:0,left:40,top:50,width:"100","disable-apply":!0},null,8,["componentid"])),v.value?B("",!0):(M(),ee(H,{key:2,componentid:e.componentid,reference:"MovementLimits:Velocity:VelocityNegative",min:0,left:160,top:50,width:"100","disable-apply":!0},null,8,["componentid"])),k(Kt,{description:f(W).accelerationAdvancedButtonDescription,left:5,top:130,"icon-css":"icon-link",value:T.value,onClick:L},null,8,["description","value"]),T.value?(M(),ee(H,{key:3,componentid:e.componentid,reference:"MovementLimits:Acceleration:Acceleration",min:0,left:40,top:130,width:"100","disable-apply":!0},null,8,["componentid"])):B("",!0),T.value?B("",!0):(M(),ee(H,{key:4,componentid:e.componentid,reference:"MovementLimits:Acceleration:AccelerationPositive",min:0,left:40,top:130,width:"100","disable-apply":!0},null,8,["componentid"])),T.value?B("",!0):(M(),ee(H,{key:5,componentid:e.componentid,reference:"MovementLimits:Acceleration:AccelerationNegative",min:0,left:160,top:130,width:"100","disable-apply":!0},null,8,["componentid"])),k(Kt,{description:f(W).accelerationAdvancedButtonDescription,left:5,top:210,"icon-css":"icon-link",value:C.value,onClick:z},null,8,["description","value"]),C.value?(M(),ee(H,{key:6,componentid:e.componentid,reference:"MovementLimits:Deceleration:Deceleration",min:0,left:40,top:210,width:"100","disable-apply":!0},null,8,["componentid"])):B("",!0),C.value?B("",!0):(M(),ee(H,{key:7,componentid:e.componentid,reference:"MovementLimits:Deceleration:DecelerationPositive",min:0,left:40,top:210,width:"100","disable-apply":!0},null,8,["componentid"])),C.value?B("",!0):(M(),ee(H,{key:8,componentid:e.componentid,reference:"MovementLimits:Deceleration:DecelerationNegative",min:0,left:160,top:210,width:"100","disable-apply":!0},null,8,["componentid"]))]),_:1},8,["title","width","modified","onApply","onClear"]),b("div",Ul,[k(jl,{"velocity-pos":R.value,"velocity-neg":N.value,"acceleration-pos":D.value,"deceleration-pos":x.value,"acceleration-neg":S.value,"deceleration-neg":I.value,"jerk-filter-time":Ee.value,"zero-vibration-filter-time":Fe.value,"zero-vibration-coefficient":(Be=f(Z))==null?void 0:Be.Values.inputAsNumber(),"unit-time":"["+((Re=f(G))==null?void 0:Re.Unit)+"]","unit-velocity":"["+((ht=f(i))==null?void 0:ht.Unit)+"]","unit-acceleration":"["+((rt=f(s))==null?void 0:rt.Unit)+"]"},null,8,["velocity-pos","velocity-neg","acceleration-pos","deceleration-pos","acceleration-neg","deceleration-neg","jerk-filter-time","zero-vibration-filter-time","zero-vibration-coefficient","unit-time","unit-velocity","unit-acceleration"])]),k(Wt,{title:"Filter",width:"200",height:"240",modified:f(U),onApply:f(ye),onClear:f(Ge)},{default:re(()=>[k(Kt,{description:f(W).jerkFilterUsageButtonDescription,left:5,top:50,"icon-css":"icon-blocked",value:je.value,onClick:Qe},null,8,["description","value"]),k(H,{componentid:e.componentid,reference:"JerkFilter:JerkTime",min:0,left:40,top:50,width:"140","show-spin-button":!0,step:4e-4,"disable-apply":!0,disabled:je.value},null,8,["componentid","disabled"]),k(Kt,{description:f(W).zeroVibrationFilterUsageButtonDescription,left:5,top:130,"icon-css":"icon-blocked",value:be.value,onClick:st},null,8,["description","value"]),k(H,{componentid:e.componentid,reference:"ZeroVibrationFilter:ZeroVibrationTime",min:0,left:40,top:130,width:"140","show-spin-button":!0,step:4e-4,"disable-apply":!0,disabled:be.value},null,8,["componentid","disabled"]),k(H,{componentid:e.componentid,reference:"ZeroVibrationFilter:ZeroVibrationCoefficient",min:0,left:40,top:210,width:"140","show-spin-button":!0,step:.05,max:.5,"disable-apply":!0,disabled:be.value},null,8,["componentid","disabled"])]),_:1},8,["modified","onApply","onClear"]),k(Wt,{title:"Movement error limits",width:"190",height:"240",modified:f(lt),onApply:f(dt),onClear:f(de)},{default:re(()=>[k(H,{componentid:e.componentid,reference:"MovementErrorLimits:PositionError",min:0,left:10,top:50,width:"160","disable-apply":!0},null,8,["componentid"]),k(H,{componentid:e.componentid,reference:"MovementErrorLimits:VelocityErrorMonitoring:VelocityErrorMonitoringType",left:10,top:130,width:"160","disable-apply":!0},null,8,["componentid"]),we.value?(M(),ee(H,{key:0,componentid:e.componentid,reference:"MovementErrorLimits:VelocityErrorMonitoring:VelocityError",min:0,left:10,top:210,width:"160","disable-apply":!0},null,8,["componentid"])):B("",!0)]),_:1},8,["modified","onApply","onClear"])])}}}),Xl=He(Wl,[["__scopeId","data-v-54ebe02a"]]),Yl={width:"1048",height:"330",version:"1.1"},Zl={class:"text"},Ql={x:"30",y:"95"},Kl={key:0},Jl={class:"line"},ed={key:0,d:"M560 50V94"},td=["stroke-dasharray"],id={class:"arrow"},rd={key:0,x:"560",y:"92",href:"#arrow-down"},nd={class:"shape"},od={class:"icon"},ad={class:"text"},sd={x:"150",y:"95"},ld={x:"150",y:"295"},dd={key:0,x:"550",y:"40"},hd={x:"650",y:"80"},pd={x:"650",y:"80"},cd={x:"780",y:"95"},ud={key:1,x:"567",y:"120"},gd={key:2,x:"548",y:"87"},fd={key:0,d:"M642 111l22 -22",class:"line"},vd={key:0,d:"M672 111l22 -22",class:"line"},md={key:0,d:"M702 111l22 -22",class:"line"},yd={key:0,id:"feedback-standard","data-cy":"motor-encoder"},bd={class:"shape-text"},wd={x:"850",y:"295","text-anchor":"middle"},Sd={x:"850",y:"310","text-anchor":"middle"},xd={key:1,id:"feedback-2encoder","data-cy":"two-encoders"},Cd={class:"shape-text"},Id={x:"850",y:"195","text-anchor":"middle"},Rd={x:"850",y:"210","text-anchor":"middle"},Md={x:"850",y:"295","text-anchor":"middle"},Pd={x:"850",y:"310","text-anchor":"middle"},Td={class:"text-sm disabled"},Ad={x:"605",y:"220"},kd={key:2,id:"feedback-mass-model","data-cy":"model-based"},Fd={class:"shape-text"},Ld={x:"850",y:"195","text-anchor":"middle"},Dd={x:"850",y:"210","text-anchor":"middle"},Ed={class:"text-sm disabled"},Od={x:"605",y:"220"},Vd={x:"846",y:"295",class:"text","text-anchor":"middle"},Bd={x:"846",y:"310",class:"text","text-anchor":"middle"},_d={key:1},zd={class:"shape-text"},qd={x:"322",y:"182",class:"text","text-anchor":"middle"},Nd={class:"text"},Hd={x:"780",y:"95"},jd=me({__name:"SpeedControllerDiagram.svg",props:{feedbackMode:{default:St.Standard},integrationPartUsed:{type:Boolean},feedbackMixFactor:{default:0},feedForwardCurrentUsed:{type:Boolean},voltageFrequencyControl:{type:Boolean},filter1Used:{type:Boolean},filter2Used:{type:Boolean},filter3Used:{type:Boolean}},emits:["changeTab","editFilter"],setup(a){const e=a,t=V(()=>(e.feedbackMixFactor,1-e.feedbackMixFactor));return(i,r)=>(M(),O("svg",Yl,[r[34]||(r[34]=Oe('<defs data-v-c4273c0e><filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="shadow-filter" data-v-c4273c0e><feOffset dx="1" dy="2" in="SourceAlpha" result="shadowOffsetOuter1" data-v-c4273c0e></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1" data-v-c4273c0e></feGaussianBlur><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.3 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1" data-v-c4273c0e></feColorMatrix><feMerge data-v-c4273c0e><feMergeNode in="shadowMatrixOuter1" data-v-c4273c0e></feMergeNode><feMergeNode in="SourceGraphic" data-v-c4273c0e></feMergeNode></feMerge></filter><rect id="rectIcon48" width="52" height="52" rx="6" ry="6" data-v-c4273c0e></rect><rect id="rectIconLarge" width="104" height="52" rx="6" ry="6" data-v-c4273c0e></rect><rect id="rect24" width="24" height="24" rx="2" ry="2" data-v-c4273c0e></rect><rect id="rectModel" width="72" height="52" rx="6" ry="6" data-v-c4273c0e></rect><circle id="circleNode" cx="0" cy="0" r="6" data-v-c4273c0e></circle><circle id="circleMotor" cx="0" cy="0" r="26" data-v-c4273c0e></circle><path id="arrow-right" d="M0 0l-8 -3v6z" data-v-c4273c0e></path><path id="arrow-up" d="M0 0l-3 8h6z" data-v-c4273c0e></path><path id="arrow-down" d="M0 0l3 -8h-6z" data-v-c4273c0e></path><path id="arrow-left" d="M0 0l8 3v-6z" data-v-c4273c0e></path></defs><g class="line" data-v-c4273c0e><path d="M50 100H850" data-v-c4273c0e></path><path d="M30 100H850" data-v-c4273c0e></path></g><g class="arrow" data-v-c4273c0e><use x="858" y="100" href="#arrow-right" data-v-c4273c0e></use></g><g class="shape" data-v-c4273c0e><use x="560" y="100" href="#circleNode" data-v-c4273c0e></use></g>',4)),b("g",Zl,[b("text",Ql,Y(f(W).signalSetSpeed),1)]),i.$props.voltageFrequencyControl?(M(),O("g",_d,[r[33]||(r[33]=Oe('<g class="line" data-v-c4273c0e><path d="M370 180H560V106" data-v-c4273c0e></path><path d="M560 180v30" data-v-c4273c0e></path></g><g class="arrow" data-v-c4273c0e><use x="552" y="100" href="#arrow-right" data-v-c4273c0e></use><use x="560" y="108" href="#arrow-up" data-v-c4273c0e></use><use x="560" y="188" href="#arrow-up" data-v-c4273c0e></use><use x="552" y="180" href="#arrow-right" data-v-c4273c0e></use></g><g class="shape" data-v-c4273c0e><use x="270" y="154" href="#rectIconLarge" data-v-c4273c0e></use><use x="560" y="180" href="#circleNode" data-v-c4273c0e></use></g>',3)),b("g",zd,[b("text",qd,Y(f(W).slipObserver),1)]),b("g",Nd,[r[31]||(r[31]=b("text",{x:"548",y:"115"},"+",-1)),r[32]||(r[32]=b("text",{x:"560",y:"182","text-anchor":"middle"},"x",-1)),b("text",Hd,Y(f(W).signalSetSpeed),1)])])):(M(),O("g",Kl,[b("g",Jl,[r[4]||(r[4]=b("path",{d:"M130 100V300H850"},null,-1)),i.$props.feedForwardCurrentUsed?(M(),O("path",ed)):B("",!0),b("path",{d:"M400 100V160H560V106","stroke-dasharray":i.$props.integrationPartUsed?void 0:"4 4"},null,8,td)]),b("g",id,[r[5]||(r[5]=b("use",{x:"122",y:"100",href:"#arrow-right"},null,-1)),r[6]||(r[6]=b("use",{x:"130",y:"108",href:"#arrow-up"},null,-1)),r[7]||(r[7]=b("use",{x:"552",y:"100",href:"#arrow-right"},null,-1)),i.$props.feedForwardCurrentUsed?(M(),O("use",rd)):B("",!0)]),b("g",{class:ke(["arrow",{disabled:!i.$props.integrationPartUsed}])},r[8]||(r[8]=[b("use",{x:"560",y:"108",href:"#arrow-up"},null,-1)]),2),b("g",nd,[r[9]||(r[9]=b("use",{x:"270",y:"74",href:"#rectIcon48"},null,-1)),b("use",{x:"455",y:"134",href:"#rectIcon48",class:ke(["shape",{disabled:!i.$props.integrationPartUsed}])},null,2),r[10]||(r[10]=b("use",{x:"270",y:"274",href:"#rectIcon48"},null,-1)),r[11]||(r[11]=b("use",{x:"130",y:"100",href:"#circleNode"},null,-1))]),b("g",od,[r[13]||(r[13]=b("g",{transform:"translate(272,76)"},[b("line",{x1:"6",x2:"6",y1:"2",y2:"46"}),b("line",{x1:"2",x2:"46",y1:"42",y2:"42"}),b("path",{d:"M6 42V12H42"})],-1)),b("g",{transform:"translate(457,136)",class:ke(["icon",{disabled:!i.$props.integrationPartUsed}])},r[12]||(r[12]=[b("line",{x1:"6",x2:"6",y1:"2",y2:"46"},null,-1),b("line",{x1:"2",x2:"46",y1:"42",y2:"42"},null,-1),b("line",{x1:"6",x2:"44",y1:"42",y2:"8"},null,-1)]),2),r[14]||(r[14]=b("g",{transform:"translate(272,276)"},[b("line",{x1:"6",x2:"6",y1:"2",y2:"46"}),b("line",{x1:"2",x2:"46",y1:"42",y2:"42"}),b("path",{d:"M6 42c0-22 36-36 36-36"})],-1))]),b("g",ad,[b("text",sd,Y(f(W).signalVelocityError),1),b("text",ld,Y(f(W).signalActualSpeed),1),i.$props.feedForwardCurrentUsed?(M(),O("text",dd,Y(f(W).signalSetCurrentFF),1)):B("",!0),b("text",hd,Y(f(W).signalCurrentFilters),1),b("text",pd,Y(f(W).signalCurrentFilters),1),b("text",cd,Y(f(W).signalSetCurrent),1),r[15]||(r[15]=b("text",{x:"110",y:"112"},"+",-1)),r[16]||(r[16]=b("text",{x:"137",y:"120"},"-",-1)),r[17]||(r[17]=b("text",{x:"540",y:"112"},"+",-1)),i.$props.integrationPartUsed?(M(),O("text",ud,"+")):B("",!0),i.$props.feedForwardCurrentUsed?(M(),O("text",gd,"+")):B("",!0)]),b("g",{onClick:r[0]||(r[0]=n=>i.$emit("editFilter",1)),class:"navigation-element"},[r[18]||(r[18]=b("g",{class:"shape"},[b("use",{x:"641",y:"88",href:"#rect24",filter:"url(#shadow-filter)"})],-1)),e.filter1Used?B("",!0):(M(),O("path",fd)),r[19]||(r[19]=b("text",{x:"650",y:"104",class:"text"},"1",-1))]),b("g",{onClick:r[1]||(r[1]=n=>i.$emit("editFilter",2)),class:"navigation-element"},[r[20]||(r[20]=b("g",{class:"shape"},[b("use",{x:"671",y:"88",href:"#rect24",filter:"url(#shadow-filter)"})],-1)),e.filter2Used?B("",!0):(M(),O("path",vd)),r[21]||(r[21]=b("text",{x:"680",y:"104",class:"text"},"2",-1))]),b("g",{onClick:r[2]||(r[2]=n=>i.$emit("editFilter",3)),class:"navigation-element"},[r[22]||(r[22]=b("g",{class:"shape"},[b("use",{x:"701",y:"88",href:"#rect24",filter:"url(#shadow-filter)"})],-1)),e.filter3Used?B("",!0):(M(),O("path",md)),r[23]||(r[23]=b("text",{x:"710",y:"104",class:"text"},"3",-1))]),i.$props.feedbackMode===f(St).Standard?(M(),O("g",yd,[r[24]||(r[24]=b("use",{x:"850",y:"300",href:"#circleMotor",class:"shape"},null,-1)),b("g",bd,[b("text",wd,Y(f(W).motor),1),b("text",Sd,Y(f(W).encoder),1)])])):B("",!0),i.$props.feedbackMode===f(St).TwoEncoderSpeedBased?(M(),O("g",xd,[r[25]||(r[25]=Oe('<path d="M600 300V200H850" class="line" data-v-c4273c0e></path><g class="arrow" data-v-c4273c0e><use x="600" y="292" href="#arrow-down" data-v-c4273c0e></use><use x="608" y="300" href="#arrow-left" data-v-c4273c0e></use></g><g class="shape" data-v-c4273c0e><use x="850" y="300" href="#circleMotor" data-v-c4273c0e></use><use x="600" y="300" href="#circleNode" data-v-c4273c0e></use><use x="850" y="200" href="#circleMotor" data-v-c4273c0e></use></g>',3)),b("g",Cd,[b("text",Id,Y(f(W).motor),1),b("text",Rd,Y(f(W).encoder),1),b("text",Md,Y(f(W).position),1),b("text",Pd,Y(f(W).encoder),1)]),r[26]||(r[26]=b("g",{class:"text"},[b("text",{x:"588",y:"287"},"+"),b("text",{x:"615",y:"295"},"+")],-1)),b("g",Td,[b("text",Ad,"x "+Y(t.value.toFixed(2)),1)])])):B("",!0),i.$props.feedbackMode===f(St).OneMassModelBased||i.$props.feedbackMode===f(St).TwoMassModelBased?(M(),O("g",kd,[r[29]||(r[29]=Oe('<g class="line" data-v-c4273c0e><path d="M600 300V200H850" data-v-c4273c0e></path><path d="M750 300V200" data-v-c4273c0e></path></g><g class="arrow" data-v-c4273c0e><use x="600" y="292" href="#arrow-down" data-v-c4273c0e></use><use x="750" y="286" href="#arrow-down" data-v-c4273c0e></use><use x="608" y="300" href="#arrow-left" data-v-c4273c0e></use><use x="764" y="300" href="#arrow-left" data-v-c4273c0e></use></g><g class="shape" data-v-c4273c0e><use x="600" y="300" href="#circleNode" data-v-c4273c0e></use><use x="850" y="200" href="#circleMotor" data-v-c4273c0e></use><use x="739" y="288" href="#rect24" data-v-c4273c0e></use></g>',3)),b("g",Fd,[b("text",Ld,Y(f(W).motor),1),b("text",Dd,Y(f(W).encoder),1),r[27]||(r[27]=b("text",{x:"746",y:"303"},"f()",-1))]),r[30]||(r[30]=b("g",{class:"text"},[b("text",{x:"588",y:"287"},"+"),b("text",{x:"615",y:"295"},"+")],-1)),b("g",Ed,[b("text",Od,"x "+Y(t.value.toFixed(2)),1)]),b("g",{onClick:r[3]||(r[3]=n=>i.$emit("changeTab","mechanical-model")),class:"navigation-element"},[r[28]||(r[28]=b("use",{x:"812",y:"273",class:"shape",href:"#rectModel",filter:"url(#shadow-filter)"},null,-1)),b("text",Vd,Y(f(W).mechanical),1),b("text",Bd,Y(f(W).model),1)])])):B("",!0)]))]))}}),$d=He(jd,[["__scopeId","data-v-c4273c0e"]]);function Gd(a){const e=q(!1);let t;return Oa().then(r=>{const n=r;t=new n.ServoLoopOptimizer(!1),t.setTuningParameterSpeed(0,0,0,0,0,0,0),e.value=!0}),{gainData:V(()=>{if(!e.value)return null;switch(a.filterType){case oe.Lowpass2ndOrder:{if(!a.parameterLowpass)return;t.setTuningParameterIsqLowPass2ndOrder(0,a.parameterLowpass.frequency)}break;case oe.Notch:case oe.AdaptiveNotch:{if(!a.parameterNotch)return;t.setTuningParameterIsqNotch(0,a.parameterNotch.frequency,a.parameterNotch.bandwidth)}break;case oe.Biquad:{if(!a.parameterBiquad)return;t.setTuningParameterIsqBiquad(0,a.parameterBiquad.frequencyNumerator,a.parameterBiquad.dampingNumerator,a.parameterBiquad.frequencyDenominator,a.parameterBiquad.dampingDenominator)}break;case oe.DiscreteTimeTransferFunction:{if(!a.parameterDiscreteTimeTransferFunction)return;t.setTuningParameterIsqDiscreteTimeTransferFunction(0,a.parameterDiscreteTimeTransferFunction.coefficientA0,a.parameterDiscreteTimeTransferFunction.coefficientA1,a.parameterDiscreteTimeTransferFunction.coefficientB0,a.parameterDiscreteTimeTransferFunction.coefficientB1,a.parameterDiscreteTimeTransferFunction.coefficientB2)}break}t.executeSpeedTuning();const r=JSON.parse(t.getIsq0FilterGain());return r[0].value=0,r})}}const no="rgba(255,0,0, 0.2)",Ud=me({__name:"LoopFilterChart",props:{filterType:{},parameterLowpass:{},parameterNotch:{},parameterBiquad:{},parameterDiscreteTimeTransferFunction:{}},setup(a){const e=a,{gainData:t}=Gd(e),i=V(()=>{switch(e.filterType){case oe.Lowpass2ndOrder:if(e.parameterLowpass)return s(e.parameterLowpass.frequency);break;case oe.Notch:case oe.AdaptiveNotch:if(e.parameterNotch)return l(e.parameterNotch.frequency,e.parameterNotch.bandwidth);break}return null}),r=V(()=>{const d={start:-1/0,color:"rgba(167,169,171, 0.2)",horizontalAlignment:"End",verticalAlignment:"Start"};switch(e.filterType){case oe.Lowpass2ndOrder:d.end=-6;break;case oe.Notch:case oe.AdaptiveNotch:d.end=-3;break;default:return null}return[d]}),n=V(()=>({valueType:"Logarithmic",title:"Frequency Hz",crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#666"},labelStyle:{size:"8pt",color:"#999"},stripLines:i.value?i.value:void 0})),o=V(()=>({title:"Gain dB ",crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#666"},labelStyle:{size:"8pt",color:"#999"},stripLines:r.value?r.value:void 0}));function s(d){return[{start:Math.log10(d),end:1/0,visible:!0,horizontalAlignment:"Start",verticalAlignment:"End",rotation:0,color:no}]}function l(d,h){const p=h/2;return[{start:Math.log10(Math.max(d-p,0)),end:Math.log10(d+p),visible:!0,horizontalAlignment:"Start",verticalAlignment:"End",rotation:0,color:no}]}return Ci("chart",[ar,Xo,No]),(d,h)=>(M(),O("div",null,[k(f(bi),{"primary-x-axis":n.value,"primary-y-axis":o.value,"chart-area":{border:{width:0}},"legend-settings":{visible:!1},width:"450px;",height:"220px;"},{default:re(()=>[k(f(yi),null,{default:re(()=>[k(f(Ke),{"data-source":f(t),type:"Line","x-name":"frequency","y-name":"value",name:"Loop filter gain",width:3,fill:"#FF8F0F"},null,8,["data-source"])]),_:1})]),_:1},8,["primary-x-axis","primary-y-axis"])]))}}),X={LoopFilterType:["Controller:Mode:LoopFilters:LoopFilter_0:LoopFilterType","Controller:Mode:LoopFilters:LoopFilter_1:LoopFilterType","Controller:Mode:LoopFilters:LoopFilter_2:LoopFilterType"],CutOffFrequency:["Controller:Mode:LoopFilters:LoopFilter_0:CutOffFrequency","Controller:Mode:LoopFilters:LoopFilter_1:CutOffFrequency","Controller:Mode:LoopFilters:LoopFilter_2:CutOffFrequency"],CenterFrequency:["Controller:Mode:LoopFilters:LoopFilter_0:CenterFrequency","Controller:Mode:LoopFilters:LoopFilter_1:CenterFrequency","Controller:Mode:LoopFilters:LoopFilter_2:CenterFrequency"],Bandwidth:["Controller:Mode:LoopFilters:LoopFilter_0:Bandwidth","Controller:Mode:LoopFilters:LoopFilter_1:Bandwidth","Controller:Mode:LoopFilters:LoopFilter_2:Bandwidth"],FrequencyNumerator:["Controller:Mode:LoopFilters:LoopFilter_0:FrequencyNumerator","Controller:Mode:LoopFilters:LoopFilter_1:FrequencyNumerator","Controller:Mode:LoopFilters:LoopFilter_2:FrequencyNumerator"],DampingNumerator:["Controller:Mode:LoopFilters:LoopFilter_0:DampingNumerator","Controller:Mode:LoopFilters:LoopFilter_1:DampingNumerator","Controller:Mode:LoopFilters:LoopFilter_2:DampingNumerator"],FrequencyDenominator:["Controller:Mode:LoopFilters:LoopFilter_0:FrequencyDenominator","Controller:Mode:LoopFilters:LoopFilter_1:FrequencyDenominator","Controller:Mode:LoopFilters:LoopFilter_2:FrequencyDenominator"],DampingDenominator:["Controller:Mode:LoopFilters:LoopFilter_0:DampingDenominator","Controller:Mode:LoopFilters:LoopFilter_1:DampingDenominator","Controller:Mode:LoopFilters:LoopFilter_2:DampingDenominator"],A0:["DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_0:a0","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_1:a0","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_2:a0"],A1:["DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_0:a1","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_1:a1","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_2:a1"],B0:["DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_0:b0","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_1:b0","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_2:b0"],B1:["DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_0:b1","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_1:b1","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_2:b1"],B2:["DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_0:b2","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_1:b2","DiscreteTimeTransferFunction:Controller:Mode:LoopFilters:LoopFilter_2:b2"],PositiveLimitType:["Controller:Mode:LoopFilters:PositiveLimit_0:PositiveLimitType","Controller:Mode:LoopFilters:PositiveLimit_1:PositiveLimitType","Controller:Mode:LoopFilters:PositiveLimit_2:PositiveLimitType"],PositiveLimitParId:["Controller:Mode:LoopFilters:PositiveLimit_0:ParID","Controller:Mode:LoopFilters:PositiveLimit_1:ParID","Controller:Mode:LoopFilters:PositiveLimit_2:ParID"],PositiveLimitValue:["Controller:Mode:LoopFilters:PositiveLimit_0:Value","Controller:Mode:LoopFilters:PositiveLimit_1:Value","Controller:Mode:LoopFilters:PositiveLimit_2:Value"],NegativeLimitType:["Controller:Mode:LoopFilters:NegativeLimit_0:NegativeLimitType","Controller:Mode:LoopFilters:NegativeLimit_1:NegativeLimitType","Controller:Mode:LoopFilters:NegativeLimit_2:NegativeLimitType"],NegativeLimitParId:["Controller:Mode:LoopFilters:NegativeLimit_0:ParID","Controller:Mode:LoopFilters:NegativeLimit_1:ParID","Controller:Mode:LoopFilters:NegativeLimit_2:ParID"],NegativeLimitValue:["Controller:Mode:LoopFilters:NegativeLimit_0:Value","Controller:Mode:LoopFilters:NegativeLimit_1:Value","Controller:Mode:LoopFilters:NegativeLimit_2:Value"],InputParId:["Controller:Mode:LoopFilters:LoopFilter_0:InputParID","Controller:Mode:LoopFilters:LoopFilter_1:InputParID","Controller:Mode:LoopFilters:LoopFilter_2:InputParID"],InputLimit:["Controller:Mode:LoopFilters:LoopFilter_0:InputLimit","Controller:Mode:LoopFilters:LoopFilter_1:InputLimit","Controller:Mode:LoopFilters:LoopFilter_2:InputLimit"],Gradient:["Controller:Mode:LoopFilters:LoopFilter_0:Gradient","Controller:Mode:LoopFilters:LoopFilter_1:Gradient","Controller:Mode:LoopFilters:LoopFilter_2:Gradient"],RiseTime:["Controller:Mode:LoopFilters:LoopFilter_0:RiseTime","Controller:Mode:LoopFilters:LoopFilter_1:RiseTime","Controller:Mode:LoopFilters:LoopFilter_2:RiseTime"],NormalizedLimit:["Controller:Mode:LoopFilters:LoopFilter_0:NormalizedLimit","Controller:Mode:LoopFilters:LoopFilter_1:NormalizedLimit","Controller:Mode:LoopFilters:LoopFilter_2:NormalizedLimit"],MultiplicationFactorParId:["Controller:Mode:LoopFilters:LoopFilter_0:MultiplicationFactorParID","Controller:Mode:LoopFilters:LoopFilter_1:MultiplicationFactorParID","Controller:Mode:LoopFilters:LoopFilter_2:MultiplicationFactorParID"],AdditiveValueParId:["Controller:Mode:LoopFilters:LoopFilter_0:AdditiveValueParID","Controller:Mode:LoopFilters:LoopFilter_1:AdditiveValueParID","Controller:Mode:LoopFilters:LoopFilter_2:AdditiveValueParID"],LowerFrequencyLimit:["Controller:Mode:LoopFilters:LoopFilter_0:LowerFrequencyLimit","Controller:Mode:LoopFilters:LoopFilter_1:LowerFrequencyLimit","Controller:Mode:LoopFilters:LoopFilter_2:LowerFrequencyLimit"],UpperFrequencyLimit:["Controller:Mode:LoopFilters:LoopFilter_0:UpperFrequencyLimit","Controller:Mode:LoopFilters:LoopFilter_1:UpperFrequencyLimit","Controller:Mode:LoopFilters:LoopFilter_2:UpperFrequencyLimit"],AdaptionThreshold:["Controller:Mode:LoopFilters:LoopFilter_0:AdaptionThreshold","Controller:Mode:LoopFilters:LoopFilter_1:AdaptionThreshold","Controller:Mode:LoopFilters:LoopFilter_2:AdaptionThreshold"],CenterFrequencyParId:["Controller:Mode:LoopFilters:LoopFilter_0:CenterFrequencyParID","Controller:Mode:LoopFilters:LoopFilter_1:CenterFrequencyParID","Controller:Mode:LoopFilters:LoopFilter_2:CenterFrequencyParID"],BandwidthParId:["Controller:Mode:LoopFilters:LoopFilter_0:BandwidthParID","Controller:Mode:LoopFilters:LoopFilter_1:BandwidthParID","Controller:Mode:LoopFilters:LoopFilter_2:BandwidthParID"]};function Wd(a){const e=[];for(const t in X)e.push(X[t][a]);return e}function _i(a,e){const t=Je(a),i=q(),r=q(),n=q(),o=q(),s=q(),l=q(),d=q(),h=q(),p=q(),c=q(),m=q(),g=q(),y=q(),w=q(),v=q(),T=q(),C=q(),P=q(),R=q(),N=q(),D=q(),S=q(),x=q(),I=q(),E=q(),L=q(),z=q(),_=q(),G=q(),Q=q(),ie=q(),Z=e-1,U=Wd(Z);ft(async()=>{await t().initialize(),t().isInitialized&&Mt()}),De(()=>t().isInitialized,()=>Mt()),vt(()=>{for(const $ of U)t().unsubscribeValue($)});const ye=V(()=>{var $;return($=i.value)==null?void 0:$.Values.inputAsNumber()});De(ye,()=>{r.value&&(ye==null?void 0:ye.value)===oe.Lowpass2ndOrder&&r.value.Values.inputAsNumber()===0&&(r.value.Values.Input=1e3)});const Ge=V(()=>({frequency:we(r.value)})),je=V(()=>({frequency:we(n.value),bandwidth:we(o.value)})),be=V(()=>({frequencyNumerator:we(s.value),dampingNumerator:we(l.value),frequencyDenominator:we(d.value),dampingDenominator:we(h.value)})),Ee=V(()=>({coefficientA0:we(p.value),coefficientA1:we(c.value),coefficientB0:we(m.value),coefficientB1:we(g.value),coefficientB2:we(y.value)})),Fe=V(()=>({positiveLimitType:we(w.value),positiveLimitParId:we(v.value),positiveLimitValue:we(T.value),negativeLimitType:we(C.value),negativeLimitParId:we(P.value),negativeLimitValue:we(R.value)})),Qe=q(0);let st=!0;De(()=>{var $,Be,Re,ht,rt,Pt,Vt,Bt,Ri,rn,nn,on,an,sn,ln,dn,hn,pn,cn,un,gn,fn,vn,mn,yn,bn,wn,Sn,xn,Cn,In;return[($=i.value)==null?void 0:$.Values.inputChangeCount(),(Be=r.value)==null?void 0:Be.Values.inputChangeCount(),(Re=n.value)==null?void 0:Re.Values.inputChangeCount(),(ht=o.value)==null?void 0:ht.Values.inputChangeCount(),(rt=s.value)==null?void 0:rt.Values.inputChangeCount(),(Pt=l.value)==null?void 0:Pt.Values.inputChangeCount(),(Vt=d.value)==null?void 0:Vt.Values.inputChangeCount(),(Bt=h.value)==null?void 0:Bt.Values.inputChangeCount(),(Ri=p.value)==null?void 0:Ri.Values.inputChangeCount(),(rn=c.value)==null?void 0:rn.Values.inputChangeCount(),(nn=m.value)==null?void 0:nn.Values.inputChangeCount(),(on=g.value)==null?void 0:on.Values.inputChangeCount(),(an=y.value)==null?void 0:an.Values.inputChangeCount(),(sn=w.value)==null?void 0:sn.Values.inputChangeCount(),(ln=v.value)==null?void 0:ln.Values.inputChangeCount(),(dn=T.value)==null?void 0:dn.Values.inputChangeCount(),(hn=C.value)==null?void 0:hn.Values.inputChangeCount(),(pn=P.value)==null?void 0:pn.Values.inputChangeCount(),(cn=R.value)==null?void 0:cn.Values.inputChangeCount(),(un=N.value)==null?void 0:un.Values.inputChangeCount(),(gn=D.value)==null?void 0:gn.Values.inputChangeCount(),(fn=S.value)==null?void 0:fn.Values.inputChangeCount(),(vn=x.value)==null?void 0:vn.Values.inputChangeCount(),(mn=I.value)==null?void 0:mn.Values.inputChangeCount(),(yn=E.value)==null?void 0:yn.Values.inputChangeCount(),(bn=L.value)==null?void 0:bn.Values.inputChangeCount(),(wn=z.value)==null?void 0:wn.Values.inputChangeCount(),(Sn=_.value)==null?void 0:Sn.Values.inputChangeCount(),(xn=G.value)==null?void 0:xn.Values.inputChangeCount(),(Cn=Q.value)==null?void 0:Cn.Values.inputChangeCount(),(In=ie.value)==null?void 0:In.Values.inputChangeCount()]},()=>{if(st){st=!1;return}Qe.value++});const Zt=V(()=>{const $=[];switch($.push(i.value),ye.value){case oe.Lowpass2ndOrder:$.push(r.value);break;case oe.Notch:$.push(n.value),$.push(o.value);break;case oe.Biquad:$.push(s.value),$.push(l.value),$.push(d.value),$.push(h.value);break;case oe.DiscreteTimeTransferFunction:$.push(p.value),$.push(c.value),$.push(m.value),$.push(g.value),$.push(y.value);break;case oe.Limiter:$.push(w.value),$.push(v.value),$.push(T.value),$.push(C.value),$.push(P.value),$.push(R.value);break;case oe.LinearLimitation:$.push(N.value),$.push(D.value),$.push(S.value);break;case oe.RiseTimeLimitation:$.push(x.value),$.push(I.value);break;case oe.Compensation:$.push(E.value),$.push(L.value);break;case oe.AdaptiveNotch:$.push(n.value),$.push(o.value),$.push(z.value),$.push(_.value),$.push(G.value);break;case oe.VariableControlledNotch:$.push(Q.value),$.push(ie.value);break}return K($)});function Mt(){for(const $ of U)t().subscribeValue($);i.value=de(X.LoopFilterType[Z]),r.value=de(X.CutOffFrequency[Z]),n.value=de(X.CenterFrequency[Z]),o.value=de(X.Bandwidth[Z]),s.value=de(X.FrequencyNumerator[Z]),l.value=de(X.DampingNumerator[Z]),d.value=de(X.FrequencyDenominator[Z]),h.value=de(X.DampingDenominator[Z]),p.value=de(X.A0[Z]),c.value=de(X.A1[Z]),m.value=de(X.B0[Z]),g.value=de(X.B1[Z]),y.value=de(X.B2[Z]),w.value=de(X.PositiveLimitType[Z]),v.value=de(X.PositiveLimitParId[Z]),T.value=de(X.PositiveLimitValue[Z]),C.value=de(X.NegativeLimitType[Z]),P.value=de(X.NegativeLimitParId[Z]),R.value=de(X.NegativeLimitValue[Z]),N.value=de(X.InputParId[Z]),D.value=de(X.InputLimit[Z]),S.value=de(X.Gradient[Z]),x.value=de(X.RiseTime[Z]),I.value=de(X.NormalizedLimit[Z]),E.value=de(X.MultiplicationFactorParId[Z]),L.value=de(X.AdditiveValueParId[Z]),z.value=de(X.LowerFrequencyLimit[Z]),_.value=de(X.UpperFrequencyLimit[Z]),G.value=de(X.AdaptionThreshold[Z]),Q.value=de(X.CenterFrequencyParId[Z]),ie.value=de(X.BandwidthParId[Z])}function lt(){t().writeToPLC(U)}function dt(){t().clear(U)}function de($){return t().Data.get($)}function we($){return $?$.Values.inputAsNumber():0}function K($){let Be=!1;return $.forEach(Re=>{if(Re!=null&&Re.Values.isParametrizationValueDifferentToInput()){Be=!0;return}}),Be}return{loopFilterType:ye,lowpassSettings:Ge,notchSettings:je,biquadSettings:be,discreteTimeTransferFunctionSettings:Ee,limiterSettings:Fe,anyFilterChanged:Zt,anyInputChangedCount:Qe,applyFilterSettings:lt,clearFilterSettings:dt}}const Xd={class:"container"},Yd={class:"container-item"},Zd={key:0},Qd={key:1},Kd={key:2},Jd={key:3},eh={key:4},th={key:5},ih={key:6},rh={key:7},nh={key:8},oh={key:9},ah={class:"container-item"},sh=me({__name:"LoopFilterSettings",props:{componentid:{},filter:{}},emits:["close","changeFilterIndex"],setup(a){const e=a,t=V(()=>e.filter-1),i=V(()=>(r==null?void 0:r.value)===oe.Lowpass2ndOrder||(r==null?void 0:r.value)===oe.Notch||(r==null?void 0:r.value)===oe.Biquad||(r==null?void 0:r.value)===oe.DiscreteTimeTransferFunction||(r==null?void 0:r.value)===oe.AdaptiveNotch),{loopFilterType:r,lowpassSettings:n,notchSettings:o,biquadSettings:s,discreteTimeTransferFunctionSettings:l,limiterSettings:d,anyFilterChanged:h,applyFilterSettings:p,clearFilterSettings:c}=_i(e.componentid,e.filter);return(m,g)=>(M(),O("div",null,[k(f(Va),{mode:"Dense","color-mode":"Light"},{default:re(()=>[b("span",{class:ke(["tab-select",{active:e.filter===1}]),key:"1"},[k(f(qe),{"css-class":"e-inherit e-appbar-menu e-small",onClick:g[0]||(g[0]=y=>m.$emit("changeFilterIndex",1))},{default:re(()=>g[4]||(g[4]=[b("span",null,"Loop filter 1",-1)])),_:1})],2),b("span",{class:ke(["tab-select",{active:e.filter===2}]),key:"2"},[k(f(qe),{"css-class":"e-inherit e-appbar-menu e-small",onClick:g[1]||(g[1]=y=>m.$emit("changeFilterIndex",2))},{default:re(()=>g[5]||(g[5]=[b("span",null,"Loop filter 2",-1)])),_:1})],2),b("span",{class:ke(["tab-select",{active:e.filter===3}]),key:"3"},[k(f(qe),{"css-class":"e-inherit e-appbar-menu e-small",onClick:g[2]||(g[2]=y=>m.$emit("changeFilterIndex",3))},{default:re(()=>g[6]||(g[6]=[b("span",null,"Loop filter 3",-1)])),_:1})],2),g[7]||(g[7]=b("div",{class:"e-appbar-spacer"},null,-1)),k(f(qe),{"css-class":"e-inherit e-appbar-menu","icon-css":"icon-exit",title:f(W).buttonTitleCloseLoopFilterSettings,onClick:g[3]||(g[3]=y=>m.$emit("close"))},null,8,["title"])]),_:1}),b("div",Xd,[b("div",Yd,[k(Wt,{title:"",width:"450",height:"200",modified:f(h),onApply:f(p),onClear:f(c)},{default:re(()=>[k(H,{componentid:e.componentid,reference:f(X).LoopFilterType[t.value],left:10,top:10,width:"270","disable-apply":!0},null,8,["componentid","reference"]),f(r)===f(oe).Lowpass2ndOrder?(M(),O("div",Zd,[k(H,{componentid:e.componentid,reference:f(X).CutOffFrequency[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).Notch?(M(),O("div",Qd,[k(H,{componentid:e.componentid,reference:f(X).CenterFrequency[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).Bandwidth[t.value],left:160,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).Biquad?(M(),O("div",Kd,[k(H,{componentid:e.componentid,reference:f(X).FrequencyNumerator[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).DampingNumerator[t.value],left:160,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).FrequencyDenominator[t.value],left:10,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).DampingDenominator[t.value],left:160,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).DiscreteTimeTransferFunction?(M(),O("div",Jd,[g[8]||(g[8]=b("svg",{width:"400",height:"330",version:"1.1"},[b("g",null,[b("text",{x:"5",y:"110"},"H(z)="),b("text",{x:"120",y:"85"},"+"),b("text",{x:"200",y:"85"},"z"),b("text",{x:"215",y:"85"},"+"),b("text",{x:"295",y:"85"},"z"),b("text",{x:"155",y:"155"},"+"),b("text",{x:"235",y:"155"},"z"),b("text",{x:"255",y:"155"},"+"),b("text",{x:"275",y:"155"},"z"),b("line",{x1:"50",y1:"105",x2:"305",y2:"105",stroke:"black"})])],-1)),k(H,{componentid:e.componentid,reference:f(X).B0[t.value],left:65,top:80,width:"50","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).B1[t.value],left:150,top:80,width:"50","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).B2[t.value],left:245,top:80,width:"50","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).A0[t.value],left:100,top:150,width:"50","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).A1[t.value],left:185,top:150,width:"50","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).Limiter?(M(),O("div",eh,[k(H,{componentid:e.componentid,reference:f(X).PositiveLimitType[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),f(d).positiveLimitType==f(Mi).UseAcpParId?(M(),ee(H,{key:0,componentid:e.componentid,reference:f(X).PositiveLimitParId[t.value],left:160,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"])):B("",!0),f(d).positiveLimitType==f(Mi).UseFixedValue?(M(),ee(H,{key:1,componentid:e.componentid,reference:f(X).PositiveLimitValue[t.value],left:160,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"])):B("",!0),k(H,{componentid:e.componentid,reference:f(X).NegativeLimitType[t.value],left:10,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"]),f(d).negativeLimitType==f(Mi).UseAcpParId?(M(),ee(H,{key:2,componentid:e.componentid,reference:f(X).NegativeLimitParId[t.value],left:160,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])):B("",!0),f(d).negativeLimitType==f(Mi).UseFixedValue?(M(),ee(H,{key:3,componentid:e.componentid,reference:f(X).NegativeLimitValue[t.value],left:160,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])):B("",!0)])):B("",!0),f(r)===f(oe).LinearLimitation?(M(),O("div",th,[k(H,{componentid:e.componentid,reference:f(X).InputParId[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).InputLimit[t.value],left:10,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).Gradient[t.value],left:160,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).RiseTimeLimitation?(M(),O("div",ih,[k(H,{componentid:e.componentid,reference:f(X).RiseTime[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).NormalizedLimit[t.value],left:10,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).Compensation?(M(),O("div",rh,[k(H,{componentid:e.componentid,reference:f(X).MultiplicationFactorParId[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).AdditiveValueParId[t.value],left:10,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).AdaptiveNotch?(M(),O("div",nh,[k(H,{componentid:e.componentid,reference:f(X).CenterFrequency[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).Bandwidth[t.value],left:160,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).LowerFrequencyLimit[t.value],left:10,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).LowerFrequencyLimit[t.value],left:160,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).AdaptionThreshold[t.value],left:310,top:150,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0),f(r)===f(oe).VariableControlledNotch?(M(),O("div",oh,[k(H,{componentid:e.componentid,reference:f(X).CenterFrequencyParId[t.value],left:10,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"]),k(H,{componentid:e.componentid,reference:f(X).BandwidthParId[t.value],left:160,top:80,width:"120","disable-apply":!0},null,8,["componentid","reference"])])):B("",!0)]),_:1},8,["modified","onApply","onClear"])]),b("div",ah,[f(r)&&i.value?(M(),ee(Ud,{key:0,"filter-type":f(r),"parameter-lowpass":f(n),"parameter-notch":f(o),"parameter-biquad":f(s),"parameter-discrete-time-transfer-function":f(l)},null,8,["filter-type","parameter-lowpass","parameter-notch","parameter-biquad","parameter-discrete-time-transfer-function"])):B("",!0)])])]))}}),lh=He(sh,[["__scopeId","data-v-81162e5b"]]);function aa(a,e=!1){const t=Je(a),i=q(),r=q(),n=q(),o=q(),s=q(),l=q(),d=q(),h=q(),p=q(),c=["Controller:Mode:ModeType","Controller:Mode:Speed:ProportionalGain","Controller:Mode:Speed:FilterTime","Controller:Mode:Speed:IntegrationTime","Controller:Mode:Feedback:FeedbackType","Controller:Mode:Feedback:SpeedMixFactor","Controller:Mode:LoopFilters:LoopFilter_0:LoopFilterType","Controller:Mode:LoopFilters:LoopFilter_1:LoopFilterType","Controller:Mode:LoopFilters:LoopFilter_2:LoopFilterType"];ft(async()=>{await t().initialize(),t().isInitialized&&m()}),De(()=>{var U;return(U=i.value)==null?void 0:U.Values.inputAsNumber()},U=>{s.value&&U!=Ve.PositionControllerModelBased&&(s.value.Values.Input=St.Standard)}),vt(()=>{for(const U of c)t().unsubscribeValue(U)});function m(){for(const U of c)t().subscribeValue(U);r.value=g("Controller:Mode:Speed:ProportionalGain"),n.value=g("Controller:Mode:Speed:FilterTime"),o.value=g("Controller:Mode:Speed:IntegrationTime"),i.value=g("Controller:Mode:ModeType"),s.value=g("Controller:Mode:Feedback:FeedbackType"),l.value=g("Controller:Mode:Feedback:SpeedMixFactor"),d.value=g("Controller:Mode:LoopFilters:LoopFilter_0:LoopFilterType"),h.value=g("Controller:Mode:LoopFilters:LoopFilter_1:LoopFilterType"),p.value=g("Controller:Mode:LoopFilters:LoopFilter_2:LoopFilterType")}function g(U){return t().Data.get(U)}function y(U){return U?U.Values.inputAsNumber():0}const w=V(()=>{var U;return(U=i.value)==null?void 0:U.Values.inputAsNumber()}),v=V(()=>{var U;return(U=r.value)==null?void 0:U.Values.inputAsNumber()}),T=V(()=>{var U;return(U=n.value)==null?void 0:U.Values.inputAsNumber()}),C=V(()=>({proportionalGain:y(r.value),integrationTime:y(o.value),filterTime:y(n.value)})),P=V(()=>{var U;return(U=o.value)==null?void 0:U.Values.inputAsNumber()}),R=V(()=>{var U;return(U=s.value)==null?void 0:U.Values.inputAsNumber()}),N=V(()=>l.value?l.value.Values.inputAsNumber():0),D=V(()=>o.value?o.value.Values.inputAsNumber()>0:!1),S=V(()=>{var U,ye;return((U=i.value)==null?void 0:U.Values.inputAsNumber())===Ve.PositionControllerTorqueFf||((ye=i.value)==null?void 0:ye.Values.inputAsNumber())==Ve.PositionControllerModelBased}),x=V(()=>{var U;return((U=i.value)==null?void 0:U.Values.inputAsNumber())===Ve.VoltageFrequencyControl}),I=V(()=>{var U;return((U=d.value)==null?void 0:U.Values.inputAsNumber())!==oe.NotUsed}),E=V(()=>{var U;return((U=h.value)==null?void 0:U.Values.inputAsNumber())!==oe.NotUsed}),L=V(()=>{var U;return((U=p.value)==null?void 0:U.Values.inputAsNumber())!==oe.NotUsed}),z=[];z.push(r.value),z.push(n.value),z.push(o.value),z.push(i.value),z.push(s.value),z.push(l.value),z.push(d.value),z.push(h.value),z.push(p.value);const _=q(0);let G=!0;De(()=>{var U,ye,Ge,je,be,Ee,Fe,Qe;return[(U=n.value)==null?void 0:U.Values.inputChangeCount(),(ye=o.value)==null?void 0:ye.Values.inputChangeCount(),(Ge=i.value)==null?void 0:Ge.Values.inputChangeCount(),(je=s.value)==null?void 0:je.Values.inputChangeCount(),(be=l.value)==null?void 0:be.Values.inputChangeCount(),(Ee=d.value)==null?void 0:Ee.Values.inputChangeCount(),(Fe=h.value)==null?void 0:Fe.Values.inputChangeCount(),(Qe=p.value)==null?void 0:Qe.Values.inputChangeCount()]},()=>{if(G){G=!1;return}_.value++});const Q=q(0);let ie=!0;De(()=>{var U;return[(U=r.value)==null?void 0:U.Values.inputChangeCount()]},()=>{if(ie){ie=!1;return}e||_.value++,Q.value++});const Z=V(()=>{let U=!1;return z.forEach(ye=>{if(ye!=null&&ye.Values.isParametrizationValueDifferentToInput()){U=!0;return}}),U});return{speedControllerSettings:C,anySettingChanged:Z,anyInputChangedCount:_,proportionalGainChangedCount:Q,proportionalGain:v,filterTime:T,integrationTime:P,controllerMode:w,feedback:R,integrationPartUsed:D,feedForwardCurrentUsed:S,mixFactor:N,voltageFrequencyControl:x,loopFilter1Used:I,loopFilter2Used:E,loopFilter3Used:L}}const dh=me({__name:"LoopOptimizerButton",props:{width:{},opened:{type:Boolean}},emits:["open","close"],setup(a){return Wr(e=>({"7770ac5f":e.width})),(e,t)=>(M(),ee(f(qe),{title:e.opened?f(W).buttonTitleHideLoopOptimizer:f(W).buttonTitleShowLoopOptimizer,"css-class":"e-primary e-small btn-slo","icon-css":e.opened?"e-icons e-chevron-down":"e-icons e-chevron-up","icon-position":"Right",onClick:t[0]||(t[0]=i=>e.opened?e.$emit("close"):e.$emit("open"))},{default:re(()=>[vi(Y(f(W).loopOptimizer),1)]),_:1},8,["title","icon-css"]))}}),Rt=He(dh,[["__scopeId","data-v-1a941d1d"]]);var sa=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hh=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Or=function(){function a(e){this.allowEditing=!0,this.edit={},this.disableHtmlEncode=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.allowFiltering=!0,this.allowSorting=!0,this.allowResizing=!0,this.filter={},Ao(this,e)}return a.prototype.setProperties=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)if(this[t[parseInt(i.toString(),10)]]=e[t[parseInt(i.toString(),10)]],this.parent&&this.parent.isReact&&t[parseInt(i.toString(),10)]==="template"){var r="refreshReactColumnTemplateByUid";this.parent.clipboardModule.treeGridParent.renderModule[""+r](this.uid)}},a}(),ph=function(a){sa(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return hh([A(null)],e.prototype,"columns",void 0),e}(Or);(function(a){sa(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(ph);var ch=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uh=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},gh=function(a){ch(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return uh([A("Spinner")],e.prototype,"indicatorType",void 0),e}(Ze),la=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pe=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},fh=function(a){la(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Pe([A()],e.prototype,"field",void 0),Pe([A()],e.prototype,"operator",void 0),Pe([A()],e.prototype,"value",void 0),Pe([A()],e.prototype,"matchCase",void 0),Pe([A()],e.prototype,"ignoreAccent",void 0),Pe([A()],e.prototype,"predicate",void 0),Pe([A({})],e.prototype,"actualFilterValue",void 0),Pe([A({})],e.prototype,"actualOperator",void 0),Pe([A()],e.prototype,"type",void 0),Pe([A()],e.prototype,"ejpredicate",void 0),Pe([A()],e.prototype,"uid",void 0),Pe([A()],e.prototype,"isForeignKey",void 0),e}(Ze),vh=function(a){la(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Pe([or([],fh)],e.prototype,"columns",void 0),Pe([A("FilterBar")],e.prototype,"type",void 0),Pe([A()],e.prototype,"mode",void 0),Pe([A(!0)],e.prototype,"showFilterBarStatus",void 0),Pe([A(1500)],e.prototype,"immediateModeDelay",void 0),Pe([A()],e.prototype,"operators",void 0),Pe([A(!1)],e.prototype,"ignoreAccent",void 0),Pe([A("Parent")],e.prototype,"hierarchyMode",void 0),e}(Ze),mh=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yh=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},bh=function(a){mh(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return yh([A("Both")],e.prototype,"wrapMode",void 0),e}(Ze),wh=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ai="https://ej2.syncfusion.com/documentation/treegrid",zi="https://ej2.syncfusion.com/documentation",Sh="[EJ2TreeGrid.Error]",xr=!1,oo=function(a){wh(e,a);function e(t){var i=this;return Dt.Inject(Fr),i=a.call(this,t)||this,i}return e.prototype.getModuleName=function(){return"logger"},e.prototype.log=function(t,i){t instanceof Array||(t=[t]);for(var r=t,n=0;n<r.length;n++){var o=Ba[r[parseInt(n.toString(),10)]],s=o.check(i,this.parent);if(s.success){var l=o.generateMessage(i,this.parent,s.options);l=l.replace("EJ2Grid","EJ2TreeGrid").replace("* Hierarchy Grid","").replace("* Grouping",""),xr&&r[parseInt(n.toString(),10)]==="primary_column_missing"&&(l=l.replace("Editing","Row DragAndDrop"),xr=!1);var d=l.indexOf("https"),h=l.substring(d);r[parseInt(n.toString(),10)]==="module_missing"?l=l.replace(h,ai+"/modules"):r[parseInt(n.toString(),10)]==="primary_column_missing"||r[parseInt(n.toString(),10)]==="selection_key_missing"?l=l.replace(h,zi+"/api/treegrid/column/#isprimarykey"):r[parseInt(n.toString(),10)]==="grid_remote_edit"?l=l.replace(h,ai+"/edit"):r[parseInt(n.toString(),10)]==="virtual_height"?l=l.replace(h,ai+"/virtual"):r[parseInt(n.toString(),10)]==="check_datasource_columns"?l=l.replace(h,ai+"/columns"):r[parseInt(n.toString(),10)]==="locale_missing"&&(l=l.replace(h,ai+"/global-local/#localization")),r[parseInt(n.toString(),10)]==="datasource_syntax_mismatch"?!u(this.treeGridObj)&&!u(this.treeGridObj.dataStateChange)&&console[o.logType](l):console[o.logType](l)}}},e.prototype.treeLog=function(t,i,r){this.treeGridObj=r,t instanceof Array||(t=[t]);var n=t;r.allowRowDragAndDrop&&!r.columns.filter(function(h){return h.isPrimaryKey}).length&&(xr=!0,this.log("primary_column_missing",i));for(var o=0;o<n.length;o++){var s=xh[n[parseInt(o.toString(),10)]],l=s.check(i,r);if(l.success){var d=s.generateMessage(i,r,l.options);console[s.logType](d)}}},e}(Fr),xh={mapping_fields_missing:{type:"mapping_fields_missing",logType:"error",check:function(a,e){var t={success:!1};return(u(e.idMapping)&&u(e.childMapping)&&u(e.parentIdMapping)||!u(e.idMapping)&&u(e.parentIdMapping)||u(e.idMapping)&&!u(e.parentIdMapping))&&(t={success:!0}),t},generateMessage:function(){return Sh+`: MAPPING FIELDS MISSING 
One of the following fields is missing. It is required for the hierarchical relationship of records in TreeGrid:
* childMapping
* idMapping
* parentIdMapping
Refer to the following documentation links for more details.
`+(zi+"/api/treegrid#childmapping")+`
`+(zi+"/api/treegrid#idmapping")+`
`+(zi+"/api/treegrid#$parentidmapping")}}},Ch="load",Vr="rowDataBound",Ih="dataBound",qi="queryCellInfo",da="beforeDataBound",Br="actionBegin",ao="dataStateChange",wi="actionComplete",Rh="rowSelecting",so="rowSelected",ha="checkboxChange",lo="rowDeselected",ho="toolbarClick",Mh="resizeStop",hi="expanded",po="expanding",Cr="collapsed",co="collapsing",_r="remoteExpand",zr="localPagedExpandCollapse",Xi="pagingActions",uo="printGrid-Init",go="contextMenuOpen",fo="contextMenuClick",Ph="beforeCopy",Th="beforePaste",qr="crudAction",Yi="beginEdit",Zi="beginAdd",Qi="recordDoubleClick",Nr="cellSave",Ki="cellSaved",Ni="cellEdit",vo="batchDelete",Ji="batchCancel",er="batchAdd",tr="beforeBatchDelete",ir="beforeBatchAdd",rr="beforeBatchSave",Si="batchSave",mo="key-pressed",yo="double-tap",bo="edit-form",wo="before-batch-cancel",Ah="detailDataBound",kh="rowDrag",Fh="rowDragStartHelper",Lh="rowDragStart",Dh="row-draging",Eh="row-dropped",Oh="rowDeselecting",Vh="e-movablecontent",Bh="e-frozencontent",Ie="actionFailure",_h=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zh=function(a){_h(e,a);function e(t,i){var r=a.call(this,t.grid,i)||this;return r.treeCopyContent="",r.copiedUniqueIdCollection=[],r.treeGridParent=t,r.serviceLocator=i,r}return e.prototype.setCopyData=function(t){var i="copyContent",r="getCopyData",n="isSelect",o="uniqueID",s=this.treeGridParent.getCurrentViewRecords();if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this[""+i]="";var l=this.treeGridParent.grid.getRows();if(this.treeGridParent.selectionSettings.mode!=="Cell"){for(var d=this.treeGridParent.getSelectedRowIndexes().sort(function(y,w){return y-w}),h=0;h<d.length;h++)if(h>0&&(this.treeCopyContent+=`
`),!l[d[parseInt(h.toString(),10)]].classList.contains("e-summaryrow")){var p=[].slice.call(l[d[parseInt(h.toString(),10)]].querySelectorAll(".e-rowcell")),c=this.treeGridParent.getSelectedRecords()[parseInt(h.toString(),10)][""+o];this.copiedUniqueIdCollection.indexOf(c)===-1&&((this.treeGridParent.copyHierarchyMode==="Parent"||this.treeGridParent.copyHierarchyMode==="Both")&&this.parentContentData(s,d[parseInt(h.toString(),10)],l,t,h),this[""+r](p,!1,"	",t),this.treeCopyContent+=this[""+i],this.copiedUniqueIdCollection.push(c),this[""+i]="",(this.treeGridParent.copyHierarchyMode==="Child"||this.treeGridParent.copyHierarchyMode==="Both")&&this.childContentData(s,d[parseInt(h.toString(),10)],l,t))}if(t){for(var m=[],h=0;h<this.treeGridParent.getVisibleColumns().length;h++)m[parseInt(h.toString(),10)]=this.treeGridParent.getVisibleColumns()[parseInt(h.toString(),10)].headerText;this[""+r](m,!1,"	",t),this.treeCopyContent=this[""+i]+`
`+this.treeCopyContent}var g={data:this.treeCopyContent,cancel:!1};if(this.treeGridParent.trigger(Ph,g),g.cancel)return;this.clipBoardTextArea.value=this[""+i]=g.data,Ae.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this[""+n]=!0,this.copiedUniqueIdCollection=[],this.treeCopyContent=""}else a.prototype.setCopyData.call(this,t)}},e.prototype.parentContentData=function(t,i,r,n,o){var s="getCopyData",l="copyContent",d="parentItem",h="uniqueID",p="level";if(!u(t[parseInt(i.toString(),10)][""+d])){for(var c=t[parseInt(i.toString(),10)][""+d][""+p],m=0;m<c+1;m++)for(var g=0;g<t.length;g++)if(!u(t[parseInt(i.toString(),10)][""+d])&&t[parseInt(g.toString(),10)][""+h]===t[parseInt(i.toString(),10)][""+d][""+h]){i=g;var y=[].slice.call(r[parseInt(i.toString(),10)].querySelectorAll(".e-rowcell")),w=t[parseInt(g.toString(),10)][""+h];if(this.copiedUniqueIdCollection.indexOf(w)===-1){this[""+s](y,!1,"	",n),o>0?this.treeCopyContent=this.treeCopyContent+this[""+l]+`
`:this.treeCopyContent=this[""+l]+`
`+this.treeCopyContent,this.copiedUniqueIdCollection.push(w),this[""+l]="";break}}}},e.prototype.copy=function(t){a.prototype.copy.call(this,t)},e.prototype.paste=function(t,i,r){a.prototype.paste.call(this,t,i,r)},e.prototype.getModuleName=function(){return"clipboard"},e.prototype.destroy=function(){a.prototype.destroy.call(this)},e.prototype.childContentData=function(t,i,r,n){var o="getCopyData",s="copyContent",l="childRecords",d="hasChildRecords",h="uniqueID";if(t[parseInt(i.toString(),10)][""+d]){for(var p=t[parseInt(i.toString(),10)][""+l],c=0;c<p.length;c++)for(var m=0;m<t.length;m++)if(!u(p[parseInt(c.toString(),10)][""+h])&&t[parseInt(m.toString(),10)][""+h]===p[parseInt(c.toString(),10)][""+h]){if(!u(r[parseInt(m.toString(),10)])&&!r[parseInt(m.toString(),10)].classList.contains("e-summaryrow")){var g=[].slice.call(r[parseInt(m.toString(),10)].querySelectorAll(".e-rowcell")),y=t[parseInt(m.toString(),10)][""+h];this.copiedUniqueIdCollection.indexOf(y)===-1&&(this[""+o](g,!1,"	",n),this.treeCopyContent+=`
`+this[""+s],this[""+s]="",this.copiedUniqueIdCollection.push(y),this.childContentData(t,m,r,n))}break}}},e}(_a);function J(a){if(a.dataSource instanceof he){var e=a.dataSource.adaptor;return e instanceof za||e instanceof qa||e instanceof Na||e instanceof Ha||e instanceof ko}return!1}function ce(a){return!!(a.dataSource&&"result"in a.dataSource)}function qh(a){for(var e=0;e<a.columns.length;e++)if(a.columns[parseInt(e.toString(),10)].showCheckbox)return!0;return!1}function pa(a){return!!(!u(a.grid.searchSettings.key)&&a.grid.searchSettings.key!==""&&(a.searchSettings.hierarchyMode==="Child"||a.searchSettings.hierarchyMode==="None")||a.allowFiltering&&a.grid.filterSettings.columns.length&&(a.filterSettings.hierarchyMode==="Child"||a.filterSettings.hierarchyMode==="None"))}function Et(a,e,t){var i=u(e.parentItem)?null:it(a,e.parentItem.uniqueID),r;return i!=null?a.initialRender&&!u(i[a.expandStateMapping])&&!i[a.expandStateMapping]?(i.expanded=!1,!1):i.expanded===!1?!1:i.parentItem?(r=it(a,i.parentItem.uniqueID),r&&a.initialRender&&!u(r[a.expandStateMapping])&&!r[a.expandStateMapping]?(r.expanded=!1,!1):r&&r.expanded===!1?!1:r?Et(a,r):!0):!0:!0}function Te(a){var e=[];if(u(a)||!a.hasChildRecords&&!u(a.childRecords)&&!a.childRecords.length)return[];if(!u(a.childRecords))for(var t=a.childRecords.filter(function(o){return!o.isSummaryRow}),i=Object.keys(t),r=0,n=i.length;r<n;r++)e.push(t[parseInt(r.toString(),10)]),(t[parseInt(r.toString(),10)].hasChildRecords||!u(t[parseInt(r.toString(),10)].childRecords)&&t[parseInt(r.toString(),10)].childRecords.length)&&(e=e.concat(Te(t[parseInt(r.toString(),10)])));return e}function ut(a){if(J(a)){var e=a.dataSource;return!u(e.ready)}return!0}function We(a){for(var e=[],t,i,r=0;a&&r<a.length;r++){i=Object.keys(a[parseInt(r.toString(),10)]),t={};for(var n=0;n<i.length;n++)t[i[parseInt(n.toString(),10)]]=a[parseInt(r.toString(),10)][i[parseInt(n.toString(),10)]];e.push(t)}return e}function si(a){return delete a.hasChildRecords,delete a.childRecords,delete a.index,delete a.parentItem,delete a.level,delete a.taskData,delete a.uniqueID,a}function it(a,e,t){{var i="uniqueIDCollection";return a[""+i][""+e]}}function So(a){var e=window.getComputedStyle(a);return e.display==="none"||e.visibility==="hidden"}var Nh=function(){function a(e){this.parent=e,this.selectedItems=[],this.selectedIndexes=[],this.filteredList=[],this.searchingRecords=[],this.addEventListener()}return a.prototype.getModuleName=function(){return"selection"},a.prototype.addEventListener=function(){this.parent.on("dataBoundArg",this.headerCheckbox,this),this.parent.on("columnCheckbox",this.columnCheckbox,this),this.parent.on("updateGridActions",this.updateGridActions,this),this.parent.grid.on("colgroup-refresh",this.headerCheckbox,this),this.parent.on("checkboxSelection",this.checkboxSelection,this)},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("dataBoundArg",this.headerCheckbox),this.parent.off("columnCheckbox",this.columnCheckbox),this.parent.grid.off("colgroup-refresh",this.headerCheckbox),this.parent.off("checkboxSelection",this.checkboxSelection),this.parent.off("updateGridActions",this.updateGridActions))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.checkboxSelection=function(e){var t,i=ae("target",e),r=Xt(i,"e-checkbox-wrapper"),n;if(r&&r.querySelectorAll(".e-treecheckselect").length>0){n=r.querySelector('input[type="checkbox"]');var o=[];o.push(i.closest("tr").rowIndex),this.selectCheckboxes(o),this.triggerChkChangeEvent(n,n.nextElementSibling.classList.contains("e-check"),i.closest("tr"))}else if(r&&r.querySelectorAll(".e-treeselectall").length>0&&this.parent.autoCheckHierarchy){var s=!r.querySelector(".e-frame").classList.contains("e-check")&&!r.querySelector(".e-frame").classList.contains("e-stop");this.headerSelection(s),n=r.querySelector('input[type="checkbox"]'),this.triggerChkChangeEvent(n,s,i.closest("tr"))}!u(this.parent.parentQuery)&&this.parent.selectionSettings.persistSelection&&this.parent.columnModel.filter(function(l){return l.type==="checkbox"}).length>0&&J(this.parent)&&this.parent.parentQuery.length>0&&((t=this.parent.query.queries).push.apply(t,this.parent.parentQuery),this.parent.parentQuery=[])},a.prototype.triggerChkChangeEvent=function(e,t,i){var r=this.parent.getCurrentViewRecords()[i.rowIndex],n={checked:t,target:e,rowElement:i,rowData:e.classList.contains("e-treeselectall")?this.parent.getCheckedRecords():r};this.parent.trigger(ha,n)},a.prototype.getCheckboxcolumnIndex=function(){for(var e,t,i="stackedHeader",r="columnModel",n=this.parent[""+i]?this.parent[""+r]:this.parent.columns,o=0;o<n.length;o++)n[parseInt(o.toString(),10)].showCheckbox&&(e=n[parseInt(o.toString(),10)].uid);for(var s=this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv").length,l=0;l<s;l++){var d=this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv")[parseInt(l.toString(),10)];d.getAttribute("e-mappinguid")===e&&(t=l)}return t},a.prototype.headerCheckbox=function(){if(this.columnIndex=this.getCheckboxcolumnIndex(),this.columnIndex>-1&&this.parent.getHeaderContent().querySelectorAll(".e-treeselectall").length===0){var e=this.parent.getHeaderContent().querySelectorAll(".e-headercelldiv")[this.columnIndex],t=!1,i=this.parent.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}}),r=Dn(this.parent.createElement,!1,{checked:t,label:" "});r.classList.add("e-hierarchycheckbox"),r.insertBefore(i.cloneNode(),r.firstChild),u(e)||e.insertBefore(r,e.firstChild),this.parent.autoCheckHierarchy&&this.headerSelection()}else if(this.columnIndex>-1&&this.parent.getHeaderContent().querySelectorAll(".e-treeselectall").length>0){var r=this.parent.getHeaderContent().querySelectorAll(".e-checkbox-wrapper")[0],n=r.querySelector(".e-frame").classList.contains("e-check");this.parent.autoCheckHierarchy&&n&&this.headerSelection(n)}},a.prototype.renderColumnCheckbox=function(e){var t=this.parent.createElement("input",{className:"e-treecheckselect",attrs:{type:"checkbox","aria-label":"checkbox"}}),i=e.data;e.cell.classList.add("e-treegridcheckbox"),e.cell.setAttribute("aria-label","checkbox");var r=!(u(i.checkboxState)||i.checkboxState==="uncheck"),n=Dn(this.parent.createElement,!1,{checked:r,label:" "});if(n.classList.add("e-hierarchycheckbox"),this.parent.allowTextWrap&&(n.querySelector(".e-frame").style.width="18px"),i.checkboxState==="indeterminate"){var o=n.querySelectorAll(".e-frame")[0];Se([o],["e-check","e-stop","e-uncheck"]),n.querySelector(".e-frame").classList.add("e-stop")}return n.insertBefore(t.cloneNode(),n.firstChild),n},a.prototype.columnCheckbox=function(e){var t=this.renderColumnCheckbox(e),i=e.cell.querySelector(".e-treecolumn-container");if(!u(i))e.cell.querySelector(".e-hierarchycheckbox")||i.insertBefore(t,i.querySelectorAll(".e-treecell")[0]);else{var r=this.parent.createElement("span",{className:"e-treecheckbox"}),n=e.cell.innerHTML;e.cell.innerHTML="",r.innerHTML=n;var o=this.parent.createElement("div",{className:"e-treecheckbox-container"});o.appendChild(t),o.appendChild(r),e.cell.appendChild(o)}},a.prototype.selectCheckboxes=function(e){if(u(e)){var t="The provided value for the rowIndexes is undefined. Please ensure the rowIndexes contains number.";this.parent.trigger(Ie,{error:t})}for(var i=0;i<e.length;i++){var r=this.parent.getCurrentViewRecords()[e[parseInt(i.toString(),10)]],n=it(this.parent,r.uniqueID);r=n;var o=r.checkboxState==="uncheck"?"check":"uncheck";r.checkboxState=o;for(var s=Object.keys(r),l=0;l<s.length;l++)Object.prototype.hasOwnProperty.call(n,s[parseInt(l.toString(),10)])&&(n[s[parseInt(l.toString(),10)]]=r[s[parseInt(l.toString(),10)]]);this.traverSelection(r,o,!1),this.parent.autoCheckHierarchy&&this.headerSelection()}},a.prototype.traverSelection=function(e,t,i){var r=0;if(this.updateSelectedItems(e,t),!i&&e.parentItem&&this.parent.autoCheckHierarchy&&this.updateParentSelection(e.parentItem),e.childRecords&&this.parent.autoCheckHierarchy){var n=e.childRecords;!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.parent.autoCheckHierarchy&&(n=this.getFilteredChildRecords(n)),r=n.length;for(var o=0;o<r;o++)n[parseInt(o.toString(),10)].isSummaryRow||(n[parseInt(o.toString(),10)].hasChildRecords?this.traverSelection(n[parseInt(o.toString(),10)],t,!0):this.updateSelectedItems(n[parseInt(o.toString(),10)],t))}},a.prototype.getFilteredChildRecords=function(e){var t=this,i=e.filter(function(r){return t.parent.filterModule.filteredResult.indexOf(r)>-1});return i},a.prototype.updateParentSelection=function(e){var t=0,i=[],r=it(this.parent,e.uniqueID);r&&r.childRecords&&(i=r.childRecords),!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.parent.autoCheckHierarchy&&(i=this.getFilteredChildRecords(i)),t=i&&i.length;var n=0,o=0;if(!u(r)){for(var s=0;s<i.length;s++){var l=it(this.parent,i[parseInt(s.toString(),10)].uniqueID),d=l;u(d)||(d.checkboxState==="indeterminate"?n++:d.checkboxState==="check"&&o++)}n>0||o>0&&o!==t?r.checkboxState="indeterminate":o===0&&(!r.hasFilteredChildRecords||u(r.hasFilteredChildRecords))&&!u(this.parent.dataResults.actionArgs)&&(this.parent.dataResults.actionArgs.requestType==="searching"||this.parent.dataResults.actionArgs.requestType==="filtering")&&r.checkboxState==="check"?r.checkboxState="check":o===0&&n===0||o===0&&r.hasFilteredChildRecords&&!u(this.parent.dataResults.actionArgs)&&(this.parent.dataResults.actionArgs.requestType==="searching"||this.parent.dataResults.actionArgs.requestType==="filtering")&&r.checkboxState==="check"?r.checkboxState="uncheck":r.checkboxState="check",this.updateSelectedItems(r,r.checkboxState),r.parentItem&&this.updateParentSelection(r.parentItem)}},a.prototype.headerSelection=function(e){var t=this,i=-1,r=0,n=!1;if(!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0){var o=this.parent.filterModule.filteredResult;this.filteredList.length===0&&(this.filteredList=o),this.parent.grid.searchSettings.key.length?this.searchingRecords=o:this.filteredList!==o?(this.filteredList=o,n=!0):n=!1}this.filteredList.length>0&&(!this.parent.filterSettings.columns.length&&this.filteredList.length&&!this.parent.grid.searchSettings.key.length&&(this.filteredList=[]),this.searchingRecords.length&&!u(e)&&(this.filteredList=this.searchingRecords));var s;if(!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length===0&&this.parent.getCurrentViewRecords().length===0&&this.parent.filterSettings.columns.length>0?s=this.filteredList:s=!u(this.parent.filterModule)&&this.filteredList.length>0?this.filteredList:this.parent.flatData,s=J(this.parent)?this.parent.getCurrentViewRecords():s,!u(e))for(var l=0;l<s.length;l++)if(e){if(s[parseInt(l.toString(),10)].checkboxState==="check"||n)continue;s[parseInt(l.toString(),10)].checkboxState="check",this.updateSelectedItems(s[parseInt(l.toString(),10)],s[parseInt(l.toString(),10)].checkboxState)}else i=this.selectedItems.indexOf(s[parseInt(l.toString(),10)]),i>-1&&(s[parseInt(l.toString(),10)].checkboxState="uncheck",this.updateSelectedItems(s[parseInt(l.toString(),10)],s[parseInt(l.toString(),10)].checkboxState),this.parent.autoCheckHierarchy&&this.updateParentSelection(s[parseInt(l.toString(),10)]));e===!1&&this.parent.enableVirtualization&&(this.selectedItems=[],this.selectedIndexes=[],s.filter(function(h){h.checkboxState="uncheck",t.updateSelectedItems(h,h.checkboxState)})),r=this.selectedItems.length;var d=this.parent.getHeaderContent().querySelectorAll(".e-frame")[0];r>0&&s.length>0?r!==s.length&&!e?(Se([d],["e-check"]),d.classList.add("e-stop")):(Se([d],["e-stop"]),d.classList.add("e-check")):Se([d],["e-check","e-stop"])},a.prototype.updateSelectedItems=function(e,t){var i=this.parent.grid.currentViewData.filter(function(m){return m.uniqueID===e.uniqueID}),r,n=this.parent.grid.currentViewData.indexOf(i[0]),o=it(this.parent,e.uniqueID),s=this.parent.getRows()[parseInt(n.toString(),10)],l;if(n>-1){var d=void 0;(this.parent.frozenRows||this.parent.getFrozenColumns())&&(d=this.parent.getDataRows()[parseInt(n.toString(),10)]),l=s.querySelectorAll(".e-hierarchycheckbox .e-frame")[0]?s.querySelectorAll(".e-hierarchycheckbox .e-frame")[0]:d.querySelectorAll(".e-hierarchycheckbox .e-frame")[0],u(l)||Se([l],["e-check","e-stop","e-uncheck"])}if(r=o,u(r)&&(r=e),r.checkboxState=t,t==="check"&&u(e.isSummaryRow))n!==-1&&this.selectedIndexes.indexOf(n)===-1&&this.selectedIndexes.push(n),this.selectedItems.indexOf(r)===-1&&n!==-1&&!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.selectedItems.push(r),this.selectedItems.indexOf(r)===-1&&(this.parent.enableVirtualization||this.parent.allowPaging)&&!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0&&this.selectedItems.push(r),this.selectedItems.indexOf(r)===-1&&!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length===0&&this.selectedItems.push(r),this.selectedItems.indexOf(r)===-1&&u(this.parent.filterModule)&&this.selectedItems.push(r);else if((t==="uncheck"||t==="indeterminate")&&u(e.isSummaryRow)){var h=this.selectedItems.indexOf(r);if(h!==-1&&this.selectedItems.splice(h,1),this.selectedIndexes.indexOf(n)!==-1){var p=this.selectedIndexes.indexOf(n);this.selectedIndexes.splice(p,1)}}var c=t==="indeterminate"?"e-stop":"e-"+t;n>-1&&(u(l)||(l.classList.add(c),s.querySelector(".e-treecheckselect").setAttribute("aria-checked",t==="check"?"true":t==="uncheck"?"false":"mixed")))},a.prototype.updateGridActions=function(e){var t=this,i=e.requestType,r,n;if(qh(this.parent)&&this.parent.autoCheckHierarchy)if(i==="sorting"||i==="paging"){var o=this.parent.grid.getRows();r=this.parent.getCurrentViewRecords(),n=r.length,this.selectedIndexes=[];for(var s=0;s<n;s++)o[parseInt(s.toString(),10)].classList.contains("e-summaryrow")||this.updateSelectedItems(r[parseInt(s.toString(),10)],r[parseInt(s.toString(),10)].checkboxState)}else if(i==="delete"||e.action==="add"){var l=[];i==="delete"?l=e.data:l.push(e.data);for(var s=0;s<l.length;s++){if(i==="delete"){var d=this.parent.flatData.indexOf(l[parseInt(s.toString(),10)]),h=this.selectedIndexes.indexOf(d);this.selectedIndexes.splice(h,1),this.updateSelectedItems(l[parseInt(s.toString(),10)],"uncheck")}u(l[parseInt(s.toString(),10)].parentItem)||this.updateParentSelection(l[parseInt(s.toString(),10)].parentItem)}}else e.requestType==="add"&&this.parent.autoCheckHierarchy?e.data.checkboxState="uncheck":(i==="filtering"||i==="searching"||i==="refresh"&&!J(this.parent))&&(this.selectedItems=[],this.selectedIndexes=[],r=!u(this.parent.filterModule)&&this.parent.filterModule.filteredResult.length>0?this.parent.filterModule.filteredResult:this.parent.flatData,r.forEach(function(p){if(t.parent.enableVirtualization){p.hasChildRecords&&p.childRecords.length>0?t.updateParentSelection(p):t.updateSelectedItems(p,p.checkboxState);var c=Te(p);c=t.getFilteredChildRecords(c);for(var m=0;m<c.length;m++)c[parseInt(m.toString(),10)].hasChildRecords?t.updateParentSelection(c[parseInt(m.toString(),10)]):!c[parseInt(m.toString(),10)].hasChildRecords&&!u(c[parseInt(m.toString(),10)])&&t.updateSelectedItems(c[parseInt(m.toString(),10)],c[parseInt(m.toString(),10)].checkboxState)}else p.hasChildRecords?t.updateParentSelection(p):t.updateSelectedItems(p,p.checkboxState)}),this.headerSelection())},a.prototype.getCheckedrecords=function(){return this.selectedItems},a.prototype.getCheckedRowIndexes=function(){return this.selectedIndexes},a}(),Hh=function(){function a(e){this.parent=e,Dt.Inject(ja),this.addEventListener()}return a.prototype.getModuleName=function(){return"print"},a.prototype.addEventListener=function(){this.parent.grid.on(uo,this.printTreeGrid,this)},a.prototype.removeEventListener=function(){this.parent.grid.off(uo,this.printTreeGrid)},a.prototype.printTreeGrid=function(e){var t=ae("printgrid",e),i=ae("element",e);t.addEventListener(qi,this.parent.grid.queryCellInfo),t.addEventListener(Vr,this.parent.grid.rowDataBound),t.addEventListener(da,this.parent.grid.beforeDataBound),se([i],"e-treegrid")},a.prototype.print=function(){this.parent.grid.print()},a.prototype.destroy=function(){this.removeEventListener()},a}(),jh=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),li=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},$h=function(a){jh(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return li([A()],e.prototype,"fields",void 0),li([A(!1)],e.prototype,"ignoreCase",void 0),li([A("contains")],e.prototype,"operator",void 0),li([A()],e.prototype,"key",void 0),li([A()],e.prototype,"hierarchyMode",void 0),e}(Ze),Gh=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ft=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Uh=function(a){Gh(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Ft([A("Row")],e.prototype,"mode",void 0),Ft([A("Flow")],e.prototype,"cellSelectionMode",void 0),Ft([A("Single")],e.prototype,"type",void 0),Ft([A(!1)],e.prototype,"persistSelection",void 0),Ft([A("Default")],e.prototype,"checkboxMode",void 0),Ft([A(!1)],e.prototype,"checkboxOnly",void 0),Ft([A(!0)],e.prototype,"enableToggle",void 0),e}(Ze),Wh=function(){function a(e){this.parent=e,this.templateResult=null,this.parent.grid.on("template-result",this.columnTemplateResult,this),this.parent.grid.on("reactTemplateRender",this.reactTemplateRender,this)}return a.prototype.RowModifier=function(e){if(e.data){var t=e.data,i=t.parentItem;if(!u(t.parentItem)&&!pa(this.parent)&&(!(this.parent.allowPaging&&this.parent.pageSettings.pageSizeMode!=="Root")||J(this.parent)&&!ut(this.parent))){var r=this.parent.initialRender&&(!(u(i[this.parent.expandStateMapping])||i[this.parent.expandStateMapping])||this.parent.enableCollapseAll)||!Et(this.parent,e.data,this.parent.grid.getCurrentViewRecords());if(r&&!u(e.row)){e.row.style.display="none";var n=this.parent.grid.getRowsObject();!this.parent.grid.isFrozenGrid()&&!u(e.row.getAttribute("data-uid"))&&(n.filter(function(w){return w.uid===e.row.getAttribute("data-uid")})[0].visible=!1)}}if(J(this.parent)&&!ut(this.parent)){var o=this.parent,s=this.parent.getCurrentViewRecords().filter(function(w){return le(o.idMapping,w)===le(o.parentIdMapping,t)});if(s.length>0&&!s[0].isSummaryRow&&!u(e.row)){var l=s[0].expanded?"table-row":"none";e.row.setAttribute("style","display: "+l+";")}}var d=ae("isSummaryRow",e.data);d&&se([e.row],"e-summaryrow"),u(e.row)||(e.row.querySelector(".e-treegridexpand")?e.row.setAttribute("aria-expanded","true"):e.row.querySelector(".e-treegridcollapse")&&e.row.setAttribute("aria-expanded","false"),this.parent.enableCollapseAll&&this.parent.initialRender&&(u(t.parentItem)||(e.row.style.display="none")));var h="dragStartData",p="draggedRecord";if(this.parent.rowDragAndDropModule&&this.parent.grid.rowDragAndDropModule&&(this.parent.grid.rowDragAndDropModule[""+h]||this.parent.rowDragAndDropModule[""+p])&&this.parent.getContentTable().scrollHeight<=this.parent.getContent().clientHeight){var c="lastRowBorder",m=this.parent.getVisibleRecords()[this.parent.getVisibleRecords().length-1];m.uniqueID===e.data.uniqueID&&!u(e.row)&&!e.row.cells[0].classList.contains("e-lastrowcell")&&this.parent[""+c](e.row,!0)}if(this.parent.isReact){var g="renderReactTemplates",y=this;y.parent[""+g](function(){y.parent.trigger(Vr,e)})}else this.parent.trigger(Vr,e)}},a.prototype.cellRender=function(e){if(e.data){var t=this.parent.grid,i=e.data,r,n=u(i.filterLevel),o=n?i.level:i.filterLevel,s=0,l,d=this.parent.getColumnByUid(e.column.uid),h=i.isSummaryRow,p=this.parent.getFrozenColumns();u(i.parentItem)?r=i.index:r=i.parentItem.index;var c,m="getVirtualColIndexByUid";if(this.parent.enableColumnVirtualization&&!this.parent.initialRender?c=this.parent[""+m](e.column.uid):c=t.getColumnIndexByUid(e.column.uid),c===this.parent.treeColumnIndex&&(e.requestType==="add"||e.requestType==="rowDragAndDrop"||e.requestType==="delete"||u(e.cell.querySelector(".e-treecell")))){for(var g=ge("div",{className:"e-treecolumn-container"}),y=ge("span",{className:"e-icons e-none",styles:"width: 10px; display: inline-block"}),w=0;w<o;w++)s+=10,g.appendChild(y.cloneNode());var v=u(i.hasFilteredChildRecords)?i.hasChildRecords:i.hasFilteredChildRecords;if(v&&!u(i.childRecords)&&(this.parent.isFromGantt&&!this.parent.loadChildOnDemand?v=i.hasChildRecords:v=i.childRecords.length!==0),v){se([e.cell],"e-treerowcell"),e.cell.setAttribute("aria-expanded",i.expanded?"true":"false");var T=ge("span",{className:"e-icons"}),C=void 0;this.parent.initialRender?C=i.expanded&&(u(i[this.parent.expandStateMapping])||i[this.parent.expandStateMapping])&&!this.parent.enableCollapseAll:C=!(!i.expanded||!Et(this.parent,i,this.parent.grid.getCurrentViewRecords())),se([T],C?"e-treegridexpand":"e-treegridcollapse"),s+=18,g.appendChild(T),y.style.width="4px",s+=7,g.appendChild(y.cloneNode())}else(o||!o&&!i.level)&&(s+=20,g.appendChild(y.cloneNode()),g.appendChild(y.cloneNode()));l=ge("span",{className:"e-treecell"}),this.parent.allowTextWrap&&(l.style.width="Calc(100% - "+s+"px)"),se([e.cell],"e-gridrowindex"+r+"level"+i.level),this.updateTreeCell(e,l),g.appendChild(l),e.cell.appendChild(g)}else this.templateResult&&(this.templateResult=null);var P=t.getFrozenLeftColumnsCount()>0||t.getFrozenRightColumnsCount()>0;if(!P)p>this.parent.treeColumnIndex&&p>0&&t.getColumnIndexByUid(e.column.uid)===p?se([e.cell],"e-gridrowindex"+r+"level"+i.level):p<this.parent.treeColumnIndex&&p>0&&(t.getColumnIndexByUid(e.column.uid)===p||t.getColumnIndexByUid(e.column.uid)===p-1)?se([e.cell],"e-gridrowindex"+r+"level"+i.level):p===this.parent.treeColumnIndex&&p>0&&t.getColumnIndexByUid(e.column.uid)===this.parent.treeColumnIndex-1&&se([e.cell],"e-gridrowindex"+r+"level"+i.level);else{var R=t.getFrozenRightColumns(),N=t.getFrozenLeftColumns(),D=t.getMovableColumns();R.length>0&&R[0].field===e.column.field?se([e.cell],"e-gridrowindex"+r+"level"+i.level):N.length>0&&N[0].field===e.column.field?se([e.cell],"e-gridrowindex"+r+"level"+i.level):D.length>0&&D[0].field===e.column.field&&se([e.cell],"e-gridrowindex"+r+"level"+i.level)}if(!u(d)&&d.showCheckbox&&(this.parent.notify("columnCheckbox",e),this.parent.allowTextWrap)){var S=e.cell.querySelectorAll(".e-frame")[0],x=parseInt(S.style.width,16);s+=x,s+=10,t.getColumnIndexByUid(e.column.uid)===this.parent.treeColumnIndex?l=e.cell.querySelector(".e-treecell"):l=e.cell.querySelector(".e-treecheckbox"),l.style.width="Calc(100% - "+s+"px)"}if(h){se([e.cell],"e-summarycell");var I=ae(e.column.field,e.data);I=u(I)?null:I,e.cell.querySelector(".e-treecell")!=null?e.cell.querySelector(".e-treecell").innerHTML=I:e.column.template?e.cell.innerHTML=null:e.cell.innerHTML=I}this.parent.args=e;var E=le("columnModel",this.parent),L=E[this.parent.treeColumnIndex];if(u(this.parent.rowTemplate)&&!this.parent.isReact||this.parent.isReact&&!e.column.template)this.parent.trigger(qi,e);else if(this.parent.isReact&&L.field!==e.column.field){var z="renderReactTemplates",_=this;_.parent[""+z](function(){_.parent.trigger(qi,e)})}}},a.prototype.updateTreeCell=function(e,t){var i=le("columnModel",this.parent),r=i[this.parent.treeColumnIndex],n="templateFn",o=e.column.index;u(r.field)&&e.cell.setAttribute("data-colindex",o+""),r.field===e.column.field&&!u(r.template)&&(e.column.template=r.template,e.column[""+n]=$a(e.column.template),e.cell.classList.add("e-templatecell"));var s=e.cell.querySelector(".e-treecell")!=null?e.cell.querySelector(".e-treecell").innerHTML:e.cell.innerHTML;if(typeof e.column.template=="object"&&this.templateResult)Hi(t,this.templateResult),this.templateResult=null,e.cell.innerHTML="";else if(e.cell.classList.contains("e-templatecell")){var l=e.cell.children.length,d=this.parent.element.id+e.column.uid;if(r.field===e.column.field&&!u(r.template)){var h="portals",p="renderReactTemplates";if(this.parent.isReact&&typeof e.column.template!="string"){e.column[""+n](e.data,this.parent,"columnTemplate",d,null,null,t),u(this.parent.grid[""+h])&&(this.parent.grid[""+h]=this.parent[""+h]),this.parent.notify("renderReactTemplate",this.parent[""+h]);var c=this;c.parent[""+p](function(){c.parent.trigger(qi,e)})}else{var m="isStringTemplate",g=e.column[""+n](Ro({index:""},e.data),this.parent,"template",d,this.parent[""+m]);Hi(t,g)}delete e.column.template,delete e.column[""+n],e.cell.innerHTML=""}else for(var y=0;y<l;l=e.cell.children.length)t.appendChild(e.cell.children[parseInt(y.toString(),10)])}else t.innerHTML=s,e.cell.innerHTML=""},a.prototype.refreshReactColumnTemplateByUid=function(e){var t=this;this.parent.isReact&&this.parent.clearTemplate(["columnTemplate"],void 0,function(){var i="cells",r="index",n=t.parent.grid.getRowsObject(),o=t.parent.getDataRows(),s=t.parent.grid.getIndentCount(),l=t.parent.grid.getNormalizedColumnIndex(e);if(o.length!==0){for(var d=0;d<n.length;d++)if(n[parseInt(d.toString(),10)].isDataRow&&!u(n[parseInt(d.toString(),10)].index)){var h=n[parseInt(d.toString(),10)][""+i][parseInt(l.toString(),10)],p=new Ga(t.parent.grid,t.parent.grid.serviceLocator),c=o.length>=n.length?t.parent.getCellFromIndex(n[parseInt(d.toString(),10)].index,l-s):t.parent.getRows()[n[parseInt(d.toString(),10)].index].querySelector(".e-templatecell");p.refreshTD(c,h,n[parseInt(d.toString(),10)].data,{index:n[parseInt(d.toString(),10)][""+r]});var m=t.parent.getRows()[parseInt(d.toString(),10)].cells[parseInt(l.toString(),10)];t.cellRender({data:n[parseInt(d.toString(),10)].data,cell:m,column:h.column})}}})},a.prototype.columnTemplateResult=function(e){this.templateResult=e.template},a.prototype.reactTemplateRender=function(e,t){var i="renderReactTemplates",r="portals";this.parent[""+r]=e,this.parent.notify("renderReactTemplate",this.parent[""+r]),this.parent[""+i](t)},a.prototype.destroy=function(){this.parent.grid.off("template-result",this.columnTemplateResult),this.parent.grid.off("reactTemplateRender",this.reactTemplateRender)},a}(),Xh=function(){function a(e){this.addedRecords="addedRecords",this.parent=e,this.parentItems=[],this.taskIds=[],this.hierarchyData=[],this.storedIndex=-1,this.sortedData=[],this.isSortAction=!1,this.addEventListener(),this.dataResults={},this.isSelfReference=!u(this.parent.parentIdMapping)}return a.prototype.addEventListener=function(){this.parent.on("updateRemoteLevel",this.updateParentRemoteData,this),this.parent.grid.on("sorting-begin",this.beginSorting,this),this.parent.on("updateAction",this.updateData,this),this.parent.on(_r,this.collectExpandingRecs,this),this.parent.on("dataProcessor",this.dataProcessor,this)},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(_r,this.collectExpandingRecs),this.parent.off("updateRemoteLevel",this.updateParentRemoteData),this.parent.off("updateAction",this.updateData),this.parent.off("dataProcessor",this.dataProcessor),this.parent.grid.off("sorting-begin",this.beginSorting))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.isRemote=function(){return this.parent.dataSource instanceof he},a.prototype.convertToFlatData=function(e){var t=this;if(this.parent.flatData=!u(e)&&Object.keys(e).length===0&&!(this.parent.dataSource instanceof he)?this.parent.dataSource:[],this.parent.parentData=[],J(this.parent)&&!ut(this.parent)&&e instanceof he&&!(e instanceof Array)){var i=this.parent.dataSource;if(this.parent.parentIdMapping){if(this.parent.query=u(this.parent.query)?new Xe:this.parent.query,this.parent.parentIdMapping){var r=this.parent.query.params.filter(function(o){return o.key==="IdMapping"});this.parent.initialRender&&!r.length&&(this.parent.query.where(this.parent.parentIdMapping,"equal",null),this.parent.query.addParams("IdMapping",this.parent.idMapping))}if(!this.parent.hasChildMapping){var n=this.parent.query.clone();n.queries=[],n=n.select([this.parent.parentIdMapping]),n.isCountRequired=!0,i.executeQuery(n).then(function(o){t.parentItems=Ua.distinct(o.result,t.parent.parentIdMapping,!1);var s;o.result?s=0:s=1,s===0&&(pe("grid.contentModule.isLoaded",!0,t.parent),u(t.zerothLevelData)||(pe("cancel",!1,t.zerothLevelData),le("grid.renderModule",t.parent).dataManagerSuccess(t.zerothLevelData),t.zerothLevelData=null),t.parent.grid.hideSpinner())})}}}else e instanceof Array&&this.convertJSONData(e)},a.prototype.convertJSONData=function(e){if(this.hierarchyData=[],this.taskIds=[],!this.parent.idMapping)this.hierarchyData=e;else for(var t=Object.keys(e),i=0;i<t.length;i++){var r=e[parseInt(i.toString(),10)];this.hierarchyData.push(ue({},r)),u(r[this.parent.idMapping])||this.taskIds.push(r[this.parent.idMapping])}if(this.isSelfReference){for(var n=[],o=new he(this.hierarchyData).executeLocal(new Xe().group(this.parent.parentIdMapping)),i=0;i<o.length;i++){var s=o[parseInt(i.toString(),10)],l=this.taskIds.indexOf(s.key);if(!u(s.key)&&l>-1){var d=s.items;this.hierarchyData[parseInt(l.toString(),10)][this.parent.childMapping]=d;continue}n.push.apply(n,s.items)}this.hierarchyData=this.selfReferenceUpdate(n)}if(Object.keys(this.hierarchyData).length)this.createRecords(this.hierarchyData);else{var h="isGantt",p=!(this.parent.dataSource instanceof he)&&this.parent[""+h];this.parent.flatData=p?this.parent.dataSource:[]}this.storedIndex=-1},a.prototype.selfReferenceUpdate=function(e){for(var t=[];this.hierarchyData.length>0&&e.length>0;){var i=e.indexOf(this.hierarchyData[0]);i===-1?this.hierarchyData.shift():(t.push(this.hierarchyData.shift()),e.splice(i,1))}return t},a.prototype.updateParentRemoteData=function(e){var t="actionArgs";J(this.parent)&&this.parent.enableVirtualization&&e[""+t].requestType==="virtualscroll"&&this.parent.hideSpinner();var i=e.result;if(J(this.parent)&&this.parent.enableVirtualization&&(e[""+t].requestType==="virtualscroll"||e[""+t].action==="clearFilter"||e[""+t].searchString==="")&&(this.parent.query.expands=[]),!this.parent.hasChildMapping&&!this.parentItems.length&&!this.parent.loadChildOnDemand)this.zerothLevelData=e,pe("cancel",!0,e);else if(this.parent.loadChildOnDemand){var s="dataResults",l="expandRecord";!u(i)&&!(this.parent.loadChildOnDemand&&ce(this.parent)&&!u(this.parent[""+s][""+l]))&&!(J(this.parent)&&this.parent.loadChildOnDemand&&e[""+t].isExpandCollapse&&this.parent.enableVirtualization)&&this.convertToFlatData(i)}else for(var r=function(p){if(ce(n.parent)&&i[parseInt(p.toString(),10)].hasChildRecords&&n.parent.initialRender&&(i[parseInt(p.toString(),10)].expanded=!1),J(n.parent)&&n.parent.enableVirtualization){var c=[],m=n.parent;i.filter(function(g){g[""+m.parentIdMapping]===i[parseInt(p.toString(),10)][""+m.idMapping]&&c.push(g)}),c.length?i[parseInt(p.toString(),10)].expanded=!0:i[parseInt(p.toString(),10)].hasChildRecords&&(i[parseInt(p.toString(),10)].expanded=!1)}u(i[parseInt(p.toString(),10)].index)&&(i[parseInt(p.toString(),10)].taskData=ue({},i[parseInt(p.toString(),10)]),i[parseInt(p.toString(),10)].uniqueID=Ut(n.parent.element.id+"_data_"),pe("uniqueIDCollection."+i[parseInt(p.toString(),10)].uniqueID,i[parseInt(p.toString(),10)],n.parent),i[parseInt(p.toString(),10)].level=0,J(n.parent)&&n.parent.enableVirtualization&&i[parseInt(p.toString(),10)][""+n.parent.parentIdMapping]&&i[parseInt(p.toString(),10)].level===0&&(i[parseInt(p.toString(),10)].level=i[parseInt(p.toString(),10)].level+1),i[parseInt(p.toString(),10)].index=Math.ceil(Math.random()*1e3),(i[parseInt(p.toString(),10)][n.parent.hasChildMapping]||n.parentItems.indexOf(i[parseInt(p.toString(),10)][n.parent.idMapping])!==-1)&&(i[parseInt(p.toString(),10)].hasChildRecords=!0),i[parseInt(p.toString(),10)].checkboxState="uncheck")},n=this,o=0;o<i.length;o++)r(o);if(J(this.parent)&&this.parent.loadChildOnDemand&&e[""+t].isExpandCollapse&&this.parent.enableVirtualization||J(this.parent)&&this.parent.enableVirtualization&&!this.parent.loadChildOnDemand?e.result=i:e.result=this.parent.loadChildOnDemand?this.parent.flatData:i,J(this.parent)&&this.parent.enableVirtualization&&this.parent.loadChildOnDemand&&this.parent.grid.aggregates.length&&this.parent.grid.sortSettings.columns.length===0&&this.parent.grid.filterSettings.columns.length===0&&!this.parent.grid.searchSettings.key.length){var d="query",h=e[""+d].queries.filter(function(p){return p.fn==="onAggregates"});e.result=this.parent.summaryModule.calculateSummaryValue(h,this.parent.flatData,!0)}this.parent.notify("updateResults",e)},a.prototype.collectExpandingRecs=function(e,t){var i=this.parent.getRows(),r="name";if(this.parent.rowTemplate){var n=this.parent.getContentTable().rows;i=[].slice.call(n)}var o;if(e.rows.length>0){t||(e.record.expanded=!0);for(var s=0;s<e.rows.length;s++){if(e.rows[parseInt(s.toString(),10)].style.display="table-row",this.parent.loadChildOnDemand){var l=e.rows[parseInt(s.toString(),10)].getElementsByClassName("e-treegridcollapse")[0];o=this.parent.rowTemplate?this.parent.grid.getCurrentViewRecords()[e.rows[parseInt(s.toString(),10)].rowIndex]:this.parent.grid.getRowObjectFromUID(e.rows[parseInt(s.toString(),10)].getAttribute("data-Uid")).data,!u(l)&&o.expanded&&(se([l],"e-treegridexpand"),Se([l],"e-treegridcollapse"));var d=[];d=i.filter(function(p){return p.querySelector(".e-gridrowindex"+o.index+"level"+(o.level+1))}),d.length&&o.expanded&&this.collectExpandingRecs({record:o,rows:d,parentRow:e.parentRow},!0)}var h=e.rows[parseInt(s.toString(),10)].querySelector(".e-detailrowcollapse");u(h)||this.parent.grid.detailRowModule.expand(h)}}else this.fetchRemoteChildData({action:e[""+r],record:e.record,rows:e.rows,parentRow:e.parentRow})},a.prototype.fetchRemoteChildData=function(e){var t=this,i={row:e.parentRow,data:e.record},r=this.parent.dataSource,n=this.parent.grid.getDataModule().generateQuery(),o=n.queries.filter(function(h){return h.fn!=="onPage"&&h.fn!=="onWhere"});n.queries=o,n.isCountRequired=!0;var s=parseInt(e.record[this.parent.idMapping],10);if(isNaN(s)&&(s=e.record[this.parent.idMapping].toString()),this.parent.enableVirtualization&&e.action==="remoteExpand"){n.take(this.parent.pageSettings.pageSize);var l=[];l.push("ExpandingAction",s.toString()),n.expand(l)}else if(this.parent.enableVirtualization&&e.action==="collapse"){n.take(this.parent.grid.pageSettings.pageSize);var l=[];l.push("CollapsingAction",s.toString()),n.expand(l)}if(n.where(this.parent.parentIdMapping,"equal",e.record[this.parent.idMapping]),e.action==="remoteExpand"&&this.parent.grid.filterModule&&this.parent.grid.filterModule.value){var d=this.parent.grid.getDataModule().generateQuery().queries.filter(function(h){return h.fn!=="onPage"&&typeof h.e.predicates<"u"});n.queries.push(d[0])}Fo(this.parent.element),r.executeQuery(n).then(function(h){var p="remoteExpandedData",c="remoteCollapsedData",m="level",g=t.parent.grid.currentViewData.slice(),y,w=t.parent.idMapping;if(t.parent.isGantt&&!t.parent.loadChildOnDemand&&t.parent.hasChildMapping){for(var v=0;v<t.parent.grid.currentViewData.length;v++)if(e.record[w]===t.parent.grid.currentViewData[v][w]){y=v;break}}else y=g.indexOf(e.record);if(t.parent.enableVirtualization&&(e.action==="collapse"||e.action==="remoteExpand")){g=[];for(var v=0;v<y;v++)g.push(t.parent.grid.currentViewData[parseInt(v.toString(),10)])}y===-1&&t.parent.grid.getRowsObject().forEach(function(z){z.data.uniqueID===e.record.uniqueID&&(y=z.index)});var T=ae("actual.nextLevel",h),C=h.result,P=[];if(e.action==="remoteExpand"&&t.parent.grid.filterModule&&t.parent.grid.filterModule.value){for(var v=0;v<g.length;v++)Object.prototype.hasOwnProperty.call(g[parseInt(v.toString(),10)],t.parent.parentIdMapping)&&g[parseInt(v.toString(),10)][""+t.parent.parentIdMapping]!==null&&g[parseInt(v.toString(),10)].level===0&&(g.splice(v,1),v--);for(var v=0;v<C.length;v++)e.record[""+t.parent.idMapping]!==C[parseInt(v.toString(),10)][""+t.parent.idMapping]&&e.record[""+t.parent.idMapping]===C[parseInt(v.toString(),10)][""+t.parent.parentIdMapping]&&Object.prototype.hasOwnProperty.call(C,v)&&P.push(C[parseInt(v.toString(),10)]);C=P}if(t.parent.enableVirtualization&&e.action==="remoteExpand"){e.record.childRecords=[];for(var v=0;v<C.length;v++)e.record[""+t.parent.idMapping]!==C[parseInt(v.toString(),10)][""+t.parent.idMapping]&&e.record[""+t.parent.idMapping]===C[parseInt(v.toString(),10)][""+t.parent.parentIdMapping]&&Object.prototype.hasOwnProperty.call(C,v)&&e.record.childRecords.push(C[parseInt(v.toString(),10)])}else e.record.childRecords=C;for(var R=0;R<C.length;R++){if(t.parent.enableVirtualization&&C[parseInt(R.toString(),10)][""+t.parent.idMapping]===e.record[""+t.parent.idMapping]&&e.action==="remoteExpand")t.parent[""+p].push(e.record);else if(t.parent.enableVirtualization&&C[parseInt(R.toString(),10)][""+t.parent.idMapping]===e.record[""+t.parent.idMapping]&&e.action==="collapse")for(var v=0;v<t.parent[""+p].length;v++)e.record[""+t.parent.idMapping]===t.parent[""+p][parseInt(v.toString(),10)][""+t.parent.idMapping]&&t.parent[""+p].splice(v,1);if(C[parseInt(R.toString(),10)].taskData=ue({},C[parseInt(R.toString(),10)]),C[parseInt(R.toString(),10)][""+t.parent.parentIdMapping]&&t.parent.enableVirtualization&&t.parent[""+p].length){for(var v=0;v<t.parent[""+p].length;v++)if(C[parseInt(R.toString(),10)][""+t.parent.parentIdMapping]===t.parent[""+p][parseInt(v.toString(),10)][""+t.parent.idMapping]){C[parseInt(R.toString(),10)].level=t.parent[""+p][parseInt(v.toString(),10)][""+m]+1;var N=t.parent[""+p][parseInt(v.toString(),10)];delete N.childRecords,C[parseInt(R.toString(),10)].parentItem=N,C[parseInt(R.toString(),10)].parentUniqueID=e.record.uniqueID}}else if(t.parent.enableVirtualization)if((C[parseInt(R.toString(),10)][""+t.parent.hasChildMapping]||t.parentItems.indexOf(C[parseInt(R.toString(),10)][""+t.parent.idMapping])!==-1)&&!(T&&!T[parseInt(R.toString(),10)]))u(C[parseInt(R.toString(),10)][""+t.parent.parentIdMapping])?(C[parseInt(R.toString(),10)].level=0,e.action==="remoteExpand"&&(C[parseInt(R.toString(),10)].childRecords=[],C[parseInt(R.toString(),10)].childRecords=e.record.childRecords)):C[parseInt(R.toString(),10)].level=e.record.level;else{var N=ue({},e.record);delete N.childRecords,C[parseInt(R.toString(),10)].parentItem=N,C[parseInt(R.toString(),10)].parentUniqueID=e.record.uniqueID}else{C[parseInt(R.toString(),10)].level=e.record.level+1;var N=ue({},e.record);delete N.childRecords,C[parseInt(R.toString(),10)].parentItem=N,C[parseInt(R.toString(),10)].parentUniqueID=e.record.uniqueID}if(C[parseInt(R.toString(),10)].index=Math.ceil(Math.random()*1e3),C[parseInt(R.toString(),10)].uniqueID=Ut(t.parent.element.id+"_data_"),C[parseInt(R.toString(),10)].checkboxState="uncheck",t.parent.enableVirtualization&&u(C[parseInt(R.toString(),10)].level))for(var D=0;D<t.parent.grid.currentViewData.length;D++)t.parent.grid.currentViewData[parseInt(D.toString(),10)][""+t.parent.idMapping]===C[parseInt(R.toString(),10)][""+t.parent.parentIdMapping]&&(C[parseInt(R.toString(),10)].level=t.parent.grid.currentViewData[parseInt(D.toString(),10)].level+1);if(pe("uniqueIDCollection."+C[parseInt(R.toString(),10)].uniqueID,C[parseInt(R.toString(),10)],t.parent),(C[parseInt(R.toString(),10)][""+t.parent.hasChildMapping]||t.parentItems.indexOf(C[parseInt(R.toString(),10)][""+t.parent.idMapping])!==-1)&&!(T&&!T[parseInt(R.toString(),10)]))if(C[parseInt(R.toString(),10)].hasChildRecords=!0,t.parent.enableVirtualization&&t.parent.loadChildOnDemand){for(var v=0;v<t.parent[""+c].length;v++)C[parseInt(R.toString(),10)][""+t.parent.idMapping]===t.parent[""+c][parseInt(v.toString(),10)][""+t.parent.idMapping]&&(C[parseInt(R.toString(),10)].expanded=t.parent[""+c][parseInt(v.toString(),10)].expanded);if(e.action==="collapse"&&C[parseInt(R.toString(),10)][""+t.parent.idMapping]!==e.record[""+t.parent.idMapping]&&C[parseInt(R.toString(),10)].expanded!==!1)C[parseInt(R.toString(),10)].expanded=!0;else if(e.action==="collapse"&&C[parseInt(R.toString(),10)][""+t.parent.idMapping]===e.record[""+t.parent.idMapping])C[parseInt(R.toString(),10)].expanded=!1,t.parent[""+c].push(e.record);else if(e.action==="remoteExpand"){for(var v=0;v<t.parent.grid.currentViewData.length;v++)t.parent.grid.currentViewData[parseInt(v.toString(),10)][""+t.parent.idMapping]===C[parseInt(R.toString(),10)][""+t.parent.idMapping]&&C.splice(R,1,t.parent.grid.currentViewData[parseInt(v.toString(),10)]);if(C[parseInt(R.toString(),10)][t.parent.idMapping]===e.record[""+t.parent.idMapping])for(var v=0;v<t.parent[""+c].length;v++)e.record[""+t.parent.idMapping]===t.parent[""+c][parseInt(v.toString(),10)][""+t.parent.idMapping]&&t.parent[""+c].splice(v,1);C[parseInt(R.toString(),10)].expanded!==!1&&(C[parseInt(R.toString(),10)].expanded=!0)}}else t.parent.enableVirtualization&&C[parseInt(R.toString(),10)][""+t.parent.idMapping]===e.record[""+t.parent.idMapping]&&e.action!=="collapse"?C[parseInt(R.toString(),10)].expanded=!0:t.parent.enableVirtualization&&t.parent.loadChildOnDemand||(C[parseInt(R.toString(),10)].expanded=!1);g.splice(y+R+1,0,C[parseInt(R.toString(),10)])}if(pe("result",g,h),pe("action","beforecontentrender",h),t.parent.trigger(wi,h),Lo(t.parent.element),t.parent.grid.aggregates.length>0&&!t.parent.enableVirtualization){var S=ae("query",h),x="result";if(u(S)&&(S=le("grid.renderModule.data",t.parent).aggregateQuery(new Xe)),!u(S)){var I=S.queries.filter(function(z){return z.fn==="onAggregates"});h[""+x]=t.parent.summaryModule.calculateSummaryValue(I,h[""+x],!0)}}e.action==="remoteExpand"&&t.parent.allowPaging&&t.parent.pageSettings.pageSizeMode==="All"&&(t.parent.grid.pageSettings.totalRecordsCount=t.parent.grid.currentViewData.length+C.length),t.parent.enableVirtualization&&(t.parent.grid.pageSettings.totalRecordsCount=h.count),h.count=t.parent.grid.pageSettings.totalRecordsCount;var E={};t.parent.enableVirtualization&&t.remoteVirtualAction(E);var L={index:y,childData:C};t.parent.enableInfiniteScrolling?t.parent.notify("infinite-remote-expand",L):le("grid.renderModule",t.parent).dataManagerSuccess(h,E),t.parent.trigger(hi,i)})},a.prototype.remoteVirtualAction=function(e){e.requestType="refresh",pe("isExpandCollapse",!0,e);var t=le("grid.contentModule",this.parent),i=le("currentInfo",t),r=le("prevInfo",t);i.loadNext&&this.parent.grid.pageSettings.currentPage===i.nextInfo.page&&(this.parent.grid.pageSettings.currentPage=r.page)},a.prototype.beginSorting=function(){if(this.isSortAction=!0,J(this.parent)&&this.parent.enableVirtualization){var e=this.parent.query.queries.indexOf(this.parent.query.queries.filter(function(t){return t.fn==="onSortBy"})[0]);e!==-1&&this.parent.query.queries.splice(e,1),this.parent.grid.sortSettings.columns.length===0&&this.parent.query.sortBy(null,null)}},a.prototype.createRecords=function(e,t){for(var i=[],r=Object.keys(e),n=0,o=r.length;n<o;n++){var s=ue({},e[parseInt(n.toString(),10)]);s.taskData=e[parseInt(n.toString(),10)];var l=0;if(this.storedIndex++,Object.prototype.hasOwnProperty.call(s,"index")||(s.index=this.storedIndex),(!u(s[this.parent.childMapping])&&!ce(this.parent)||s[this.parent.hasChildMapping]&&ce(this.parent))&&(u(s[this.parent.childMapping])||s[this.parent.childMapping].length>0?s.hasChildRecords=!0:s.hasChildRecords=!1,this.parent.enableCollapseAll||!u(this.parent.dataStateChange)&&u(s[this.parent.childMapping])?s.expanded=!1:s.expanded=u(s[this.parent.expandStateMapping])?!0:s[this.parent.expandStateMapping]),Object.prototype.hasOwnProperty.call(s,"index")||(s.index=s.hasChildRecords?this.storedIndex:this.storedIndex),this.isSelfReference&&u(s[this.parent.parentIdMapping])&&this.parent.parentData.push(s),s.uniqueID=Ut(this.parent.element.id+"_data_"),pe("uniqueIDCollection."+s.uniqueID,s,this.parent),!u(t)){var d=ue({},t);delete d.childRecords,delete d[this.parent.childMapping],this.isSelfReference&&delete d.taskData[this.parent.childMapping],s.parentItem=d,s.parentUniqueID=d.uniqueID,l=t.level+1}Object.prototype.hasOwnProperty.call(s,"level")||(s.level=l),s.checkboxState="uncheck";var h="remoteCollapsedData";if(this.parent.enableVirtualization&&this.parent.loadChildOnDemand&&J(this.parent)&&!this.parent.initialRender){if(!s.hasChildRecords&&u(s[""+this.parent.parentIdMapping])){s.hasChildRecords=!0;for(var p=0;p<this.parent[""+h].length;p++)this.parent[""+h][parseInt(p.toString(),10)][""+this.parent.idMapping]===s[""+this.parent.idMapping]&&(s.expanded=!1)}else s.level===0&&u(t)&&!s.hasChildRecords&&(s.level=s.level+1);s[""+this.parent.hasChildMapping]&&!u(s[""+this.parent.expandStateMapping])&&(s.expanded=s[""+this.parent.expandStateMapping],s.hasChildRecords=!0),this.parent.flatData.push(s)}else(u(s[""+this.parent.parentIdMapping])||s.parentItem)&&(this.parent.flatData.push(s),this.parent.infiniteScrollData.push(s));if(!this.isSelfReference&&s.level===0&&this.parent.parentData.push(s),!u(s[this.parent.childMapping]&&s[this.parent.childMapping].length)){var c=this.createRecords(s[this.parent.childMapping],s);s.childRecords=c}i.push(s)}return i},a.prototype.dataProcessor=function(e){var t=ae("isExport",e),i=ae("expresults",e),r=ae("exportType",e),n=ae("isPrinting",e),o,s=ae("actionArgs",e),l=ae("requestType",e),d=ae("data",e),h=ae("action",e),p=s,c=this.parent.getPrimaryKeyFieldNames()[0],m=ae("data",p);!u(p)&&!u(p.action)&&p.action==="add"&&!u(p.data)&&u(p.data[""+c])&&(p.data[""+c]=e.result[p.index][""+c],m.taskData[""+c]=e.result[p.index][""+c]),(!u(s)&&Object.keys(s).length||l==="save")&&(l=l||s.requestType,d=d||ae("data",s),h=h||ae("action",s),this.parent.editSettings.mode==="Batch"&&(this.batchChanges=this.parent.grid.editModule.getBatchChanges()),this.parent.isLocalData&&this.updateAction(d,h,l)),t&&!u(i)?o=i:o=ce(this.parent)?le("result",this.parent.grid.dataSource):this.parent.grid.dataSource;var g=o instanceof he?o.dataSource.json:o,y=ce(this.parent)?le("count",this.parent.dataSource):g.length,w=new Xe,v=ae("query",e),T,C;if(u(v)||(T=v.queries.filter(function(be){return be.fn==="onWhere"}),C=v.queries.filter(function(be){return be.fn==="onSearch"})),this.parent.grid.allowFiltering&&this.parent.grid.filterSettings.columns.length||this.parent.grid.searchSettings.key.length>0||!u(v)&&(T.length||C.length)&&this.parent.isLocalData){u(v)&&(v=new Xe,v=le("grid.renderModule.data",this.parent).filterQuery(v),v=le("grid.renderModule.data",this.parent).searchQuery(v));var P=v.queries.filter(function(be){return be.fn==="onWhere"}),R=v.queries.filter(function(be){return be.fn==="onSearch"});w.queries=P.concat(R);var N=new he(g).executeLocal(w);if(this.parent.notify("updateFilterRecs",{data:N}),g=this.dataResults.result,this.dataResults.result=null,this.parent.grid.aggregates.length>0){var D=ae("query",e);if(u(v)&&(v=le("grid.renderModule.data",this.parent).aggregateQuery(new Xe)),!u(D)){var S=D.queries.filter(function(be){return be.fn==="onAggregates"});g=this.parent.summaryModule.calculateSummaryValue(S,g,!0)}}}if(this.parent.grid.aggregates.length&&this.parent.grid.sortSettings.columns.length===0&&this.parent.grid.filterSettings.columns.length===0&&!this.parent.grid.searchSettings.key.length){var x=ae("query",e);u(x)&&(x=le("grid.renderModule.data",this.parent).aggregateQuery(new Xe));var S=x.queries.filter(function(Ee){return Ee.fn==="onAggregates"});g=this.parent.summaryModule.calculateSummaryValue(S,this.parent.flatData,!0)}if(this.parent.grid.sortSettings.columns.length>0||this.isSortAction){this.isSortAction=!1;for(var I=this.parent.parentData,D=ae("query",e),E=new Xe,L=this.parent.grid.sortSettings.columns.length-1;L>=0;L--){var z="getColumnByField",_=this.parent.grid.renderModule.data[""+z](this.parent.grid.sortSettings.columns[parseInt(L.toString(),10)].field),G=_.sortComparer&&ut(this.parent)?_.sortComparer.bind(_):this.parent.grid.sortSettings.columns[parseInt(L.toString(),10)].direction;E.sortBy(this.parent.grid.sortSettings.columns[parseInt(L.toString(),10)].field,G)}var Q=new he(I).executeLocal(E);if(this.parent.allowRowDragAndDrop&&!u(this.parent.rowDragAndDropModule.draggedRecord)&&this.parent.rowDragAndDropModule.droppedRecord.hasChildRecords&&this.parent.rowDragAndDropModule.dropPosition!=="middleSegment"){var ie=Q.indexOf(this.parent.rowDragAndDropModule.draggedRecord);Q.splice(ie,1);var Z=Q.indexOf(this.parent.rowDragAndDropModule.droppedRecord);this.parent.rowDragAndDropModule.droppedRecord.hasChildRecords&&this.parent.rowDragAndDropModule.dropPosition==="topSegment"?Q.splice(Z,0,this.parent.rowDragAndDropModule.draggedRecord):this.parent.rowDragAndDropModule.dropPosition==="bottomSegment"&&Q.splice(Z+1,0,this.parent.rowDragAndDropModule.draggedRecord)}var U={modifiedData:Q,filteredData:g,srtQry:E};if(this.parent.notify("createSort",U),g=U.modifiedData,this.dataResults.result=null,this.sortedData=g,this.parent.notify("updateModel",{}),this.parent.grid.aggregates.length>0&&!u(D)){var ye=!1,Ge=ae("query",e),S=Ge.queries.filter(function(Fe){return Fe.fn==="onAggregates"});g=this.parent.summaryModule.calculateSummaryValue(S,this.sortedData,ye)}}y=ce(this.parent)?le("count",this.parent.dataSource):g.length;var je=this.paging(g,y,t,n,r,e);g=je.result,y=je.count,e.result=g,e.count=y,this.parent.notify("updateResults",e)},a.prototype.paging=function(e,t,i,r,n,o){if(this.parent.allowPaging&&(!i||n==="CurrentPage")&&(!r||this.parent.printMode==="CurrentPage"))this.parent.notify(Xi,{result:e,count:t,actionArgs:o}),e=this.dataResults.result,t=ce(this.parent)?le("count",this.parent.dataSource):this.dataResults.count;else if((this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(!i||n==="CurrentPage")&&le("requestType",o)!=="save"){var s=this.parent.enableInfiniteScrolling?o:le("actionArgs",o);this.parent.notify(Xi,{result:e,count:t,actionArgs:s}),e=this.dataResults.result,t=this.dataResults.count}var l="isPdfExport",d="isCollapsedStatePersist";if((r===!0||o[""+l]&&(u(o[""+d])||o[""+d]))&&this.parent.printMode==="AllPages"){for(var h=[],p=0;p<e.length;p++){var c=Et(this.parent,e[parseInt(p.toString(),10)],this.parent.parentData);c&&h.push(e[parseInt(p.toString(),10)])}e=h,t=e.length}var m={result:e,count:t};return m},a.prototype.updateData=function(e){this.dataResults=e},a.prototype.updateAction=function(e,t,i){(i==="delete"||i==="save")&&this.parent.notify(qr,{value:e,action:t||i}),i==="batchsave"&&this.parent.editSettings.mode==="Batch"&&this.parent.notify(Si,{})},a}(),bt;(function(a){a[a.Add=0]="Add",a[a.Edit=1]="Edit",a[a.Update=2]="Update",a[a.Delete=3]="Delete",a[a.Cancel=4]="Cancel",a[a.Search=5]="Search",a[a.ExpandAll=6]="ExpandAll",a[a.CollapseAll=7]="CollapseAll",a[a.ExcelExport=8]="ExcelExport",a[a.PdfExport=9]="PdfExport",a[a.CsvExport=10]="CsvExport",a[a.Print=11]="Print",a[a.RowIndent=12]="RowIndent",a[a.RowOutdent=13]="RowOutdent"})(bt||(bt={}));var fi;(function(a){a[a.AutoFit=0]="AutoFit",a[a.AutoFitAll=1]="AutoFitAll",a[a.SortAscending=2]="SortAscending",a[a.SortDescending=3]="SortDescending",a[a.Edit=4]="Edit",a[a.Delete=5]="Delete",a[a.Save=6]="Save",a[a.Cancel=7]="Cancel",a[a.PdfExport=8]="PdfExport",a[a.ExcelExport=9]="ExcelExport",a[a.CsvExport=10]="CsvExport",a[a.FirstPage=11]="FirstPage",a[a.PrevPage=12]="PrevPage",a[a.LastPage=13]="LastPage",a[a.NextPage=14]="NextPage",a[a.AddRow=15]="AddRow",a[a.RowIndent=16]="RowIndent",a[a.RowOutdent=17]="RowOutdent"})(fi||(fi={}));var Yh=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yt=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Zh=function(a){Yh(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return yt([A(12)],e.prototype,"pageSize",void 0),yt([A(8)],e.prototype,"pageCount",void 0),yt([A(1)],e.prototype,"currentPage",void 0),yt([A()],e.prototype,"totalRecordsCount",void 0),yt([A(!1)],e.prototype,"enableQueryString",void 0),yt([A(!1)],e.prototype,"pageSizes",void 0),yt([A(null)],e.prototype,"template",void 0),yt([A("All")],e.prototype,"pageSizeMode",void 0),e}(Ze),ca=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wt=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Qh=function(a){ca(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.intl=new Wa,t.templateFn={},t}return e.prototype.setFormatter=function(t){this.format&&(this.format.skeleton||this.format.format)&&(this.formatFn=this.getFormatFunction(this.format))},e.prototype.getFormatFunction=function(t){return t.type?this.intl.getDateFormat(t):this.intl.getNumberFormat(t)},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setTemplate=function(t){t===void 0&&(t={}),this.footerTemplate!==void 0&&(this.templateFn[En(dr,dr.Summary)]={fn:di(this.footerTemplate,t),property:"footerTemplate"})},e.prototype.getTemplate=function(t){return this.templateFn[En(dr,t)]},e.prototype.setPropertiesSilent=function(t){this.setProperties(t,!0)},wt([A()],e.prototype,"type",void 0),wt([A()],e.prototype,"footerTemplate",void 0),wt([A()],e.prototype,"field",void 0),wt([A()],e.prototype,"format",void 0),wt([A()],e.prototype,"columnName",void 0),wt([A()],e.prototype,"customAggregate",void 0),e}(Ze),Kh=function(a){ca(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return wt([or([],Qh)],e.prototype,"columns",void 0),wt([A(!0)],e.prototype,"showChildSummary",void 0),e}(Ze),Jh=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tt=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ep=function(a){Jh(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return tt([A(!1)],e.prototype,"allowAdding",void 0),tt([A(!1)],e.prototype,"allowEditing",void 0),tt([A(!1)],e.prototype,"allowDeleting",void 0),tt([A("Cell")],e.prototype,"mode",void 0),tt([A("Top")],e.prototype,"newRowPosition",void 0),tt([A(!0)],e.prototype,"allowEditOnDblClick",void 0),tt([A(!0)],e.prototype,"showConfirmDialog",void 0),tt([A(!1)],e.prototype,"showDeleteConfirmDialog",void 0),tt([A("")],e.prototype,"template",void 0),tt([A({})],e.prototype,"dialog",void 0),tt([A(!1)],e.prototype,"allowNextRowEdit",void 0),e}(Ze),ua=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nr=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},tp=function(a){ua(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return nr([A()],e.prototype,"field",void 0),nr([A()],e.prototype,"direction",void 0),e}(Ze),ip=function(a){ua(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return nr([or([],tp)],e.prototype,"columns",void 0),nr([A(!0)],e.prototype,"allowUnsort",void 0),e}(Ze);function Ct(a,e,t,i,r,n,o){var s=a.value,l=a.action,d="changedRecords",h,p,c="addedRecords",m,g=e.grid.getPrimaryKeyFieldNames()[0],y=e.dataSource instanceof he?e.dataSource.dataSource.json:e.dataSource,w=[],v=s,T=!1;if(e.editSettings.mode==="Batch"&&(m=e.grid.editModule.getBatchChanges()),l==="add"||l==="batchsave"&&e.editSettings.mode==="Batch"&&m[""+c].length){var C=rp(a,y,e,t,i,r,o);s=C.value,T=C.isSkip}if(s instanceof Array?w=We(s):w.push(ue({},s)),!T&&(l!=="add"||e.editSettings.newRowPosition!=="Top"&&e.editSettings.newRowPosition!=="Bottom"))for(var P=0;P<w.length;P++){typeof w[parseInt(P.toString(),10)][""+g]=="object"&&(w[parseInt(P.toString(),10)]=w[parseInt(P.toString(),10)][""+g]);var R=w[parseInt(P.toString(),10)].taskData?Object.keys(w[parseInt(P.toString(),10)].taskData):Object.keys(w[parseInt(P.toString(),10)]);h=y.length;for(var N=function(){if(y[parseInt(h.toString(),10)][""+g]===w[parseInt(P.toString(),10)][""+g])if(l==="delete"){var S=y[parseInt(h.toString(),10)];if(y.splice(h,1),t){if(!u(S[""+e.parentIdMapping])){for(var x=e.flatData.filter(function(_){return _[""+e.idMapping]===S[""+e.parentIdMapping]})[0],I=x?x[""+e.childMapping]:[],E=I.length-1;E>=0;E--)if(I[parseInt(E.toString(),10)][""+e.idMapping]===S[""+e.idMapping]){!e.enableImmutableMode&&x.childRecords.length===x.Children.length&&x.childRecords.splice(E,1),I.splice(E,1),I.length||(x.hasChildRecords=!1,$e(g,x,l,e,t));break}}return"break"}}else{if(l==="edit"){for(p=0;p<R.length;p++)if(Object.prototype.hasOwnProperty.call(y[parseInt(h.toString(),10)],R[parseInt(p.toString(),10)])&&(e.editSettings.mode!=="Cell"||!u(m)&&m[""+d].length===0||R[parseInt(p.toString(),10)]===n)){var L=it(e,w[parseInt(P.toString(),10)].uniqueID);y[parseInt(h.toString(),10)][R[parseInt(p.toString(),10)]]=w[parseInt(P.toString(),10)][R[parseInt(p.toString(),10)]],L&&L.taskData&&(L.taskData[R[parseInt(p.toString(),10)]]=L[R[parseInt(p.toString(),10)]]=y[parseInt(h.toString(),10)][R[parseInt(p.toString(),10)]])}}else if(l==="add"||l==="batchsave"){var z=void 0;e.editSettings.newRowPosition==="Child"?t?(v.taskData[""+e.parentIdMapping]=y[parseInt(h.toString(),10)][""+e.idMapping],y.splice(h+1,0,v.taskData)):(Object.prototype.hasOwnProperty.call(y[parseInt(h.toString(),10)],e.childMapping)||(y[parseInt(h.toString(),10)][""+e.childMapping]=[]),y[parseInt(h.toString(),10)][""+e.childMapping].push(v.taskData),$e(g,y[parseInt(h.toString(),10)],l,e,t,v)):e.editSettings.newRowPosition==="Below"?(y.splice(h+1,0,v.taskData),u(v.parentItem)||$e(g,y[h+1],l,e,t,v)):i?e.editSettings.newRowPosition==="Above"&&(y.splice(h,0,v.taskData),u(v.parentItem)||$e(g,y[parseInt(h.toString(),10)],l,e,t,v)):(z=0,y.splice(z,0,v.taskData))}return"break"}else u(y[parseInt(h.toString(),10)][""+e.childMapping])||ga(y[parseInt(h.toString(),10)][""+e.childMapping],w[parseInt(P.toString(),10)],l,g,e,t,v,n)&&$e(g,y[parseInt(h.toString(),10)],l,e,t)};h--&&h>=0;){var D=N();if(D==="break")break}}}function rp(a,e,t,i,r,n,o){var s,l=!1,d=t.grid.getCurrentViewRecords();switch(s=ue({},a.value),s=si(s),t.editSettings.newRowPosition){case"Top":e.unshift(s),l=!0;break;case"Bottom":e.push(s),l=!0;break;case"Above":u(o)?(s=ue({},d[r+1]),s=si(s)):(s=ue({},o),s=si(s));break;case"Below":case"Child":if(!u(o))s=ue({},o),s=si(s);else{var h=t.grid.getPrimaryKeyFieldNames()[0],p=d[parseInt(r.toString(),10)];!u(p)&&p[""+h]===a.value[""+h]||n!==-1?s=ue({},p):s=ue({},a.value),s=si(s);var c="internalProperties";t.editModule[""+c].taskData=s}n===-1&&(e.unshift(s),l=!0)}return{value:s,isSkip:l}}function ga(a,e,t,i,r,n,o,s){for(var l=!1,d=a.length;d--&&d>=0;)if(a[parseInt(d.toString(),10)][""+i]===e[""+i]||n&&a[parseInt(d.toString(),10)][r.parentIdMapping]===e[r.idMapping])if(t==="edit"){for(var h=Object.keys(e),p=it(r,e.uniqueID),c=0;c<h.length;c++)if(Object.prototype.hasOwnProperty.call(a[parseInt(d.toString(),10)],h[parseInt(c.toString(),10)])&&(r.editSettings.mode!=="Cell"||h[parseInt(c.toString(),10)]===s)&&(p[h[parseInt(c.toString(),10)]]=p.taskData[h[parseInt(c.toString(),10)]]=a[parseInt(d.toString(),10)][h[parseInt(c.toString(),10)]]=e[h[parseInt(c.toString(),10)]],r.grid.editSettings.mode==="Normal"&&r.editSettings.mode==="Cell"&&!u(r.grid.editModule))){var m="editModule";r.grid.editModule[""+m].editRowIndex=e.index,r.grid.editModule[""+m].updateCurrentViewData(e)}break}else t==="add"||t==="batchsave"?r.editSettings.newRowPosition==="Child"?n?(o[""+r.parentIdMapping]=a[parseInt(d.toString(),10)][r.idMapping],a.splice(d+1,0,o),$e(i,a[parseInt(d.toString(),10)],t,r,n,o)):(Object.prototype.hasOwnProperty.call(a[parseInt(d.toString(),10)],r.childMapping)||(a[parseInt(d.toString(),10)][r.childMapping]=[]),a[parseInt(d.toString(),10)][r.childMapping].push(o.taskData),$e(i,a[parseInt(d.toString(),10)],t,r,n,o)):r.editSettings.newRowPosition==="Above"?(a.splice(d,0,o.taskData),u(o.parentItem)||$e(i,a[parseInt(d.toString(),10)],t,r,n,o)):r.editSettings.newRowPosition==="Below"&&(a.splice(d+1,0,o.taskData),u(o.parentItem)||$e(i,a[parseInt(d.toString(),10)],t,r,n,o)):(a.splice(d,1),a.length||(l=!0));else u(a[parseInt(d.toString(),10)][r.childMapping])||ga(a[parseInt(d.toString(),10)][r.childMapping],e,t,i,r,n,o,s)&&$e(i,a[parseInt(d.toString(),10)],t,r,n);return l}function $e(a,e,t,i,r,n){if((i.editSettings.newRowPosition==="Above"||i.editSettings.newRowPosition==="Below")&&(t==="add"||t==="batchsave")&&!u(n.parentItem)){var o=it(i,n.parentItem.uniqueID);o.childRecords.push(n)}else{var s=i.grid.getCurrentViewRecords(),l;if(s.map(function(v,T){if(v[""+a]===e[""+a]){l=T;return}}),i.enableVirtualization&&u(l)){var d=le("uniqueIDCollection."+n.parentUniqueID,i);e=d}if(u(l)||(e=s[parseInt(l.toString(),10)]),i.enableVirtualization&&u(e)&&!u(n)&&(e=le("uniqueIDCollection."+n.parentUniqueID,i)),!r&&!u(e.childRecords)&&e.childRecords.length?e.hasChildRecords=!0:e.hasChildRecords=!1,t==="add"||t==="batchsave"){e.expanded=!0,e.hasChildRecords=!0,i.sortSettings.columns.length&&u(n)&&(n=s.filter(function(v){return v.parentUniqueID===e.uniqueID?v:null}));var h=n?n instanceof Array?n[0]:n:s[l+1];i.editSettings.newRowPosition!=="Below"&&(Object.prototype.hasOwnProperty.call(e,"childRecords")?!u(n)&&e[""+a]!==n[""+a]&&e.childRecords.push(n):e.childRecords=[],e.childRecords.indexOf(h)===-1&&e[""+a]!==n[""+a]&&e.childRecords.unshift(h),r&&(Object.prototype.hasOwnProperty.call(e,i.childMapping)||(e[i.childMapping]=[]),e[""+i.childMapping].indexOf(h)===-1&&e[""+a]!==n[""+a]&&e[i.childMapping].unshift(h)))}for(var p=i.grid.getPrimaryKeyFieldNames()[0],c=i.grid.dataSource instanceof he?i.grid.dataSource.dataSource.json:i.grid.dataSource,m=0;m<c.length;m++)if(c[parseInt(m.toString(),10)][""+p]===e[""+p]){c[parseInt(m.toString(),10)]=e;break}i.grid.setRowData(a,e);var g=i.getRowByIndex(l);i.editSettings.mode==="Batch"&&(t==="add"?g=i.getRows()[i.grid.getCurrentViewRecords().indexOf(e)]:g=i.getRows()[i.grid.getRowIndexByPrimaryKey(e[""+a])]);var y=void 0;if((i.frozenRows||i.getFrozenColumns())&&(y=i.getRowByIndex(l)),!i.enableVirtualization&&!u(g)||!u(y)){var w=i.treeColumnIndex;i.allowRowDragAndDrop&&i.enableImmutableMode&&(w=w+1),i.renderModule.cellRender({data:e,cell:g.cells[parseInt(w.toString(),10)]?g.cells[parseInt(w.toString(),10)]:y.cells[w-i.getFrozenColumns()],column:i.grid.getColumns()[i.treeColumnIndex],requestType:t}),(i.enableImmutableMode&&i.action==="indenting"||i.action==="outdenting")&&i.renderModule.RowModifier({data:e,row:g})}}}var np=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ir=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},op=function(a){np(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Ir([A(!1)],e.prototype,"enableCache",void 0),Ir([A(3)],e.prototype,"maxBlocks",void 0),Ir([A(3)],e.prototype,"initialBlocks",void 0),e}(Ze),ap=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),F=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var s=a.length-1;s>=0;s--)(o=a[s])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},sp=function(a){ap(e,a);function e(i,r){var n=a.call(this,i,r)||this;n.dataResults={},n.uniqueIDCollection={},n.uniqueIDFilterCollection={},n.changedRecords="changedRecords",n.deletedRecords="deletedRecords",n.addedRecords="addedRecords",n.indentOutdentAction="indentOutdentAction",n.modifiedRecords=[],n.stackedHeader=!1,n.objectEqualityChecker=function(s,l){if(s){for(var d=Object.keys(s),h=!0,p=["Children","childRecords","taskData","uniqueID","parentItem","parentUniqueID","index"],c=0;c<d.length;c++)if(s[d[parseInt(c.toString(),10)]]!==l[d[parseInt(c.toString(),10)]]&&p.indexOf(d[parseInt(c.toString(),10)])===-1){var m=s[d[parseInt(c.toString(),10)]]instanceof Date&&l[d[parseInt(c.toString(),10)]]instanceof Date;if(!m||s[d[parseInt(c.toString(),10)]].getTime()!==l[d[parseInt(c.toString(),10)]].getTime()){h=!1;break}}return h}else return!1},t.Inject(Nh,oo),pe("mergePersistData",n.mergePersistTreeGridData,n);var o="Logger";return u(n.injectedModules[""+o])||Dt.Inject(Fr),n.injectedModules.filter(function(s){s.prototype.getModuleName()==="freeze"&&Dt.Inject(js)}),n.grid=new Dt,n}t=e,e.prototype.excelExport=function(i,r,n,o){return this.excelExportModule.Map(i,r,n,o,!1)},e.prototype.csvExport=function(i,r,n,o){return this.excelExportModule.Map(i,r,n,o,!0)},e.prototype.pdfExport=function(i,r,n,o){return this.pdfExportModule.Map(i,r,n,o)},e.prototype.serverExcelExport=function(i){this.isExcel=!0,this.exportTreeGrid(i)},e.prototype.serverPdfExport=function(i){this.isExcel=!1,this.exportTreeGrid(i)},e.prototype.serverCsvExport=function(i){this.isExcel=!0,this.exportTreeGrid(i)},e.prototype.exportTreeGrid=function(i){var r=this,n=r.grid.getDataModule().generateQuery(!0),o=new ko().processQuery(new he({url:""}),n),s=JSON.parse(o.data),l=JSON.parse(this.addOnPersist(["allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","columns","locale","searchSettings","idMapping","parentIdMapping","childMapping","treeColumnIndex"])),d=["field","headerText","type","format","visible","template","index","width","textAlign","headerTextAlign","columns"];l.filterSettings.columns=s.where,l.searchSettings.fields=s.search&&s.search[0].fields||[],l.sortSettings.columns=s.sorted,l.columns=this.setHeaderText(l.columns,d);var h=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),p=this.createElement("input",{id:"treeGridInput",attrs:{name:"treeGridModel"}});p.value=JSON.stringify(l),h.method="POST",h.action=i,h.appendChild(p),document.body.appendChild(h),h.submit(),h.remove()},e.prototype.setHeaderText=function(i,r){for(var n=0;n<i.length;n++){var o=this.getColumnByUid(i[parseInt(n.toString(),10)].uid);this.stackedHeader&&u(o)&&(o=u(i[parseInt(n.toString(),10)].field)?i[parseInt(n.toString(),10)]:this.getColumnByField(i[parseInt(n.toString(),10)].field)),i[parseInt(n.toString(),10)].headerText=o.headerText,u(o.template)||(i[parseInt(n.toString(),10)].template="true"),i[parseInt(n.toString(),10)].format&&(i[parseInt(n.toString(),10)].format=Xa(this.getFormat(o.format),o.type,!1,this.currencyCode),!this.isExcel&&(o.type==="datetime"||o.type==="date")&&(i[parseInt(n.toString(),10)].format=i[parseInt(n.toString(),10)].format.toString().replace("AM/PM","tt")),i[parseInt(n.toString(),10)].type=o.type),i[parseInt(n.toString(),10)].columns&&this.setHeaderText(i[parseInt(n.toString(),10)].columns,r);for(var s=Object.keys(i[parseInt(n.toString(),10)]),l=0;l<s.length;l++)r.indexOf(s[parseInt(l.toString(),10)])<0&&delete i[parseInt(n.toString(),10)][s[parseInt(l.toString(),10)]]}return i},e.prototype.getFormat=function(i){return typeof i=="object"?u(i.format)?i.skeleton:i.format:i},e.prototype.getModuleName=function(){return"treegrid"},e.prototype.preRender=function(){this.TreeGridLocale(),this.initProperties(),this.defaultLocale={Above:"Above",Below:"Below",Child:"Child",AddRow:"Add Row",ExpandAll:"Expand All",CollapseAll:"Collapse All",RowIndent:"Indent",RowOutdent:"Outdent"},this.l10n=new $t("treegrid",this.defaultLocale,this.locale),this.isSelfReference&&u(this.childMapping)&&(this.childMapping="Children")},e.prototype.sortByColumn=function(i,r,n){if(u(i)&&u(r)){var o="The provided value for the columnName and direction is undefined. Please ensure the columnName and direction contains string.";this.trigger(Ie,{error:o})}this.sortModule&&this.sortModule.sortColumn(i,r,n)},e.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},e.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},e.prototype.search=function(i){this.grid.search(i)},e.prototype.autoFitColumns=function(i){this.resizeModule.autoFitColumns(i),this.updateColumnModel()},e.prototype.reorderColumns=function(i,r){if(u(i)&&u(r)){var n="The provided value for the fromFName and toFName is undefined. Please ensure the fromFName and toFName contains string.";this.trigger(Ie,{error:n})}this.grid.reorderColumns(i,r)},e.prototype.TreeGridLocale=function(){if(!u(this.locale)){var i=$t.locale,r={};pe(this.locale,{},r);var n=void 0;n={},n=ae(this.locale,i);var o=void 0;o={},o=ae(this.getModuleName(),n),pe("grid",o,ae(this.locale,r)),$t.load(r)}},e.prototype.print=function(){this.printModule.print()},e.prototype.treeGridkeyActionHandler=function(i){if(this.allowKeyboard){var r=void 0,n=void 0,o=void 0,s=void 0,l=void 0;switch(i.action){case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"ctrlShiftUpArrow":r=i.target,o=r.closest(".e-rowcell"),u(o)||(s=o.closest("tr"),!u(s)&&!u(s.getElementsByClassName("e-treegridexpand")[0])&&this.expandCollapseRequest(s.querySelector(".e-treegridexpand")));break;case"ctrlShiftDownArrow":r=i.target,o=r.closest(".e-rowcell"),u(o)||(s=o.closest("tr"),!u(s)&&!u(s.getElementsByClassName("e-treegridcollapse")[0])&&this.expandCollapseRequest(s.querySelector(".e-treegridcollapse")));break;case"downArrow":if(!this.enableVirtualization&&u(this.rowTemplate)&&(r=i.target,u(r.querySelectorAll(".e-rowcell"))||(r=Xt(r,"e-rowcell")),!u(r)&&(n=r.parentElement,!u(n)))){var d=n.cellIndex;if(this.grid.getColumnByIndex(d).editType==="dropdownedit"&&u(this.grid.getColumnByIndex(d).edit.obj)&&(n=r),l=this.findnextRowElement(n),l!==null){var h=r.cellIndex,p=l.children[parseInt(h.toString(),10)];se([p],"e-focused"),se([p],"e-focus")}else this.clearSelection()}break;case"upArrow":if(!this.enableVirtualization&&u(this.rowTemplate)&&(r=i.target,u(r.querySelectorAll(".e-rowcell"))||(r=Xt(r,"e-rowcell")),!u(r)&&(n=r.parentElement,!u(n)))){var d=n.cellIndex;if(this.grid.getColumnByIndex(d).editType==="dropdownedit"&&u(this.grid.getColumnByIndex(d).edit.obj)&&(n=r),l=this.findPreviousRowElement(n),l!==null){var c=r.cellIndex;if(!u(c)){var m=l.children[parseInt(c.toString(),10)];se([m],"e-focused"),se([m],"e-focus")}}else this.clearSelection()}}}},e.prototype.findnextRowElement=function(i){var r=i.nextElementSibling;return r!==null&&(r.className.indexOf("e-summaryrow")!==-1||r.style.display==="none")&&(r=this.findnextRowElement(r)),r},e.prototype.findPreviousRowElement=function(i){var r=i.previousElementSibling;return r!==null&&(r.className.indexOf("e-summaryrow")!==-1||r.style.display==="none")&&(r=this.findPreviousRowElement(r)),r},e.prototype.initProperties=function(){this.defaultLocale={},this.flatData=[],this.infiniteScrollData=[],this.remoteCollapsedData=[],this.remoteExpandedData=[],this.parentData=[],this.columnModel=[],this.isExpandAll=!1,this.isCollapseAll=!1,this.keyConfigs={ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlShiftUpArrow:"ctrl+shift+uparrow",ctrlShiftDownArrow:"ctrl+shift+downarrow",downArrow:"downArrow",upArrow:"upArrow"},this.isLocalData=!(this.dataSource instanceof he)||this.dataSource.dataSource.offline||!u(this.dataSource.ready)||this.dataSource.adaptor instanceof Gt,this.isSelfReference=!u(this.parentIdMapping)},e.prototype.wireEvents=function(){te.add(this.grid.element,"click",this.mouseClickHandler,this),te.add(this.element,"touchend",this.mouseClickHandler,this),this.keyboardModule=new Ya(this.element,{keyAction:this.treeGridkeyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex)},e.prototype.requiredModules=function(){var i=[],r="splitFrozenCount";if(!this.isReact&&u(this.changedProperties.columns)&&this.grid[""+r](this.getColumns()),this.isDestroyed)return i;i.push({member:"filter",args:[this,this.filterSettings],name:"Filter"}),u(this.toolbar)||i.push({member:"toolbar",args:[this],name:"Toolbar"}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this],name:"ContextMenu"}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowReordering&&i.push({member:"reorder",args:[this],name:"Reorder"}),this.allowSorting&&i.push({member:"sort",args:[this],name:"Sort"}),this.aggregates.length>0&&i.push({member:"summary",args:[this],name:"Aggregate"}),this.allowResizing&&i.push({member:"resize",args:[this],name:"Resize"}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this],name:"ExcelExport"});var n=this.injectedModules.filter(function(o){return o.prototype.getModuleName()==="freeze"});return(this.frozenColumns||this.frozenRows||this.getFrozenColumns()||this.grid.getFrozenLeftColumnsCount()||this.grid.getFrozenRightColumnsCount())&&n.length>0&&i.push({member:"freeze",args:[this],name:"Freeze"}),this.detailTemplate&&i.push({member:"detailRow",args:[this],name:"DetailRow"}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this],name:"ColumnMenu"}),this.showColumnChooser&&i.push({member:"ColumnChooser",args:[this],name:"ColumnChooser"}),this.extendRequiredModules(i),i},e.prototype.extendRequiredModules=function(i){var r=this.injectedModules.filter(function(n){return n.prototype.getModuleName()==="rowDragAndDrop"});(this.allowRowDragAndDrop||r.length)&&(!u(this.toolbar)&&(this.toolbar.includes("Indent")||this.toolbar.includes("Outdent"))&&(this.isIndentEnabled=!0),i.push({member:"rowDragAndDrop",args:[this],name:"RowDD"})),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this],name:"Edit"}),!u(this.columns)&&this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this],name:"CommandColumn"}),this.allowSelection&&i.push({member:"selection",args:[this],name:"Selection"}),this.enableVirtualization&&i.push({member:"virtualScroll",args:[this],name:"VirtualScroll"}),this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this],name:"InfiniteScroll"}),i.push({member:"logger",args:[this.grid]})},e.prototype.isCommandColumn=function(i){var r=this;return i.some(function(n){return n.columns?r.isCommandColumn(n.columns):!!(n.commands||n.commandsTemplate)})},e.prototype.unwireEvents=function(){this.grid&&this.grid.element&&te.remove(this.grid.element,"click",this.mouseClickHandler),this.element&&(te.remove(this.element,"touchend",this.mouseClickHandler),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.allowKeyboard&&this.element.removeAttribute("tabIndex"))},e.prototype.log=function(i,r){this.loggerModule&&this.loggerModule.treeLog(i,r,this)},e.prototype.render=function(){var i=this;this.isReact&&(this.grid.isReact=!0,this.grid.portals=[]),this.isVue&&(this.grid.isVue=!0,this.grid.vueInstance=this.vueInstance),Za({target:this.element},this.createElement),this.log(["mapping_fields_missing"]),this.renderModule=new Wh(this),this.dataModule=new Xh(this),this.printModule=new Hh(this),this.trigger(Ch),this.autoGenerateColumns(),this.initialRender=!0,u(this.dataSource)||this.convertTreeData(this.dataSource),this.loadGrid(),this.element.classList.contains("e-treegrid")&&this.rowDropSettings.targetID&&(this.grid.rowDropSettings.targetID+="_gridcontrol"),this.addListener();var r=ge("div",{id:this.element.id+"_gridcontrol"});se([this.element],"e-treegrid"),!u(this.height)&&typeof this.height=="string"&&this.height.indexOf("%")!==-1&&(this.element.style.height=this.height),!u(this.width)&&typeof this.width=="string"&&this.width.indexOf("%")!==-1&&(this.element.style.width=this.width),this.element.appendChild(r);var n=this.grid.requiredModules;this.grid.requiredModules=function(){var p=[];p=n.apply(this);for(var c=0;c<p.length;c++)p[parseInt(c.toString(),10)].member==="virtualscroll"&&(p[parseInt(c.toString(),10)].member="treeVirtualScroll");return p};var o="root";this.grid[""+o]=this[""+o]?this[""+o]:this,this.grid.appendTo(r),this.actionFailureHandler();var s=this.element.getElementsByClassName("e-gridcontent")[0].childNodes[0];s.setAttribute("tabindex","0");var l=this.element.getElementsByClassName("e-content")[0].querySelector(".e-table");u(l)||l.setAttribute("role","treegrid"),this.isIndentEnabled&&this.refreshToolbarItems(),this.wireEvents(),this.renderComplete();var d="destroyTemplate",h=this.grid[""+d];this.grid[""+d]=function(p,c){h.apply(i.grid);var m="portals";i.isReact&&u(i[""+m])||i.clearTemplate(p,c)}},e.prototype.actionFailureHandler=function(){var i=this,r=[],n=this.getPrimaryKeyFieldNames(),o=this.flatData.length;(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&n.length===0&&o!==0&&r.push("For the CRUD actions, it is necessary to enable Primary Key field for the unique data column."),this.allowRowDragAndDrop&&n.length===0&&o!==0&&r.push("For the Row Drag and Drop actions, it is necessary to enable Primary Key field for the unique data column."),this.allowPaging&&this.enableVirtualization&&r.push("Paging is not allowed in virtualization case."),o===0&&this.columns.length===0&&r.push("Either of the Data source or columns should be given."),this.frozenColumns>0&&this.columnModel.filter(function(p){return p.isFrozen})&&r.push("Use only one attribute for Frozen either IsFrozen or FrozenColumns."),this.enableVirtualization&&!u(this.detailTemplate)&&r.push("Virtual scrolling is not compatible with the detail template"),this.stackedHeader&&!u(this.detailTemplate)&&r.push("Virtual scrolling is not compatible with the detail template"),(this.frozenColumns>0||this.columnModel.filter(function(p){return p.isFrozen})||this.frozenRows>0)&&(!u(this.detailTemplate)||!u(this.rowTemplate))&&r.push("Frozen rows and columns are not supported with the Detail template and row template."),(this.frozenColumns>0||this.columnModel.filter(function(p){return p.isFrozen}).length>0||this.frozenRows>0)&&this.editSettings.mode==="Cell"&&r.push("Frozen rows and columns are not supported with cell editing."),this.allowSelection&&!u(this.rowTemplate)&&r.push("Selection is not supported in RowTemplate"),this.treeColumnIndex<0&&r.push("For showing tree structure it is must to set the TreeColumnIndex value."),this.treeColumnIndex>=this.columns.length&&r.push("TreeColumnIndex value should not exceed the total column count."),this.enableVirtualization&&(this.columnModel.some(function(p){return/%$/.test(p.width)})||/%$/.test(this.height.toString()))&&r.push("column width and height should be in pixels"),this.childMapping!=="Children"&&!u(this.idMapping)&&r.push("Both IdMapping and ChildMapping should not be used together for tree grid rendering."),(!u(this.idMapping)&&u(this.parentIdMapping)||u(this.idMapping)&&!u(this.parentIdMapping))&&r.push("IdMapping and ParentIdMapping properties should be defined and vice versa.");var s=this.columnModel.filter(function(p){return p.showCheckbox}),l=this.columns[this.treeColumnIndex];s.length!==0&&(s!==l&&r.push("ShowCheckbox column should not be defined other than the tree column."),s.length>1&&r.push("Only one column can have the ShowCheckbox option enabled."));var d=this.columnModel.filter(function(p){return p.textAlign==="Right"&&p.field===i.columnModel[i.treeColumnIndex].field});if(d.length!==0&&r.push("TextAlign right for the tree column is not applicable."),r.length>0){var h={error:{}};r.forEach(function(p,c){h.error[parseInt(c.toString(),10)]=p}),this.trigger(Ie,h)}},e.prototype.refreshToolbarItems=function(){var i=this.toolbarModule.getToolbar(),r=this.element.id+"_gridcontrol_indent",n=this.element.id+"_gridcontrol_outdent",o=i.querySelector("#"+r).parentElement,s=i.querySelector("#"+n).parentElement;o.classList.add("e-hidden"),s.classList.add("e-hidden")},e.prototype.afterGridRender=function(){u(this.grid.clipboardModule)||this.grid.clipboardModule.destroy(),this.clipboardModule=this.grid.clipboardModule=new zh(this,this.grid.serviceLocator)},e.prototype.convertTreeData=function(i){var r=this;if(ce(this)&&(i=le("result",i)),i instanceof Array&&i.length>0&&Object.prototype.hasOwnProperty.call(i[0],"level"))this.flatData=i,this.flatData.filter(function(o){pe("uniqueIDCollection."+o.uniqueID,o,r),o.level===0&&r.parentData.push(o)});else if(ce(this)){var n=le("result",this.dataSource);this.dataModule.convertToFlatData(n)}else this.dataModule.convertToFlatData(i)},e.prototype.bindGridProperties=function(){this.bindedDataSource(),this.grid.enableRtl=this.enableRtl,this.grid.allowKeyboard=this.allowKeyboard,this.grid.columns=this.getGridColumns(this.columns),this.grid.allowExcelExport=this.allowExcelExport,this.grid.allowPdfExport=this.allowPdfExport,this.grid.query=this.query,this.grid.columnQueryMode=this.columnQueryMode,this.grid.allowPaging=this.allowPaging,this.grid.pageSettings=ve(this.pageSettings),this.grid.pagerTemplate=this.pagerTemplate,this.grid.showColumnMenu=this.showColumnMenu,this.grid.allowSorting=this.allowSorting,this.grid.allowFiltering=this.allowFiltering,this.grid.enableVirtualization=this.enableVirtualization,this.grid.enableColumnVirtualization=this.enableColumnVirtualization,this.grid.enableInfiniteScrolling=this.enableInfiniteScrolling,this.grid.infiniteScrollSettings=this.infiniteScrollSettings,this.grid.enableVirtualMaskRow=this.enableVirtualMaskRow,this.grid.loadingIndicator=this.loadingIndicator,this.grid.width=this.width,this.grid.height=this.height,this.grid.enableAltRow=this.enableAltRow,this.grid.allowReordering=this.allowReordering,this.grid.allowTextWrap=this.allowTextWrap,this.grid.allowResizing=this.allowResizing,this.grid.enableHover=this.enableHover,this.grid.enableAutoFill=this.enableAutoFill,this.grid.enableAdaptiveUI=this.enableAdaptiveUI,this.grid.enableImmutableMode=this.enableImmutableMode,this.grid.allowRowDragAndDrop=this.allowRowDragAndDrop,this.grid.rowDropSettings=ve(this.rowDropSettings),this.grid.rowHeight=this.rowHeight,this.grid.gridLines=this.gridLines,this.grid.allowSelection=this.allowSelection,this.grid.toolbar=ve(this.getGridToolbar()),this.grid.toolbarTemplate=this.toolbarTemplate,this.grid.showColumnChooser=this.showColumnChooser,this.grid.filterSettings=ve(this.filterSettings),this.grid.selectionSettings=ve(this.selectionSettings),this.grid.sortSettings=ve(this.sortSettings),this.grid.searchSettings=ve(this.searchSettings),this.grid.aggregates=ve(this.aggregates),this.grid.textWrapSettings=ve(this.textWrapSettings),this.grid.printMode=ve(this.printMode),this.grid.locale=ve(this.locale),this.grid.selectedRowIndex=this.selectedRowIndex,this.grid.contextMenuItems=ve(this.getContextMenu()),this.grid.columnMenuItems=ve(this.columnMenuItems),this.grid.editSettings=this.getGridEditSettings(),this.grid.rowTemplate=ve(this.rowTemplate),this.grid.detailTemplate=ve(this.detailTemplate),this.grid.frozenRows=this.frozenRows,this.grid.frozenColumns=this.frozenColumns,this.grid.clipMode=ve(this.clipMode);var i="templateDotnetInstance";this.grid[""+i]=this[""+i];var r="isJsComponent";this.grid[""+r]=!0;var n="enableHtmlSanitizer";this.grid[""+n]=this.enableHtmlSanitizer},e.prototype.triggerEvents=function(i){this.trigger(ae("name",i),i)},e.prototype.IsExpandCollapseClicked=function(i){if(!u(i.target)&&(i.target.classList.contains("e-treegridexpand")||i.target.classList.contains("e-treegridcollapse")||i.target.classList.contains("e-summarycell"))&&!this.selectionSettings.checkboxOnly&&(!u(i.data)&&i.data.hasChildRecords||i.rowIndex!==-1&&u(i.data))){i.cancel=!0;return}},e.prototype.bindGridEvents=function(){var i=this;this.grid.rowSelecting=function(r){i.IsExpandCollapseClicked(r),!u(r.data)&&i.selectionSettings.persistSelection&&i.columnModel.filter(function(n){return n.type==="checkbox"}).length>0&&J(i)&&(!u(r.data.parentItem)||r.isHeaderCheckboxClicked)&&(i.parentQuery=i.query.queries.filter(function(n){return n.e.field===i.parentIdMapping}),i.query.queries=i.query.queries.slice(0,0)),i.pageSettings.pageSizeMode==="Root"&&(i.grid.selectionModule.totalRecordsCount=i.grid.currentViewData.length),i.enableVirtualization&&r.rowIndex===i.selectedRowIndex&&(r.cancel=!0),i.trigger(Rh,r)},this.grid.rowDeselecting=function(r){i.IsExpandCollapseClicked(r),!u(r.data)&&i.selectionSettings.persistSelection&&i.columnModel.filter(function(n){return n.type==="checkbox"}).length>0&&J(i)&&(i.parentQuery=i.query.queries.filter(function(n){return n.e.field===i.parentIdMapping}),i.query.queries=i.query.queries.slice(0,0)),i.trigger(Oh,r)},this.grid.rowSelected=function(r){if(i.enableVirtualization&&r.isHeaderCheckboxClicked&&i.grid.currentViewData.length!==i.grid.selectionModule.selectedRowIndexes.length)for(var n="updateRowSelection",o=0;o<i.getRows().length;o++)i.getRows()[parseInt(o.toString(),10)].getElementsByClassName("e-frame e-icons e-uncheck").length&&i.grid.selectionModule[""+n](i.getRows()[parseInt(o.toString(),10)],i.getCurrentViewRecords()[parseInt(o.toString(),10)].index);i.selectedRowIndex=i.grid.selectedRowIndex,i.notify(so,r),i.trigger(so,r)},this.grid.rowDeselected=function(r){i.selectedRowIndex=i.grid.selectedRowIndex,u(r.data)||i.notify(lo,r),i.trigger(lo,r)},this.grid.resizeStop=function(r){i.updateColumnModel(),i.trigger(Mh,r)},this.grid.excelQueryCellInfo=function(r){i.notify("excelCellInfo",r),r=i.dataResults},this.grid.pdfQueryCellInfo=function(r){i.notify("pdfCellInfo",r),r=i.dataResults},this.grid.checkBoxChange=function(r){i.trigger(ha,r)},this.grid.pdfExportComplete=this.triggerEvents.bind(this),this.grid.excelExportComplete=this.triggerEvents.bind(this),this.grid.excelHeaderQueryCellInfo=this.triggerEvents.bind(this),this.grid.pdfHeaderQueryCellInfo=this.triggerEvents.bind(this),this.grid.dataSourceChanged=this.triggerEvents.bind(this),this.grid.recordDoubleClick=this.triggerEvents.bind(this),this.grid.cellDeselected=this.triggerEvents.bind(this),this.grid.cellDeselecting=this.triggerEvents.bind(this),this.grid.columnMenuOpen=this.triggerEvents.bind(this),this.grid.columnMenuClick=this.triggerEvents.bind(this),this.grid.cellSelected=this.triggerEvents.bind(this),this.grid.headerCellInfo=this.triggerEvents.bind(this),this.grid.resizeStart=this.triggerEvents.bind(this),this.grid.resizing=this.triggerEvents.bind(this),this.grid.columnDrag=this.triggerEvents.bind(this),this.grid.columnDragStart=this.triggerEvents.bind(this),this.grid.columnDrop=this.triggerEvents.bind(this),this.grid.beforePrint=this.triggerEvents.bind(this),this.grid.beforeCopy=this.triggerEvents.bind(this),this.grid.beforePaste=function(r){for(var n=i.getRows(),o="rowIndex";n[r[""+o]].classList.contains("e-summaryrow");)r[""+o]++;i.trigger(Th,r)},this.grid.load=function(){if(i.grid.on("initial-end",i.afterGridRender,i),!u(i.loggerModule)){var r="loggerModule";i.loggerModule=i.grid[""+r]=new oo(i.grid)}},this.grid.printComplete=this.triggerEvents.bind(this),this.grid.actionFailure=function(r){i.trigger(Ie,r)},this.extendedGridDataBoundEvent(),this.extendedGridEvents(),this.extendedGridActionEvents(),this.extendedGridEditEvents(),this.bindGridDragEvents(),this.bindCallBackEvents()},e.prototype.lastRowBorder=function(i,r){for(var n=0;n<i.cells.length;n++)r?se([i.cells[parseInt(n.toString(),10)]],"e-lastrowcell"):Se([i.cells[parseInt(n.toString(),10)]],"e-lastrowcell")},e.prototype.isPixelHeight=function(){return this.height!=="auto"&&this.height.toString().indexOf("%")===-1},e.prototype.extendedGridDataBoundEvent=function(){var i=this;this.grid.dataBound=function(n){if(i.updateRowTemplate(),i.updateColumnModel(),i.updateAltRow(i.getRows()),i.notify("dataBoundArg",n),J(i)&&!ut(i)&&!i.hasChildMapping){var o=void 0;i.dataResults.result?o=0:o=1,pe("grid.contentModule.isLoaded",!(o>0),i)}if(i.isPixelHeight()&&i.initialRender){for(var s=i.getContentTable().rows,l=[].slice.call(s),d=l.length-1;d>0;d--)if(!So(l[parseInt(d.toString(),10)])){l[parseInt(d.toString(),10)].nextElementSibling&&i.lastRowBorder(l[parseInt(d.toString(),10)],!0);break}}var h="action";if(i.enableVirtualization&&i.selectionSettings.persistSelection&&(i.dataResults[""+h]==="expand"||i.dataResults[""+h]==="collapse")){var p="refreshPersistSelection";if(i.grid.selectionModule[""+p](),i.grid.selectionSettings.type==="Single"){var c="updateRowSelection",m=i.getCurrentViewRecords().indexOf(i.grid.selectionModule.data);i.grid.selectionModule[""+c](i.getRows()[parseInt(m.toString(),10)],m)}}if(i.enableVirtualization&&i.selectionSettings.persistSelection&&!u(i.virtualScrollModule.prevSelectedRecord))for(var d=0;d<i.virtualScrollModule.prevSelectedRecord.length;d++){var c="updateRowSelection",m=i.getCurrentViewRecords().indexOf(i.virtualScrollModule.prevSelectedRecord[parseInt(d.toString(),10)]);i.grid.selectionModule[""+c](i.getRows()[parseInt(m.toString(),10)],m)}i.trigger(Ih,n),i.initialRender=!1};var r=this;this.grid.beforeDataBound=function(n){var o="dataSource",s=ae("action",n);if((J(r)&&!ut(r)||ce(this))&&s!=="edit")r.notify("updateRemoteLevel",n),n=r.dataResults;else if(r.flatData.length===0&&ut(r)&&r.dataSource instanceof he){var l=r.dataSource;r.dataModule.convertToFlatData(l.dataSource.json),n.result=r.grid.dataSource[""+o].json=r.flatData}if(!J(r)&&!ce(this)&&!u(r.dataSource)&&(this.isPrinting&&pe("isPrinting",!0,n),r.notify("dataProcessor",n)),ue(n,r.dataResults),r.enableImmutableMode&&(n.result=n.result.slice()),r.initialRender&&(this.contentModule.objectEqualityChecker=r.objectEqualityChecker),!this.isPrinting){var d=new mt;return r.trigger(da,n,function(h){d.resolve(h)}),d}},this.grid.log=function(n,o){i.loggerModule&&i.loggerModule.log(n,o)}},e.prototype.bindCallBackEvents=function(){var i=this;this.grid.toolbarClick=function(r){if(!(r.item.id===i.grid.element.id+"_excelexport"&&i.allowExcelExport===!1||r.item.id===i.grid.element.id+"_pdfexport"&&i.allowPdfExport===!1||r.item.id===i.grid.element.id+"_csvexport"&&i.allowExcelExport===!1)){var n=new mt;return i.trigger(ho,r,function(o){o.cancel||i.notify(ho,r),n.resolve(o)}),n}},this.grid.cellSelecting=function(r){var n="actualTarget",o=i.grid.selectionModule[""+n];!u(o)&&(o.classList.contains("e-treegridexpand")||o.classList.contains("e-treegridcollapse"))&&(r.cancel=!0);var s=new mt;return i.trigger(ae("name",r),r,function(l){s.resolve(l)}),s},this.grid.beginEdit=function(r){if(!u(r.row)&&r.row.classList.contains("e-summaryrow")){r.cancel=!0;return}var n=new mt;return i.trigger(Yi,r,function(o){n.resolve(o)}),n}},e.prototype.extendedGridEditEvents=function(){var i=this;this.grid.dataStateChange=function(r){i.isExpandRefresh?(i.isExpandRefresh=!1,i.grid.dataSource={result:i.flatData,count:le("count",i.grid.dataSource)}):(r.action.requestType!=="infiniteScroll"&&(i.infiniteScrollData=[]),i.trigger(ao,r))},this.grid.cellSave=function(r){if(i.grid.isContextMenuOpen()){var n=i.grid.contextMenuModule.contextMenu.element.getElementsByClassName("e-selected")[0];(u(n)||n.id!==i.element.id+"_gridcontrol_cmenu_Save")&&(r.cancel=!0)}var o=new mt;return i.trigger(Nr,r,function(s){s.cancel||i.notify(Nr,s),o.resolve(s)}),o},this.grid.cellSaved=function(r){i.trigger(Ki,r),i.notify(Ki,r)},this.grid.cellEdit=function(r){var n="promise",o=new mt;return r[""+n]=o,i.notify(Ni,r),o},this.grid.batchAdd=function(r){i.trigger(er,r),i.notify(er,r)},this.grid.beforeBatchSave=function(r){i.trigger(rr,r),i.notify(rr,r)},this.grid.beforeBatchAdd=function(r){i.trigger(ir,r),i.notify(ir,r)},this.grid.batchDelete=function(r){i.trigger(vo,r),i.notify(vo,r)},this.grid.beforeBatchDelete=function(r){i.trigger(tr,r),i.notify(tr,r)},this.grid.batchCancel=function(r){i.editSettings.mode!=="Cell"&&i.trigger(Ji,r),i.notify(Ji,r)}},e.prototype.updateRowTemplate=function(){var i=this;this.rowTemplate&&(this.isReact&&this.getContentTable().rows.length===0?setTimeout(function(){if(i.treeColumnRowTemplate(),i.enableCollapseAll)for(var r=i.getCurrentViewRecords(),n=i.getContentTable().rows,o=0;o<n.length;o++){var s={data:r[parseInt(o.toString(),10)],row:n[parseInt(o.toString(),10)]};i.renderModule.RowModifier(s)}},0):this.treeColumnRowTemplate())},e.prototype.bindedDataSource=function(){var i="dataSource",r="isDataAvailable",n="adaptor",o="ready";if(this.dataSource&&ce(this)){var s=this.flatData,l=le("count",this.dataSource);this.grid.dataSource={result:s,count:l}}else this.grid.dataSource=this.dataSource instanceof he?new he(this.dataSource.dataSource,this.dataSource.defaultQuery,this.dataSource.adaptor):this.flatData;if(this.dataSource instanceof he&&(this.dataSource.dataSource.offline||this.dataSource.ready)){this.grid.dataSource[""+i].json=We(this.dataSource[""+i].json),this.grid.dataSource[""+o]=this.dataSource.ready;var d=this;u(this.grid.dataSource[""+o])||this.grid.dataSource[""+o].then(function(h){var p=d.grid.dataSource;p[""+i].offline=!0,p[""+r]=!0,p[""+i].json=h.result,p[""+n]=new Qa})}},e.prototype.extendedGridActionEvents=function(){var i=this;this.grid.actionBegin=function(r){r.requestType==="sorting"&&r.target&&r.target.parentElement&&r.target.parentElement.classList.contains("e-hierarchycheckbox")&&(r.cancel=!0);var n=ae("requestType",r);if(n==="reorder"&&i.notify("getColumnIndex",{}),J(i)&&i.enableVirtualization&&(r.requestType==="virtualscroll"?(i.query.expand("VirtualScrollingAction"),i.showSpinner()):r.requestType==="searching"&&r.searchString===""?i.query.expand("ClearSearchingAction"):r.action==="clearFilter"&&i.query.expand("ClearFilteringAction")),i.notify("actionBegin",{editAction:r}),!J(i)&&!u(i.filterModule)&&!ce(i)&&i.grid.filterSettings.columns.length===0&&i.grid.searchSettings.key.length===0&&(i.notify("clearFilters",{flatData:i.grid.dataSource}),i.grid.setProperties({dataSource:i.dataResults.result},!0),u(i.grid.changedProperties.dataSource)&&(i.grid.renderModule.data.dataManager=i.grid.dataSource instanceof he?i.grid.dataSource:u(i.grid.dataSource)?new he:new he(i.grid.dataSource),i.grid.renderModule.data.isQueryInvokedFromData=!0,i.grid.query=i.grid.query instanceof Xe?i.grid.query:new Xe)),i.action!=="indenting"&&i.action!=="outdenting"){var o=new mt;return i.trigger(Br,r,function(s){s.cancel||i.notify(Yi,s),o.resolve(s)}),o}},this.grid.actionComplete=function(r){if(i.notify("actioncomplete",r),i.updateColumnModel(),i.updateTreeGridModel(),r.requestType==="reorder"&&i.notify("setColumnIndex",{}),i.notify("actionComplete",{editAction:r}),r.requestType==="add"&&i.editSettings.newRowPosition!=="Top"&&i.editSettings.newRowPosition!=="Bottom"&&i.notify(Zi,r),r.requestType==="batchsave"&&i.notify(Si,r),i.notify("updateGridActions",r),r.requestType==="save"&&i.aggregates.map(function(h){return h.showChildSummary===!0}).length&&i.grid.refresh(),r.action==="filter"&&i.filterModule.currentFilterObject!==""&&i.enableVirtualization&&!i.initialRender&&!(J(i)&&i.enableVirtualization)&&i.expandAll(),r.requestType==="searching"&&i.searchSettings.key!==""&&i.enableVirtualization&&!i.initialRender&&!(J(i)&&i.enableVirtualization)&&i.expandAll(),r.action==="clearFilter"&&i.enableCollapseAll&&i.collapseAll(),i.action==="indenting"||i.action==="outdenting"){i.action=i.action==="indenting"?"indented":"outdented";var n=[i.selectedRecords],o={data:n,dropIndex:i.dropIndex,dropPosition:i.dropPosition,modifiedRecords:i.modifiedRecords,requestType:i.action,row:i.selectedRows};i.trigger(wi,o);var s=i.getCurrentViewRecords().filter(function(h){return h.uniqueID===n[0].uniqueID});s.length||i.refreshToolbarItems(),i.action="",i.selectedRecords=i.selectedRows=i.modifiedRecords=[]}else{if(i.grid.isFrozenGrid()&&i.enableVirtualization&&r.tableName==="movable"){var l=i.grid.element.querySelector("."+Vh),d=i.grid.element.querySelector("."+Bh);l.style.height=d.style.height="auto"}i.trigger(wi,r)}}},e.prototype.extendedGridEvents=function(){var i=this,r=this;this.grid.recordDoubleClick=function(n){i.trigger(Qi,n),i.notify(Qi,n)},this.grid.detailDataBound=function(n){i.notify("detaildataBound",n),i.trigger(Ah,n)},this.grid.rowDataBound=function(n){u(this.isPrinting)?pe("isPrinting",!1,n):pe("isPrinting",this.isPrinting,n),r.renderModule.RowModifier(n)},this.grid.queryCellInfo=function(n){u(this.isPrinting)?pe("isPrinting",!1,n):pe("isPrinting",this.isPrinting,n),r.renderModule.cellRender(n)},this.grid.contextMenuClick=function(n){i.notify(fo,n),i.trigger(fo,n)},this.grid.contextMenuOpen=function(n){i.notify(go,n),i.trigger(go,n)},this.grid.queryCellInfo=function(n){i.renderModule.cellRender(n)}},e.prototype.bindGridDragEvents=function(){var i=this;this.grid.rowDragStartHelper=function(r){i.trigger(Fh,r)},this.grid.rowDragStart=function(r){i.trigger(Lh,r)},this.grid.rowDrag=function(r){if(i.grid.isEdit){r.cancel=!0;return}i.notify(Dh,r),i.trigger(kh,r)},this.grid.rowDrop=function(r){if(i.grid.isEdit){r.cancel=!0;return}i.notify(Eh,r),r.cancel=!0}},e.prototype.loadGrid=function(){this.bindGridProperties(),this.bindGridEvents(),pe("registeredTemplate",this.registeredTemplate,this.grid);var i="viewContainerRef";pe("viewContainerRef",this[""+i],this.grid)},e.prototype.autoGenerateColumns=function(){if(!this.columns.length&&!this.dataModule.isRemote()&&Object.keys(this.dataSource).length){this.columns=[];for(var i=this.dataSource[0],r=Object.keys(i),n=0;n<r.length;n++)[this.childMapping,this.parentIdMapping].indexOf(r[parseInt(n.toString(),10)])===-1&&this.columns.push(r[parseInt(n.toString(),10)])}},e.prototype.getGridEditSettings=function(){var i={},r="guid";switch(i.allowAdding=this.editSettings.allowAdding,i.allowEditing=this.editSettings.allowEditing,i.allowDeleting=this.editSettings.allowDeleting,i.newRowPosition=this.editSettings.newRowPosition==="Bottom"?"Bottom":"Top",i.allowEditOnDblClick=this.editSettings.allowEditOnDblClick,i.showConfirmDialog=this.editSettings.showConfirmDialog,i.template=this.editSettings.template,i.showDeleteConfirmDialog=this.editSettings.showDeleteConfirmDialog,i.allowNextRowEdit=this.editSettings.allowNextRowEdit,i[""+r]=this.editSettings[""+r],i.dialog=this.editSettings.dialog,this.editSettings.mode){case"Dialog":i.mode=this.editSettings.mode;break;case"Batch":i.mode=this.editSettings.mode;break;case"Row":i.mode="Normal";break;case"Cell":i.mode="Normal",i.showConfirmDialog=!1;break}return i},e.prototype.getContextMenu=function(){if(this.contextMenuItems){for(var i=[],r=0;r<this.contextMenuItems.length;r++)switch(this.contextMenuItems[parseInt(r.toString(),10)]){case"AddRow":case fi.AddRow:i.push({text:this.l10n.getConstant("AddRow"),target:".e-content",id:this.element.id+"_gridcontrol_cmenu_AddRow",items:[{text:this.l10n.getConstant("Above"),id:"Above"},{text:this.l10n.getConstant("Below"),id:"Below"},{text:this.l10n.getConstant("Child"),id:"Child"}]});break;case"Indent":case fi.RowIndent:i.push({text:this.l10n.getConstant("RowIndent"),target:".e-content",iconCss:"e-indent e-icons",id:this.element.id+"_gridcontrol_cmenu_Indent"});break;case"Outdent":case fi.RowOutdent:i.push({text:this.l10n.getConstant("RowOutdent"),target:".e-content",iconCss:"e-outdent e-icons",id:this.element.id+"_gridcontrol_cmenu_Outdent"});break;default:i.push(this.contextMenuItems[parseInt(r.toString(),10)])}return i}else return null},e.prototype.getGridToolbar=function(){if(this.toolbar){this.l10n=new $t("treegrid",this.defaultLocale,this.locale);for(var i=[],r=void 0,n=0;n<this.toolbar.length;n++)switch(this.toolbar[parseInt(n.toString(),10)]){case"Search":case bt.Search:i.push("Search");break;case"Print":case bt.Print:i.push("Print");break;case"ExpandAll":case bt.ExpandAll:r=this.l10n.getConstant("ExpandAll"),i.push({text:r,tooltipText:r,prefixIcon:"e-expand",id:this.element.id+"_gridcontrol_expandall"});break;case"CollapseAll":case bt.CollapseAll:r=this.l10n.getConstant("CollapseAll"),i.push({text:r,tooltipText:r,prefixIcon:"e-collapse",id:this.element.id+"_gridcontrol_collapseall"});break;case"Indent":case bt.RowIndent:r=this.l10n.getConstant("RowIndent"),i.push({text:r,tooltipText:r,prefixIcon:"e-indent",id:this.element.id+"_gridcontrol_indent"});break;case"Outdent":case bt.RowOutdent:r=this.l10n.getConstant("RowOutdent"),i.push({text:r,tooltipText:r,prefixIcon:"e-outdent",id:this.element.id+"_gridcontrol_outdent"});break;default:i.push(this.toolbar[parseInt(n.toString(),10)])}return i}else return null},e.prototype.getGridColumns=function(i,r,n){r===void 0&&(r=!0),n===void 0&&(n=0);var o=i,s="columns";r&&(this.columnModel=[]);var l,d;this.columnModel.length===0&&(n=n===0?-1:n);for(var h=[],p=0;p<o.length;p++){n=n+1;var c=this.grid.getColumnByUid(o[parseInt(p.toString(),10)].uid);if(d=c||{},l={},typeof this.columns[parseInt(p.toString(),10)]=="string")d.field=l.field=this.columns[parseInt(p.toString(),10)];else for(var m=0,g=Object.keys(o[parseInt(p.toString(),10)]);m<g.length;m++){var y=g[m];n===this.treeColumnIndex&&y==="template"?l[""+y]=o[parseInt(p.toString(),10)][""+y]:y==="columns"&&!u(o[parseInt(p.toString(),10)][""+y])?(d[""+y]=this.getGridColumns(o[parseInt(p.toString(),10)][""+y],!1,this.columnModel.length-1),l[""+y]=o[parseInt(p.toString(),10)][""+y]):this.initialRender&&!u(c)&&this.enablePersistence&&y==="edit"?d[""+y]=l[""+y]=c[""+y]:(!c||y!=="sortComparer")&&(d[""+y]=l[""+y]=o[parseInt(p.toString(),10)][""+y])}l[""+s]||this.columnModel.push(new Or(l)),h.push(d),!u(this.columnModel[this.treeColumnIndex])&&this.enableRtl&&d.field===this.columnModel[this.treeColumnIndex].field&&(u(this.treeColumnTextAlign)&&(this.treeColumnTextAlign=this.columnModel[this.treeColumnIndex].textAlign,this.treeColumnField=this.columnModel[this.treeColumnIndex].field),d.textAlign="Right")}return h},e.prototype.onPropertyChanged=function(i){var r=Object.keys(i),n=!1;r.indexOf("columns")>-1&&!u(i.columns)&&this.frozenColumns===0&&this.frozenRows===0&&!this.columnModel.some(function(p){return p.isFrozen||p.freeze})&&(this.grid.columns=this.getGridColumns(i.columns),this.grid.updateColumnObject(),n=!0);for(var o=0,s=r;o<s.length;o++){var l=s[o];switch(l){case"treeColumnIndex":this.grid.refreshColumns();break;case"allowPaging":this.grid.allowPaging=this.allowPaging;break;case"pageSettings":this.grid.pageSettings=ve(this.pageSettings),n=!0;break;case"enableVirtualization":this.grid.enableVirtualization=this.enableVirtualization;break;case"enableColumnVirtualization":this.grid.enableColumnVirtualization=this.enableColumnVirtualization;break;case"toolbar":this.grid.toolbar=this.getGridToolbar();break;case"allowSelection":this.grid.allowSelection=this.allowSelection;break;case"selectionSettings":this.grid.selectionSettings=ve(this.selectionSettings);break;case"allowSorting":this.grid.allowSorting=this.allowSorting;break;case"allowMultiSorting":this.grid.allowMultiSorting=this.allowMultiSorting;break;case"sortSettings":this.grid.sortSettings=ve(this.sortSettings);break;case"searchSettings":this.grid.searchSettings=ve(this.searchSettings);break;case"allowFiltering":this.grid.allowFiltering=this.allowFiltering;break;case"filterSettings":this.initialRender||(this.grid.filterSettings=ve(this.filterSettings));break;case"showColumnMenu":this.grid.showColumnMenu=this.showColumnMenu;break;case"allowRowDragAndDrop":this.grid.allowRowDragAndDrop=this.allowRowDragAndDrop;break;case"aggregates":this.grid.aggregates=ve(this.aggregates);break;case"enableInfiniteScrolling":this.grid.enableInfiniteScrolling=this.enableInfiniteScrolling;break;case"dataSource":if(this.isLocalData=!(this.dataSource instanceof he)||!u(this.dataSource.ready)||this.dataSource.adaptor instanceof Gt,this.convertTreeData(this.dataSource),this.isLocalData){if(ce(this)){var d=le("count",this.dataSource);this.grid.dataSource={result:this.flatData,count:d}}else{var h=this.dataSource;this.grid.dataSource=h instanceof he?new he(h.dataSource,h.defaultQuery,h.adaptor):this.flatData}this.enableVirtualization&&(this.grid.contentModule.isDataSourceChanged=!0)}else this.bindedDataSource(),this.enableVirtualization&&(this.grid.contentModule.removeEventListener(),this.grid.contentModule.eventListener("on"),this.grid.contentModule.renderTable());break;case"query":this.grid.query=this.query;break;case"enableCollapseAll":i[""+l]?this.collapseAll():this.expandAll();break;case"expandStateMapping":this.grid.refresh();break;case"gridLines":this.grid.gridLines=this.gridLines;break;case"rowTemplate":this.grid.rowTemplate=ve(this.rowTemplate);break;case"frozenRows":this.grid.frozenRows=this.frozenRows;break;case"frozenColumns":this.grid.frozenColumns=this.frozenColumns;break;case"rowHeight":this.grid.rowHeight=this.rowHeight;break;case"height":!u(this.height)&&typeof this.height=="string"&&this.height.indexOf("%")!==-1&&(this.element.style.height=this.height),this.grid.height=this.height;break;case"width":!u(this.width)&&typeof this.width=="string"&&this.width.indexOf("%")!==-1&&(this.element.style.width=this.width),this.grid.width=this.width;break;case"locale":this.grid.locale=this.locale,this.TreeGridLocale(),this.grid.toolbar=this.getGridToolbar(),this.grid.contextMenuItems=this.getContextMenu();break;case"selectedRowIndex":this.grid.selectedRowIndex=this.selectedRowIndex;break;case"enableAltRow":this.grid.enableAltRow=this.enableAltRow;break;case"enableHover":this.grid.enableHover=this.enableHover;break;case"enableAutoFill":this.grid.enableAutoFill=this.enableAutoFill;break;case"enableAdaptiveUI":this.grid.enableAdaptiveUI=this.enableAdaptiveUI;break;case"enableImmutableMode":this.grid.enableImmutableMode=this.enableImmutableMode;break;case"allowExcelExport":this.grid.allowExcelExport=this.allowExcelExport;break;case"allowPdfExport":this.grid.allowPdfExport=this.allowPdfExport;break;case"enableRtl":u(this.treeColumnField)||this.updateTreeColumnTextAlign(),this.grid.enableRtl=this.enableRtl;break;case"allowReordering":this.grid.allowReordering=this.allowReordering;break;case"allowResizing":this.grid.allowResizing=this.allowResizing;break;case"textWrapSettings":this.grid.textWrapSettings=ve(this.textWrapSettings);break;case"allowTextWrap":this.grid.allowTextWrap=ve(this.allowTextWrap),this.grid.refresh();break;case"contextMenuItems":this.grid.contextMenuItems=this.getContextMenu();break;case"showColumnChooser":this.grid.showColumnChooser=this.showColumnChooser;break;case"detailTemplate":this.grid.detailTemplate=ve(this.detailTemplate);break;case"columnMenuItems":this.grid.columnMenuItems=ve(this.columnMenuItems);break;case"editSettings":this.grid.isEdit&&this.grid.editSettings.mode==="Normal"&&i[""+l].mode&&(i[""+l].mode==="Cell"||i[""+l].mode==="Row")&&this.grid.closeEdit(),this.grid.editSettings=this.getGridEditSettings();break}n&&this.grid.refresh()}},e.prototype.updateTreeColumnTextAlign=function(){var i=this.grid.getColumnByField(this.treeColumnField);i.textAlign=this.enableRtl?"Right":this.treeColumnTextAlign,this.grid.refreshColumns()},e.prototype.destroy=function(){var i=this.element;if(i){var r=!!(i.querySelector(".e-gridheader")&&i.querySelector(".e-gridcontent"));r&&this.unwireEvents(),this.removeListener(),r&&a.prototype.destroy.call(this),this.grid&&this.grid.destroy(),this.dataModule&&this.dataModule.destroy();for(var n=["dataModule","sortModule","renderModule","filterModule","printModule","clipboardModule","excelExportModule","pdfExportModule","toolbarModule","summaryModule","reorderModule","resizeModule","pagerModule","keyboardModule","columnMenuModule","contextMenuModule","editModule","virtualScrollModule","selectionModule","detailRow","rowDragAndDropModule","freezeModule"],o=0;o<n.length;o++)this[n[parseInt(o.toString(),10)]]&&(this[n[parseInt(o.toString(),10)]]=null);this.element.innerHTML="",this.grid=null}},e.prototype.dataBind=function(){u(this.grid)||(!u(this.rowDropSettings.targetID)&&u(document.getElementById(this.grid.rowDropSettings.targetID))&&(document.getElementById(this.rowDropSettings.targetID).id=this.grid.rowDropSettings.targetID,this.rowDropSettings.targetID=this.grid.rowDropSettings.targetID),a.prototype.dataBind.call(this),this.grid.dataBind())},e.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","columns","searchSettings","selectedRowIndex","treeColumnIndex"],r={pageSettings:["template","pageSizes","pageSizeMode","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent","hierarchyMode"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[]},n=["filter","edit","filterBarTemplate","headerTemplate","template","commandTemplate","commands","dataSource"],o=0;o<i.length;o++)for(var s=this[i[parseInt(o.toString(),10)]],l=0,d=r[i[parseInt(o.toString(),10)]];!u(d)&&l<d.length;l++){var h=d[parseInt(l.toString(),10)];delete s[""+h]}return this.ignoreInArrays(n,this.columns),this.addOnPersist(i)},e.prototype.ignoreInArrays=function(i,r){for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].columns?(this.ignoreInColumn(i,r[parseInt(n.toString(),10)]),this.ignoreInArrays(i,r[parseInt(n.toString(),10)].columns)):this.ignoreInColumn(i,r[parseInt(n.toString(),10)])},e.prototype.ignoreInColumn=function(i,r){if(u(r.template))for(var n=0;n<i.length;n++)delete r[i[parseInt(n.toString(),10)]],r.filter={}},e.prototype.mouseClickHandler=function(i){var r=this;if(u(i.touches)){var n=i.target;(n.classList.contains("e-treegridexpand")||n.classList.contains("e-treegridcollapse"))&&!this.isEditCollapse&&!this.grid.isEdit&&this.expandCollapseRequest(n);var o="isEllipsisTooltip";if((n.classList.contains("e-treegridexpand")||n.classList.contains("e-treegridcollapse"))&&this.grid[""+o]()&&this.grid.toolTipObj.close(),this.isEditCollapse=!1,this.notify("checkboxSelection",{target:n}),this.grid.isCheckBoxSelection&&!this.grid.isPersistSelection&&this.aggregates.map(function(c){return c.showChildSummary===!0}).length){var s=this.grid.getHeaderContent().querySelector(".e-checkselectall"),l=this.grid.getSelectedRowIndexes().length,d=this.getCurrentViewRecords().length;if(l===d){var h=s.nextElementSibling;Se([h],["e-stop","e-uncheck"]),se([h],["e-check"])}}if((n.classList.contains("e-flmenu-cancelbtn")||n.classList.contains("e-flmenu-okbtn")||n.classList.contains("e-content")||n.classList.contains("e-rowcell"))&&!u(this.filterModule)&&this.isReact&&!u(this.grid.filterModule.column)&&this.grid.filterModule.column.filterTemplate){var p=document.getElementById(this.grid.filterModule.filterModule.dlgObj.element.id);this.grid.filterModule.fltrDlgDetails.isOpen=!1,this.grid.filterModule.filterModule.dlgObj&&!this.grid.filterModule.filterModule.dlgObj.isDestroyed&&p&&this.clearTemplate(["filterTemplate"],void 0,function(){r.grid.filterModule.filterModule.dlgObj.destroy()})}}},e.prototype.getRows=function(){return this.grid.getRows()},e.prototype.getPager=function(){return this.grid.getPager()},e.prototype.addRecord=function(i,r,n){if(this.editModule){var o="isAddedRowByMethod";this.editModule[""+o]=!0,this.editModule.addRecord(i,r,n)}},e.prototype.closeEdit=function(){this.grid.editModule&&this.grid.editModule.closeEdit()},e.prototype.saveCell=function(){this.grid.editModule&&this.grid.editModule.saveCell()},e.prototype.updateCell=function(i,r,n){this.grid.editModule&&this.grid.editModule.updateCell(i,r,n)},e.prototype.updateRow=function(i,r){if(this.grid.editModule)if(u(i))this.grid.editModule.updateRow(i,r);else{var n=this.grid.getCurrentViewRecords()[parseInt(i.toString(),10)];ue(n,r),this.grid.editModule.updateRow(i,n)}},e.prototype.deleteRecord=function(i,r){if(u(i)&&u(r)||this.getSelectedRecords().length<=0){var n="The provided value for the fieldName and data is undefined. Please ensure the fieldName and data contains number.";this.trigger(Ie,{error:n})}this.grid.editModule&&this.grid.editModule.deleteRecord(i,r)},e.prototype.startEdit=function(i){this.grid.editModule&&this.grid.editModule.startEdit(i)},e.prototype.editCell=function(i,r){this.editModule&&this.editModule.editCell(i,r)},e.prototype.enableToolbarItems=function(i,r){this.grid.toolbarModule&&this.grid.toolbarModule.enableItems(i,r)},e.prototype.endEdit=function(){this.grid.editModule&&this.grid.editModule.endEdit()},e.prototype.openColumnChooser=function(i,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,r)},e.prototype.deleteRow=function(i){if(u(i)){var r="The provided value for the tr is undefined. Please ensure the tr contains HTMLTableRowElement.";this.trigger(Ie,{error:r})}this.grid.editModule&&this.grid.editModule.deleteRow(i)},e.prototype.getPrimaryKeyFieldNames=function(){return this.grid.getPrimaryKeyFieldNames()},e.prototype.setCellValue=function(i,r,n){this.grid.setCellValue(i,r,n);var o=this.grid.getRowIndexByPrimaryKey(i),s=this.getCurrentViewRecords()[parseInt(o.toString(),10)];if(u(s)){var l="The provided value for the record is undefined. Please ensure the record contains ITreeData.";this.trigger(Ie,{error:l})}Ct({value:s,action:"edit"},this,this.isSelfReference,s.index,this.grid.selectedRowIndex,r)},e.prototype.setRowData=function(i,r){var n=this.getCurrentViewRecords(),o=this.grid.getPrimaryKeyFieldNames()[0],s=0,l={};n.some(function(m){return m[""+o]===i?(l=m,!0):!1}),s=l.level,r.level=s,r.index=l.index,r.childRecords=l.childRecords,r.taskData=l.taskData,r.uniqueID=l.uniqueID,r.parentItem=l.parentItem,r.checkboxState=l.checkboxState,r.hasChildRecords=l.hasChildRecords,r.parentUniqueID=l.parentUniqueID,r.expanded=l.expanded,this.grid.setRowData(i,r);var d=this.getVisibleRecords();if(d.length>0&&i===d[d.length-1][""+o]){var h=this.getContentTable(),p=h.scrollHeight,c=this.getContent().clientHeight;this.lastRowBorder(this.getRows()[n.indexOf(l)],p<=c)}},e.prototype.goToPage=function(i){if(u(i)){var r="The provided value for the pageNo is undefined. Please ensure the pageNo contains number.";this.trigger(Ie,{error:r})}this.grid.pagerModule&&this.grid.pagerModule.goToPage(i)},e.prototype.updateExternalMessage=function(i){this.pagerModule&&this.grid.pagerModule.updateExternalMessage(i)},e.prototype.getCellFromIndex=function(i,r){return this.grid.getCellFromIndex(i,r)},e.prototype.getColumnByField=function(i){return hr(this.columnModel,function(r){if(r.field===i)return r})[0]},e.prototype.getColumnByUid=function(i){var r=this.initialRender?this.grid.columns:this.columns,n="columnModel";return this.grid.columns.length!==this.columnModel.length&&(r=this.grid[""+n]),hr(r,function(o){if(o.uid===i)return o})[0]},e.prototype.getColumnFieldNames=function(){return this.grid.getColumnFieldNames()},e.prototype.getFooterContent=function(){return this.grid.getFooterContent()},e.prototype.getFooterContentTable=function(){return this.grid.getFooterContentTable()},e.prototype.showColumns=function(i,r){this.grid.showColumns(i,r),this.updateColumnModel()},e.prototype.hideColumns=function(i,r){if(u(i)){var n="The provided value for the keys is undefined. Please ensure the keys contains string.";this.trigger(Ie,{error:n})}this.grid.hideColumns(i,r),this.updateColumnModel()},e.prototype.getColumnHeaderByField=function(i){return this.grid.getColumnHeaderByField(i)},e.prototype.getColumnHeaderByIndex=function(i){return this.grid.getColumnHeaderByIndex(i)},e.prototype.getColumnHeaderByUid=function(i){return this.grid.getColumnHeaderByUid(i)},e.prototype.getColumnIndexByField=function(i){return this.grid.getColumnIndexByField(i)},e.prototype.getVirtualColIndexByUid=function(i){var r="columnModel",n=hr(this.grid[""+r],function(o,s){if(o.uid===i)return s})[0];return u(n)?-1:n},e.prototype.getColumnIndexByUid=function(i){return this.grid.getColumnIndexByUid(i)},e.prototype.getColumns=function(i){return this.updateColumnModel(this.grid.getColumns(i)),this.columnModel},e.prototype.updateColumnModel=function(i){var r,n,o=u(i)?this.grid.getColumns():i;this.treeColumnIndex!==-1&&this.columnModel[this.treeColumnIndex]&&!u(this.columnModel[this.treeColumnIndex].template)&&(r=this.columnModel[this.treeColumnIndex].template,n=this.columnModel[this.treeColumnIndex].field);var s;if(!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.columnModel.length===o.length){this.columnModel=[];for(var l=0;l<o.length;l++){s={};for(var d=0,h=Object.keys(o[parseInt(l.toString(),10)]);d<h.length;d++){var p=h[d];s[""+p]=o[parseInt(l.toString(),10)][""+p]}this.columnModel.push(new Or(s)),n===this.columnModel[parseInt(l.toString(),10)].field&&this.columnModel[parseInt(l.toString(),10)].type!=="checkbox"&&!u(r)&&r!==""&&(this.columnModel[parseInt(l.toString(),10)].template=r)}}var c="deepMerge";return this[""+c]=["columns"],this.grid.columns.length!==this.columnModel.length&&(this.stackedHeader=!0),this.stackedHeader&&this.allowResizing&&!u(this.columns)&&this.updateColumnsWidth(this.columns),!this.stackedHeader&&!u(this.columns)&&Ao(this.columns,this.columnModel),this[""+c]=void 0,this.columnModel},e.prototype.updateColumnsWidth=function(i){var r=this;i.forEach(function(n){if(!u(n)&&n.columns)r.updateColumnsWidth(n.columns);else if(!u(n)&&n.field){var o=r.grid.getColumnByField(n.field);u(o)||(n.width=o.width)}})},e.prototype.getContent=function(){return this.grid.getContent()},e.prototype.mergePersistTreeGridData=function(){var i="mergePersistGridData";this.grid[""+i].apply(this)},e.prototype.mergeColumns=function(i,r){var n="mergeColumns";this.grid[""+n].apply(this,[i,r])},e.prototype.setFrozenCount=function(){var i="setFrozenCount";this.grid[""+i].apply(this.grid)},e.prototype.splitFrozenCount=function(i){var r="splitFrozenCount";this.grid[""+r].apply(this.grid,[i])},e.prototype.isFrozenGrid=function(){return this.grid.isFrozenGrid()},e.prototype.updateTreeGridModel=function(){this.setProperties({filterSettings:ae("properties",this.grid.filterSettings)},!0),this.setProperties({pageSettings:ae("properties",this.grid.pageSettings)},!0),this.setProperties({searchSettings:ae("properties",this.grid.searchSettings)},!0),this.setProperties({sortSettings:ae("properties",this.grid.sortSettings)},!0)},e.prototype.getContentTable=function(){return this.grid.getContentTable()},e.prototype.getDataRows=function(){for(var i=[],r=this.grid.getDataRows(),n=0,o=r.length;n<o;n++)r[parseInt(n.toString(),10)].classList.contains("e-summaryrow")||i.push(r[parseInt(n.toString(),10)]);return i},e.prototype.getCurrentViewRecords=function(){var i="isSummaryRow";return this.grid.currentViewData.filter(function(r){return u(r[""+i])})},e.prototype.getBatchChanges=function(){return this.grid.editModule.getBatchChanges()},e.prototype.getHeaderContent=function(){return this.grid.getHeaderContent()},e.prototype.getHeaderTable=function(){return this.grid.getHeaderTable()},e.prototype.getRowByIndex=function(i){return this.grid.getRowByIndex(i)},e.prototype.getRowInfo=function(i){return this.grid.getRowInfo(i)},e.prototype.getUidByColumnField=function(i){return this.grid.getUidByColumnField(i)},e.prototype.getVisibleColumns=function(){for(var i=[],r=0,n=this.columnModel;r<n.length;r++){var o=n[r];o.visible&&i.push(o)}return i},e.prototype.showSpinner=function(){Fo(this.element)},e.prototype.hideSpinner=function(){Lo(this.element)},e.prototype.refresh=function(){this.uniqueIDCollection={},this.convertTreeData(this.dataSource),ce(this)||(this.dataSource instanceof he?this.grid.setProperties({dataSource:new he(this.dataSource.dataSource,this.dataSource.defaultQuery,this.dataSource.adaptor)},!0):this.grid.dataSource=this.flatData),this.grid.refresh()},e.prototype.getCheckedRecords=function(){return this.selectionModule.getCheckedrecords()},e.prototype.getVisibleRecords=function(){var i=[],r=this.getCurrentViewRecords();if(this.allowPaging)i=r;else for(var n=0;n<r.length;n++)i.push(r[parseInt(n.toString(),10)]),r[parseInt(n.toString(),10)].expanded||(n+=Te(r[parseInt(n.toString(),10)]).length);return i},e.prototype.getCheckedRowIndexes=function(){return this.selectionModule.getCheckedRowIndexes()},e.prototype.selectCheckboxes=function(i){this.selectionModule.selectCheckboxes(i)},e.prototype.refreshColumns=function(i){u(i)||i?(this.grid.columns=this.getGridColumns(this.columns),this.grid.refreshColumns()):this.grid.setProperties({columns:this.getGridColumns(this.columns)},!0)},e.prototype.refreshHeader=function(){this.grid.refreshHeader()},e.prototype.expandCollapseRequest=function(i){if(this.editSettings.mode==="Batch"){var r="dialogObj",n="showDialog";if((this.getBatchChanges()[this.changedRecords].length||this.getBatchChanges()[this.deletedRecords].length||this.getBatchChanges()[this.addedRecords].length)&&this.editSettings.showConfirmDialog){var o=this.grid.editModule[""+r];this.grid.editModule[""+n]("CancelEdit",o),this.targetElement=i;return}}if(this.rowTemplate){var s=i.closest(".e-treerowcell").parentElement,l=this.getCurrentViewRecords()[s.rowIndex];i.classList.contains("e-treegridexpand")?this.collapseRow(s,l):this.expandRow(s,l)}else{var d=this.grid.getRowInfo(i),l=d.rowData;if(this.grid.isFrozenGrid()&&this.enableVirtualization&&!Object.keys(l).length){var h="freezeRows";l=this.grid.contentModule[""+h].filter(function(c){return c.uid===d.row.getAttribute("data-uid")})[0].data}this.enableImmutableMode&&(l=this.getCurrentViewRecords()[d.rowIndex]),i.classList.contains("e-treegridexpand")?this.collapseRow(d.row,l):this.expandRow(d.row,l)}},e.prototype.expandRow=function(i,r,n,o){var s=this;if(this.isCollapseAll=!1,u(i)&&u(r)&&u(n)&&u(o)){var l="The provided value for the row is undefined. Please ensure the row contains row element.";this.trigger(Ie,{error:l})}var d=this.parentData;if(this.enableVirtualization||(d=this.flatData.filter(function(c){return c.hasChildRecords})),r=this.getCollapseExpandRecords(i,r),!u(i)&&i.cells[0].classList.contains("e-lastrowcell")&&this.lastRowBorder(i,!1),this.isExpandAll&&!J(this)){var h={data:d,row:i,cancel:!1},p=!1;this.grid.pagerModule&&!u(this.grid.pagerModule.pagerObj.pagerdropdownModule)&&(p=!!this.grid.pagerModule.pagerObj.pagerdropdownModule.dropDownListObject.value),this.isExpandingEventTriggered?(!this.allowPaging||p&&this.grid.pagerModule.pagerObj.pagerdropdownModule.dropDownListObject.value==="All")&&!this.expandAllPrevent&&this.isExpandingEventTriggered&&this.expandRows(i,r,d):this.trigger(po,h,function(c){s.expandAllPrevent=c.cancel,!c.cancel&&!u(r)&&(c.expandAll&&s.expandCollapseAllChildren(r,"expand",n,o),s.expandRows(i,r,d))}),this.isExpandingEventTriggered=!0}else if(!this.isExpandAll||this.isExpandAll&&J(this)){var h={data:r,row:i,cancel:!1};this.trigger(po,h,function(m){m.cancel||(m.expandAll&&s.expandCollapseAllChildren(r,"expand",n,o),s.expandRows(i,r,d))})}},e.prototype.expandRows=function(i,r,n){this.expandCollapse("expand",i,r);var o="Children";if(!(J(this)&&!ut(this))&&(!ce(this)||!u(r[""+o]))){var s={data:r,row:i};u(this.expandStateMapping)||this.updateExpandStateMapping(s.data,!0),this.isExpandAll&&!this.isExpandedEventTriggered?(this.isExpandedEventTriggered=!0,s={data:n,row:i},this.trigger(hi,s)):!this.isExpandAll&&this.enableVirtualization&&this.selectionSettings.persistSelection&&!u(this.virtualScrollModule.prevSelectedRecord)?this.virtualScrollModule.prevSelectedRecord=[]:this.isExpandAll||this.trigger(hi,s)}},e.prototype.expandCollapseAllChildren=function(i,r,n,o){if(!(!u(n)&&i[this.getPrimaryKeyFieldNames()[0]]!==n||!u(o)&&o!==i.level)){var s=Te(i).filter(function(d){return d.hasChildRecords});s.unshift(i);for(var l=0;l<s.length;l++)this.expandCollapse(r,null,s[parseInt(l.toString(),10)])}},e.prototype.getCollapseExpandRecords=function(i,r){return this.allowPaging&&this.pageSettings.pageSizeMode==="All"&&this.isExpandAll&&u(r)&&!J(this)?r=this.flatData.filter(function(n){return n.hasChildRecords}):u(r)&&!u(i)&&(this.detailTemplate?r=this.grid.getCurrentViewRecords()[i.getAttribute("data-rowindex")]:this.enableVirtualization&&(this.isCollapseAll||this.isExpandAll)?i.rowIndex===-1?r=this.grid.getCurrentViewRecords()[parseInt(i.getAttribute("data-rowindex"),10)]:r=this.grid.getCurrentViewRecords()[i.rowIndex]:this.rowTemplate?r=this.grid.getCurrentViewRecords()[i.rowIndex]:r=this.grid.getCurrentViewRecords()[parseInt(i.getAttribute("data-rowindex"),10)]),r},e.prototype.collapseRow=function(i,r,n){var o=this;if(this.isExpandAll=!1,u(i)&&u(r)&&u(n)){var s="The provided value for the row is undefined. Please ensure the row contains row element.";this.trigger(Ie,{error:s})}var l=this.parentData;if(this.enableVirtualization||(l=this.flatData.filter(function(h){return h.hasChildRecords})),r=this.getCollapseExpandRecords(i,r),this.isCollapseAll&&!J(this)){var d={data:l,row:i,cancel:!1};this.isCollapsingEventTriggered?!this.allowPaging&&!this.collapseAllPrevent&&this.isCollapsingEventTriggered&&this.collapseRows(i,r,l):this.trigger(co,d,function(h){o.collapseAllPrevent=h.cancel,h.cancel||(h.collapseAll&&o.expandCollapseAllChildren(r,"collapse",n),o.collapseRows(i,r,l))}),this.isCollapsingEventTriggered=!0}else if(!this.isCollapseAll||this.isCollapseAll&&J(this)){var d={data:r,row:i,cancel:!1};this.trigger(co,d,function(p){!p.cancel&&!u(r)&&o.collapseRows(i,r,l)})}},e.prototype.collapseRows=function(i,r,n){this.expandCollapse("collapse",i,r);var o={data:r,row:i};if(!J(this)&&(u(this.expandStateMapping)||this.updateExpandStateMapping(o.data,!1),this.isCollapseAll&&!this.isCollapsedEventTriggered?(this.isCollapsedEventTriggered=!0,o={data:n,row:i},this.trigger(Cr,o)):this.isCollapseAll||this.trigger(Cr,o),this.enableInfiniteScrolling)){var s=this.grid.getContent().firstElementChild.scrollHeight,l=this.grid.getContent().firstElementChild.scrollTop;s-l<this.grid.getRowHeight()+ +this.height&&this.grid.getContent().firstElementChild.scrollBy(0,this.grid.getRowHeight())}},e.prototype.updateExpandStateMapping=function(i,r){var n=i;if(n.length)for(var o=0;o<n.length;o++)n[parseInt(o.toString(),10)][this.expandStateMapping]=r,Ct({value:n[parseInt(o.toString(),10)],action:"edit"},this,this.isSelfReference,n[parseInt(o.toString(),10)].index,this.grid.selectedRowIndex,this.expandStateMapping);else i[""+this.expandStateMapping]=r,Ct({value:i,action:"edit"},this,this.isSelfReference,i.index,this.grid.selectedRowIndex,this.expandStateMapping)},e.prototype.expandAtLevel=function(i){if(u(i)){var r="The provided value for the level is undefined. Please ensure the level contains number.";this.trigger(Ie,{error:r})}if((this.allowPaging&&this.pageSettings.pageSizeMode==="All"||this.enableVirtualization)&&!J(this)){var n=this.grid.dataSource.filter(function(s){return s.hasChildRecords&&s.level===i&&(s.expanded=!0),s.hasChildRecords&&s.level===i});this.expandAction(n,null,i,!0)}else{var n=this.getRecordDetails(i),o=ae("records",n);this.expandAction(o,null,i)}},e.prototype.expandByKey=function(i){if(u(i)){var r="The provided value for the key is undefined. Please ensure the key contains number.";this.trigger(Ie,{error:r})}this.expandCollapseActionByKey(i,"Expand")},e.prototype.expandAction=function(i,r,n,o){o===void 0&&(o=!1);for(var s=function(h){if(!u(i[parseInt(h.toString(),10)].parentItem)){var p=i[parseInt(h.toString(),10)].parentItem.uniqueID,c=l.flatData.filter(function(m){return m.uniqueID===p});J(l)&&(c=l.getCurrentViewRecords().filter(function(m){return m.uniqueID===p})),c[0].expanded===!1?(i.push(c[0]),c[0].expanded=!0):Et(l,c[0],l.parentData)||c[0].expanded&&c[0].parentItem!==void 0&&i.push(c[0])}o||l.expandRow(null,i[parseInt(h.toString(),10)],r,n)},l=this,d=0;d<i.length;d++)s(d);o&&this.expandRow(null,i,r,n)},e.prototype.getRecordDetails=function(i){var r=this.getRows().filter(function(s){return s.className.indexOf("level"+i)!==-1&&(s.querySelector(".e-treegridcollapse")||s.querySelector(".e-treegridexpand"))}),n=this.getCurrentViewRecords().filter(function(s){return s.level===i&&s.hasChildRecords}),o={records:n,rows:r};return o},e.prototype.collapseAtLevel=function(i){if(u(i)){var r="The provided value for the level is undefined. Please ensure the level contains number.";this.trigger(Ie,{error:r})}if((this.allowPaging&&this.pageSettings.pageSizeMode==="All"||this.enableVirtualization)&&!J(this)){var n=this.grid.dataSource.filter(function(l){return l.hasChildRecords&&l.level===i&&(l.expanded=!1),l.hasChildRecords&&l.level===i});this.collapseAction(n,null,!0)}else{var o=this.getRecordDetails(i),s=ae("records",o);this.collapseAction(s)}},e.prototype.collapseByKey=function(i){if(u(i)){var r="The provided value for the key is undefined. Please ensure the key contains number.";this.trigger(Ie,{error:r})}this.expandCollapseActionByKey(i,"Collapse")},e.prototype.expandCollapseActionByKey=function(i,r){var n=this.getPrimaryKeyFieldNames()[0],o=J(this)?this.getCurrentViewRecords():this.grid.dataSource;if(!u(n)){var s=o.filter(function(l){return l[""+n].toString()===i.toString()});r==="Expand"?this.expandAction(s,i,null):this.collapseAction(s,i)}},e.prototype.collapseAction=function(i,r,n){if(n===void 0&&(n=!1),n)this.collapseRow(null,i);else for(var o=0;o<i.length;o++)this.collapseRow(null,i[parseInt(o.toString(),10)],r);if(!this.grid.contentModule.isDataSourceChanged&&this.enableVirtualization&&this.getRows()&&this.parentData.length===this.getRows().length){var s="endIndex";this.grid.contentModule.startIndex=-1,this.grid.contentModule[""+s]=-1}},e.prototype.expandAll=function(){if(this.getCurrentViewRecords().length===0){var i="The provided value for the datasource is undefined. Please ensure to add the dataSource.";this.trigger(Ie,{error:i})}this.isExpandedEventTriggered=!1,this.isExpandingEventTriggered=!1,this.expandCollapseAll("expand")},e.prototype.collapseAll=function(){if(this.getCurrentViewRecords().length===0){var i="The provided value for the datasource is undefined. Please ensure to add the dataSource.";this.trigger(Ie,{error:i})}this.isCollapsedEventTriggered=!1,this.isCollapsingEventTriggered=!1,this.expandCollapseAll("collapse")},e.prototype.expandCollapseAll=function(i){var r;if(this.rowTemplate?r=[].slice.call(this.grid.getContentTable().querySelectorAll("tr")).filter(function(s){return s.querySelector(".e-treegrid"+(i==="expand"?"collapse":"expand"))}):r=this.getRows().filter(function(s){return s.querySelector(".e-treegrid"+(i==="expand"?"collapse":"expand"))}),!r.length&&this.getRows().length&&r.push(this.getRows()[0]),this.isExpandAll=!0,this.isCollapseAll=!0,(this.allowPaging&&this.pageSettings.pageSizeMode==="All"||this.enableVirtualization||this.enableInfiniteScrolling)&&!J(this)){if(this.flatData.filter(function(s){s.hasChildRecords&&(s.expanded=i!=="collapse")}),r.length)for(var n=0;n<r.length;n++)i==="collapse"?u(this.getCurrentViewRecords()[r[parseInt(n.toString(),10)].rowIndex])||this.collapseRow(r[parseInt(n.toString(),10)]):this.enableVirtualization?r[0].getAttribute("aria-expanded")!=="true"&&this.expandRow(r[0]):this.expandRow(r[parseInt(n.toString(),10)]);else if(this.allowPaging){var o=this.enableCollapseAll;this.setProperties({enableCollapseAll:!0},!0),this.grid.pagerModule.goToPage(1),this.setProperties({enableCollapseAll:o},!0)}}else for(var n=0;n<r.length;n++)i==="collapse"?this.collapseRow(r[parseInt(n.toString(),10)]):this.expandRow(r[parseInt(n.toString(),10)]);this.isExpandAll=!1,this.isCollapseAll=!1},e.prototype.expandCollapse=function(i,r,n,o){var s=this,l={row:r,data:n,childData:[],requestType:i},d;u(n)||(d=this.grid.currentViewData.filter(function(x){return x.parentUniqueID===n.uniqueID}));var h;(!J(this)&&i==="expand"&&this.isSelfReference&&ce(this)&&!d.length||i==="collapse"||this.isExpandAll&&this.loadChildOnDemand&&!J(this)&&this.isSelfReference&&ce(this))&&this.updateChildOnDemand(l);var p=this.getRows();if(this.rowTemplate){var c=this.getContentTable().rows;p=[].slice.call(c)}var m;if(u(r)?(m=this.grid.currentViewData.indexOf(n),r=p[parseInt(m.toString(),10)]):m=+r.getAttribute("data-rowindex"),u(r)||r.setAttribute("aria-expanded",i==="expand"?"true":"false"),(this.allowPaging&&this.pageSettings.pageSizeMode==="All"||this.enableVirtualization)&&!J(this)&&!ce(this))this.notify(zr,{action:i,row:r,record:n});else{var g=void 0;if(i==="expand"){if(g="table-row",!o&&!u(n)&&(n.expanded=!0,this.uniqueIDCollection[n.uniqueID].expanded=n.expanded),u(r)||(h=r.getElementsByClassName("e-treegridcollapse")[0]),o&&!u(n[this.expandStateMapping])&&n[this.expandStateMapping]&&u(h)&&(h=r.getElementsByClassName("e-treegridexpand")[0]),u(h))return;h.classList.contains("e-treegridexpand")||se([h],"e-treegridexpand"),Se([h],"e-treegridcollapse")}else{if(g="none",(!o||ce(this))&&!u(r)&&(n.expanded=!1,this.uniqueIDCollection[n.uniqueID].expanded=n.expanded),u(r)||(h=r.getElementsByClassName("e-treegridexpand")[0]),o&&!u(n[this.expandStateMapping])&&!n[this.expandStateMapping]&&u(h)&&(h=r.getElementsByClassName("e-treegridcollapse")[0]),u(h))return;h.classList.contains("e-treegridcollapse")||se([h],"e-treegridcollapse"),Se([h],"e-treegridexpand")}r.querySelectorAll(".e-treerowcell")[0].setAttribute("aria-expanded",i==="expand"?"true":"false");var y=p.filter(function(x){return x.classList.contains("e-griddetailrowindex"+n.index+"level"+(n.level+1))});if(J(this)&&!ut(this))this.remoteExpand(i,r,n);else{(!ce(this)||d.length||i==="collapse")&&this.localExpand(i,r,n);var w=this.getVisibleRecords()[this.getVisibleRecords().length-1].index,v=this.getRowByIndex(w);this.grid.getContentTable().clientHeight<=this.grid.getContent().clientHeight&&!u(v)&&!v.cells[0].classList.contains("e-lastrowcell")&&this.lastRowBorder(v,!0)}if(ce(this)&&i==="expand"){var T=this.getCurrentViewRecords(),C=T.filter(function(x){return Et(s,x,s.parentData)});this.dataResults.result=C}if(!u(h)&&h.closest(".e-treerowcell").classList.contains("e-cellselectionbackground")&&(h.closest(".e-treerowcell").classList.remove("e-cellselectionbackground"),h.closest(".e-treerowcell").removeAttribute("aria-selected")),this.isPixelHeight()&&!r.cells[0].classList.contains("e-lastrowcell")){var P=this.getRows(),c=this.getContentTable().rows;P=[].slice.call(c);for(var R=P.length-1;R>=0;R--)if(!So(P[parseInt(R.toString(),10)])){var N=this.getContentTable(),D=N.scrollHeight,S=this.getContent().clientHeight;this.lastRowBorder(P[parseInt(R.toString(),10)],D<=S);break}}this.notify("rowExpandCollapse",{detailrows:y,action:g,record:n,row:r}),this.updateAltRow(p)}},e.prototype.updateChildOnDemand=function(i){var r=this;if(i.requestType==="collapse"&&ce(this)){for(var n=this.flatData.slice(),o=0;o<n.length;o++)n[parseInt(o.toString(),10)].parentUniqueID===i.data.uniqueID&&(n.splice(o,1),o=o-1);this.dataResults.result=n;return}var s=new mt,l="childDataBind";i[""+l]=s.resolve;var d=i.data;this.trigger(ao,i),s.promise.then(function(){if(i.childData.length){ce(r)&&(r.flatData=r.dataResults.result),r.enableInfiniteScrolling&&ce(r)&&(r.flatData=r.infiniteScrollData);for(var h=r.flatData,p=0,c=0;c<h.length;c++)if(h[parseInt(c.toString(),10)].taskData===d.taskData){p=c;break}for(var m=le("result",r.dataSource),g=We(i.childData),y=d[r.childMapping]&&d[r.childMapping].length>g.length?d[r.childMapping].length:g.length,c=0;c<y;c++)d[r.childMapping]&&m.filter(function(C,P){C[r.parentIdMapping]===d[r.idMapping]&&m.splice(P,1)}),g[parseInt(c.toString(),10)]?(g[parseInt(c.toString(),10)].level=d.level+1,g[parseInt(c.toString(),10)].index=Math.ceil(Math.random()*1e3),g[parseInt(c.toString(),10)].parentItem=ue({},d),g[parseInt(c.toString(),10)].taskData=ue({},g[parseInt(c.toString(),10)]),delete g[parseInt(c.toString(),10)].parentItem.childRecords,delete g[parseInt(c.toString(),10)].taskData.parentItem,g[parseInt(c.toString(),10)].parentUniqueID=d.uniqueID,g[parseInt(c.toString(),10)].uniqueID=Ut(r.element.id+"_data_"),pe("uniqueIDCollection."+g[parseInt(c.toString(),10)].uniqueID,g[parseInt(c.toString(),10)],r),(!u(g[parseInt(c.toString(),10)][r.childMapping])||g[parseInt(c.toString(),10)][r.hasChildMapping]&&ce(r))&&(g[parseInt(c.toString(),10)].hasChildRecords=!0),ce(r)&&d[r.childMapping]&&d[r.childMapping][parseInt(c.toString(),10)]?h.splice(p+1+c,0,g[parseInt(c.toString(),10)]):h.splice(p+1+c,d[r.childMapping]&&d[r.childMapping][parseInt(c.toString(),10)]?1:0,g[parseInt(c.toString(),10)])):h.splice(p+1+c,1);h[parseInt(p.toString(),10)][""+r.childMapping]=g,h[parseInt(p.toString(),10)].childRecords=g,h[parseInt(p.toString(),10)].expanded=!0,pe("uniqueIDCollection."+h[parseInt(p.toString(),10)].uniqueID,h[parseInt(p.toString(),10)],r);for(var w=0;w<i.childData.length;w++)m.push(i.childData[parseInt(w.toString(),10)])}ce(r)&&r.loadChildOnDemand&&i.requestType==="expand"&&(r.dataResults.expandRecord={},r.dataResults.expandRecord=i.data),r.isExpandRefresh=!0;var v=r.getContentTable().parentElement.scrollTop;r.grid.refresh(),r.enableInfiniteScrolling&&(r.getContentTable().parentElement.scrollTop=v),r.trigger(hi,i)})},e.prototype.remoteExpand=function(i,r,n){var o=this.getRows(),s="fetchRemoteChildData";if(this.rowTemplate){var l=this.getContentTable().rows;o=[].slice.call(l)}var d={data:n,row:r},h=[];if(h=o.filter(function(c){return c.querySelector(".e-gridrowindex"+n.index+"level"+(n.level+1))||c.querySelector(".e-gridrowindex"+n.index+"level0.e-summarycell")}),i==="expand"){this.notify(_r,{record:n,rows:h,parentRow:r});var p={row:r,data:n};h.length>0&&this.trigger(hi,p)}else i==="collapse"&&this.enableVirtualization?this.dataModule[""+s]({action:i,record:d.data,rows:null,parentRow:d.row}):(this.collapseRemoteChild({record:n,rows:h}),this.trigger(Cr,d))},e.prototype.localExpand=function(i,r,n){var o,s=this.grid.currentViewData.filter(function(D){return D.parentUniqueID===n.uniqueID});this.isPixelHeight()&&r.cells[0].classList.contains("e-lastrowcell")&&this.lastRowBorder(r,!1);var l,d,h=this.getRows();if(this.rowTemplate){var p=this.getContentTable().rows;h=[].slice.call(p)}var c=i==="expand"?"table-row":"none",m=this.getPrimaryKeyFieldNames()[0];if(this.enableImmutableMode&&!this.allowPaging){o=[];for(var g=0;g<s.length;g++){var y=this.grid.getRowIndexByPrimaryKey(s[parseInt(g.toString(),10)][""+m]);o.push(this.getRows()[parseInt(y.toString(),10)])}}else o=h.filter(function(D){return D.querySelector(".e-gridrowindex"+n.index+"level"+(n.level+1))});var w=this.grid.getFrozenLeftColumnsCount()>0||this.grid.getFrozenRightColumnsCount()>0;(this.frozenRows||this.frozenColumns||this.getFrozenColumns()||w)&&(l=this.getRows().filter(function(D){return D.querySelector(".e-gridrowindex"+n.index+"level"+(n.level+1))})),w&&(d=this.getRows().filter(function(D){return D.querySelector(".e-gridrowindex"+n.index+"level"+(n.level+1))}));var v=this.grid.getRowsObject(),T=this.grid.currentViewData,C=T.filter(function(D){return D.uniqueID===n.uniqueID}),P=T.indexOf(C[0]);!u(v[parseInt(P.toString(),10)].visible)&&v[parseInt(P.toString(),10)].visible!==!1&&(v[parseInt(P.toString(),10)].visible=!0);for(var R=h.filter(function(D){return D.classList.contains("e-griddetailrowindex"+n.index+"level"+(n.level+1))}),g=0;g<o.length;g++){if(u(o[parseInt(g.toString(),10)])||(o[parseInt(g.toString(),10)].style.display=c),!u(o[parseInt(g.toString(),10)])&&!this.allowPaging&&!(this.enableVirtualization||this.enableInfiniteScrolling||J(this)||ce(this))){v[o[parseInt(g.toString(),10)].rowIndex].visible=c!=="none";var N=T.filter(function(S){return S.uniqueID===C[0].parentUniqueID});!u(N[0])&&h[T.indexOf(N[0])].getElementsByClassName("e-treegridcollapse").length&&(v[parseInt(P.toString(),10)].visible=!1)}u(l)||(l[parseInt(g.toString(),10)].style.display=c),u(d)||(d[parseInt(g.toString(),10)].style.display=c),this.notify("childRowExpand",{row:o[parseInt(g.toString(),10)]}),!u(s[parseInt(g.toString(),10)].childRecords)&&s[parseInt(g.toString(),10)].childRecords.length>0&&(i!=="expand"||u(s[parseInt(g.toString(),10)].expanded)||s[parseInt(g.toString(),10)].expanded)&&(this.expandCollapse(i,o[parseInt(g.toString(),10)],s[parseInt(g.toString(),10)],!0),this.frozenColumns<=this.treeColumnIndex&&!u(l)&&this.expandCollapse(i,l[parseInt(g.toString(),10)],s[parseInt(g.toString(),10)],!0))}for(var g=0;g<R.length;g++)!u(R[parseInt(g.toString(),10)])&&!this.allowPaging&&!(this.enableVirtualization||this.enableInfiniteScrolling||J(this)||ce(this))&&(v[R[parseInt(g.toString(),10)].rowIndex].visible=c!=="none",R[parseInt(g.toString(),10)].style.display=c);!this.allowPaging&&!(this.enableVirtualization||this.enableInfiniteScrolling||J(this)||ce(this))&&this.grid.notify("refresh-Expand-and-Collapse",{rows:this.grid.getRowsObject()})},e.prototype.updateAltRow=function(i){if(this.enableAltRow&&!this.rowTemplate)for(var r=0,n=0;i&&n<i.length;n++){var o=i[parseInt(n.toString(),10)];o.style.display!=="none"&&(o.classList.contains("e-altrow")&&Se([o],"e-altrow"),r%2!==0&&!o.classList.contains("e-summaryrow")&&!o.classList.contains("e-detailrow")&&se([o],"e-altrow"),!o.classList.contains("e-summaryrow")&&!o.classList.contains("e-detailrow")&&r++)}},e.prototype.treeColumnRowTemplate=function(){var i=this.getContentTable().rows;i=[].slice.call(i);for(var r=this.grid.getRowsObject(),n=0;n<i.length;n++){var o=this.grid.getContentTable().rows[parseInt(n.toString(),10)].cells[this.treeColumnIndex],s=i[parseInt(n.toString(),10)],l=r.length!==0?r[parseInt(n.toString(),10)].data:new Object,d={data:l,row:s,cell:o,column:this.getColumns()[this.treeColumnIndex]};this.renderModule.cellRender(d)}},e.prototype.collapseRemoteChild=function(i,r){!u(r)&&!r&&!this.loadChildOnDemand&&(i.record.expanded=!1);var n=i.rows,o,s,l=[],d=[],h=this.getFrozenLeftColumnsCount()>0||this.getFrozenRightColumnsCount()>0;h&&(l=this.getRows().filter(function(v){return v.querySelector(".e-gridrowindex"+i.record.index+"level"+(i.record.level+1))}),d=this.getRows().filter(function(v){return v.querySelector(".e-gridrowindex"+i.record.index+"level"+(i.record.level+1))}));for(var p=0;p<n.length;p++){n[parseInt(p.toString(),10)].style.display="none",o=n[parseInt(p.toString(),10)];var c=n[parseInt(p.toString(),10)].querySelector(".e-detailrowexpand");if(u(c)||this.grid.detailRowModule.collapse(c),h&&(l[parseInt(p.toString(),10)].style.display="none",d[parseInt(p.toString(),10)].style.display="none",n[parseInt(p.toString(),10)].querySelector(".e-treecolumn-container .e-treegridexpand")||(l[parseInt(p.toString(),10)].querySelector(".e-treecolumn-container .e-treegridexpand")?o=l[parseInt(p.toString(),10)]:d[parseInt(p.toString(),10)].querySelector(".e-treecolumn-container .e-treegridexpand")&&(o=d[parseInt(p.toString(),10)]))),o.querySelector(".e-treecolumn-container .e-treegridexpand")){var m=o.querySelector(".e-treecolumn-container .e-treegridexpand");s=this.rowTemplate?this.grid.getCurrentViewRecords()[n[parseInt(p.toString(),10)].rowIndex]:this.grid.getRowObjectFromUID(n[parseInt(p.toString(),10)].getAttribute("data-Uid")).data,!u(m)&&s.expanded&&(Se([m],"e-treegridexpand"),se([m],"e-treegridcollapse"));for(var g=[],y=this.getRows(),w=0;w<y.length;w++)y[parseInt(w.toString(),10)].querySelector(".e-gridrowindex"+s.index+"level"+(s.level+1))&&g.push(y[parseInt(w.toString(),10)]);g.length&&s.expanded&&this.collapseRemoteChild({record:s,rows:g},!1)}}},e.prototype.sanitize=function(i){return this.enableHtmlSanitizer&&typeof i=="string"?Ka.sanitize(i):i},e.prototype.updateRowAndCellElements=function(i,r,n){for(var o=0;o<i.length;o++)this.renderModule.cellRender({data:i[parseInt(o.toString(),10)],cell:r[parseInt(o.toString(),10)].cells[parseInt(n.toString(),10)],column:this.grid.getColumns()[this.treeColumnIndex],requestType:"rowDragAndDrop"}),(this.action==="indenting"||this.action==="outdenting")&&this.renderModule.RowModifier({data:i[parseInt(o.toString(),10)],row:r[parseInt(o.toString(),10)]})},e.prototype.addListener=function(){this.on("updateResults",this.updateResultModel,this),this.grid.on("initial-end",this.afterGridRender,this)},e.prototype.updateResultModel=function(i){this.dataResults=i},e.prototype.removeListener=function(){this.isDestroyed||(this.off("updateResults",this.updateResultModel),this.grid.off("initial-end",this.afterGridRender))},e.prototype.filterByColumn=function(i,r,n,o,s,l,d,h){if(u(i)&&u(r)&&u(n)){var p="The provided value for the fieldName, filterOperator and filterValue are undefined. Please ensure the fieldName, filterOperator and filterValue.";this.trigger(Ie,{error:p})}this.grid.filterByColumn(i,r,n,o,s,l,d,h)},e.prototype.clearFiltering=function(){this.grid.clearFiltering()},e.prototype.removeFilteredColsByField=function(i,r){this.grid.removeFilteredColsByField(i,r)},e.prototype.selectRow=function(i,r){this.grid.selectRow(i,r)},e.prototype.selectRows=function(i){this.grid.selectRows(i)},e.prototype.clearSelection=function(){this.grid.clearSelection()},e.prototype.copy=function(i){this.clipboardModule.copy(i)},e.prototype.paste=function(i,r,n){if(u(i)&&u(r)&&u(n)){var o="The provided value for the index is undefined. Please ensure the index contains number.";this.trigger(Ie,{error:o})}this.clipboardModule.paste(i,r,n)},e.prototype.selectCell=function(i,r){this.grid.selectCell(i,r)},e.prototype.getSelectedRows=function(){return this.grid.getSelectedRows()},e.prototype.getMovableCellFromIndex=function(i,r){return this.grid.getCellFromIndex(i,r)},e.prototype.getMovableDataRows=function(){return this.grid.getDataRows()},e.prototype.getMovableRowByIndex=function(i){return this.grid.getRowByIndex(i)},e.prototype.getMovableRows=function(){return this.grid.getRows()},e.prototype.getFrozenRightRowByIndex=function(i){return this.grid.getRowByIndex(i)},e.prototype.getFrozenRightRows=function(){return this.grid.getRows()},e.prototype.getFrozenRightDataRows=function(){return this.grid.getDataRows()},e.prototype.getFrozenRightCellFromIndex=function(i,r){return this.grid.getCellFromIndex(i,r)},e.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.grid.getColumnHeaderByIndex(i)},e.prototype.getFrozenRightColumnHeaderByIndex=function(i){return this.grid.getColumnHeaderByIndex(i)},e.prototype.getMovableColumnHeaderByIndex=function(i){return this.grid.getColumnHeaderByIndex(i)},e.prototype.getMovableColumnsCount=function(){return this.grid.getMovableColumnsCount()},e.prototype.getFrozenLeftColumnsCount=function(){return this.grid.getFrozenLeftColumnsCount()},e.prototype.getFrozenRightColumnsCount=function(){return this.grid.getFrozenRightColumnsCount()},e.prototype.getFrozenLeftColumns=function(){return this.updateColumnModel(this.grid.getFrozenLeftColumns()),this.columnModel},e.prototype.getFrozenRightColumns=function(){return this.updateColumnModel(this.grid.getFrozenRightColumns()),this.columnModel},e.prototype.getVisibleMovableCount=function(){return this.grid.getVisibleMovableCount()},e.prototype.getVisibleFrozenRightCount=function(){return this.grid.getVisibleFrozenRightCount()},e.prototype.getVisibleFrozenLeftCount=function(){return this.grid.getVisibleFrozenLeftCount()},e.prototype.getMovableColumns=function(){return this.updateColumnModel(this.grid.getMovableColumns()),this.columnModel},e.prototype.getFrozenColumns=function(){return this.getFrozenCount(!u(this.columns)&&this.columns,0)+this.frozenColumns},e.prototype.getFrozenCount=function(i,r){for(var n=0,o=i.length;n<o;n++)i[parseInt(n.toString(),10)].columns?r=this.getFrozenCount(i[parseInt(n.toString(),10)].columns,r):i[parseInt(n.toString(),10)].isFrozen&&r++;return r},e.prototype.getSelectedRowIndexes=function(){return this.grid.getSelectedRowIndexes()},e.prototype.getSelectedRowCellIndexes=function(){return this.grid.getSelectedRowCellIndexes()},e.prototype.getSelectedRecords=function(){return this.grid.getSelectedRecords()},e.prototype.getDataModule=function(){return{baseModule:this.grid.getDataModule(),treeModule:this.dataModule}},e.prototype.reorderRows=function(i,r,n){if(u(i)&&u(r)&&u(n)){var o="The provided value for the fromIndexes, toIndex and position is undefined. Please ensure the fromIndexes and toIndex contains number and position contains string.";this.trigger(Ie,{error:o})}this.rowDragAndDropModule.reorderRows(i,r,n)},e.prototype.indent=function(i){u(this.rowDragAndDropModule)||(i=i,this.rowDragAndDropModule[this.indentOutdentAction](i,"indent"))},e.prototype.outdent=function(i){u(this.rowDragAndDropModule)||(i=i,this.rowDragAndDropModule[this.indentOutdentAction](i,"outdent"))};var t;return F([A(0)],e.prototype,"frozenRows",void 0),F([A(0)],e.prototype,"frozenColumns",void 0),F([A("Ellipsis")],e.prototype,"clipMode",void 0),F([A([])],e.prototype,"columns",void 0),F([A(null)],e.prototype,"childMapping",void 0),F([A(null)],e.prototype,"hasChildMapping",void 0),F([A(0)],e.prototype,"treeColumnIndex",void 0),F([A(null)],e.prototype,"idMapping",void 0),F([A(null)],e.prototype,"parentIdMapping",void 0),F([A(!1)],e.prototype,"enableCollapseAll",void 0),F([A(null)],e.prototype,"expandStateMapping",void 0),F([A(!1)],e.prototype,"allowRowDragAndDrop",void 0),F([A([])],e.prototype,"dataSource",void 0),F([A()],e.prototype,"query",void 0),F([A()],e.prototype,"cloneQuery",void 0),F([A("AllPages")],e.prototype,"printMode",void 0),F([A(!1)],e.prototype,"allowPaging",void 0),F([A(!1)],e.prototype,"loadChildOnDemand",void 0),F([A(!1)],e.prototype,"allowTextWrap",void 0),F([ot({},bh)],e.prototype,"textWrapSettings",void 0),F([A(!1)],e.prototype,"allowReordering",void 0),F([A(!1)],e.prototype,"allowResizing",void 0),F([A(!1)],e.prototype,"autoCheckHierarchy",void 0),F([ot({},Zh)],e.prototype,"pageSettings",void 0),F([ot({},Ja)],e.prototype,"rowDropSettings",void 0),F([A("USD")],e.prototype,"currencyCode",void 0),F([A()],e.prototype,"pagerTemplate",void 0),F([A(!1)],e.prototype,"showColumnMenu",void 0),F([A(!1)],e.prototype,"showColumnChooser",void 0),F([A(!1)],e.prototype,"allowSorting",void 0),F([A(!0)],e.prototype,"allowMultiSorting",void 0),F([ot({},ip)],e.prototype,"sortSettings",void 0),F([or([],Kh)],e.prototype,"aggregates",void 0),F([ot({},ep)],e.prototype,"editSettings",void 0),F([A(!1)],e.prototype,"allowFiltering",void 0),F([A()],e.prototype,"detailTemplate",void 0),F([ot({},vh)],e.prototype,"filterSettings",void 0),F([ot({},$h)],e.prototype,"searchSettings",void 0),F([A()],e.prototype,"toolbar",void 0),F([A()],e.prototype,"toolbarTemplate",void 0),F([A("Default")],e.prototype,"gridLines",void 0),F([A()],e.prototype,"contextMenuItems",void 0),F([A()],e.prototype,"columnMenuItems",void 0),F([A()],e.prototype,"rowTemplate",void 0),F([A("Parent")],e.prototype,"copyHierarchyMode",void 0),F([A(null)],e.prototype,"rowHeight",void 0),F([A(!0)],e.prototype,"enableAltRow",void 0),F([A(!0)],e.prototype,"allowKeyboard",void 0),F([A(!1)],e.prototype,"enableHover",void 0),F([A(!1)],e.prototype,"enableAutoFill",void 0),F([A(!1)],e.prototype,"enableAdaptiveUI",void 0),F([A(!1)],e.prototype,"enableImmutableMode",void 0),F([A("auto")],e.prototype,"height",void 0),F([A("auto")],e.prototype,"width",void 0),F([ot({},gh)],e.prototype,"loadingIndicator",void 0),F([A(!0)],e.prototype,"enableVirtualMaskRow",void 0),F([A(!1)],e.prototype,"enableVirtualization",void 0),F([A(!1)],e.prototype,"enableColumnVirtualization",void 0),F([A(!1)],e.prototype,"enableHtmlSanitizer",void 0),F([A(!1)],e.prototype,"enableInfiniteScrolling",void 0),F([ot({},op)],e.prototype,"infiniteScrollSettings",void 0),F([A("All")],e.prototype,"columnQueryMode",void 0),F([j()],e.prototype,"created",void 0),F([j()],e.prototype,"load",void 0),F([j()],e.prototype,"expanding",void 0),F([j()],e.prototype,"expanded",void 0),F([j()],e.prototype,"collapsing",void 0),F([j()],e.prototype,"collapsed",void 0),F([j()],e.prototype,"cellSave",void 0),F([j()],e.prototype,"cellSaved",void 0),F([j()],e.prototype,"actionBegin",void 0),F([j()],e.prototype,"actionComplete",void 0),F([j()],e.prototype,"beginEdit",void 0),F([j()],e.prototype,"batchAdd",void 0),F([j()],e.prototype,"batchDelete",void 0),F([j()],e.prototype,"batchCancel",void 0),F([j()],e.prototype,"beforeBatchAdd",void 0),F([j()],e.prototype,"beforeBatchDelete",void 0),F([j()],e.prototype,"beforeBatchSave",void 0),F([j()],e.prototype,"cellEdit",void 0),F([j()],e.prototype,"actionFailure",void 0),F([j()],e.prototype,"dataBound",void 0),F([j()],e.prototype,"dataSourceChanged",void 0),F([j()],e.prototype,"dataStateChange",void 0),F([j()],e.prototype,"recordDoubleClick",void 0),F([j()],e.prototype,"rowDataBound",void 0),F([j()],e.prototype,"detailDataBound",void 0),F([j()],e.prototype,"queryCellInfo",void 0),F([A(!0)],e.prototype,"allowSelection",void 0),F([j()],e.prototype,"rowSelecting",void 0),F([j()],e.prototype,"rowSelected",void 0),F([j()],e.prototype,"rowDeselecting",void 0),F([j()],e.prototype,"rowDeselected",void 0),F([j()],e.prototype,"headerCellInfo",void 0),F([j()],e.prototype,"cellSelecting",void 0),F([j()],e.prototype,"columnMenuOpen",void 0),F([j()],e.prototype,"columnMenuClick",void 0),F([j()],e.prototype,"cellSelected",void 0),F([j()],e.prototype,"cellDeselecting",void 0),F([j()],e.prototype,"cellDeselected",void 0),F([j()],e.prototype,"resizeStart",void 0),F([j()],e.prototype,"resizing",void 0),F([j()],e.prototype,"resizeStop",void 0),F([j()],e.prototype,"columnDragStart",void 0),F([j()],e.prototype,"columnDrag",void 0),F([j()],e.prototype,"columnDrop",void 0),F([j()],e.prototype,"checkboxChange",void 0),F([j()],e.prototype,"printComplete",void 0),F([j()],e.prototype,"beforePrint",void 0),F([j()],e.prototype,"toolbarClick",void 0),F([j()],e.prototype,"beforeDataBound",void 0),F([j()],e.prototype,"contextMenuOpen",void 0),F([j()],e.prototype,"contextMenuClick",void 0),F([j()],e.prototype,"beforeCopy",void 0),F([j()],e.prototype,"beforePaste",void 0),F([j()],e.prototype,"rowDrag",void 0),F([j()],e.prototype,"rowDragStart",void 0),F([j()],e.prototype,"rowDragStartHelper",void 0),F([j()],e.prototype,"rowDrop",void 0),F([A(-1)],e.prototype,"selectedRowIndex",void 0),F([ot({},Uh)],e.prototype,"selectionSettings",void 0),F([A(!1)],e.prototype,"allowExcelExport",void 0),F([A(!1)],e.prototype,"allowPdfExport",void 0),F([j()],e.prototype,"pdfQueryCellInfo",void 0),F([j()],e.prototype,"pdfHeaderQueryCellInfo",void 0),F([j()],e.prototype,"excelQueryCellInfo",void 0),F([j()],e.prototype,"excelHeaderQueryCellInfo",void 0),F([j()],e.prototype,"beforeExcelExport",void 0),F([j()],e.prototype,"excelExportComplete",void 0),F([j()],e.prototype,"beforePdfExport",void 0),F([j()],e.prototype,"pdfExportComplete",void 0),e=t=F([jr],e),e}($r),lp=function(){function a(e){Dt.Inject(Hs),this.parent=e,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(zr,this.collapseExpandPagedchilds,this),this.parent.on(Xi,this.pageAction,this)},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(zr,this.collapseExpandPagedchilds),this.parent.off(Xi,this.pageAction))},a.prototype.getModuleName=function(){return"pager"},a.prototype.refresh=function(){this.parent.grid.pagerModule.refresh()},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.goToPage=function(e){this.parent.grid.pagerModule.goToPage(e)},a.prototype.updateExternalMessage=function(e){if(u(e)){var t="The provided value for the message is undefined. Please ensure the message contains string.";this.parent.trigger(Ie,{error:t})}this.parent.grid.pagerModule.updateExternalMessage(e)},a.prototype.collapseExpandPagedchilds=function(e){if(e.record.expanded=e.action!=="collapse",this.parent.flatData.map(function(l){return l.expanded=l.uniqueID===e.record.uniqueID&&l.expanded!==e.record.expanded?e.record.expanded:l.expanded}),this.parent.enableImmutableMode){var t=this.parent.getPrimaryKeyFieldNames()[0],i=this.parent.flatData.filter(function(l){return l[""+t]===e.record[""+t]});i.length&&(i[0].expanded=e.record.expanded)}var r={result:this.parent.flatData,row:e.row,action:e.action,record:e.record,count:this.parent.flatData.length};if(le("grid.renderModule",this.parent).dataManagerSuccess(r),this.parent.enableImmutableMode){var n="row",o="action",s=void 0;r[""+o]==="collapse"?(s=r[""+n].getElementsByClassName("e-treegridexpand")[0],u(s)||(Se([s],"e-treegridexpand"),se([s],"e-treegridcollapse"))):r[""+o]==="expand"&&(s=r[""+n].getElementsByClassName("e-treegridcollapse")[0],u(s)||(Se([s],"e-treegridcollapse"),se([s],"e-treegridexpand")))}},a.prototype.pageRoot=function(e,t,i){for(var r=u(i)?[]:i,n=function(l){r.push(t[parseInt(l.toString(),10)]);var d=[];t[parseInt(l.toString(),10)].hasChildRecords&&(d=e.filter(function(h){return t[parseInt(l.toString(),10)].uniqueID===h.parentUniqueID}),r=o.pageRoot(e,d,r))},o=this,s=0;s<t.length;s++)n(s);return r},a.prototype.updatePageSize=function(e){var t=e.result.length,i=this.parent.grid.pagerModule;this.parent.pageSettings.pageSizes===!0&&i.pagerObj.pagerdropdownModule.dropDownListObject.value===i.pagerObj.getLocalizedLabel("All")&&(i.pagerObj.totalRecordsCount=t,this.parent.grid.pageSettings.pageSize=t)},a.prototype.pageAction=function(e){var t=this,i=new he(e.result);if(this.parent.pageSettings.pageSizeMode==="Root"){var r=[],n=this.parent.grid.filterSettings.columns.length>0&&(this.parent.filterSettings.hierarchyMode==="Child"||this.parent.filterSettings.hierarchyMode==="None")?"filterLevel":"level",o=new Xe().where(n,"equal",0);r=i.executeLocal(o),e.count=r.length;var s=this.parent.grid.pageSettings.pageSize,l=this.parent.grid.pageSettings.currentPage,d=s*(l-1);o=o.skip(d).take(s),r=i.executeLocal(o);var h=this.pageRoot(e.result,r);e.result=h}else{var p=new he(e.result),c=new es("expanded","notequal",null).or("expanded","notequal",void 0),m=p.executeLocal(new Xe().where(c)),g=void 0;pa(this.parent)&&e.actionArgs.action!=="collapse"&&e.actionArgs.action!=="expand"?g=m:g=m.filter(function(C){return Et(t.parent,C)}),e.count=g.length;var o=new Xe,s=this.parent.grid.pageSettings.pageSize;this.updatePageSize(e);var l=this.parent.grid.pageSettings.currentPage;g.length<l*s&&(l=Math.floor(g.length/s)+(g.length%s?1:0),l=l||1,this.parent.grid.setProperties({pageSettings:{currentPage:l}},!0));var d=s*(l-1);o=o.skip(d).take(s),p.dataSource.json=g,e.result=p.executeLocal(o)}this.parent.notify("updateAction",e)},a}(),dp=function(){function a(e){this.batchChildCount=0,this.addedRecords="addedRecords",this.deletedRecords="deletedRecords",this.batchAddedRecords=[],this.batchDeletedRecords=[],this.batchAddRowRecord=[],this.parent=e,this.isSelfReference=!u(e.parentIdMapping),this.batchRecords=[],this.currentViewRecords=[],this.isAdd=!1,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(Ki,this.cellSaved,this),this.parent.on(er,this.batchAdd,this),this.parent.on(ir,this.beforeBatchAdd,this),this.parent.on(Si,this.batchSave,this),this.parent.on(tr,this.beforeBatchDelete,this),this.parent.on(rr,this.beforeBatchSave,this),this.parent.on("batchPageAction",this.batchPageAction,this),this.parent.on("batchCancelAction",this.batchCancelAction,this),this.parent.grid.on("immutable-batch-cancel",this.immutableBatchAction,this),this.parent.grid.on("next-cell-index",this.nextCellIndex,this)},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ki,this.cellSaved),this.parent.off(er,this.batchAdd),this.parent.off(Si,this.batchSave),this.parent.off(ir,this.beforeBatchAdd),this.parent.off(tr,this.beforeBatchDelete),this.parent.off(rr,this.beforeBatchSave),this.parent.off("batchPageAction",this.batchPageAction),this.parent.off("batchCancelAction",this.batchCancelAction),this.parent.grid.off("immutable-batch-cancel",this.immutableBatchAction),this.parent.grid.off("next-cell-index",this.nextCellIndex))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.getBatchRecords=function(){return this.batchRecords},a.prototype.getAddRowIndex=function(){return this.addRowIndex},a.prototype.getSelectedIndex=function(){return this.selectedIndex},a.prototype.getBatchChildCount=function(){return this.batchChildCount},a.prototype.batchPageAction=function(){var e=this.parent.grid.dataSource instanceof he?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,t=this.parent.grid.getPrimaryKeyFieldNames()[0],i;if(!u(this.batchAddedRecords)&&this.batchAddedRecords.length)for(var r=0;r<this.batchAddedRecords.length;r++)i=e.map(function(n){return n[""+t]}).indexOf(this.batchAddedRecords[parseInt(r.toString(),10)][""+t]),e.splice(i,1);this.batchAddedRecords=this.batchRecords=this.batchAddRowRecord=this.batchDeletedRecords=this.currentViewRecords=[]},a.prototype.cellSaved=function(e){var t=e.column.index;if(t===this.parent.treeColumnIndex&&this.parent.renderModule.cellRender({data:e.rowData,cell:e.cell,column:this.parent.grid.getColumnByIndex(e.column.index)}),this.isAdd&&this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.newRowPosition!=="Bottom"){var i=this.parent.grid.dataSource instanceof he?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,r=void 0,n="level",o=this.parent.grid.getPrimaryKeyFieldNames()[0],s=void 0,l=void 0,d="parentItem",h="uniqueID",p=this.selectedIndex>-1?this.batchRecords[parseInt(this.addRowIndex.toString(),10)][""+d]:null,c=void 0,m=void 0,g=void 0,y=this.parent.editSettings.newRowPosition==="Top"||this.selectedIndex===-1?0:this.parent.editSettings.newRowPosition==="Above"?this.addRowIndex:this.addRowIndex+1;if(y=this.getActualRowObjectIndex(y),this.newBatchRowAdded){if(this.batchRecords.length&&(c=this.batchRecords[this.addRowIndex][this.parent.idMapping],g=this.batchRecords[this.addRowIndex][this.parent.parentIdMapping],this.batchRecords[parseInt(this.addRowIndex.toString(),10)][""+d]&&(m=this.batchRecords[parseInt(this.addRowIndex.toString(),10)][""+d][""+h])),this.batchAddedRecords=We(this.batchAddedRecords),this.batchAddRowRecord=We(this.batchAddRowRecord),this.batchAddRowRecord.push(this.batchRecords[this.addRowIndex]),r=this.parent.grid.getRowsObject()[parseInt(y.toString(),10)].changes,r.uniqueID=Ut(this.parent.element.id+"_data_"),pe("uniqueIDCollection."+r.uniqueID,r,this.parent),!Object.prototype.hasOwnProperty.call(r,"level")){if(this.batchIndex=this.selectedIndex===-1?0:this.batchIndex,this.parent.editSettings.newRowPosition==="Child"){if(r.primaryParent=p,this.selectedIndex>-1){r.parentItem=ue({},this.batchRecords[this.addRowIndex]),r.parentUniqueID=r.parentItem.uniqueID,delete r.parentItem.childRecords,delete r.parentItem[this.parent.childMapping],r.level=r.parentItem.level+1,r.index=this.batchIndex;var w=Te(this.batchRecords[this.addRowIndex]).length,v=Te(this.batchRecords[this.addRowIndex])[w-1];v=u(v)?this.batchRecords[this.addRowIndex]:v,s=i.map(function(T){return T[""+o]}).indexOf(v[""+o]),this.isSelfReference&&(r[this.parent.parentIdMapping]=c),$e(o,r.parentItem,"add",this.parent,this.isSelfReference,r)}}else if((this.parent.editSettings.newRowPosition==="Above"||this.parent.editSettings.newRowPosition==="Below")&&!u(this.batchRecords[this.addRowIndex])){if(r.level=this.batchRecords[parseInt(this.addRowIndex.toString(),10)][""+n],r.level&&this.selectedIndex>-1&&(r.parentItem=p,r.parentUniqueID=m,delete r.parentItem.childRecords,delete r.parentItem[this.parent.childMapping]),r.index=this.parent.editSettings.newRowPosition==="Below"?this.batchIndex:this.batchIndex-1,this.parent.editSettings.newRowPosition==="Below"&&this.selectedIndex>-1){var w=Te(this.batchRecords[this.addRowIndex]).length,v=Te(this.batchRecords[this.addRowIndex])[w-1];v=u(v)?this.batchRecords[this.addRowIndex]:v,s=i.map(function(P){return P[""+o]}).indexOf(v[""+o])}if(this.parent.editSettings.newRowPosition==="Above"&&this.selectedIndex>-1){var v=this.batchRecords[this.addRowIndex];s=i.map(function(C){return C[""+o]}).indexOf(v[""+o])}this.isSelfReference&&(r[this.parent.parentIdMapping]=g)}r.index=r.index===-1?0:r.index,r.hasChildRecords=!1,r.childRecords=[],this.batchRecords.splice(r.index,0,r),this.currentViewRecords.splice(r.index,0,r),s?l=s:l=r.index,this.parent.editSettings.newRowPosition!=="Above"&&(l=r.index===0?l:l+1),i.splice(l,0,r),this.batchAddedRecords.push(r)}this.parent.grid.getRowsObject()[parseInt(y.toString(),10)].data=r,this.newBatchRowAdded=!1}}},a.prototype.beforeBatchAdd=function(e){var t="isTabLastRow";if(this.parent.editSettings.mode==="Cell"&&this.parent.editModule[""+t]){e.cancel=!0,this.parent.editModule[""+t]=!1;return}this.parent.editModule.isAddedRowByMethod&&!u(this.parent.editModule.addRowIndex)&&!this.parent.editModule.isAddedRowByContextMenu&&(this.parent.grid.selectedRowIndex===-1||this.parent.editModule.batchEditModule.isAdd)?(this.selectedIndex=this.parent.editModule.selectedIndex,this.addRowIndex=this.parent.editModule.addRowIndex,this.addRowRecord=this.batchRecords.length?this.batchRecords[this.selectedIndex]:this.parent.getCurrentViewRecords()[this.selectedIndex]):(this.selectedIndex=this.parent.grid.selectedRowIndex,this.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0,this.parent.editModule.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0,this.addRowRecord=this.parent.getSelectedRecords()[0])},a.prototype.batchAdd=function(e){if(this.parent.editSettings.newRowPosition!=="Bottom"){this.isAdd=!0,this.newBatchRowAdded=!0;var t=0;if(this.batchRecords.length||(this.batchAddedRecords=[],this.batchRecords=We(this.parent.grid.getCurrentViewRecords()),this.currentViewRecords=We(this.parent.grid.getCurrentViewRecords())),this.parent.editModule.isAddedRowByMethod&&!u(this.parent.editModule.addRowIndex)&&fe(this.parent.grid.getDataRows()[0],["e-batchrow"],[]),this.parent.editSettings.newRowPosition!=="Top"){var i=this.parent.grid.getCurrentViewRecords();this.parent.editSettings.mode==="Batch"&&(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)&&(i=this.batchRecords),this.updateChildCount(i),this.parent.notify(Zi,{}),this.batchChildCount=0}this.updateRowIndex();var r=le("focusModule",this.parent.grid),n=this.parent.getContentTable();if(this.parent.getBatchChanges()[this.deletedRecords].length&&this.parent.editSettings.newRowPosition==="Above"?(t=e.row.rowIndex,r.getContent().matrix.matrix=this.matrix):t=n.getElementsByClassName("e-batchrow")[0].rowIndex,r.getContent().matrix.current=[t,r.getContent().matrix.current[1]],this.parent.editModule.isAddedRowByMethod&&!u(this.parent.editModule.addRowIndex)&&!this.parent.editModule.isAddedRowByContextMenu){var o=this.parent.getBatchChanges().addedRecords,s=parseInt(this.parent.getContentTable().getElementsByClassName("e-insertedrow")[o.length-1].getAttribute("data-rowindex"),10);this.batchRecords.splice(s,0,o[o.length-1])}}},a.prototype.beforeBatchDelete=function(e){this.batchRecords.length||(this.batchRecords=We(this.parent.grid.getCurrentViewRecords()),this.currentViewRecords=We(this.parent.grid.getCurrentViewRecords()));var t=le("focusModule",this.parent.grid);this.matrix=t.getContent().matrix.matrix;var i=[],r=[],n=this.parent.grid.getPrimaryKeyFieldNames()[0],o,s,l;!u(e.row)&&this.parent.getSelectedRows().indexOf(e.row)===-1?(o=e.rowData,s=Te(o),l=e.row.getAttribute("data-uid")):(o=this.parent.grid.getSelectedRecords()[this.parent.grid.getSelectedRecords().length-1],s=Te(o),l=this.parent.getSelectedRows()[0].getAttribute("data-uid"));var d=parseInt(this.parent.grid.getRowElementByUID(l).getAttribute("data-rowindex"),10);if(s.length)for(var h=d+s.length,p=d+1,c=p;c<=h;c++)i.push(this.parent.grid.getDataRows()[parseInt(c.toString(),10)]),(this.parent.frozenRows||this.parent.frozenColumns||this.parent.getFrozenColumns())&&i.push(this.parent.grid.getHeaderContent()[parseInt(c.toString(),10)]);if(!u(o.parentItem)){var m=it(this.parent,o.parentItem.uniqueID);if(!u(m)&&m.hasChildRecords){var g=m.childRecords.indexOf(o);m.childRecords.splice(g,1)}this.batchDeletedRecords=We(this.batchDeletedRecords),this.batchDeletedRecords.push(o)}s.push(o),r=s;for(var c=0;c<r.length;c++){var y=this.batchRecords.map(function(v){return v[""+n]}).indexOf(r[parseInt(c.toString(),10)][""+n]);y!==-1&&this.batchRecords.splice(y,1)}for(var c=0;c<i.length;c++)u(i[parseInt(c.toString(),10)])||this.parent.grid.selectionModule.selectedRecords.push(i[parseInt(c.toString(),10)])},a.prototype.updateRowIndex=function(){for(var e=this.parent.grid.getDataRows(),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].setAttribute("data-rowindex",t.toString())},a.prototype.updateChildCount=function(e){for(var t=this.parent.grid.getPrimaryKeyFieldNames()[0],i="addedRecords",r=this.parent.editSettings.newRowPosition==="Child"?"primaryParent":"parentItem",n=0;n<this.parent.getBatchChanges()[""+i].length;n++)u(this.parent.getBatchChanges()[""+i][parseInt(n.toString(),10)][""+r])||this.parent.getBatchChanges()[""+i][parseInt(n.toString(),10)][""+r][""+t]===e[parseInt(this.addRowIndex.toString(),10)][""+t]&&(this.batchChildCount=this.batchChildCount+1)},a.prototype.beforeBatchSave=function(e){var t="changedRecords",i="deletedRecords",r=e.batchChanges[""+t];if(e.batchChanges[""+t].length)for(var n=void 0,o=0;o<r.length;o++)Ct({value:r[parseInt(o.toString(),10)],action:"edit"},this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,n);if(e.batchChanges[""+i].length)for(var s=e.batchChanges[""+i],l=s,o=0;o<l.length;o++){this.deleteUniqueID(l[parseInt(o.toString(),10)].uniqueID);for(var d=Te(l[parseInt(o.toString(),10)]),h=0;h<d.length;h++)this.deleteUniqueID(d[parseInt(h.toString(),10)].uniqueID);e.batchChanges[""+i]=e.batchChanges[""+i].concat(d)}this.isAdd=!1},a.prototype.deleteUniqueID=function(e){var t="uniqueIDFilterCollection";delete this.parent[""+t][""+e];var i="uniqueIDCollection";delete this.parent[""+i][""+e]},a.prototype.batchCancelAction=function(){var e="targetElement",t,i="parentItem",r="index",n=this.parent.grid.getCurrentViewRecords(),o="childRecords",s=this.parent.grid.dataSource instanceof he?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,l=this.parent.grid.getPrimaryKeyFieldNames()[0];if(!u(this.batchAddedRecords)){for(var d=0;d<this.batchAddedRecords.length;d++)if(t=s.map(function(g){return g[""+l]}).indexOf(this.batchAddedRecords[parseInt(d.toString(),10)][""+l]),t!==-1&&s.splice(t,1),this.parent.editSettings.newRowPosition==="Child"&&(t=n.map(function(g){return g[""+l]}).indexOf(this.batchAddedRecords[parseInt(d.toString(),10)][""+i]?this.batchAddedRecords[parseInt(d.toString(),10)][""+i][""+l]:this.batchAddedRecords[parseInt(d.toString(),10)][""+l]),!u(n[parseInt(t.toString(),10)])))for(var h=n[parseInt(t.toString(),10)][""+o],p=0;h&&p<h.length;p++)h[parseInt(p.toString(),10)][""+l]===this.batchAddedRecords[parseInt(d.toString(),10)][""+l]&&n[parseInt(t.toString(),10)][""+o].splice(p,1)}if(!u(this.parent[""+e])){var c=this.parent[""+e].closest("tr");this.parent.collapseRow(c),this.parent[""+e]=null}if(!u(this.batchDeletedRecords)){for(var d=0;d<this.batchDeletedRecords.length;d++)if(!u(this.batchDeletedRecords[parseInt(d.toString(),10)][""+i])){t=n.map(function(y){return y[""+l]}).indexOf(this.batchDeletedRecords[parseInt(d.toString(),10)][""+i][""+l]);var m=this.batchDeletedRecords[parseInt(d.toString(),10)][""+r]===0?this.batchDeletedRecords[parseInt(d.toString(),10)][""+r]:this.batchDeletedRecords[parseInt(d.toString(),10)][""+r]-1;u(n[parseInt(t.toString(),10)])||n[parseInt(t.toString(),10)][""+o].splice(m,0,this.batchDeletedRecords[parseInt(d.toString(),10)])}}this.batchAddedRecords=this.batchRecords=this.batchAddRowRecord=this.currentViewRecords=[],this.batchRecords=We(this.parent.grid.getCurrentViewRecords()),this.batchIndex=0,this.currentViewRecords=We(this.parent.grid.getCurrentViewRecords()),this.batchDeletedRecords=[],this.parent.grid.renderModule.refresh()},a.prototype.batchSave=function(e){if(this.parent.editSettings.mode==="Batch"){var t=void 0,i=Object.hasOwnProperty.call(e,"updatedRecords")?e.updatedRecords:this.parent.getBatchChanges(),r="deletedRecords",n="addedRecords",o="index",s="uniqueID",l=this.parent.grid.dataSource instanceof he?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,d=this.parent.grid.getCurrentViewRecords(),h=this.parent.grid.getPrimaryKeyFieldNames()[0],p="level",c=i[""+n],m="parentItem",g=void 0,y=void 0,w=void 0,v=void 0,T="childRecords";if(c.length>1&&this.parent.editSettings.newRowPosition!=="Bottom"&&c.reverse(),this.parent.editSettings.newRowPosition!=="Bottom"&&!Object.hasOwnProperty.call(e,"updatedRecords")){if(l.splice(l.length-c.length,c.length),this.parent.editModule.isAddedRowByMethod&&c.length&&!u(this.parent.editModule.addRowIndex)&&!this.parent.editModule.isAddedRowByContextMenu){c.reverse();for(var C=0;C<c.length;C++){var P=parseInt(this.parent.getContentTable().getElementsByClassName("e-insertedrow")[parseInt(C.toString(),10)].getAttribute("data-rowindex"),10);l.splice(P,0,c[parseInt(C.toString(),10)])}}if(!this.parent.allowPaging&&l.length!==d.length)d.length>c.length&&d.splice(d.length-c.length,c.length);else{var R=We(l);if(R.length){var N=R.map(function(_){return _[""+h]}).indexOf(d[0][""+h]),D=N+this.parent.grid.pageSettings.pageSize;d=R.splice(N,D)}}}for(this.batchAddRowRecord.length===0&&this.batchAddRowRecord.push(this.parent.flatData[e.index]),this.parent.editModule.isAddedRowByContextMenu&&c.reverse(),t=0;t<c.length;t++){var S=ue({},c[parseInt(t.toString(),10)]);if(delete S.parentItem,delete S.uniqueID,delete S.index,delete S.level,delete S.hasChildRecords,delete S.childRecords,delete S.parentUniqueID,u(S.primaryParent)||delete S.primaryParent,c.length>1&&this.parent.editModule.isAddedRowByContextMenu){var x=this.parent.editSettings.newRowPosition;this.parent.editSettings.newRowPosition=this.parent.editModule.previousNewRowPosition,this.parent.editModule.previousNewRowPosition=x}if(c[parseInt(t.toString(),10)].taskData=S,v=this.batchAddRowRecord[parseInt(t.toString(),10)],u(v)&&(v=this.batchAddRowRecord[t-1]),this.isSelfReference&&(u(c[parseInt(t.toString(),10)].parentItem)||$e(h,c[parseInt(t.toString(),10)].parentItem,"add",this.parent,this.isSelfReference,c[parseInt(t.toString(),10)])),u(v)||(y=v.index),this.parent.editSettings.newRowPosition!=="Top"&&this.parent.editSettings.newRowPosition!=="Bottom"&&u(c[parseInt(t.toString(),10)].parentItem)&&this.selectedIndex===-1&&(g=-1,v=null),Ct({value:c[parseInt(t.toString(),10)],action:"add"},this.parent,this.isSelfReference,y,g,w,v),g=null,this.parent.editSettings.newRowPosition==="Child"&&!u(c[parseInt(t.toString(),10)][""+m])&&(u(this.parent.editModule.addRowIndex)||this.isSelfReference))for(var I=d.map(function(_){return _[""+h]}).indexOf(c[parseInt(t.toString(),10)][""+m][""+h]),E=d[parseInt(I.toString(),10)][""+T],L=0;L<E.length;L++)E[parseInt(L.toString(),10)][""+h]===c[parseInt(t.toString(),10)][""+h]&&d[parseInt(I.toString(),10)][""+T].splice(L,1)}if(i[""+r].length)for(t=0;t<i[""+r].length;t++)Ct({value:i[""+r][parseInt(t.toString(),10)],action:"delete"},this.parent,this.isSelfReference,y,g,w,v);this.parent.parentData=[];for(var z=0;z<l.length;z++)l[parseInt(z.toString(),10)][""+o]=z,pe("uniqueIDCollection."+l[parseInt(z.toString(),10)][""+s]+".index",z,this.parent),l[parseInt(z.toString(),10)][""+p]||this.parent.parentData.push(l[parseInt(z.toString(),10)])}this.batchAddRowRecord=this.batchAddedRecords=this.batchRecords=this.batchDeletedRecords=this.currentViewRecords=[],this.parent.editModule.isAddedRowByContextMenu&&(this.parent.editModule.isAddedRowByContextMenu=!1)},a.prototype.getActualRowObjectIndex=function(e){var t=this.parent.grid.getDataRows();if((this.parent.editSettings.newRowPosition==="Below"||this.parent.editSettings.newRowPosition==="Child")&&this.selectedIndex>-1){if(!u(this.batchRecords[this.addRowIndex])&&this.batchRecords[this.addRowIndex].expanded)if(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length){if(e+=Te(this.batchRecords[this.addRowIndex]).length,this.parent.editSettings.newRowPosition!=="Child"){var i=this.getBatchChildCount();e=e+i}}else e+=Te(this.batchRecords[this.addRowIndex]).length;e>=t.length&&(e=t.length-1),this.updateChildCount(this.parent.grid.getCurrentViewRecords()),this.batchChildCount&&(e+=this.batchChildCount),this.batchChildCount=0}return e},a.prototype.immutableBatchAction=function(e){e.args.cancel=!0;var t=this.parent.grid.getBatchChanges(),i=[],r="index";Object.keys(t).length&&(i=t.addedRecords);for(var n=0;n<i.length;n++)e.rows.splice(i[parseInt(n.toString(),10)][""+r],1)},a.prototype.nextCellIndex=function(e){var t="index",i="rowIndex";this.parent.getSelectedRows().length?e[""+t]=this.parent.getSelectedRows()[0][""+i]:e[""+t]=this.batchIndex},a}(),hp=function(){function a(e){this.addedRecords="addedRecords",this.deletedRecords="deletedRecords",this.prevAriaRowIndex="-1",this.isAddedRowByMethod=!1,this.isAddedRowByContextMenu=!1,Dt.Inject(Fs),this.parent=e,this.isSelfReference=!u(e.parentIdMapping),this.previousNewRowPosition=null,this.internalProperties={},this.batchEditModule=new dp(this.parent),this.addEventListener()}return a.prototype.getModuleName=function(){return"edit"},a.prototype.addEventListener=function(){this.parent.on(qr,this.crudAction,this),this.parent.on(Yi,this.beginEdit,this),this.parent.on(Zi,this.beginAdd,this),this.parent.on(Qi,this.recordDoubleClick,this),this.parent.on(Nr,this.cellSave,this),this.parent.on(Ji,this.batchCancel,this),this.parent.grid.on(mo,this.keyPressed,this),this.parent.grid.on("batchedit-form",this.lastCellTab,this),this.parent.grid.on("content-ready",this.contentready,this),this.parent.on(Ni,this.cellEdit,this),this.parent.on("actionBegin",this.editActionEvents,this),this.parent.on("actionComplete",this.editActionEvents,this),this.parent.grid.on(yo,this.recordDoubleClick,this),this.parent.grid.on("dblclick",this.gridDblClick,this),this.parent.grid.on("recordAdded",this.customCellSave,this),this.parent.on("savePreviousRowPosition",this.savePreviousRowPosition,this),this.parent.grid.on(bo,this.beforeStartEdit,this),this.parent.grid.on(wo,this.beforeBatchCancel,this),this.parent.grid.on("reset-edit-props",this.resetIsOnBatch,this),this.parent.grid.on("get-row-position",this.getRowPosition,this)},a.prototype.gridDblClick=function(e){if(this.doubleClickTarget=e.target,e.target.classList.contains("e-frame")&&this.parent.getCurrentViewRecords().length===0&&(this.doubleClickTarget=null),e.target.classList.contains("e-treegridcollapse")||e.target.classList.contains("e-treegridexpand")){var t=Xt(e.target,"e-row"),i=t&&parseInt(t.getAttribute("data-rowindex"),10);!u(i)&&i>=0&&this.parent.allowPaging&&(this.parent.grid.getDataRows()[i].dataset.uid=this.parent.grid.contentModule.getRows()[i].uid)}},a.prototype.getRowPosition=function(e){e.newRowPosition=this.parent.editSettings.newRowPosition,e.addRowIndex=this.addRowIndex,e.dataRowIndex=+this.prevAriaRowIndex},a.prototype.beforeStartEdit=function(e){this.parent.editSettings.mode==="Cell"&&this.parent.trigger(Br,e)},a.prototype.beforeBatchCancel=function(e){this.parent.editSettings.mode==="Cell"&&(e.requestType="cancel",this.parent.trigger(wi,e))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(qr,this.crudAction),this.parent.off(Yi,this.beginEdit),this.parent.off(Zi,this.beginAdd),this.parent.off(Qi,this.recordDoubleClick),this.parent.off(Ji,this.batchCancel),this.parent.grid.off(mo,this.keyPressed),this.parent.grid.off("batchedit-form",this.lastCellTab),this.parent.grid.off("content-ready",this.contentready),this.parent.off(Ni,this.cellEdit),this.parent.off("actionBegin",this.editActionEvents),this.parent.off("actionComplete",this.editActionEvents),this.parent.grid.off("recordAdded",this.customCellSave),this.parent.grid.off(yo,this.recordDoubleClick),this.parent.off("savePreviousRowPosition",this.savePreviousRowPosition),this.parent.grid.off(bo,this.beforeStartEdit),this.parent.grid.off(wo,this.beforeBatchCancel),this.parent.grid.off("dblclick",this.gridDblClick),this.parent.grid.off("reset-edit-props",this.resetIsOnBatch),this.parent.grid.off("get-row-position",this.getRowPosition))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.applyFormValidation=function(e){this.parent.grid.editModule.applyFormValidation(e)},a.prototype.editActionEvents=function(e){var t=ae("editAction",e),i=ae("name",t),r=this.parent,n=!u(r.dataSource)&&r.dataSource.adaptor;if(!u(n)&&(J(r)||n instanceof Gt)&&t.requestType==="save"&&t.action==="add"&&(r.editSettings.newRowPosition==="Child"||r.editSettings.newRowPosition==="Below"||r.editSettings.newRowPosition==="Above")){if(i==="actionBegin"){var o=u(t.row)||!Object.keys(t.row).length?this.selectedIndex:t.row.rowIndex-1,s=!u(o)&&o!==-1?r.getCurrentViewRecords()[parseInt(o.toString(),10)][r.getPrimaryKeyFieldNames()[0]]:-1;r.grid.query.addParams("relationalKey",s)}else if(i==="actionComplete")for(var l=r.grid.query.params.length,d=0;d<l;d++)r.grid.query.params[parseInt(d.toString(),10)].key==="relationalKey"&&r.grid.query.params.splice(d)}this.parent.enableInfiniteScrolling&&i==="actionComplete"&&this.infiniteAddAction(t),this.parent.editSettings.mode==="Batch"&&t.requestType==="paging"&&this.parent.notify("batchPageAction",{})},a.prototype.infiniteAddAction=function(e){if(e.requestType==="save"&&e.action==="add"||e.requestType==="delete"){if(this.parent.editSettings.newRowPosition!=="Top"&&this.selectedIndex!==-1&&e.requestType==="save"&&e.action==="add"){var t=this.parent.grid.getRowsObject(),i=t.splice(0,1)[0],r=this.addRowIndex,n=this.parent.getCurrentViewRecords();(this.parent.editSettings.newRowPosition==="Below"||this.parent.editSettings.newRowPosition==="Child")&&(r+=Te(n[r+1]).length),r=this.parent.editSettings.newRowPosition==="Below"?r+1:r,t.splice(r,0,i);var o=n.splice(0,1)[0];n.splice(r,0,o),this.updateInfiniteCurrentViewData(o,this.addRowIndex)}var s=this.parent.grid.getRows(),l=this.parent.grid.getRowsObject(),d=this.parent.infiniteScrollSettings.enableCache;d||(On(this.parent.grid,this.parent.grid.getRowsObject(),this.parent.grid.getRows(),0),this.updateIndex(this.parent.grid.dataSource,this.parent.getRows(),this.parent.getCurrentViewRecords())),!d&&this.parent.getFrozenColumns()>0&&(On(this.parent.grid,l,s,0),this.updateIndex(this.parent.grid.dataSource,s,this.parent.getCurrentViewRecords()))}},a.prototype.updateInfiniteCurrentViewData=function(e,t){var i=this,r="infiniteCurrentViewData",n="updateCurrentViewData",o=Math.ceil(t/this.parent.grid.pageSettings.pageSize),s=o>0?o:1,l=t-(s-1)*this.parent.pageSettings.pageSize,d=this.parent.grid.infiniteScrollModule[""+r];d[1].splice(0,1);var h=d[parseInt(s.toString(),10)];u(this.addRowRecord)||(h.filter(function(p,c){p.uniqueID===i.addRowRecord.uniqueID&&(l=c)}),(this.addRowRecord.hasChildRecords&&this.addRowRecord.childRecords.length&&this.parent.editSettings.newRowPosition==="Below"||this.parent.editSettings.newRowPosition==="Child")&&(l+=Te(this.addRowRecord).length)),l>=this.parent.pageSettings.pageSize&&(s+=1,h=d[parseInt(s.toString(),10)],l=l-this.parent.pageSettings.pageSize>=0?l-this.parent.pageSettings.pageSize:0),l=this.parent.editSettings.newRowPosition==="Below"?l+1:l,h.splice(l,0,e),this.parent.grid.infiniteScrollModule[""+n]()},a.prototype.recordDoubleClick=function(e){var t=e.target;if(!u(t.closest("td.e-rowcell"))&&!(!this.parent.grid.editSettings.allowEditing||this.parent.grid.isEdit)){var i=this.parent.grid.getColumnByIndex(+t.closest("td.e-rowcell").getAttribute("data-colindex"));if(this.parent.editSettings.mode==="Cell"&&!this.isOnBatch&&i&&!i.isPrimaryKey&&this.parent.editSettings.allowEditing&&i.allowEditing&&!(t.classList.contains("e-treegridexpand")||t.classList.contains("e-treegridcollapse"))&&this.parent.editSettings.allowEditOnDblClick){if(this.isOnBatch=!0,this.parent.grid.setProperties({selectedRowIndex:e.rowIndex},!0),this.parent.enableVirtualization){var r=Xt(e.target,"e-row");this.prevAriaRowIndex=r.getAttribute("data-rowindex"),r.setAttribute("data-rowindex",r.rowIndex+"")}this.updateGridEditMode("Batch")}else this.parent.editSettings.mode==="Cell"&&(!i.allowEditing||i.isPrimaryKey)&&(this.isOnBatch=!0,this.updateGridEditMode("Batch"))}},a.prototype.updateGridEditMode=function(e){this.parent.grid.setProperties({editSettings:{mode:e}},!0);var t=ae("updateEditObj",this.parent.grid.editModule);t.apply(this.parent.grid.editModule),this.parent.grid.isEdit=!1},a.prototype.resetIsOnBatch=function(){this.parent.enableVirtualization&&this.parent.editSettings.mode==="Cell"&&(this.isOnBatch=!1,this.updateGridEditMode("Normal"))},a.prototype.keyPressed=function(e){this.isOnBatch&&(this.keyPress=e.action),e.action==="f2"&&this.recordDoubleClick(e),e.action==="escape"&&this.parent.closeEdit()},a.prototype.deleteUniqueID=function(e){var t="uniqueIDFilterCollection";delete this.parent[""+t][""+e];var i="uniqueIDCollection";delete this.parent[""+i][""+e]},a.prototype.cellEdit=function(e){var t=this,i="promise",r=e[""+i];if(delete e[""+i],this.parent.enableVirtualization&&!u(this.prevAriaRowIndex)&&this.prevAriaRowIndex!=="-1"&&(e.row.setAttribute("data-rowindex",this.prevAriaRowIndex),this.prevAriaRowIndex=void 0),this.keyPress!=="enter"&&this.parent.trigger(Ni,e,function(n){!n.cancel&&t.parent.editSettings.mode==="Cell"?t.enableToolbarItems("edit"):n.cancel&&t.parent.editSettings.mode==="Cell"&&(t.isOnBatch=!1,t.updateGridEditMode("Normal")),u(r)||r.resolve(n)}),this.doubleClickTarget&&(this.doubleClickTarget.classList.contains("e-treegridexpand")||this.doubleClickTarget.classList.contains("e-treegridcollapse")||this.doubleClickTarget.classList.contains("e-summarycell"))){e.cancel=!0,this.doubleClickTarget=null;return}this.parent.editSettings.mode==="Cell"&&(this.keyPress==="tab"||this.keyPress==="shiftTab"?this.keyPress=null:this.keyPress==="enter"&&(e.cancel=!0,this.keyPress=null,pe("isEditCollapse",!1,this.parent)),e.columnObject.allowEditing||(e.cancel=!0)),this.parent.enableVirtualization&&(this.parent.grid.contentModule.editedRowIndex=this.parent.grid.editModule.editModule.index)},a.prototype.enableToolbarItems=function(e){if(!u(this.parent.grid.toolbarModule)){var t=this.parent.element.id+"_gridcontrol_";this.parent.grid.toolbarModule.enableItems([t+"add",t+"edit",t+"delete"],e==="save"),this.parent.grid.toolbarModule.enableItems([t+"update",t+"cancel"],e==="edit")}},a.prototype.batchCancel=function(){if(this.parent.editSettings.mode==="Cell"){var e=le("editModule.cellDetails",this.parent.grid.editModule),t=this.parent.getCellFromIndex(e.rowIndex,this.parent.treeColumnIndex);this.parent.renderModule.cellRender({data:e.rowData,cell:t,column:this.parent.grid.getColumns()[this.parent.treeColumnIndex]}),this.updateGridEditMode("Normal"),this.isOnBatch=!1}this.parent.editSettings.mode==="Batch"&&this.parent.notify("batchCancelAction",{})},a.prototype.customCellSave=function(e){ce(this.parent)&&this.parent.editSettings.mode==="Cell"&&e.action==="edit"&&(this.updateCell(e,e.rowIndex),this.afterCellSave(e,e.row))},a.prototype.cellSave=function(e){var t=this;if(this.parent.editSettings.mode==="Cell"&&this.parent.element.querySelector("form")){e.cancel=!0;var i="editModule";pe("isEditCollapse",!0,this.parent),e.rowData[e.columnName]=e.value;var r;u(e.cell)?r=this.parent.grid.editModule[""+i].form.parentElement.parentNode:r=e.cell.parentNode;var n,o=this.parent.getPrimaryKeyFieldNames();if(u(r))this.parent.grid.getCurrentViewRecords().filter(function(m,g){if(m[o[0]]===e.rowData[o[0]]){n=g;return}});else{var s=this.parent.getFrozenLeftColumnsCount()>0||this.parent.getFrozenRightColumnsCount()>0;s?this.parent.getRows().indexOf(r)!==-1?n=this.parent.getRows().indexOf(r):n=this.parent.getRows().indexOf(r):n=this.parent.getRows().indexOf(r)===-1&&this.parent.getFrozenColumns()>0?this.parent.grid.getRows().indexOf(r):this.parent.getRows().indexOf(r)}var l={};if(ue(l,e),l.cancel=!1,l.type="save",r=this.parent.grid.getRows()[r.rowIndex],this.parent.trigger(Br,l),l.cancel)this.parent.grid.isEdit=!0;else if(r.rowIndex===this.parent.getCurrentViewRecords().length-1&&this.keyPress==="tab"&&(this.isTabLastRow=!0),!J(this.parent)&&!(this.parent.dataSource instanceof he&&this.parent.dataSource.adaptor instanceof Gt))if(ce(this.parent)){var d="eventPromise",h={requestType:"save",data:e.rowData,action:"edit",row:r,rowIndex:n,rowData:e.rowData,columnName:e.columnName,filterChoiceCount:null,excelSearchOperator:null};this.parent.grid.getDataModule()[""+d](h,this.parent.grid.query)}else this.updateCell(e,n),pe("isEdit",!1,this.parent.grid),this.afterCellSave(e,r);else if(J(this.parent)||this.parent.dataSource instanceof he&&this.parent.dataSource.adaptor instanceof Gt){var p=this.parent.grid.query;if(this.parent.isGantt&&!this.parent.loadChildOnDemand)this.updateCell(e,n),pe("isEdit",!1,this.parent.grid),this.afterCellSave(e,r);else{var c=null;c=this.parent.grid.dataSource.update(o[0],e.rowData,p.fromTable,p,e.previousValue),c.then(function(m){u(m)||(e.rowData[e.columnName]=m[e.columnName]),t.updateCell(e,n),pe("isEdit",!1,t.parent.grid),t.afterCellSave(e,r)})}}}this.parent.enableVirtualization&&(this.parent.grid.contentModule.virtualData={})},a.prototype.afterCellSave=function(e,t){this.parent.grid.aggregateModule&&this.parent.grid.aggregateModule.refresh(e.rowData),this.parent.grid.editModule.destroyWidgets([this.parent.grid.getColumnByField(e.columnName)]),this.parent.grid.editModule.formObj.destroy(),this.keyPress!=="tab"&&this.keyPress!=="shiftTab"&&(this.updateGridEditMode("Normal"),this.isOnBatch=!1),this.enableToolbarItems("save"),Se([t],["e-editedrow","e-batchrow"]),Se(t.querySelectorAll(".e-rowcell"),["e-editedbatchcell","e-updatedtd"]),this.parent.isCellSaveFocus!==!1&&this.parent.grid.focusModule.restoreFocus(),Ct({value:e.rowData,action:"edit"},this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,e.columnName),t.rowIndex===this.parent.getCurrentViewRecords().length-1&&this.keyPress==="enter"&&(this.keyPress=null);var i={type:"save",column:this.parent.getColumnByField(e.columnName),data:e.rowData,previousData:e.previousValue,row:t,target:e.cell};this.parent.aggregates.map(function(r){return r.showChildSummary===!0}).length&&this.parent.grid.refresh(),this.parent.trigger(wi,i)},a.prototype.lastCellTab=function(){!this.parent.grid.isEdit&&this.isOnBatch&&this.keyPress==="tab"&&this.parent.editSettings.mode==="Cell"&&(this.parent.editSettings.allowNextRowEdit?this.enableToolbarItems("edit"):(this.updateGridEditMode("Normal"),this.isOnBatch=!1,this.keyPress=null))},a.prototype.updateCell=function(e,t){this.parent.grid.editModule.updateCell(t,e.columnName,e.rowData[e.columnName]),this.parent.grid.getRowsObject()[parseInt(t.toString(),10)].data=e.rowData},a.prototype.crudAction=function(e,t){Ct(e,this.parent,this.isSelfReference,this.addRowIndex,this.selectedIndex,t,this.addRowRecord),this.parent.parentData=[];for(var i=this.parent.grid.dataSource instanceof he?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource,r=0;r<i.length;r++){i[parseInt(r.toString(),10)].index=r;var n=this.parent.grid.getPrimaryKeyFieldNames()[0];e.value[""+n]===i[parseInt(r.toString(),10)][""+n]&&e.action==="add"&&(i[parseInt(r.toString(),10)].level=this.internalProperties.level,i[parseInt(r.toString(),10)].taskData=this.internalProperties.taskData,i[parseInt(r.toString(),10)].uniqueID=this.internalProperties.uniqueID,u(this.internalProperties.parentItem)||(i[parseInt(r.toString(),10)].parentItem=this.internalProperties.parentItem,i[parseInt(r.toString(),10)].parentUniqueID=this.internalProperties.parentUniqueID),i[parseInt(r.toString(),10)].childRecords=this.internalProperties.childRecords),pe("uniqueIDCollection."+i[parseInt(r.toString(),10)].uniqueID+".index",r,this.parent);var o=this.parent.dataSource.adaptor;(J(this.parent)||o instanceof Gt)&&pe("uniqueIDCollection."+i[parseInt(r.toString(),10)].uniqueID,i[parseInt(r.toString(),10)],this.parent),i[parseInt(r.toString(),10)].level||this.parent.parentData.push(i[parseInt(r.toString(),10)])}this.parent.enableInfiniteScrolling||e.action==="add"&&this.previousNewRowPosition!=null&&(this.parent.setProperties({editSettings:{newRowPosition:this.previousNewRowPosition}},!0),this.previousNewRowPosition=null)},a.prototype.updateIndex=function(e,t,i){for(var r=0;r<this.parent.getDataRows().length;r++){var n=i[parseInt(r.toString(),10)];if(!u(n)){var o=le("uniqueIDCollection."+n.uniqueID+".index",this.parent);if(n.index=o,!u(n.parentItem)){var s=le("uniqueIDCollection."+n.parentItem.uniqueID+".index",this.parent);n.parentItem.index=s}}}var l=-1,d=this.parent.treeColumnIndex;if(this.parent.getFrozenColumns()>0){for(var h=t[0].querySelectorAll(".e-rowcell"),p=0;p<h.length;p++)if(h[parseInt(p.toString(),10)].classList.contains("e-gridrowindex0level0")){d=p;break}}for(var c=0;c<this.parent.getRows().length;c++){t[parseInt(c.toString(),10)].classList.contains("e-detailrow")||l++;var m=i[parseInt(l.toString(),10)];if(!u(m)){var o=m.index,g=m.level,y=t[parseInt(c.toString(),10)];u(m.parentItem)||(o=le("uniqueIDCollection."+m.parentItem.uniqueID+".index",this.parent));var w=y.cells[parseInt(d.toString(),10)];if(!u(w)){for(var p=0;p<w.classList.length;p++){var v=w.classList[parseInt(p.toString(),10)],T=/e-gridrowindex/i,C=/e-griddetailrowindex/i,P=v.match(T),R=v.match(C);P!=null&&Se([w],v),R!=null&&Se([w],v)}t[parseInt(c.toString(),10)].classList.contains("e-detailrow")?se([w],"e-griddetailrowindex"+o+"level"+g):se([w],"e-gridrowindex"+o+"level"+g)}}}},a.prototype.beginAdd=function(){var e,t=this.addRowIndex,i=this.parent.grid.getCurrentViewRecords();this.parent.editSettings.mode==="Batch"&&(t=this.batchEditModule.getAddRowIndex(),this.selectedIndex=this.batchEditModule.getSelectedIndex(),(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)&&(i=this.batchEditModule.getBatchRecords()));var r=this.parent.grid.getDataRows(),n=r.length?+r[0].getAttribute("data-rowindex"):0,o=r.length?+r[r.length-1].getAttribute("data-rowindex"):0,s=this.selectedIndex>=n&&this.selectedIndex<=o,l=this.parent.enableVirtualization&&this.addRowIndex>-1&&this.prevAriaRowIndex!=="-1";if(this.parent.editSettings.mode!=="Dialog"){if(this.parent.editSettings.newRowPosition==="Above")e="before";else if((this.parent.editSettings.newRowPosition==="Below"||this.parent.editSettings.newRowPosition==="Child")&&(this.selectedIndex>-1||l)&&s&&(e="after",!u(i[parseInt(t.toString(),10)])&&i[parseInt(t.toString(),10)].expanded))if(this.parent.editSettings.mode==="Batch"&&(this.parent.getBatchChanges()[this.addedRecords].length>1||this.parent.getBatchChanges()[this.deletedRecords].length)){if(t+=Te(i[parseInt(t.toString(),10)]).length,this.parent.editSettings.newRowPosition!=="Child"){var d=this.batchEditModule.getBatchChildCount();t=t+d}}else this.parent.enableVirtualization||(t+=Te(i[parseInt(t.toString(),10)]).length);if((this.selectedIndex>-1||l)&&s&&(t||this.parent.editSettings.newRowPosition==="Child"||this.parent.editSettings.newRowPosition==="Below")){t>=r.length-1&&(t=r.length-2);var h="rows",p=this.parent.grid.contentModule[""+h][0],c=document.activeElement;r[t+1][""+e](r[0]),pe("batchIndex",t+1,this.batchEditModule);var m=this.parent.editSettings.newRowPosition==="Above"?t:t+1;if(this.parent.editSettings.mode==="Batch"&&(this.parent.grid.contentModule[""+h].splice(0,1),this.parent.grid.contentModule[""+h].splice(m,0,p)),this.parent.editSettings.mode==="Row"||this.parent.editSettings.mode==="Cell"){for(var g=this.parent.grid.getContentTable().querySelectorAll(".e-griderror"),y=0;y<g.length;y++)g[parseInt(y.toString(),10)].remove();pe("errorRules",[],this.parent.grid.editModule.formObj)}l&&(this.prevAriaRowIndex="-1"),(!this.parent.enableVirtualization||this.parent.enableVirtualization&&!Object.keys(this.parent.grid.contentModule.emptyRowData).length)&&c.focus(),this.parent.enableVirtualization&&!Object.keys(this.parent.grid.contentModule.emptyRowData).length&&this.parent.grid.contentModule.createEmptyRowdata()}}if(this.parent.editSettings.mode==="Batch"&&!u(this.addRowIndex)&&this.addRowIndex!==-1&&this.isAddedRowByMethod&&!this.isAddedRowByContextMenu){t=this.batchEditModule.getAddRowIndex(),this.selectedIndex=this.batchEditModule.getSelectedIndex();var w=this.parent.getBatchChanges().addedRecords,v=void 0;if(w.length)for(var y=0;y<w.length;y++)u(w[parseInt(y.toString(),10)].uniqueID)&&(v=w[parseInt(y.toString(),10)]);var T={action:"add",data:v,index:t,seletedRow:0};this.beginAddEdit(T),this.batchEditModule.batchAddRowRecord.push(this.batchEditModule.addRowRecord),this.batchEditModule.batchAddedRecords.push(T.data)}},a.prototype.beginEdit=function(e){if(e.requestType==="refresh"&&this.isOnBatch){e.cancel=!0;return}if(this.parent.editSettings.mode==="Cell"&&e.requestType==="beginEdit"){e.cancel=!0;return}if(this.doubleClickTarget&&(this.doubleClickTarget.classList.contains("e-treegridexpand")||this.doubleClickTarget.classList.contains("e-treegridcollapse")||this.doubleClickTarget.classList.contains("e-frame"))){e.cancel=!0,this.doubleClickTarget=null;return}if(e.requestType==="delete"){var t=e.data;if(u(e.data[0].uniqueID))for(var i=this.parent.getPrimaryKeyFieldNames(),r=function(p){n.parent.flatData.filter(function(c){c[""+i[0]]===e.data[parseInt(p.toString(),10)][i[0]]&&(t[parseInt(p.toString(),10)]=c)})},n=this,o=0;o<t.length;o++)r(o);for(var o=0;o<t.length;o++){this.deleteUniqueID(t[parseInt(o.toString(),10)].uniqueID);for(var s=Te(t[parseInt(o.toString(),10)]),l=0;l<s.length;l++)this.deleteUniqueID(s[parseInt(l.toString(),10)].uniqueID);e.data=e.data.concat(s)}}if(e.requestType==="add"||this.isAddedRowByMethod&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){if((!(this.parent.grid.selectedRowIndex===-1&&this.isAddedRowByMethod)&&e.index===this.parent.grid.selectedRowIndex||e.index===0)&&(this.selectedIndex=this.parent.grid.selectedRowIndex),this.parent.enableVirtualization){var d='.e-row[data-rowindex="'+this.selectedIndex+'"]',h=void 0;this.selectedIndex>-1&&this.parent.editSettings.newRowPosition!=="Top"&&this.parent.editSettings.newRowPosition!=="Bottom"?(this.prevAriaRowIndex=this.selectedIndex.toString(),h=this.parent.getContent().querySelector(d),this.addRowIndex=h?h.rowIndex:0):this.prevAriaRowIndex&&this.prevAriaRowIndex!=="-1"?(d='.e-row[data-rowindex="'+this.prevAriaRowIndex+'"]',h=this.parent.getContent().querySelector(d),this.addRowIndex=h?h.rowIndex:0):this.addRowIndex=0}else this.isAddedRowByMethod&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?e.index!==0?this.addRowIndex=e.index:this.addRowIndex=this.parent.grid.selectedRowIndex:this.addRowIndex=this.parent.grid.selectedRowIndex>-1?this.parent.grid.selectedRowIndex:0;(this.isAddedRowByMethod||this.isAddedRowByContextMenu&&this.parent.grid.selectedRowIndex!==-1)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.addRowRecord=this.parent.flatData[this.parent.grid.selectedRowIndex],this.parent.enableVirtualization&&this.isAddedRowByContextMenu&&(this.addRowRecord=this.parent.getCurrentViewRecords()[this.addRowIndex])):this.addRowRecord=this.parent.getSelectedRecords()[0]}this.isAddedRowByMethod&&e.index!==0&&(this.addRowRecord=this.parent.flatData[e.index],this.addRowIndex=e.index),this.parent.editSettings.newRowPosition==="Child"&&!u(this.parent.getSelectedRecords()[0])&&(this.addRowRecord=this.parent.getSelectedRecords()[0]),u(this.addRowRecord)&&this.parent.getCurrentViewRecords().length>this.addRowIndex&&e.requestType==="save"&&this.parent.getSelectedRecords().length!==0&&(this.addRowRecord=this.parent.getCurrentViewRecords()[this.addRowIndex]),this.isAddedRowByMethod=!1,e=this.beginAddEdit(e)},a.prototype.savePreviousRowPosition=function(){this.previousNewRowPosition===null&&(this.previousNewRowPosition=this.parent.editSettings.newRowPosition)},a.prototype.beginAddEdit=function(e){var t=e.data;if(e.action==="add"){var i=this.parent.grid.getPrimaryKeyFieldNames()[0],r=null;t.taskData=u(t.taskData)?ue({},e.data):t.taskData;var n=void 0;this.parent.enableVirtualization&&e.index!==0?n=this.parent.flatData:this.parent.editSettings.mode==="Batch"&&this.isAddedRowByMethod&&!u(this.addRowIndex)?n=this.batchEditModule.batchRecords:n=this.parent.grid.getCurrentViewRecords(),this.parent.enableVirtualization&&e.index!==0&&(this.addRowIndex=this.parent.flatData.indexOf(this.addRowRecord),this.selectedIndex=this.addRowIndex);var o=this.addRowIndex;t.uniqueID=Ut(this.parent.element.id+"_data_"),pe("uniqueIDCollection."+t.uniqueID,t,this.parent);var s=0,l=void 0,d=void 0,h=void 0,p=void 0,c=this.parent.enableVirtualization&&this.addRowIndex>-1&&this.prevAriaRowIndex!=="-1",m=this.parent.getRows(),g=m.length?n.indexOf(n[0]):0,y=m.length?+m[m.length-1].getAttribute("data-rowindex"):0,w=this.parent.enableVirtualization&&e.index!==0?!0:this.selectedIndex>=g&&this.selectedIndex<=y;if(n.length&&(l=n[this.addRowIndex][this.parent.idMapping],p=n[this.addRowIndex][this.parent.parentIdMapping],n[this.addRowIndex].parentItem&&(d=n[this.addRowIndex].parentItem.uniqueID),h=n[this.addRowIndex].parentItem),this.parent.editSettings.newRowPosition!=="Top"&&n.length){if(s=n[this.addRowIndex].level,this.parent.editSettings.newRowPosition==="Above")r="before",o=n[this.addRowIndex].index;else if(this.parent.editSettings.newRowPosition==="Below"){r="after";var v=Te(n[this.addRowIndex]).length,T=n[this.addRowIndex].index;o=v>0?T+v:T}else if(this.parent.editSettings.newRowPosition==="Child"){r="after",(this.selectedIndex>-1||c)&&w&&(t.parentItem=ue({},n[this.addRowIndex]),t.parentUniqueID=t.parentItem.uniqueID,delete t.parentItem.childRecords,delete t.parentItem[this.parent.childMapping]);var C=Te(n[this.addRowIndex]).length,P=n[this.addRowIndex].index;this.selectedIndex>=0&&(t.level=s+1),o=C>0?P+C:P,this.isSelfReference&&(!this.parent.isLocalData&&this.parent.editModule.selectedIndex===-1?t.taskData[this.parent.parentIdMapping]=t[this.parent.parentIdMapping]=null:t.taskData[this.parent.parentIdMapping]=t[this.parent.parentIdMapping]=l,u(t.parentItem)||$e(i,t.parentItem,"add",this.parent,this.isSelfReference,t))}if((this.parent.editSettings.newRowPosition==="Above"||this.parent.editSettings.newRowPosition==="Below")&&((this.selectedIndex>-1||c)&&s&&w&&(t.parentUniqueID=d,t.parentItem=ue({},h),delete t.parentItem.childRecords,delete t.parentItem[this.parent.childMapping]),t.level=s,this.isSelfReference&&(t.taskData[this.parent.parentIdMapping]=t[this.parent.parentIdMapping]=p,u(t.parentItem)||$e(i,t.parentItem,"add",this.parent,this.isSelfReference,t))),r!=null&&(this.selectedIndex>-1||c)&&w&&(e.index=r==="before"?o:o+1),this.parent.editSettings.newRowPosition==="Bottom"){s=0;var R=this.parent.grid.dataSource instanceof he?this.parent.grid.dataSource.dataSource.json:this.parent.grid.dataSource;e.index=R.length}}u(t.level)&&(t.level=s),t.hasChildRecords=!1,t.childRecords=[],t.index=0}if(e.action==="add"&&(this.internalProperties={level:t.level,parentItem:t.parentItem,uniqueID:t.uniqueID,taskData:t.taskData,parentUniqueID:u(t.parentItem)?void 0:t.parentItem.uniqueID,childRecords:t.childRecords}),e.requestType==="delete"){for(var N=e.data,D=0;D<N.length;D++)if(N[parseInt(D.toString(),10)].parentItem){var h=it(this.parent,N[parseInt(D.toString(),10)].parentItem.uniqueID);if(!u(h)&&h.hasChildRecords){var S=h.childRecords.indexOf(N[parseInt(D.toString(),10)]);h.childRecords.splice(S,1)}}}return e},a.prototype.addRecord=function(e,t,i){if((this.parent.editSettings.newRowPosition===this.previousNewRowPosition||this.previousNewRowPosition===null)&&(this.previousNewRowPosition=this.parent.editSettings.newRowPosition),!this.isSelfReference&&!u(e)&&Object.hasOwnProperty.call(e,this.parent.childMapping)){var r=[],n=this.parent.editSettings.mode,o=this.parent.grid.editSettings.mode;r.push(e),this.parent.setProperties({editSettings:{mode:"Batch"}},!0),this.parent.grid.setProperties({editSettings:{mode:"Batch"}},!0),u(i)||this.parent.setProperties({editSettings:{newRowPosition:i}},!0);var s={addedRecords:r,changedRecords:[],deletedRecords:[]};this.parent.notify(Si,{updatedRecords:s,index:t}),this.parent.setProperties({editSettings:{mode:n}},!0),this.parent.grid.setProperties({editSettings:{mode:o}},!0),this.parent.refresh()}else e?(t>-1?(this.selectedIndex=t,this.addRowIndex=t):(this.selectedIndex=this.parent.selectedRowIndex,this.addRowIndex=this.parent.selectedRowIndex),i&&this.parent.setProperties({editSettings:{newRowPosition:i}},!0),this.parent.grid.editModule.addRecord(e,t)):this.parent.grid.editModule.addRecord(e,t)},a.prototype.editFormValidate=function(){return this.parent.grid.editModule.editFormValidate()},a.prototype.destroyForm=function(){this.parent.grid.editModule.destroyForm()},a.prototype.contentready=function(e){!u(e.args.requestType)&&(e.args.requestType.toString()==="delete"||e.args.requestType.toString()==="save"||this.parent.editSettings.mode==="Batch"&&e.args.requestType.toString()==="batchsave")&&(this.updateIndex(this.parent.grid.dataSource,this.parent.getRows(),this.parent.getCurrentViewRecords()),(this.parent.frozenRows||this.parent.getFrozenColumns()||this.parent.frozenColumns)&&this.parent.grid.dataSource.length===this.parent.getDataRows().length&&this.updateIndex(this.parent.grid.dataSource,this.parent.getDataRows(),this.parent.getCurrentViewRecords()))},a.prototype.editCell=function(e,t){(this.parent.editSettings.mode==="Cell"||this.parent.editSettings.mode==="Batch")&&(this.parent.editSettings.mode!=="Batch"&&(this.isOnBatch=!0,this.updateGridEditMode("Batch")),this.parent.grid.editModule.editCell(e,t))},a}(),Jr=Ot({inject:{custom:{default:null}},render:function(a){if(!Ce){var e=Ce?a:xi,t=null;return u(this.$slots.default)||(t=Ce?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},t)}},updated:function(){!Ce&&this.custom&&this.custom()},methods:{getTag:function(){return"e-columns"}}}),xt=Ot({render:function(){},methods:{getTag:function(){return"e-column"}}}),fa=["isLazyUpdate","plugins","aggregates","allowExcelExport","allowFiltering","allowMultiSorting","allowPaging","allowPdfExport","allowReordering","allowResizing","allowRowDragAndDrop","allowSelection","allowSorting","allowTextWrap","autoCheckHierarchy","childMapping","clipMode","columnMenuItems","columnQueryMode","columns","contextMenuItems","copyHierarchyMode","currencyCode","dataSource","detailTemplate","editSettings","enableAdaptiveUI","enableAltRow","enableAutoFill","enableCollapseAll","enableColumnVirtualization","enableHover","enableHtmlSanitizer","enableImmutableMode","enableInfiniteScrolling","enablePersistence","enableRtl","enableVirtualMaskRow","enableVirtualization","expandStateMapping","filterSettings","frozenColumns","frozenRows","gridLines","hasChildMapping","height","idMapping","infiniteScrollSettings","loadChildOnDemand","loadingIndicator","locale","pageSettings","parentIdMapping","printMode","query","rowDropSettings","rowHeight","rowTemplate","searchSettings","selectedRowIndex","selectionSettings","showColumnChooser","showColumnMenu","sortSettings","textWrapSettings","toolbar","treeColumnIndex","width","actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkboxChange","collapsed","collapsing","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","detailDataBound","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","expanded","expanding","headerCellInfo","load","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick"],va=["dataSource"],ma=Gr({props:fa}),pp=ma[0],ya=ma[1],en=Object.keys(ya);en.push("modelchanged","update:modelValue");for(var Rr=0,xo=va;Rr<xo.length;Rr++){var cp=xo[Rr];en.push("update:"+cp)}var tn=Ot({name:"TreeGridComponent",mixins:[Ur],props:pp,watch:ya,emits:en,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new sp({}),propKeys:fa,models:va,hasChildDirective:!0,hasInjectedModules:!0,tagMapper:{"e-columns":{"e-column":{"e-stacked-columns":"e-stacked-column"}},"e-aggregates":{"e-aggregate":{"e-columns":"e-column"}}},tagNameMapper:{"e-stacked-columns":"e-columns"},isVue3:!Ce,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(a){var e=Ce?a:xi,t=null;return u(this.$slots.default)||(t=Ce?this.$slots.default:this.$slots.default()),e("div",t)},methods:{clearTemplate:function(a){if(a||(a=Object.keys(this.templateCollection||{})),a.length&&this.templateCollection)for(var e=0,t=a;e<t.length;e++){var i=t[e],r=this.templateCollection[i];if(r&&r.length){for(var n=0,o=r;n<o.length;n++){var s=o[n];this.destroyPortals(s)}delete this.templateCollection[i]}}},setProperties:function(a,e){var t=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(a,e),a&&this.models&&this.models.length&&Object.keys(a).map(function(i){t.models.map(function(r){i===r&&!/datasource/i.test(i)&&(t.isVue3?t.ej2Instances.vueInstance.$emit("update:"+i,a[i]):(t.$emit("update:"+i,a[i]),t.$emit("modelchanged",a[i])))})})},trigger:function(a,e,t){if(Ce||(this.models=this.models?this.models:this.ej2Instances.referModels),(a==="change"||a==="input")&&this.models&&this.models.length!==0){var i=this.models.toString().match(/checked|value/)||[],r=i[0];e&&i&&!ji(e[r])&&(Ce?(a==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,e[r]),this.$emit("modelchanged",e[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,e[r]),this.ej2Instances.vueInstance.$emit("modelchanged",e[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",e[r])))}else if(a==="actionBegin"&&e.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var i=this.models.toString().match(/currentView|selectedDate/)||[],r=i[0];e&&i&&!ji(e[r])&&(Ce?(this.$emit("update:"+r,e[r]),this.$emit("modelchanged",e[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,e[r]),this.ej2Instances.vueInstance.$emit("modelchanged",e[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(a,e,t)},custom:function(){this.updated()},addRecord:function(a,e,t){return this.ej2Instances.addRecord(a,e,t)},autoFitColumns:function(a){return this.ej2Instances.autoFitColumns(a)},clearFiltering:function(){return this.ej2Instances.clearFiltering()},clearSelection:function(){return this.ej2Instances.clearSelection()},clearSorting:function(){return this.ej2Instances.clearSorting()},closeEdit:function(){return this.ej2Instances.closeEdit()},collapseAll:function(){return this.ej2Instances.collapseAll()},collapseAtLevel:function(a){return this.ej2Instances.collapseAtLevel(a)},collapseByKey:function(a){return this.ej2Instances.collapseByKey(a)},collapseRow:function(a,e,t){return this.ej2Instances.collapseRow(a,e,t)},copy:function(a){return this.ej2Instances.copy(a)},csvExport:function(a,e,t,i){return this.ej2Instances.csvExport(a,e,t,i)},deleteRecord:function(a,e){return this.ej2Instances.deleteRecord(a,e)},deleteRow:function(a){return this.ej2Instances.deleteRow(a)},editCell:function(a,e){return this.ej2Instances.editCell(a,e)},enableToolbarItems:function(a,e){return this.ej2Instances.enableToolbarItems(a,e)},endEdit:function(){return this.ej2Instances.endEdit()},excelExport:function(a,e,t,i){return this.ej2Instances.excelExport(a,e,t,i)},expandAll:function(){return this.ej2Instances.expandAll()},expandAtLevel:function(a){return this.ej2Instances.expandAtLevel(a)},expandByKey:function(a){return this.ej2Instances.expandByKey(a)},expandRow:function(a,e,t,i){return this.ej2Instances.expandRow(a,e,t,i)},extendRequiredModules:function(a){return this.ej2Instances.extendRequiredModules(a)},filterByColumn:function(a,e,t,i,r,n,o,s){return this.ej2Instances.filterByColumn(a,e,t,i,r,n,o,s)},getBatchChanges:function(){return this.ej2Instances.getBatchChanges()},getCellFromIndex:function(a,e){return this.ej2Instances.getCellFromIndex(a,e)},getCheckedRecords:function(){return this.ej2Instances.getCheckedRecords()},getCheckedRowIndexes:function(){return this.ej2Instances.getCheckedRowIndexes()},getColumnByField:function(a){return this.ej2Instances.getColumnByField(a)},getColumnByUid:function(a){return this.ej2Instances.getColumnByUid(a)},getColumnFieldNames:function(){return this.ej2Instances.getColumnFieldNames()},getColumnHeaderByField:function(a){return this.ej2Instances.getColumnHeaderByField(a)},getColumnHeaderByIndex:function(a){return this.ej2Instances.getColumnHeaderByIndex(a)},getColumnHeaderByUid:function(a){return this.ej2Instances.getColumnHeaderByUid(a)},getColumnIndexByField:function(a){return this.ej2Instances.getColumnIndexByField(a)},getColumnIndexByUid:function(a){return this.ej2Instances.getColumnIndexByUid(a)},getColumns:function(a){return this.ej2Instances.getColumns(a)},getContent:function(){return this.ej2Instances.getContent()},getContentTable:function(){return this.ej2Instances.getContentTable()},getCurrentViewRecords:function(){return this.ej2Instances.getCurrentViewRecords()},getDataModule:function(){return this.ej2Instances.getDataModule()},getDataRows:function(){return this.ej2Instances.getDataRows()},getFooterContent:function(){return this.ej2Instances.getFooterContent()},getFooterContentTable:function(){return this.ej2Instances.getFooterContentTable()},getFrozenLeftColumnHeaderByIndex:function(a){return this.ej2Instances.getFrozenLeftColumnHeaderByIndex(a)},getFrozenRightCellFromIndex:function(a,e){return this.ej2Instances.getFrozenRightCellFromIndex(a,e)},getFrozenRightColumnHeaderByIndex:function(a){return this.ej2Instances.getFrozenRightColumnHeaderByIndex(a)},getFrozenRightDataRows:function(){return this.ej2Instances.getFrozenRightDataRows()},getFrozenRightRowByIndex:function(a){return this.ej2Instances.getFrozenRightRowByIndex(a)},getFrozenRightRows:function(){return this.ej2Instances.getFrozenRightRows()},getHeaderContent:function(){return this.ej2Instances.getHeaderContent()},getHeaderTable:function(){return this.ej2Instances.getHeaderTable()},getMovableCellFromIndex:function(a,e){return this.ej2Instances.getMovableCellFromIndex(a,e)},getMovableColumnHeaderByIndex:function(a){return this.ej2Instances.getMovableColumnHeaderByIndex(a)},getMovableDataRows:function(){return this.ej2Instances.getMovableDataRows()},getMovableRowByIndex:function(a){return this.ej2Instances.getMovableRowByIndex(a)},getMovableRows:function(){return this.ej2Instances.getMovableRows()},getPager:function(){return this.ej2Instances.getPager()},getPrimaryKeyFieldNames:function(){return this.ej2Instances.getPrimaryKeyFieldNames()},getRowByIndex:function(a){return this.ej2Instances.getRowByIndex(a)},getRowInfo:function(a){return this.ej2Instances.getRowInfo(a)},getRows:function(){return this.ej2Instances.getRows()},getSelectedRecords:function(){return this.ej2Instances.getSelectedRecords()},getSelectedRowCellIndexes:function(){return this.ej2Instances.getSelectedRowCellIndexes()},getSelectedRowIndexes:function(){return this.ej2Instances.getSelectedRowIndexes()},getSelectedRows:function(){return this.ej2Instances.getSelectedRows()},getUidByColumnField:function(a){return this.ej2Instances.getUidByColumnField(a)},getVisibleColumns:function(){return this.ej2Instances.getVisibleColumns()},getVisibleRecords:function(){return this.ej2Instances.getVisibleRecords()},goToPage:function(a){return this.ej2Instances.goToPage(a)},hideColumns:function(a,e){return this.ej2Instances.hideColumns(a,e)},hideSpinner:function(){return this.ej2Instances.hideSpinner()},indent:function(a){return this.ej2Instances.indent(a)},openColumnChooser:function(a,e){return this.ej2Instances.openColumnChooser(a,e)},outdent:function(a){return this.ej2Instances.outdent(a)},paste:function(a,e,t){return this.ej2Instances.paste(a,e,t)},pdfExport:function(a,e,t,i){return this.ej2Instances.pdfExport(a,e,t,i)},print:function(){return this.ej2Instances.print()},refresh:function(){return this.ej2Instances.refresh()},refreshColumns:function(a){return this.ej2Instances.refreshColumns(a)},refreshHeader:function(){return this.ej2Instances.refreshHeader()},reorderColumns:function(a,e){return this.ej2Instances.reorderColumns(a,e)},reorderRows:function(a,e,t){return this.ej2Instances.reorderRows(a,e,t)},saveCell:function(){return this.ej2Instances.saveCell()},search:function(a){return this.ej2Instances.search(a)},selectCell:function(a,e){return this.ej2Instances.selectCell(a,e)},selectCheckboxes:function(a){return this.ej2Instances.selectCheckboxes(a)},selectRow:function(a,e){return this.ej2Instances.selectRow(a,e)},selectRows:function(a){return this.ej2Instances.selectRows(a)},serverCsvExport:function(a){return this.ej2Instances.serverCsvExport(a)},serverExcelExport:function(a){return this.ej2Instances.serverExcelExport(a)},serverPdfExport:function(a){return this.ej2Instances.serverPdfExport(a)},setCellValue:function(a,e,t){return this.ej2Instances.setCellValue(a,e,t)},setRowData:function(a,e){return this.ej2Instances.setRowData(a,e)},showColumns:function(a,e){return this.ej2Instances.showColumns(a,e)},showSpinner:function(){return this.ej2Instances.showSpinner()},sortByColumn:function(a,e,t){return this.ej2Instances.sortByColumn(a,e,t)},startEdit:function(a){return this.ej2Instances.startEdit(a)},updateCell:function(a,e,t){return this.ej2Instances.updateCell(a,e,t)},updateExternalMessage:function(a){return this.ej2Instances.updateExternalMessage(a)},updateRow:function(a,e){return this.ej2Instances.updateRow(a,e)}}});const up={style:{display:"inline-block"}},gp=["readonly","value","onChange"],fp={key:0},vp={key:1},mp={key:2},yp=me({__name:"TraceDataExplorer",props:{height:{default:"300px"},width:{default:"300px"},componentid:{default:"gAcpRealAxis_1"},traceType:{default:Do.UNDEFINED}},emits:["showScenarioInfo","hideScenarioInfo","selectionChanged"],setup(a,{emit:e}){Ci("treegrid",[lp,hp]);const t=a,i=e,r=V(()=>t.width),n=V(()=>t.height),o={allowEditing:!0,allowAdding:!0,allowDeleting:!0},s={mode:"Row",type:"Single",enableToggle:!1},l=Xr(t.componentid),d=q();function h(D){if(D.data&&D.data.elementType===at.Information){D.cancel=!0;return}if(c){c=!1;return}p=!1,i("selectionChanged",D.data)}let p=!1,c=!1,m="";function g(D,S,x){c=!0,m===D&&p?(p=!1,i("hideScenarioInfo")):(p=!0,i("showScenarioInfo",S,x)),m=D}function y(D,S){l().renameTraceDataElement(D,S)}function w(D){v(D)}function v(D){d.value=[],D.forEach(S=>{d.value&&d.value.push(S)})}let T;ft(()=>{T=l().subscribe(w),d.value=[],v(l().CompleteData)}),vt(()=>{l().unsubscribe(T)});function C(){l().saveRecentTrace(t.traceType)}function P(D){l().saveScenario(D)}function R(D){l().deleteTrace(D)}function N(D){l().deleteScenario(D)}return(D,S)=>(M(),O("div",{id:"TraceDataExplorer",style:It({width:r.value,height:n.value}),class:"trace-data-explorer"},[k(f(tn),{ref:"treegrid",height:"100%",width:"100%","data-source":d.value,"tree-column-index":0,"row-height":24,"id-mapping":"treeId","parent-id-mapping":"parentTreeId","edit-settings":o,"selection-settings":s,onRowSelecting:h},{templateName:re(({data:x})=>[b("div",up,[x.elementType!=f(at).Information?(M(),O("img",{key:0,class:ke(x.elementType===f(at).Trace?"trace-data-explorer-trace-icon":"trace-data-explorer-scenario-icon")},null,2)):B("",!0),b("input",{type:"text",readonly:x.elementType===f(at).Information,spellcheck:"false",style:It({width:"200px",border:"none",background:"transparent",fontWeight:x.elementType===f(at).Information?"bold":"normal"}),value:x.name,onChange:I=>y(x.treeId,I.target.value)},null,44,gp)])]),templateInteraction:re(({data:x})=>[x.elementType===f(at).Trace&&x.treeId.startsWith("rT_")?(M(),O("div",fp,[k(f(qe),{onClick:S[0]||(S[0]=I=>C()),"css-class":"e-control e-btn e-lib e-inherit e-appbar-menu e-small","icon-css":"e-btn-icon icon-save",title:"Save Resent Trace"}),k(f(qe),{onClick:I=>R(x.treeId),"css-class":"e-control e-btn e-lib e-inherit e-appbar-menu e-small","icon-css":"e-btn-icon icon-bin",title:"Delete Recent Trace"},null,8,["onClick"])])):x.elementType===f(at).Trace&&x.treeId.startsWith("sT_")?(M(),O("div",vp,[k(f(qe),{onClick:I=>P(x.treeId),"css-class":"e-control e-btn e-lib e-inherit e-appbar-menu e-small","icon-css":"e-btn-icon icon-save",title:"Save Trace Scenario"},null,8,["onClick"]),k(f(qe),{onClick:I=>R(x.treeId),"css-class":"e-control e-btn e-lib e-inherit e-appbar-menu e-small","icon-css":"e-btn-icon icon-bin",title:"Delete Trace (including Scenarios)"},null,8,["onClick"])])):x.elementType===f(at).Scenario?(M(),O("div",mp,[k(f(qe),{onClick:I=>g(x.treeId,x.name,x.scenario.data),"css-class":"e-control e-btn e-lib e-inherit e-appbar-menu e-small","icon-css":"e-btn-icon icon-info",title:"Show Scenario"},null,8,["onClick"]),k(f(qe),{onClick:I=>N(x.treeId),"css-class":"e-control e-btn e-lib e-inherit e-appbar-menu e-small","icon-css":"e-btn-icon icon-bin",title:"Delete Scenario"},null,8,["onClick"])])):B("",!0)]),default:re(()=>[k(f(Jr),null,{default:re(()=>[k(f(xt),{field:"name","is-primary-key":!0,type:"text",width:"220",template:"templateName"}),k(f(xt),{width:"64",template:"templateInteraction"})]),_:1})]),_:1},8,["data-source"])],4))}}),bp=["id"],wp=me({__name:"TraceChartView",props:{width:{default:"300px"},height:{default:"100px"},legendVisible:{type:Boolean,default:!1},zoomSettings:{default:()=>({enableSelectionZooming:!0,enablePan:!1,enablePinchZooming:!0,enableMouseWheelZooming:!0,enableScrollbar:!1,enableDeferredZooming:!1,showToolbar:!1,mode:"XY",toolbarItems:[]})},chartsData:{default:()=>[]}},setup(a){Ci("chart",[Xo,el,ar,Zs,Ho,Yo,al,jo,dl,No,il]);const e=a,t={visible:!0,position:"Right",width:"160px",textWrap:"Wrap"},i={visible:!1},r=q(i),n={left:0,right:40,top:20,bottom:0},o=q([...e.chartsData]),s=q(e.width),l=q(e.height),d=q(y()),h=q(w());let p=0;Ii(()=>{e.legendVisible==!0?r.value=t:r.value=i,d.value=y(),h.value=w()}),De(()=>[e.height,e.width],()=>{d.value=y(),h.value=w(),s.value=e.width,l.value=e.height,p++}),De(()=>e.legendVisible,()=>{e.legendVisible==!0?r.value=t:r.value=i,h.value=w()}),De(()=>e.chartsData,async()=>{const P=ct(e.chartsData);d.value=y(),h.value=w(),o.value=[],await mi(),o.value=P,g()});function c(P){return P!=null&&P.includes("dashed")?"8,2":P!=null&&P.includes("dotted")?"2,2":"0"}function m(P){return P!=null&&P.includes("Step")?"StepLine":"Line"}function g(){for(const P of o.value)P.primaryXAxis.zoomFactor=1,P.primaryXAxis.zoomPosition=0,P.primaryYAxis.zoomFactor=1,P.primaryYAxis.zoomPosition=0;p++}function y(){let P=e.chartsData.filter(N=>N.show).length;return P===0&&(P=1),Math.floor(parseInt(e.height.replace("px",""))/P-4)+"px"}function w(){return e.legendVisible==!1?parseInt(e.width.replace("px",""))+"px":e.width}const v=V(()=>{let P=0;e.legendVisible!=null&&e.legendVisible==!0&&t.width!=null&&(P=parseInt(t.width.replace("px","")));const R=parseInt("120px".replace("px",""));return{width:parseInt(e.width.replace("px",""))-R-P+"px"}});function T(P){return P.filter(R=>R.show)}function C(P,R){for(const D of o.value)P.axis.name==="primaryXAxis"&&(D.primaryXAxis.zoomFactor=P.currentZoomFactor,D.primaryXAxis.zoomPosition=P.currentZoomPosition),P.axis.name==="primaryYAxis"&&R.id===D.id&&(D.primaryYAxis.zoomFactor=P.currentZoomFactor,D.primaryYAxis.zoomPosition=P.currentZoomPosition);const N=ct(o.value);o.value=[],o.value=N}return(P,R)=>(M(),O("div",{id:"TraceChartView",style:It({height:l.value,width:s.value})},[(M(!0),O(pr,null,cr(o.value.filter(N=>N.show),N=>(M(),O("div",{id:N.id,key:N.id,class:"trace-view-chart-container",style:It({height:d.value,width:s.value})},[(M(),ee(f(bi),{width:h.value,height:d.value,id:N.id,key:f(p),title:N.title?N.title:"","primary-x-axis":N.primaryXAxis,"primary-y-axis":N.primaryYAxis,"legend-settings":r.value,"zoom-settings":e.zoomSettings,margin:n,"chart-area":v.value,onZoomComplete:D=>C(D,N)},{default:re(()=>[k(f(yi),null,{default:re(()=>[(M(!0),O(pr,null,cr(T(N.series),D=>(M(),ee(f(Ke),Vn({key:D.name,ref_for:!0},D,{fill:D.lineColor,"dash-array":c(D.lineType),type:m(D.lineType),animation:{enable:!1}}),null,16,["fill","dash-array","type"]))),128))]),_:2},1024),k(f(hl),null,{default:re(()=>[(M(!0),O(pr,null,cr(N.secondaryYAxes,D=>(M(),ee(f(pl),Vn({key:D.name,ref_for:!0},D),null,16))),128))]),_:2},1024)]),_:2},1032,["width","height","id","title","primary-x-axis","primary-y-axis","legend-settings","zoom-settings","chart-area","onZoomComplete"]))],12,bp))),128))],4))}}),Sp=me({__name:"ChartShowPicker",props:{show:{type:Boolean}},emits:["onChangeShowState"],setup(a,{emit:e}){const t=a,i=e,r=q(t.show);function n(){r.value=!r.value,i("onChangeShowState",r.value)}return(o,s)=>(M(),ee(f(qe),{onClick:s[0]||(s[0]=l=>n()),"css-class":"chart-show-picker-button","icon-css":r.value?"icon-eye":"icon-eye-blocked",title:"Show/hide serie"},null,8,["icon-css"]))}}),xp=me({__name:"ChartLineStylePicker",props:{value:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,r=q("e-btn-icon icon-step-line-solid"),n=[{text:"Line solid"},{text:"Line dashed"},{text:"Line dotted"},{text:"Step-line solid"},{text:"Step-line dashed"},{text:"Step-line dotted"}];Ii(()=>{if(t.value){const{icon:d}=l(t.value);r.value=d}});const o=d=>{const{type:h,icon:p}=l(d.item.text);d.element.innerHTML='<span><span class="'+p+'"></span> '+h+"</span>",d.element.style.height="28px",d.element.children[0].setAttribute("class","e-cm-icons e-pastetext e-align")},s=d=>{const{type:h,icon:p}=l(d.item.text);r.value="e-btn-icon "+p,i("change",h)};function l(d){let h="Line solid",p="icon-line-solid";if(!d)return{type:h,icon:p};switch(d){case"Line solid":h="Line solid",p="icon-line-solid";break;case"Line dashed":h="Line dashed",p="icon-line-dashed";break;case"Line dotted":h="Line dotted",p="icon-line-dotted";break;case"Step-line solid":h="Step-line solid",p="icon-step-line-solid";break;case"Step-line dashed":h="Step-line dashed",p="icon-step-line-dashed";break;case"Step-line dotted":h="Step-line dotted",p="icon-step-line-dotted";break}return{type:h,icon:p}}return(d,h)=>(M(),ee(f(Us),{items:n,onBeforeItemRender:o,onSelect:s,"css-class":"e-caret-hide chart-line-style-picker-dorp-down-button","icon-css":r.value+" chart-line-style-picker-icon"},null,8,["icon-css"]))}}),Cp=me({__name:"ChartColorPicker",props:{value:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,r=q(null),n=q(null);let o;const s=q(!1);let l=!1;const d=V(()=>t.value.includes("rgba")?p(t.value):t.value);Ii(()=>{n.value&&(o=n.value);const c=r.value;c.getElementsByClassName("e-dropdown-btn")[0].style.setProperty("display","none");const g=c.getElementsByClassName("e-split-btn")[0];g.style.setProperty("border","none"),g.style.setProperty("background","none"),g.addEventListener("click",()=>{l||(o.toggle(),l=!0)})});function h(c){l&&i("change",c)}function p(c){const m=c.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*([\d.]*)?\)$/);if(!m)throw new Error("Invalid RGBA color string");const g=parseInt(m[1],10),y=parseInt(m[2],10),w=parseInt(m[3],10),v=m[4]!==void 0?parseFloat(m[4]):1,T=g.toString(16).padStart(2,"0"),C=y.toString(16).padStart(2,"0"),P=w.toString(16).padStart(2,"0"),R=Math.round(v*255).toString(16).padStart(2,"0");return`#${T}${C}${P}${R}`}return(c,m)=>(M(),O("div",{ref_key:"rootDivRef",ref:r,class:"color-picker"},[k(f(gl),{id:"colorPicker",ref_key:"colorPickerRef",ref:n,mode:"Palette","show-buttons":s.value,value:d.value,onChange:m[0]||(m[0]=g=>h(g.currentValue.rgba)),onOnModeSwitch:m[1]||(m[1]=g=>s.value=!s.value),onBeforeClose:m[2]||(m[2]=g=>{ts(l)?l.value=!1:l=!1,s.value=!1})},null,8,["show-buttons","value"])],512))}}),Ip={key:0},Co=26,Rp=me({__name:"TraceChartController",props:{visible:{type:Boolean,default:!1},width:{default:"300px"},height:{default:"100px"},componentid:{default:"gAcpRealAxis_1"},focusTraceId:{default:""},mergeCharts:{type:Boolean,default:!1}},emits:["chartsDataChanged"],setup(a,{emit:e}){Wr(S=>({"910975ee":Co+"px"}));const t=q("unwrap");function i(){t.value=t.value==="wrap"?"unwrap":"wrap",P(l.value)}const r=a,n=e,o=V(()=>r.width),s=V(()=>parseInt(r.height.replace("px",""))-Co+"px"),l=q([]),d=Xr(r.componentid),h=d().subscribe(m),p=d().subscribeChartUpdate(g),c=q();Ii(()=>{l.value=v(),P(l.value)}),Eo(()=>{d().unsubscribe(h),d().unsubscribe(p)});async function m(){l.value=v(),l.value=ct(l.value),P(l.value)}function g(){P(l.value)}De(()=>r.mergeCharts,()=>{l.value=v(),l.value=ct(l.value),P(l.value)}),De(()=>r.visible,async()=>{r.visible&&(await Lr(100),w())}),De(()=>r.focusTraceId,async()=>{l.value.forEach(S=>{if(S.type==="serie"&&S.serieId){const x=d().getSerieById(S.serieId);S.traceId.replace(/rT_|sT_/g,"")==r.focusTraceId.replace(/rT_|sT_/g,"")?(S.show=x!=null&&x.defaultShow?x==null?void 0:x.defaultShow:!1,S.lineType=x!=null&&x.defaultLineType?x==null?void 0:x.defaultLineType:S.lineType):S.show=!1}if(S.type==="mergedCharts")if(S.traceId.replace(/rT_|sT_/g,"")==r.focusTraceId.replace(/rT_|sT_/g,"")&&S.mergedCharts){const x=d().getSerieById(S.mergedCharts[0].serieId);x&&(S.show=x.defaultShow?x.defaultShow:!1,S.lineType=x.defaultLineType?x.defaultLineType:S.lineType)}else S.show=!1}),l.value=ct(l.value),await Lr(100),w(),P(l.value)});function y(S){var I,E;const x=S.data;x.type==="trace"&&(S.colSpan=2),S.cell&&((I=S.column)==null?void 0:I.index)===1&&S.cell.classList.add("chart-controller-buttons-column"),x.show!=null&&x.show===!1&&((E=S.column)==null?void 0:E.index)===0&&S.cell.classList.add("chart-controller-text-disabled")}function w(){if(c.value!=null){if(r.focusTraceId==""){c.value.expandAll();return}c.value.collapseAll(),c.value.getDataRows().forEach(x=>{var L,z;const E=((L=c.value)==null?void 0:L.getRowInfo(x)).rowData;E&&E.type!="serie"&&E.type!="mergedCharts"&&E.traceId.replace(/rT_|sT_/g,"")==r.focusTraceId.replace(/rT_|sT_/g,"")&&((z=c.value)==null||z.expandRow(x))})}}function v(){const S=[],x=d().CompleteData;for(let I=0;I<x.length;I++){const E=x[I];if(E.elementType==at.Trace||E.elementType==at.Scenario){if(S.find(L=>L.traceId.replace(/rT_|sT_/g,"")===E.treeId.replace(/rT_|sT_/g,""))!=null)continue;S.push({type:"trace",treeId:E.treeId,parentTreeId:void 0,traceId:E.treeId,name:E.name}),r.mergeCharts?T(E,S):C(E,S)}}return S}function T(S,x){if(!S.charts)return;const I=[];S.charts.forEach(E=>{E.series.forEach(L=>{if(L.name){const z=I.find(_=>_.name===L.name);z?z.count++:I.push({name:L.name,count:1})}})}),I.forEach(E=>{var L;if(E.count>1){const z={type:"mergedCharts",treeId:"mergedCharts"+E.name+"_"+S.treeId,parentTreeId:S.treeId,traceId:S.treeId,name:E.name,mergedCharts:[]};(L=S.charts)==null||L.forEach(_=>{const G=_.series.filter(Q=>Q.name===z.name);G.length>0&&G.forEach(Q=>{var ie;z.show=!!Q.show,z.lineType=Q.lineType,z.lineColor=Q.lineColor,(ie=z.mergedCharts)==null||ie.push({chartId:_.id,serieId:Q.id})})}),x.push(z)}})}function C(S,x){S.charts&&S.charts.forEach(I=>{let E=S.treeId;if(I.id){const L="chart_"+I.id+"_"+S.treeId;x.push({type:"chart",treeId:L,parentTreeId:S.treeId,traceId:S.treeId,name:I.name?I.name:I.id,chartId:I.id}),E=L}I.series.forEach(L=>{x.push({type:"serie",treeId:L.id+"_"+S.treeId,parentTreeId:E,traceId:S.treeId,name:L.name?L.name:L.id,show:!!L.show,lineColor:L.lineColor,lineType:L.lineType,serieId:L.id})})})}function P(S){const x=[],I=S.filter(L=>L.show&&L.type==="serie"&&L.serieId!=null);for(let L=I.length-1;L>=0;L--){const z=I[L],_=S.find(Z=>Z.treeId==z.parentTreeId);if(_===void 0||_.chartId===void 0)return;const G=ct(d().getChartById(_.chartId));if(G===void 0)return;let Q=x.find(Z=>Z.name==G.name);if(Q===void 0&&(Q=G,Q.series=[],Q.show=!0,x.unshift(Q)),z.serieId===void 0)return;const ie=ct(d().getSerieById(z.serieId));if(ie===void 0)return;ie.show=!0,ie.lineColor=z.lineColor,ie.lineType=z.lineType,!(t.value==="wrap"&&ie.variant==="unwrapped"||t.value==="unwrap"&&ie.variant==="wrapped")&&Q.series.push(ie)}S.filter(L=>L.show&&L.type==="mergedCharts"&&L.mergedCharts!=null).forEach(L=>{var z;if(L.mergedCharts!==void 0)for(let _=((z=L.mergedCharts)==null?void 0:z.length)-1;_>=0;_--){const G=L.mergedCharts[_],Q=ct(d().getChartById(G.chartId));if(Q===void 0)return;let ie=x.find(U=>U.name==Q.name);ie===void 0&&(ie=Q,ie.series=[],ie.show=!0,x.unshift(ie));const Z=ct(d().getSerieById(G.serieId));if(Z===void 0)return;Z.show=!0,Z.lineColor=L.lineColor,Z.lineType=L.lineType,!(t.value==="wrap"&&Z.variant==="unwrapped"||t.value==="unwrap"&&Z.variant==="wrapped")&&ie.series.push(Z)}}),n("chartsDataChanged",x)}function R(S,x){l.value.forEach(I=>{I.treeId==S&&(I.show=x),c.value&&c.value.getDataRows().forEach(L=>{var G;const _=((G=c.value)==null?void 0:G.getRowInfo(L)).rowData;_&&(_.type=="serie"||_.type=="mergedCharts")&&I.treeId==_.treeId&&(I.show===!1?L.cells[0].classList.add("chart-controller-text-disabled"):L.cells[0].classList.remove("chart-controller-text-disabled"))})}),P(l.value)}function N(S,x){l.value.forEach(I=>{I.treeId==S&&(I.lineColor=x)}),P(l.value)}function D(S,x){l.value.forEach(I=>{I.treeId==S&&(I.lineType=x)}),P(l.value)}return(S,x)=>(M(),O("div",null,[b("div",{id:"trace-chart-controller-toolbar",style:It({display:S.visible?"block":"none"}),class:"trace-chart-controller-toolbar"},[k(f(qe),{onClick:x[0]||(x[0]=I=>i()),"css-class":"toolbar-wrap-unwrap-button","icon-css":t.value=="wrap"?"icon-serie-wrap":"icon-serie-unwrap",title:"Wrap/Unwrap series"},null,8,["icon-css"])],4),b("div",{style:It({display:S.visible?"block":"none",width:o.value,height:s.value})},[S.visible?(M(),ee(f(tn),{key:0,ref_key:"treeGridRef",ref:c,height:"100%",width:"100%","data-source":l.value,"tree-column-index":0,"row-height":24,"id-mapping":"treeId","parent-id-mapping":"parentTreeId","allow-selection":!1,onQueryCellInfo:x[1]||(x[1]=I=>y(I))},{templateAction:re(({data:I})=>[I.type==="serie"||I.type==="mergedCharts"?(M(),O("span",Ip,[k(Sp,{show:I.show,onOnChangeShowState:E=>R(I.treeId,E)},null,8,["show","onOnChangeShowState"]),k(Cp,{value:I.lineColor,onChange:E=>N(I.treeId,E)},null,8,["value","onChange"]),k(xp,{value:I.lineType,onChange:E=>D(I.treeId,E)},null,8,["value","onChange"])])):B("",!0)]),default:re(()=>[k(f(Jr),null,{default:re(()=>[k(f(xt),{width:"60",field:"name","header-text":"Name"}),k(f(xt),{width:"32",template:"templateAction"})]),_:1})]),_:1},8,["data-source"])):B("",!0)],4)]))}}),Mp=["title","treeId"],Pp=me({__name:"ConfigurationTree",props:{width:{default:"1000"},height:{default:"200"},componentid:{default:"gAcpRealAxis_1"},rootTreeIds:{default:()=>[]},useStore:{type:Boolean,default:!0},savedConfiguration:{default:()=>new Map}},setup(a){const e=a,t=q();let i;const r=Je(e.componentid),n=q([]);let o=[];const s={mode:"Row",type:"Single"},l=[];ft(async()=>{await r().initialize(),r().isInitialized&&r().CompleteData.forEach(async S=>{const x=await r().subscribeValue(S.Ref,T,!1);l.push({ref:S.Ref,subscriptionIds:x})}),t.value&&(i=t.value),n.value&&(n.value=d())}),vt(()=>{l.forEach(S=>{r().unsubscribeValue(S.ref,S.subscriptionIds)}),r().updateSubscription()}),De(()=>e.rootTreeIds,()=>{r().isInitialized&&h()});function d(){p(o,e.rootTreeIds);const S=m(o);return y(S),S}function h(){const S=o;o=[],p(o,e.rootTreeIds),o.forEach(I=>{const E=S.find(L=>L.TreeId===I.TreeId);E&&(I.IsCollapsed=E.IsCollapsed)});const x=m(o);y(x),n.value=x,P()}function p(S,x){const I=e.useStore?r().CompleteData:e.savedConfiguration;!x||x.length==0?I.forEach(E=>{E.TreeId&&S.push({TreeId:E.TreeId})}):x.forEach(E=>{I.forEach(L=>{L.TreeId&&(L.TreeId==E||L.ParentTreeId==E)&&!S.some(z=>z.TreeId===L.TreeId)&&(S.push({TreeId:L.TreeId,IsRootElement:!0}),c(S,L.TreeId))})})}function c(S,x){(e.useStore?r().CompleteData:e.savedConfiguration).forEach(E=>{E.TreeId&&E.ParentTreeId==x&&!S.some(L=>L.TreeId===E.TreeId)&&(S.push({TreeId:E.TreeId}),c(S,E.TreeId))})}function m(S){const x=[],I=e.useStore?r().CompleteData:e.savedConfiguration;for(const E of S){let L;for(const[,Q]of I.entries())Q.TreeId===E.TreeId&&(L=Q);if(!L)continue;let z;L.Ref&&(z=I.get(L.Ref));let _="";if(z!==void 0)if(z.Values.Input!==null&&z.Values.Input!==void 0){const Q=new is;Q.setValue(z.Values.Input),_=z.asString(Q,!1)}else _=z.asString(z.Values.Parametrization,!1);const G={TreeId:L.TreeId,ParentTreeId:L.ParentTreeId,DisplayName:L.DisplayName,Description:L.Description,Ref:L.Ref,IsGroup:L.IsGroup,Value:_,Unit:z?z.Unit:""};E.IsRootElement&&(G.ParentTreeId=void 0),G.IsVisible=g(L),x.push(G)}return x}function g(S){const x=e.useStore?r().CompleteData:e.savedConfiguration;if(S.FilterRef){const I=x.get(S.FilterRef);if(!I)return!1;const E=I.Values.inputOrParametrizationAsString();return S.isVisible(E)}else return S.IsVisible===void 0||S.IsVisible===!0}function y(S){S.forEach(x=>{x.TreeId&&x.ParentTreeId&&(x.IsVisible=w(S,x.TreeId))})}function w(S,x){const I=S.find(E=>E.TreeId===x);if(I){if(I.IsVisible===!1)return!1;if(I.ParentTreeId)return w(S,I.ParentTreeId)}return!0}let v=0;const T=()=>{v++,C(v)};async function C(S){await mi(),S===v&&(v=0,n.value=d(),P(),await mi())}async function P(){await Lr(100);const S=i.getDataRows();for(let x=S.length-1;x>=0;x--){const I=S[x],L=i.getRowInfo(I).rowData,z=o.find(_=>_.TreeId===L.TreeId);z&&z.IsCollapsed&&i.collapseByKey(L.TreeId)}}function R(S){S.data.IsVisible===!1&&S.row&&(S.row.style.display="none")}function N(S){const x=S.data,I=o.find(E=>E.TreeId===x.TreeId);I&&(I.IsCollapsed=!0)}function D(S){const x=S.data,I=o.find(L=>L.TreeId===x.TreeId);I&&(I.IsCollapsed=!1),i.getDataRows().forEach(L=>{const _=i.getRowInfo(L).rowData;_&&_.IsVisible===!1&&(L.style.display="none")})}return(S,x)=>(M(),O("div",{style:It({height:e.height})},[k(f(tn),{ref_key:"treeGridRef",ref:t,width:e.width,height:"100%","data-source":n.value,"id-mapping":"TreeId","parent-id-mapping":"ParentTreeId","selection-settings":s,"tree-column-index":0,"row-height":24,"row-data-bound":R,collapsed:N,expanded:D},{displayNameTemplate:re(({data:I})=>[b("span",{title:I.TreeId,treeId:I.TreeId,class:ke({"settings-group-text":I.IsGroup})},[b("img",{class:ke(I.IsGroup?"settings-group-icon":"settings-node-icon")},null,2),vi(" "+Y(I.DisplayName),1)],10,Mp)]),valueTemplate:re(({data:I})=>[b("p",null,Y(I.Value),1)]),unitTemplate:re(({data:I})=>[b("p",null,Y(I.Unit),1)]),descriptionTemplate:re(({data:I})=>[b("p",null,Y(I.Description),1)]),default:re(()=>[k(f(Jr),null,{default:re(()=>[k(f(xt),{field:"TreeId","is-primary-key":!0,"header-text":"Name","text-align":"Left",template:"displayNameTemplate",width:"300"}),k(f(xt),{"header-text":"Value","text-align":"Left",template:"valueTemplate",width:"200"}),k(f(xt),{"header-text":"Unit","text-align":"Left",template:"unitTemplate",width:"300"}),k(f(xt),{"header-text":"Description","text-align":"Left",template:"descriptionTemplate",width:"600"})]),_:1})]),_:1},8,["width","data-source"])],4))}}),Tp={id:"ServoLoopOptimizer",style:{position:"absolute"}},Ap={style:{position:"absolute",top:"-28px",left:"0px"}},kp={style:{position:"absolute",top:"-28px",right:"0px"}},Fp={id:"ServoLoopOptimizerTable",class:"servo-loop-optimizer-table",style:{width:"100%"}},Lp={id:"ServoLoopOptimizerControls"},Dp={key:0},Ep=["colspan"],Op="28px",Vp="200px",Mr="400px",Pr="260px",Bp=!0,_p=me({__name:"ServoLoopOptimizer",props:{width:{default:"1200px"},height:{default:"400px"},componentid:{default:"gAcpRealAxis_1"}},setup(a){Wr(_=>({"5ab37404":Op}));const e=a,t=q(!1),i=q(!1),r=q(I()),n=q(),o=q(!1),s=q(),l=q(),d=Xr(e.componentid),h=d().subscribe(N),{anyInputChangedCount:p,anyFilterChanged:c}=_i(e.componentid,0),{anyInputChangedCount:m,anyFilterChanged:g}=_i(e.componentid,1),{anyInputChangedCount:y,anyFilterChanged:w}=_i(e.componentid,2),{anyInputChangedCount:v,anySettingChanged:T,proportionalGainChangedCount:C}=aa(e.componentid,Bp),P=V(()=>{const _=parseInt(e.height.replace("px","")),G=parseInt(Vp.replace("px",""));return _<G?G+"px":_+"px"}),R=q("");Ii(async()=>{o.value=!1,mi(()=>{r.value=I()})}),Eo(()=>{d().unsubscribe(h)}),De([p,c,m,g,y,w],async()=>{d().getRecentTraceData()&&await d().updateCharts(!1)}),De([T,v],async()=>{d().getRecentTraceData()&&await d().updateCharts(!1)}),De(C,async()=>{d().getRecentTraceData()&&await d().updateCharts(!0)});function N(){const _=d().getRecentTraceData();_&&(o.value=!1,R.value=_.treeId)}function D(_){o.value=!1,R.value=_.treeId}De(()=>[e.height,e.width],()=>{mi(()=>{r.value=I()})});function S(){t.value=!t.value,r.value=I()}function x(){i.value=!i.value,r.value=I()}function I(){const _=$i(document.getElementById("ServoLoopOptimizerWidthMeasure")).width;let G;return i.value&&t.value?G=_.value-parseInt(Mr.replace("px",""))-parseInt(Pr.replace("px",""))+"px":i.value?G=_.value-parseInt(Mr.replace("px",""))+"px":t.value?G=_.value-parseInt(Pr.replace("px",""))+"px":G=_.value+"px",G}function E(_){n.value=_}function L(_,G){s.value=_,l.value=G,o.value=!0}function z(){o.value=!1}return(_,G)=>(M(),O("div",Tp,[b("div",Ap,[k(f(qe),{title:i.value?"Show trace data explorer":"Hide trace data explorer","css-class":"e-primary e-small btn-trace-data-explorer","icon-css":i.value?"icon-data-collapse":"icon-data-expand","icon-position":"Right",onClick:x},{default:re(()=>G[0]||(G[0]=[vi("Trace data explorer")])),_:1},8,["title","icon-css"])]),b("div",kp,[k(f(qe),{title:t.value?"Hide trace chart controller":"Show trace chart controller","css-class":"e-primary e-small btn-trace-data-explorer","icon-css":t.value?"icon-data-collapse":"icon-data-expand","icon-position":"Right",onClick:S},{default:re(()=>G[1]||(G[1]=[vi("Trace chart controller")])),_:1},8,["title","icon-css"])]),b("div",{style:It({height:e.height,width:e.width,position:"relative",overflow:"auto"})},[G[2]||(G[2]=b("div",{id:"ServoLoopOptimizerWidthMeasure",style:{width:"100%"}},null,-1)),b("table",Fp,[b("tr",Lp,[i.value?(M(),O("td",Dp,[k(yp,{width:Mr,height:P.value,componentid:_.componentid,"trace-type":f(Do).AUTOTUNE,onShowScenarioInfo:L,onHideScenarioInfo:z,onSelectionChanged:D},null,8,["height","componentid","trace-type"])])):B("",!0),b("td",{colspan:i.value&&t.value?1:i.value||t.value?2:3},[o.value&&i.value?(M(),ee(Pp,{key:0,componentid:_.componentid,"root-tree-ids":["Controller:Mode:ModeType:Speed","Controller:Mode:ModeType:LoopFilters"],"use-store":!1,"saved-configuration":l.value,width:r.value,height:P.value},null,8,["componentid","saved-configuration","width","height"])):(M(),ee(wp,{key:1,width:r.value,height:P.value,"charts-data":n.value,"legend-visible":!t.value},null,8,["width","height","charts-data","legend-visible"]))],8,Ep),b("td",null,[k(Rp,{visible:t.value,width:Pr,height:P.value,componentid:_.componentid,"focus-trace-id":R.value,"merge-charts":!0,onChartsDataChanged:E},null,8,["visible","height","componentid","focus-trace-id"])])])])],4)]))}}),zp={id:"SpeedControllerSettings"},qp={key:0},Np={class:"diagram-container"},Hp={class:"diagram-drawing"},jp={key:2},$p={key:3,style:{position:"absolute",bottom:"0px",width:"100%"}},Gp=me({__name:"SpeedControllerSettings",props:{componentid:{},width:{},height:{}},emits:["changeTab","sloOpened"],setup(a,{emit:e}){const t=a,i=q(null),r=q(null),n=$i(i).height,o=$i(r).height,s=e,l=V(()=>{var E;let I=parseInt((E=t.height)==null?void 0:E.replace("px",""));return d.value?I=I-n.value-28-4:h.value>0&&h.value<=3&&(I=I-o.value-28),I+"px"}),d=q(!0),h=q(0),{controllerMode:p,feedback:c,integrationPartUsed:m,feedForwardCurrentUsed:g,mixFactor:y,voltageFrequencyControl:w,loopFilter1Used:v,loopFilter2Used:T,loopFilter3Used:C}=aa(t.componentid),P=Je(t.componentid),R=Yt(t.componentid);function N(I){d.value=!1,h.value=I}function D(){d.value=!0,h.value=0}function S(){s("sloOpened"),R().setSloOpenedSpeedController(!0)}function x(){R().setSloOpenedSpeedController(!1)}return(I,E)=>(M(),O("div",zp,[d.value?(M(),O("div",qp,[b("div",Np,[b("div",Hp,[k($d,{id:"SpeedControllerDiagram",ref_key:"speedControllerDiagramRef",ref:i,"feedback-mode":f(c),"integration-part-used":f(m),"feedback-mix-factor":f(y),"feed-forward-current-used":f(g),"voltage-frequency-control":f(w),"filter1-used":f(v),"filter2-used":f(T),"filter3-used":f(C),onChangeTab:E[0]||(E[0]=L=>{I.$emit("changeTab",L)}),onEditFilter:N},null,8,["feedback-mode","integration-part-used","feedback-mix-factor","feed-forward-current-used","voltage-frequency-control","filter1-used","filter2-used","filter3-used"])]),f(w)?B("",!0):(M(),ee(H,{key:0,componentid:t.componentid,reference:"Controller:Mode:Speed:ProportionalGain",left:240,top:15,width:"110",min:0},null,8,["componentid"])),f(w)?B("",!0):(M(),ee(H,{key:1,componentid:t.componentid,reference:"Controller:Mode:Speed:IntegrationTime",left:420,top:15,width:"110","show-spin-button":!0,multiple:4e-4,step:4e-4,min:0},null,8,["componentid"])),!f(w)&&f(p)===f(Ve).PositionControllerModelBased?(M(),ee(H,{key:2,componentid:t.componentid,reference:"Controller:Mode:Feedback:FeedbackType",left:375,top:215,width:"200"},null,8,["componentid"])):B("",!0),!f(w)&&f(p)===f(Ve).PositionControllerModelBased&&f(c)!==f(St).Standard?(M(),ee(H,{key:3,componentid:t.componentid,reference:"Controller:Mode:Feedback:SpeedMixFactor",left:635,top:240,width:"80","show-spin-button":!0,step:.1,min:0,max:1},null,8,["componentid"])):B("",!0),!f(w)&&f(p)===f(Ve).PositionControllerModelBased&&f(c)!==f(St).Standard?(M(),ee(H,{key:4,componentid:t.componentid,reference:"Controller:Mode:Feedback:SpeedProportionalGain",left:240,top:135,width:"110"},null,8,["componentid"])):B("",!0),f(w)?B("",!0):(M(),ee(H,{key:5,componentid:t.componentid,reference:"Controller:Mode:Speed:FilterTime",left:240,top:215,width:"110","show-spin-button":!0,multiple:4e-4,step:4e-4,min:0},null,8,["componentid"])),f(w)?(M(),ee(H,{key:6,componentid:t.componentid,reference:"Controller:Mode:VoltageFrequency:SlipCompensation",left:505,top:220,width:"110"},null,8,["componentid"])):B("",!0)])])):B("",!0),h.value>0&&h.value<=3?(M(),ee(lh,{ref_key:"loopFilterSettingsRef",ref:r,componentid:t.componentid,filter:h.value,onClose:D,onChangeFilterIndex:N,key:h.value},null,8,["componentid","filter"])):B("",!0),f(R)().getSloOpenedSpeedController&&f(P)().OutlookMode?(M(),O("div",jp,[k(Rt,{width:t.width,opened:!0,onClose:E[1]||(E[1]=L=>x())},null,8,["width"]),k(_p,{componentid:t.componentid,width:t.width,height:l.value},null,8,["componentid","width","height"])])):B("",!0),!f(R)().getSloOpenedSpeedController&&f(P)().OutlookMode?(M(),O("div",$p,[k(Rt,{width:t.width,opened:!1,onOpen:E[2]||(E[2]=L=>S())},null,8,["width"])])):B("",!0)]))}}),Up=He(Gp,[["__scopeId","data-v-d1fbc7b1"]]),Wp=""+new URL("previewSloPosition-MByppp7R.png",import.meta.url).href,Xp={width:"1048",height:"290",version:"1.1"},Yp={class:"line"},Zp=["stroke-dasharray"],Qp={key:0,d:"M275 150V20"},Kp=["stroke-dasharray"],Jp={class:"arrow"},ec={key:0,x:"275",y:"143",href:"#arrow-down"},tc={class:"text"},ic={x:"30",y:"145"},rc={x:"800",y:"145"},nc={key:0,x:"264",y:"138"},oc={x:"160",y:"20"},ac={x:"710",y:"20"},sc={class:"text-sm disabled"},lc={x:"155",y:"65"},dc={x:"155",y:"75"},hc={key:0},pc={class:"line"},cc=["stroke-dasharray"],uc={class:"arrow"},gc={key:0,x:"275",y:"143",href:"#arrow-down"},fc={class:"shape"},vc={class:"icon"},mc={class:"text"},yc={x:"300",y:"145"},bc={x:"300",y:"255"},wc={key:0,x:"285",y:"20"},Sc={key:1,x:"264",y:"138"},xc={key:2,x:"707",y:"170"},Cc={class:"shape-text"},Ic={x:"850",y:"264","text-anchor":"middle"},Rc={class:"text-sm disabled"},Mc={x:"180",y:"135"},Pc={x:"180",y:"145"},Tc=me({__name:"PositionControllerDiagram.svg",props:{integrationPartUsed:{type:Boolean},feedForwardPositionUsed:{type:Boolean},feedForwardSpeedUsed:{type:Boolean},voltageFrequencyControl:{type:Boolean}},setup(a){return(e,t)=>(M(),O("svg",Xp,[t[19]||(t[19]=Oe('<defs data-v-cf7050b7><rect id="rectIcon48" width="52" height="52" rx="6" ry="6" data-v-cf7050b7></rect><circle id="circleNode" cx="0" cy="0" r="6" data-v-cf7050b7></circle><circle id="circleMotor" cx="0" cy="0" r="26" data-v-cf7050b7></circle><path id="arrow-right" d="M0 0l-8 -3v6z" data-v-cf7050b7></path><path id="arrow-up" d="M0 0l-3 8h6z" data-v-cf7050b7></path><path id="arrow-down" d="M0 0l3 -8h-6z" data-v-cf7050b7></path><path id="arrow-left" d="M0 0l8 3v-6z" data-v-cf7050b7></path></defs>',1)),b("g",Yp,[b("path",{d:"M150 150V20","stroke-dasharray":e.$props.feedForwardSpeedUsed?void 0:"4 4"},null,8,Zp),e.$props.feedForwardPositionUsed?(M(),O("path",Qp)):B("",!0),b("path",{d:"M700 150V20","stroke-dasharray":e.$props.feedForwardSpeedUsed?void 0:"4 4"},null,8,Kp),t[0]||(t[0]=b("path",{d:"M30 150H150"},null,-1)),t[1]||(t[1]=b("path",{d:"M700 150H850"},null,-1))]),b("g",Jp,[t[2]||(t[2]=b("use",{x:"858",y:"150",href:"#arrow-right"},null,-1)),e.$props.feedForwardPositionUsed?(M(),O("use",ec)):B("",!0)]),b("g",{class:ke(["arrow",{disabled:!e.$props.feedForwardSpeedUsed}])},t[3]||(t[3]=[b("use",{x:"150",y:"20",href:"#arrow-up"},null,-1),b("use",{x:"700",y:"143",href:"#arrow-down"},null,-1)]),2),t[20]||(t[20]=Oe('<g class="shape" data-v-cf7050b7><use x="124" y="124" href="#rectIcon48" data-v-cf7050b7></use><use x="700" y="150" href="#circleNode" data-v-cf7050b7></use></g><g transform="translate(135, 133)" data-v-cf7050b7><path class="arrow" d="M16 6.038v-2.038h4v-2c0-1.105-0.895-2-2-2h-6c-1.105 0-2 0.895-2 2v2h4v2.038c-6.712 0.511-12 6.119-12 12.962 0 7.18 5.82 13 13 13s13-5.82 13-13c0-6.843-5.288-12.451-12-12.962zM22.071 26.071c-1.889 1.889-4.4 2.929-7.071 2.929s-5.182-1.040-7.071-2.929c-1.889-1.889-2.929-4.4-2.929-7.071s1.040-5.182 2.929-7.071c1.814-1.814 4.201-2.844 6.754-2.923l-0.677 9.813c-0.058 0.822 0.389 1.181 0.995 1.181s1.053-0.36 0.995-1.181l-0.677-9.813c2.552 0.079 4.94 1.11 6.754 2.923 1.889 1.889 2.929 4.4 2.929 7.071s-1.040 5.182-2.929 7.071z" data-v-cf7050b7></path></g>',2)),b("g",tc,[b("text",ic,Y(f(W).signalSetPosition),1),b("text",rc,Y(f(W).signalSetSpeed),1),e.$props.feedForwardPositionUsed?(M(),O("text",nc,"+")):B("",!0)]),b("g",{class:ke(["text",{disabled:!e.$props.feedForwardSpeedUsed}])},[b("text",oc,Y(f(W).signalSetValueFF),1),b("text",ac,Y(f(W).signalSetSpeedFF),1),t[4]||(t[4]=b("text",{x:"688",y:"138"},"+",-1))],2),b("g",sc,[b("text",lc,Y(f(W).signalDelay)+" =",1),b("text",dc,Y(e.voltageFrequencyControl?f(W).signalDelayPrediction400:f(W).signalDelayPrediction),1)]),e.voltageFrequencyControl?B("",!0):(M(),O("g",hc,[b("g",pc,[t[5]||(t[5]=b("path",{d:"M176 150H694"},null,-1)),t[6]||(t[6]=b("path",{d:"M275 150V260H850"},null,-1)),b("path",{d:"M540 150V210H700V156","stroke-dasharray":e.$props.integrationPartUsed?void 0:"4 4"},null,8,cc)]),b("g",uc,[t[7]||(t[7]=b("use",{x:"267",y:"150",href:"#arrow-right"},null,-1)),t[8]||(t[8]=b("use",{x:"275",y:"158",href:"#arrow-up"},null,-1)),t[9]||(t[9]=b("use",{x:"692",y:"150",href:"#arrow-right"},null,-1)),e.$props.feedForwardPositionUsed?(M(),O("use",gc)):B("",!0)]),b("g",{class:ke(["arrow",{disabled:!e.$props.integrationPartUsed}])},t[10]||(t[10]=[b("use",{x:"700",y:"158",href:"#arrow-up"},null,-1)]),2),b("g",fc,[t[11]||(t[11]=b("use",{x:"404",y:"124",href:"#rectIcon48"},null,-1)),b("use",{x:"590",y:"184",href:"#rectIcon48",class:ke(["shape",{disabled:!e.$props.integrationPartUsed}])},null,2),t[12]||(t[12]=b("use",{x:"275",y:"150",href:"#circleNode"},null,-1)),t[13]||(t[13]=b("use",{x:"850",y:"260",href:"#circleMotor"},null,-1))]),b("g",vc,[t[15]||(t[15]=b("g",{transform:"translate(406,126)"},[b("line",{x1:"6",x2:"6",y1:"2",y2:"46"}),b("line",{x1:"2",x2:"46",y1:"42",y2:"42"}),b("path",{d:"M6 42V12H42"})],-1)),b("g",{transform:"translate(592,186)",class:ke(["icon",{disabled:!e.$props.integrationPartUsed}])},t[14]||(t[14]=[b("line",{x1:"6",x2:"6",y1:"2",y2:"46"},null,-1),b("line",{x1:"2",x2:"46",y1:"42",y2:"42"},null,-1),b("line",{x1:"6",x2:"44",y1:"42",y2:"8"},null,-1)]),2)]),b("g",mc,[b("text",yc,Y(f(W).signalPositionError),1),b("text",bc,Y(f(W).signalActPosition),1),e.$props.feedForwardPositionUsed?(M(),O("text",wc,Y(f(W).signalSetPositionFF),1)):B("",!0),e.$props.feedForwardPositionUsed?(M(),O("text",Sc,"+")):B("",!0),t[16]||(t[16]=b("text",{x:"256",y:"162"},"+",-1)),t[17]||(t[17]=b("text",{x:"282",y:"170"},"-",-1)),t[18]||(t[18]=b("text",{x:"680",y:"162"},"+",-1)),e.$props.integrationPartUsed?(M(),O("text",xc,"+")):B("",!0)]),b("g",Cc,[b("text",Ic,Y(f(W).encoder),1)]),b("g",Rc,[b("text",Mc,Y(f(W).signalDelay)+" =",1),b("text",Pc,Y(f(W).signalDelayTotal),1)])]))]))}}),Ac=He(Tc,[["__scopeId","data-v-cf7050b7"]]);function kc(a){const e=Je(a),t=q(),i=q(),r=q(),n=q(),o=["Controller:Mode:ModeType","Controller:Mode:Position:IntegrationTime","Controller:Mode:Feedforward:FeedforwardType","Controller:Mode:Position:PredictionTime"];ft(async()=>{await e().initialize(),e().isInitialized&&s()}),vt(()=>{for(const m of o)e().unsubscribeValue(m)});function s(){for(const m of o)e().subscribeValue(m);t.value=l("Controller:Mode:ModeType"),i.value=l("Controller:Mode:Position:IntegrationTime"),r.value=l("Controller:Mode:Feedforward:FeedforwardType"),n.value=l("Controller:Mode:Position:PredictionTime")}function l(m){return e().Data.get(m)}const d=V(()=>i.value?i.value.Values.inputAsNumber()>0:!1),h=V(()=>{var m;return!t.value||t.value.Values.inputAsNumber()!=Ve.PositionControllerModelBased?!1:((m=r.value)==null?void 0:m.Values.inputAsNumber())==Mo.TwoMassModelBased}),p=V(()=>n.value?n.value.Values.inputAsNumber()>0:!1),c=V(()=>t.value?t.value.Values.inputAsNumber()==Ve.VoltageFrequencyControl:!1);return{integrationPartUsed:d,positionFeedForwardUsed:h,speedFeedForwardUsed:p,voltageFrequencyControl:c}}const Fc={class:"full-size slo-container"},Lc={class:"diagram-container"},Dc={class:"diagram-drawing"},Ec={key:0},Oc={key:0},Vc=me({__name:"PositionControllerSettings",props:{width:{},componentid:{}},emits:["sloOpened"],setup(a,{emit:e}){const t=a,i=e,{integrationPartUsed:r,speedFeedForwardUsed:n,positionFeedForwardUsed:o,voltageFrequencyControl:s}=kc(t.componentid),l=Je(t.componentid),d=Yt(t.componentid);function h(){i("sloOpened"),d().setSloOpenedPositionController(!0)}function p(){d().setSloOpenedPositionController(!1)}return(c,m)=>(M(),O("div",Fc,[b("div",null,[b("div",Lc,[b("div",Dc,[k(Ac,{"integration-part-used":f(r),"feed-forward-position-used":f(o),"feed-forward-speed-used":f(n),"voltage-frequency-control":f(s)},null,8,["integration-part-used","feed-forward-position-used","feed-forward-speed-used","voltage-frequency-control"])]),f(s)?B("",!0):(M(),ee(H,{key:0,componentid:t.componentid,reference:"Controller:Mode:Position:ProportionalGain",left:380,top:65,width:"100",min:0},null,8,["componentid"])),f(s)?B("",!0):(M(),ee(H,{key:1,componentid:t.componentid,reference:"Controller:Mode:Position:PredictionTime",left:30,top:30,width:"100","show-spin-button":!0,multiple:4e-4,step:4e-4,min:0},null,8,["componentid"])),f(s)?B("",!0):(M(),ee(H,{key:2,componentid:t.componentid,reference:"Controller:Mode:Position:TotalDelayTime",left:100,top:185,width:"100","show-spin-button":!0,multiple:4e-4,step:4e-4,min:0},null,8,["componentid"])),f(s)?(M(),ee(H,{key:3,componentid:t.componentid,reference:"Controller:Mode:VoltageFrequency:TotalDelayTime",left:100,top:185,width:"100","show-spin-button":!0,multiple:4e-4,step:4e-4,min:0},null,8,["componentid"])):B("",!0),f(s)?B("",!0):(M(),ee(H,{key:4,componentid:t.componentid,reference:"Controller:Mode:Position:IntegrationTime",left:560,top:65,width:"100","show-spin-button":!0,multiple:4e-4,step:4e-4,min:0},null,8,["componentid"]))]),f(d)().getSloOpenedPositionController&&f(l)().OutlookMode?(M(),O("div",Ec,[k(Rt,{width:c.width,opened:!0,onClose:m[0]||(m[0]=g=>p())},null,8,["width"]),k(Zr,{title:"Loop optimizer"},{image:re(()=>m[1]||(m[1]=[b("img",{src:Wp},null,-1)])),default:re(()=>[m[2]||(m[2]=b("span",null,"This section will contain servo loop optimizer including handling of different data sets",-1))]),_:1})])):B("",!0)]),!f(d)().getSloOpenedPositionController&&f(l)().OutlookMode?(M(),O("div",Oc,[k(Rt,{width:c.width,opened:!1,onOpen:h},null,8,["width"])])):B("",!0)]))}}),Bc=He(Vc,[["__scopeId","data-v-4164d550"]]),_c=""+new URL("previewSloFf-C4gEftYM.png",import.meta.url).href,zc={width:"1048",height:"370",version:"1.1"},qc={key:0},Nc={key:1},Hc={class:"text"},jc={x:"800",y:"45"},$c={x:"800",y:"85"},Gc={key:2},Uc={class:"text"},Wc={key:0,x:"250",y:"50"},Xc={key:1,x:"250",y:"65"},Yc=["transform"],Zc={class:"text"},Qc={x:"650",y:"65"},Kc={x:"800",y:"65"},Jc={class:"text"},eu={key:0,x:"50",y:"200"},tu={key:3,id:"StaticTorque"},iu={key:0},ru={key:4,id:"TorqueFeedForward"},nu={key:5,id:"ModelBasedFeedForward"},ou=me({__name:"FeedForwardDiagram.svg",props:{feedForwardMode:{default:Le.None}},emits:["changeTab"],setup(a){const e=a;return(t,i)=>(M(),O("svg",zc,[i[12]||(i[12]=Oe('<defs data-v-4880c75e><filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="shadow-filter" data-v-4880c75e><feOffset dx="1" dy="2" in="SourceAlpha" result="shadowOffsetOuter1" data-v-4880c75e></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1" data-v-4880c75e></feGaussianBlur><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.3 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1" data-v-4880c75e></feColorMatrix><feMerge data-v-4880c75e><feMergeNode in="shadowMatrixOuter1" data-v-4880c75e></feMergeNode><feMergeNode in="SourceGraphic" data-v-4880c75e></feMergeNode></feMerge></filter><rect id="rectIcon48" width="52" height="52" rx="6" ry="6" data-v-4880c75e></rect><rect id="rect15x20" width="15" height="20" rx="2" ry="2" data-v-4880c75e></rect><rect id="rectModel" width="72" height="52" rx="6" ry="6" data-v-4880c75e></rect><circle id="circleNode" cx="0" cy="0" r="6" data-v-4880c75e></circle><circle id="circleMotor" cx="0" cy="0" r="26" data-v-4880c75e></circle><path id="arrow-right" d="M0 0l-8 -3v6z" data-v-4880c75e></path><path id="arrow-up" d="M0 0l-3 8h6z" data-v-4880c75e></path><linearGradient id="mark-1" x1="0%" y1="0%" x2="0%" y2="100%" data-v-4880c75e><stop offset="20%" stop-color="white" data-v-4880c75e></stop><stop offset="50%" stop-color="lightgreen" data-v-4880c75e></stop><stop offset="80%" stop-color="white" data-v-4880c75e></stop></linearGradient><linearGradient id="mark-2" x1="0%" y1="0%" x2="0%" y2="100%" data-v-4880c75e><stop offset="20%" stop-color="white" data-v-4880c75e></stop><stop offset="50%" stop-color="lightblue" data-v-4880c75e></stop><stop offset="80%" stop-color="white" data-v-4880c75e></stop></linearGradient><linearGradient id="mark-3" x1="0%" y1="0%" x2="0%" y2="100%" data-v-4880c75e><stop offset="20%" stop-color="white" data-v-4880c75e></stop><stop offset="50%" stop-color="coral" data-v-4880c75e></stop><stop offset="80%" stop-color="white" data-v-4880c75e></stop></linearGradient><linearGradient id="mark-4" x1="0%" y1="0%" x2="0%" y2="100%" data-v-4880c75e><stop offset="20%" stop-color="white" data-v-4880c75e></stop><stop offset="50%" stop-color="khaki" data-v-4880c75e></stop><stop offset="80%" stop-color="white" data-v-4880c75e></stop></linearGradient></defs>',1)),e.feedForwardMode===f(Le).SpeedBased||e.feedForwardMode===f(Le).TorqueBasedStandard?(M(),O("g",qc,i[1]||(i[1]=[Oe('<rect x="400" y="60" width="160" height="20" fill="url(#mark-1)" data-v-4880c75e></rect><g class="line" data-v-4880c75e><path d="M50 205H160" data-v-4880c75e></path><path d="M250 70H560" data-v-4880c75e></path><path d="M160 69V341" data-v-4880c75e></path><path d="M160 70H850" data-v-4880c75e></path><path d="M560 250V70" data-v-4880c75e></path></g><g class="arrow" data-v-4880c75e><use x="550" y="160" href="#arrow-right" data-v-4880c75e></use><use x="560" y="170" href="#arrow-up" data-v-4880c75e></use></g><g class="text" data-v-4880c75e><text x="540" y="172" data-v-4880c75e>+</text><text x="566" y="180" data-v-4880c75e>+</text></g>',4)]))):B("",!0),e.feedForwardMode===f(Le).ModelBased?(M(),O("g",Nc,[i[4]||(i[4]=Oe('<g class="line" data-v-4880c75e><path d="M50 205H160" data-v-4880c75e></path><path d="M160 160H560" data-v-4880c75e></path><path d="M160 160V341" data-v-4880c75e></path><path d="M560 250V160" data-v-4880c75e></path><path d="M415 160V50H850" data-v-4880c75e></path><path d="M435 160V90H850" data-v-4880c75e></path></g><g class="arrow" data-v-4880c75e><use x="550" y="160" href="#arrow-right" data-v-4880c75e></use><use x="560" y="170" href="#arrow-up" data-v-4880c75e></use><use x="858" y="50" href="#arrow-right" data-v-4880c75e></use><use x="858" y="90" href="#arrow-right" data-v-4880c75e></use></g>',2)),b("g",Hc,[b("text",jc,Y(f(W).signalSetPositionFF),1),b("text",$c,Y(f(W).signalSetSpeedFF),1),i[2]||(i[2]=b("text",{x:"540",y:"172"},"+",-1)),i[3]||(i[3]=b("text",{x:"566",y:"180"},"+",-1))])])):B("",!0),e.feedForwardMode===f(Le).TorqueBasedCyclicValue?(M(),O("g",Gc,[i[5]||(i[5]=b("g",{class:"line"},[b("path",{d:"M250 70H560"})],-1)),b("g",Uc,[e.feedForwardMode===f(Le).TorqueBasedCyclicValue?(M(),O("text",Wc,Y(f(W).signalSetCyclicTorque1),1)):B("",!0),e.feedForwardMode===f(Le).TorqueBasedCyclicValue?(M(),O("text",Xc,Y(f(W).signalSetCyclicTorque2),1)):B("",!0)])])):B("",!0),b("g",{id:"TorqueToCurrentPath",transform:e.feedForwardMode===f(Le).ModelBased?"translate(0 90)":"translate(0 0)"},[i[6]||(i[6]=Oe('<g class="line" data-v-4880c75e><path d="M560 70H850" data-v-4880c75e></path></g><g class="arrow" data-v-4880c75e><use x="858" y="70" href="#arrow-right" data-v-4880c75e></use></g><g class="shape" data-v-4880c75e><use x="730" y="43" href="#rectIcon48" data-v-4880c75e></use></g><g class="icon" data-v-4880c75e><g transform="translate(732,45)" data-v-4880c75e><line x1="6" x2="6" y1="2" y2="46" data-v-4880c75e></line><line x1="2" x2="46" y1="42" y2="42" data-v-4880c75e></line><path d="M6,42 l16,-26 l18,-6" data-v-4880c75e></path></g></g>',4)),b("g",Zc,[b("text",Qc,Y(f(W).signalSetTorqueFF),1),b("text",Kc,Y(f(W).signalSetCurrentFF),1)])],8,Yc),b("g",Jc,[e.feedForwardMode!==f(Le).TorqueBasedCyclicValue?(M(),O("text",eu,Y(f(W).signalSetSpeedFF),1)):B("",!0)]),e.feedForwardMode===f(Le).TorqueBasedStandard||e.feedForwardMode===f(Le).ModelBased?(M(),O("g",tu,[e.feedForwardMode===f(Le).TorqueBasedStandard?(M(),O("g",iu,i[7]||(i[7]=[b("rect",{x:"230",y:"240",width:"330",height:"20",fill:"url(#mark-3)"},null,-1),b("rect",{x:"230",y:"330",width:"330",height:"20",fill:"url(#mark-4)"},null,-1)]))):B("",!0),i[8]||(i[8]=Oe('<g class="line" data-v-4880c75e><path d="M160 250H560" data-v-4880c75e></path><path d="M160 340H560V250" data-v-4880c75e></path></g><g class="arrow" data-v-4880c75e><use x="550" y="250" href="#arrow-right" data-v-4880c75e></use><use x="560" y="260" href="#arrow-up" data-v-4880c75e></use></g><g class="shape" data-v-4880c75e><use x="180" y="223" href="#rectIcon48" data-v-4880c75e></use><use x="180" y="313" href="#rectIcon48" data-v-4880c75e></use><use x="560" y="250" href="#circleNode" data-v-4880c75e></use></g><g class="icon" data-v-4880c75e><g transform="translate(182,225)" data-v-4880c75e><path d="M10,42h28 l-4,-26 h-20 z" data-v-4880c75e></path><ellipse rx="5" ry="5" cx="24" cy="10" data-v-4880c75e></ellipse></g><g transform="translate(182,315)" data-v-4880c75e><line x1="24" x2="24" y1="2" y2="46" data-v-4880c75e></line><line x1="2" x2="46" y1="24" y2="24" data-v-4880c75e></line><line x1="24" x2="42" y1="12" y2="12" data-v-4880c75e></line><line x1="6" x2="24" y1="36" y2="36" data-v-4880c75e></line><path d="M 6 36 H 24 V 24 H 40" data-v-4880c75e></path></g></g><g class="text" data-v-4880c75e><text x="540" y="262" data-v-4880c75e>+</text><text x="566" y="270" data-v-4880c75e>+</text></g>',5))])):B("",!0),e.feedForwardMode===f(Le).TorqueBasedStandard?(M(),O("g",ru,i[9]||(i[9]=[Oe('<g data-v-4880c75e><rect x="230" y="150" width="330" height="20" fill="url(#mark-2)" data-v-4880c75e></rect></g><g class="line" data-v-4880c75e><path d="M160 160H560" data-v-4880c75e></path></g><g class="arrow" data-v-4880c75e><use x="550" y="70" href="#arrow-right" data-v-4880c75e></use><use x="560" y="80" href="#arrow-up" data-v-4880c75e></use><use x="550" y="160" href="#arrow-right" data-v-4880c75e></use><use x="560" y="170" href="#arrow-up" data-v-4880c75e></use></g><g class="shape" data-v-4880c75e><use x="180" y="43" href="#rectIcon48" data-v-4880c75e></use><use x="370" y="43" href="#rectIcon48" data-v-4880c75e></use><use x="180" y="133" href="#rectIcon48" data-v-4880c75e></use><use x="560" y="70" href="#circleNode" data-v-4880c75e></use><use x="560" y="160" href="#circleNode" data-v-4880c75e></use></g><g class="icon" data-v-4880c75e><g transform="translate(182,45)" data-v-4880c75e><line x1="6" x2="6" y1="2" y2="46" data-v-4880c75e></line><line x1="2" x2="46" y1="42" y2="42" data-v-4880c75e></line><line x1="15" x2="15" y1="42" y2="8" data-v-4880c75e></line></g><g transform="translate(372,45)" data-v-4880c75e><line x1="6" x2="6" y1="2" y2="46" data-v-4880c75e></line><line x1="2" x2="46" y1="42" y2="42" data-v-4880c75e></line><path d="M6 42c0-22 36-36 36-36" data-v-4880c75e></path></g><g transform="translate(182,135)" data-v-4880c75e><line x1="6" x2="6" y1="2" y2="46" data-v-4880c75e></line><line x1="2" x2="46" y1="42" y2="42" data-v-4880c75e></line><path d="M6 42V12H42" data-v-4880c75e></path></g></g><g class="text" data-v-4880c75e><text x="540" y="82" data-v-4880c75e>+</text><text x="566" y="90" data-v-4880c75e>+</text><text x="540" y="172" data-v-4880c75e>+</text><text x="566" y="180" data-v-4880c75e>+</text></g>',6)]))):B("",!0),e.feedForwardMode===f(Le).ModelBased?(M(),O("g",nu,[i[11]||(i[11]=Oe('<g class="shape" data-v-4880c75e><use x="180" y="133" href="#rectIcon48" data-v-4880c75e></use><use x="560" y="160" href="#circleNode" data-v-4880c75e></use></g><g class="icon" data-v-4880c75e><g transform="translate(182,135)" data-v-4880c75e><line x1="6" x2="6" y1="2" y2="46" data-v-4880c75e></line><line x1="2" x2="46" y1="42" y2="42" data-v-4880c75e></line><path d="M6 42c0-22 36-36 36-36" data-v-4880c75e></path></g></g>',2)),b("g",{onClick:i[0]||(i[0]=r=>t.$emit("changeTab","mechanical-model")),class:"navigation-element"},i[10]||(i[10]=[b("use",{x:"390",y:"133",class:"shape",href:"#rectModel",filter:"url(#shadow-filter)"},null,-1),b("text",{x:"400",y:"155",class:"text"},"Mechanical",-1),b("text",{x:"400",y:"170",class:"text"},"model",-1)]))])):B("",!0)]))}}),au=He(ou,[["__scopeId","data-v-4880c75e"]]),Hr=1e-6;function su(a,e,t,i,r,n,o){const s=[];if(a.length<2)return s;const l=a[1].time-a[0].time,d=o<=l?0:1-l/o*1.553773974;let h=0,p=0;for(let c=0;c<a.length;c++){const m=a[c],g=e;let y=0;m.velocity>1e-4?y=t:m.velocity<-1e-4&&(y=-i);const w=m.velocity*r,v=m.acceleration*n;d>Hr?(h=d*(h-v)+v,p=d*(p-h)+h):p=v;const T=g+y+w+p;s.push({time:m.time,load:g,friction:y,velocityDependent:w,accelerationDependent:v,accelerationDependentFiltered:p,combined:T})}return s}const lu={class:"chartContainer",style:{position:"absolute",top:"120px",left:"600px"}},du=me({__name:"TorqueFFChart",props:{velocityPos:{type:Number,default:1},velocityNeg:{type:Number,default:0},accelerationPos:{type:Number,default:10},decelerationPos:{type:Number,default:20},accelerationNeg:{type:Number,default:10},decelerationNeg:{type:Number,default:10},jerkFilterTime:{type:Number,default:.002},zeroVibrationFilterTime:{type:Number,default:.001},zeroVibrationCoefficient:{type:Number,default:.5},unitVelocity:{type:String,default:"[units/s]"},unitTorque:{type:String,default:"[Nm]"},inertia:{type:Number,default:1},accelerationFilterTime:{type:Number,default:0},speedTorqueFactor:{type:Number,default:0},torqueLoad:{type:Number,default:0},torquePositive:{type:Number,default:0},torqueNegative:{type:Number,default:0},gearboxIn:{type:Number,default:1},gearboxOut:{type:Number,default:1},referenceDistance:{type:Number,default:1}},setup(a,{expose:e}){const t=a,i=V(()=>ta(t.velocityPos,t.velocityNeg,t.accelerationPos,t.decelerationPos,t.accelerationNeg,t.decelerationNeg,t.jerkFilterTime,t.zeroVibrationFilterTime)),r=V(()=>ea(t.velocityPos,t.velocityNeg,t.accelerationPos,t.decelerationPos,t.accelerationNeg,t.decelerationNeg,i.value,!0)),n=V(()=>{const v=r.value[r.value.length-1].time/1e3;return ia(r.value,v)}),o=V(()=>t.zeroVibrationFilterTime<=4e-4?n.value:ra(n.value,t.zeroVibrationFilterTime,t.zeroVibrationCoefficient)),s=V(()=>t.jerkFilterTime<=4e-4?o.value:na(o.value,t.jerkFilterTime)),l=V(()=>t.gearboxIn/t.gearboxOut/t.referenceDistance*t.speedTorqueFactor),d=V(()=>t.gearboxIn/t.gearboxOut/t.referenceDistance*t.inertia*2*Math.PI),h=V(()=>su(s.value,t.torqueLoad,t.torquePositive,t.torqueNegative,l.value,d.value,t.accelerationFilterTime)),p=V(()=>{const v=[];return h.value.forEach(T=>{const C=w(T.load,0,T.load),P=w(T.load,T.load,0),R=T.load+T.friction,N=w(T.friction,T.load,R),D=w(T.friction,R,T.load),S=R+T.velocityDependent,x=w(T.velocityDependent,R,S),I=w(T.velocityDependent,S,R),E=w(T.accelerationDependentFiltered,S,T.combined),L=w(T.accelerationDependentFiltered,T.combined,S);v.push({time:T.time,loadLow:C,loadHigh:P,frictionLow:N,frictionHigh:D,velocityDependentLow:x,velocityDependentHigh:I,accelerationDependentLow:E,accelerationDependentHigh:L})}),v}),c=V(()=>({crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},majorTickLines:{width:0},labelStyle:{size:"8pt",color:"transparent"}})),m=V(()=>({crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},majorTickLines:{width:0},labelStyle:{size:"8pt",color:"transparent"}})),g=V(()=>({title:"Velocity",crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#FF8F0F"},labelStyle:{size:"8pt",color:"#999"},labelPosition:"Inside"})),y=V(()=>({title:"Torque",crossesAt:0,majorGridLines:{width:0},minorGridLines:{width:0},titleStyle:{size:"8pt",color:"#FF8F0F"},labelStyle:{size:"8pt",color:"#999"},labelPosition:"Inside"}));e({ffData:h,ffChartData:p,sampledDataWithJerkFilter:s});function w(v,T,C){return v>Hr?T:v<Hr?C:null}return Ci("chart",[ar,As,Ho,Yo,jo]),(v,T)=>(M(),O("div",lu,[k(f(bi),{class:"velocityChart","primary-x-axis":c.value,"primary-y-axis":g.value,"chart-area":{border:{width:0}},"legend-settings":{visible:!1,textWrap:"Wrap"},width:"300px;",height:"75px;","data-testid":"velocityChart"},{default:re(()=>[k(f(yi),null,{default:re(()=>[k(f(Ke),{name:"Velocity","data-source":s.value,type:"Line","x-name":"time","y-name":"velocity",fill:"#444",width:3,"data-testid":"velocityChartData"},null,8,["data-source"])]),_:1})]),_:1},8,["primary-x-axis","primary-y-axis"]),k(f(bi),{class:"torqueChart","primary-x-axis":m.value,"primary-y-axis":y.value,"chart-area":{border:{width:0}},"legend-settings":{visible:!1,textWrap:"Wrap",alignment:"Far"},"zoom-settings":{enableMouseWheelZooming:!0,enablePinchZooming:!0,enableSelectionZooming:!0,mode:"Y",enablePan:!0},width:"300px;",height:"175px;","data-testid":"torqueChart"},{default:re(()=>[k(f(yi),{"data-testid":"series1"},{default:re(()=>[k(f(Ke),{name:"Torque Load","data-source":p.value,type:"RangeArea","x-name":"time",low:"loadLow",high:"loadHigh",fill:"coral",opacity:.6},null,8,["data-source"]),k(f(Ke),{name:"Friction","data-source":p.value,type:"RangeArea","x-name":"time",low:"frictionLow",high:"frictionHigh",fill:"khaki",opacity:.6},null,8,["data-source"]),k(f(Ke),{"data-source":p.value,type:"RangeArea","x-name":"time",low:"velocityDependentLow",high:"velocityDependentHigh",name:"Speed profile",fill:"lightblue",opacity:.6},null,8,["data-source"]),k(f(Ke),{"data-source":p.value,type:"RangeArea","x-name":"time",low:"accelerationDependentLow",high:"accelerationDependentHigh",name:"Acceleration phase",fill:"lightgreen",opacity:.6},null,8,["data-source"]),k(f(Ke),{name:"Torque","data-source":h.value,type:"Line","x-name":"time","y-name":"combined",fill:"#444",width:3},null,8,["data-source"])]),_:1})]),_:1},8,["primary-x-axis","primary-y-axis"])]))}}),hu={class:"full-size slo-container"},pu={class:"diagram-container"},cu={key:0,class:"info"},uu={key:1},gu={key:0,class:"diagram-drawing"},fu={key:1,class:"info"},vu={class:"btn-within-text"},mu={key:4},yu={key:5},bu={key:0},wu={key:0},Su=me({__name:"FeedForwardSettings",props:{width:{},componentid:{}},emits:["changeTab","sloOpened"],setup(a,{emit:e}){const t=a,i=e,{velocityPos:r,velocityNeg:n,accelerationPos:o,accelerationNeg:s,decelerationPos:l,decelerationNeg:d}=qo(t.componentid),{jerkFilterTime:h,zvfTime:p,settingZvfCoe:c}=oa(t.componentid),{settingControllerMode:m,feedForwardMode:g,ffInertia:y,ffAccelerationFilterTime:w,ffSpeedTorqueFactor:v,ffTorqueLoad:T,ffTorquePos:C,ffTorqueNeg:P,gearboxIn:R,gearboxOut:N,referenceDistance:D}=ks(t.componentid),S=Je(t.componentid),x=Yt(t.componentid),I=V(()=>{var _;return(_=m.value)==null?void 0:_.Values.inputAsNumber()}),E=V(()=>{var G;return typeof r.value=="number"&&typeof n.value=="number"&&typeof o.value=="number"&&typeof s.value=="number"&&typeof l.value=="number"&&typeof d.value=="number"&&typeof h.value=="number"&&typeof p.value=="number"&&typeof((G=c.value)==null?void 0:G.Values.inputAsNumber())=="number"&&typeof y.value=="number"&&typeof w.value=="number"&&typeof v.value=="number"&&typeof T.value=="number"&&typeof C.value=="number"&&typeof P.value=="number"&&typeof R.value=="number"&&typeof N.value=="number"&&typeof D.value=="number"});function L(){i("sloOpened"),x().setSloOpenedFeedForward(!0)}function z(){x().setSloOpenedFeedForward(!1)}return(_,G)=>{var Q;return M(),O("div",hu,[b("div",null,[b("div",pu,[I.value===f(Ve).VoltageFrequencyControl?(M(),O("div",cu,Y(f(W).infoVoltageFrequencyMode),1)):(M(),O("div",uu,[f(g)!==f(Le).SpeedBased?(M(),O("div",gu,[k(au,{"feed-forward-mode":f(g),onChangeTab:G[0]||(G[0]=ie=>{_.$emit("changeTab",ie)})},null,8,["feed-forward-mode"]),E.value&&f(g)===f(Le).TorqueBasedStandard?(M(),ee(du,{key:0,"deceleration-pos":f(l),"acceleration-neg":f(s),"acceleration-pos":f(o),"deceleration-neg":f(d),"velocity-neg":f(n),"velocity-pos":f(r),"jerk-filter-time":f(h),"zero-vibration-filter-time":f(p),inertia:f(y),"acceleration-filter-time":f(w),"speed-torque-factor":f(v),"torque-load":f(T),"torque-positive":f(C),"torque-negative":f(P),"zero-vibration-coefficient":(Q=f(c))==null?void 0:Q.Values.inputAsNumber(),"gearbox-in":f(R),"gearbox-out":f(N),"reference-distance":f(D)},null,8,["deceleration-pos","acceleration-neg","acceleration-pos","deceleration-neg","velocity-neg","velocity-pos","jerk-filter-time","zero-vibration-filter-time","inertia","acceleration-filter-time","speed-torque-factor","torque-load","torque-positive","torque-negative","zero-vibration-coefficient","gearbox-in","gearbox-out","reference-distance"])):B("",!0)])):(M(),O("div",fu,[b("p",null,Y(f(W).infoSpeedBasedFeedForward1),1),b("p",null,Y(f(W).infoSpeedBasedFeedForward2),1),b("p",null,[b("span",null,Y(f(W).infoSpeedBasedFeedForward3),1),b("span",vu,[k(f(qe),{onClick:G[1]||(G[1]=ie=>_.$emit("changeTab","position-controller")),"css-class":"e-small"},{default:re(()=>[vi(Y(f(W).tabPositionController),1)]),_:1})])])])),I.value===f(Ve).PositionControllerTorqueFf?(M(),ee(H,{key:2,componentid:t.componentid,reference:"Controller:Mode:FeedForward:FeedForwardType",left:10,top:20,width:"130"},null,8,["componentid"])):B("",!0),I.value===f(Ve).PositionControllerModelBased?(M(),ee(H,{key:3,componentid:t.componentid,reference:"Controller:Mode:Feedforward:FeedforwardType",left:10,top:20,width:"130"},null,8,["componentid"])):B("",!0),f(g)===f(Le).TorqueBasedStandard?(M(),O("div",mu,[k(H,{componentid:t.componentid,reference:"Controller:Mode:FeedForward:Inertia",min:0,left:240,top:10,width:"100"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:FeedForward:AccelerationFilterTime",min:0,left:430,top:10,width:"110"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:FeedForward:SpeedTorqueFactor",min:0,left:240,top:100,width:"100"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:FeedForward:TorqueLoad",left:240,top:190,width:"100"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:FeedForward:TorquePositive",left:240,top:280,width:"100",min:0},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:FeedForward:TorqueNegative",left:380,top:280,width:"100",min:0},null,8,["componentid"])])):B("",!0),f(g)===f(Le).ModelBased?(M(),O("div",yu,[k(H,{componentid:t.componentid,reference:"Controller:Mode:Feedforward:AccelerationFilterTime",min:0,left:240,top:100,width:"100"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:Feedforward:TorqueLoad",left:240,top:190,width:"100"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:Feedforward:TorquePositive",left:240,top:280,width:"100",min:0},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:Feedforward:TorqueNegative",left:380,top:280,width:"100",min:0},null,8,["componentid"])])):B("",!0)]))]),f(x)().getSloOpenedFeedForward&&f(S)().OutlookMode?(M(),O("div",bu,[k(Rt,{width:_.width,opened:!0,onClose:G[2]||(G[2]=ie=>z())},null,8,["width"]),k(Zr,{title:"Loop optimizer"},{image:re(()=>G[4]||(G[4]=[b("img",{src:_c},null,-1)])),default:re(()=>[G[5]||(G[5]=b("span",null,"This section will contain servo loop optimizer including handling of different data sets",-1))]),_:1})])):B("",!0)]),!f(x)().getSloOpenedFeedForward&&f(S)().OutlookMode?(M(),O("div",wu,[k(Rt,{width:_.width,opened:!1,onOpen:G[3]||(G[3]=ie=>L())},null,8,["width"])])):B("",!0)])}}}),xu=He(Su,[["__scopeId","data-v-6c907a38"]]),Cu=""+new URL("previewSloMech-BLRpnIg8.png",import.meta.url).href,Iu={},Ru={version:"1.1",height:"210",width:"500"};function Mu(a,e){return M(),O("svg",Ru,e[0]||(e[0]=[b("g",{id:"areas"},[b("rect",{x:"0",y:"70",width:"380",height:"70",fill:"#FF8F0F",stroke:"none","fill-opacity":"0.3"})],-1)]))}const Pu=He(Iu,[["render",Mu]]),Tu={class:"full-size slo-container"},Au={class:"container"},ku={class:"container-item",style:{width:"380px"}},Fu={key:0},Lu={key:0},Du=me({__name:"MechanicalModelSettings",props:{width:{},componentid:{}},emits:["sloOpened"],setup(a,{emit:e}){const t=a,i=e,r=Je(t.componentid),n=Yt(t.componentid);function o(){i("sloOpened"),n().setSloOpenedMechanicalModel(!0)}function s(){n().setSloOpenedMechanicalModel(!1)}return(l,d)=>(M(),O("div",Tu,[b("div",null,[b("div",Au,[k(Wt,{title:f(W).groupTitleMass1,width:"180",height:"160"},{default:re(()=>[k(H,{componentid:t.componentid,reference:"Controller:Mode:Model:Mass1:Inertia",min:0,left:15,top:50,width:"140"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:Model:Mass1:ViscousFriction",min:0,left:15,top:130,width:"140"},null,8,["componentid"])]),_:1},8,["title"]),b("div",ku,[k(H,{componentid:t.componentid,reference:"Controller:Mode:Model:Mass2:Stiffness",left:180,top:45,width:"140"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:Model:Mass2:Damping",left:180,top:115,width:"140"},null,8,["componentid"]),k(Pu)]),k(Wt,{title:f(W).groupTitleMass2,width:"180",height:"160"},{default:re(()=>[k(H,{componentid:t.componentid,reference:"Controller:Mode:Model:Mass2:Inertia",min:0,left:15,top:50,width:"140"},null,8,["componentid"]),k(H,{componentid:t.componentid,reference:"Controller:Mode:Model:Mass2:ViscousFriction",min:0,left:15,top:130,width:"140"},null,8,["componentid"])]),_:1},8,["title"])]),f(n)().getSloOpenedMechanicalModel&&f(r)().OutlookMode?(M(),O("div",Fu,[k(Rt,{width:l.width,opened:!0,onClose:d[0]||(d[0]=h=>s())},null,8,["width"]),k(Zr,{title:"Loop optimizer"},{image:re(()=>d[2]||(d[2]=[b("img",{src:Cu},null,-1)])),default:re(()=>[d[3]||(d[3]=b("span",null,"This section will contain servo loop optimizer including handling of different data sets",-1))]),_:1})])):B("",!0)]),!f(n)().getSloOpenedMechanicalModel&&f(r)().OutlookMode?(M(),O("div",Lu,[k(Rt,{width:l.width,opened:!1,onOpen:d[1]||(d[1]=h=>o())},null,8,["width"])])):B("",!0)]))}}),Eu=He(Du,[["__scopeId","data-v-edd9b70a"]]),Ou={width:"1048",height:"330",version:"1.1"},Vu={class:"shape-text"},Bu={x:"322",y:"102",class:"text","text-anchor":"middle"},_u={class:"text"},zu={x:"780",y:"95"},qu={x:"30",y:"95"},Nu=me({__name:"VoltageFrequencyDiagram.svg",setup(a){return(e,t)=>(M(),O("svg",Ou,[t[0]||(t[0]=Oe('<defs data-v-e6ae9ea3><filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="shadow-filter" data-v-e6ae9ea3><feOffset dx="1" dy="2" in="SourceAlpha" result="shadowOffsetOuter1" data-v-e6ae9ea3></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1" data-v-e6ae9ea3></feGaussianBlur><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.3 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1" data-v-e6ae9ea3></feColorMatrix><feMerge data-v-e6ae9ea3><feMergeNode in="shadowMatrixOuter1" data-v-e6ae9ea3></feMergeNode><feMergeNode in="SourceGraphic" data-v-e6ae9ea3></feMergeNode></feMerge></filter><rect id="rectIconLarge" width="104" height="52" rx="6" ry="6" data-v-e6ae9ea3></rect><path id="arrow-right" d="M0 0l-8 -3v6z" data-v-e6ae9ea3></path><path id="arrow-up" d="M0 0l-3 8h6z" data-v-e6ae9ea3></path><path id="arrow-down" d="M0 0l3 -8h-6z" data-v-e6ae9ea3></path><path id="arrow-left" d="M0 0l8 3v-6z" data-v-e6ae9ea3></path></defs><g class="line" data-v-e6ae9ea3><path d="M30 100H850" data-v-e6ae9ea3></path></g><g class="arrow" data-v-e6ae9ea3><use x="858" y="100" href="#arrow-right" data-v-e6ae9ea3></use></g><g class="shape" data-v-e6ae9ea3><use x="270" y="74" href="#rectIconLarge" data-v-e6ae9ea3></use></g>',4)),b("g",Vu,[b("text",Bu,Y(f(W).characteristicCurve),1)]),b("g",_u,[b("text",zu,Y(f(W).signalSetVoltage),1),b("text",qu,Y(f(W).signalSetSpeed),1)])]))}}),Hu=He(Nu,[["__scopeId","data-v-e6ae9ea3"]]);function ju(a){const e=Je(a),t=q(),i=["Controller:Mode:VoltageFrequency:AutomaticConfiguration:AutomaticConfigurationType"];ft(async()=>{await e().initialize(),e().isInitialized&&r()}),vt(()=>{for(const s of i)e().unsubscribeValue(s)});function r(){for(const s of i)e().subscribeValue(s);t.value=n("Controller:Mode:VoltageFrequency:AutomaticConfiguration:AutomaticConfigurationType")}function n(s){return e().Data.get(s)}return{manualConfig:V(()=>t.value?t.value.Values.inputAsNumber()==rs.NotUsed:!1)}}const $u={class:"diagram-container"},Gu={class:"diagram-drawing"},Uu=me({__name:"VoltageFrequencySettings",props:{componentid:{type:String,required:!0}},setup(a){const e=a,{manualConfig:t}=ju(e.componentid);return(i,r)=>(M(),O("div",$u,[b("div",Gu,[k(Hu)]),k(H,{componentid:a.componentid,reference:"Controller:Mode:VoltageFrequency:TypeType",left:240,top:15,width:"160"},null,8,["componentid"]),k(H,{componentid:a.componentid,reference:"Controller:Mode:VoltageFrequency:AutomaticConfiguration:AutomaticConfigurationType",left:215,top:140,width:"210"},null,8,["componentid"]),f(t)?(M(),ee(H,{key:0,componentid:a.componentid,reference:"Controller:Mode:VoltageFrequency:AutomaticConfiguration:BoostVoltage",left:515,top:140,width:"100"},null,8,["componentid"])):B("",!0),f(t)?(M(),ee(H,{key:1,componentid:a.componentid,reference:"Controller:Mode:VoltageFrequency:AutomaticConfiguration:RatedFrequency",left:645,top:215,width:"100"},null,8,["componentid"])):B("",!0),f(t)?(M(),ee(H,{key:2,componentid:a.componentid,reference:"Controller:Mode:VoltageFrequency:AutomaticConfiguration:RatedVoltage",left:515,top:215,width:"100"},null,8,["componentid"])):B("",!0)]))}}),Wu=He(Uu,[["__scopeId","data-v-7d863abd"]]),Xu={class:"full-size"},Yu={key:6},Io=me({__name:"MovementAndTuningMain",props:{componentid:{},tab:{},width:{},height:{}},setup(a){const e=a,t=Yt(e.componentid);return(i,r)=>(M(),O("div",Xu,[i.tab==="profile-generator"?(M(),ee(Xl,{key:0,componentid:e.componentid},null,8,["componentid"])):i.tab==="position-controller"?(M(),ee(Bc,{key:1,width:i.width,componentid:e.componentid,onSloOpened:r[0]||(r[0]=n=>f(t)().setOverviewPinnedMovementAndTuning(!1))},null,8,["width","componentid"])):i.tab==="speed-controller"?(M(),ee(Up,{key:2,componentid:e.componentid,width:e.width,height:e.height,onChangeTab:r[1]||(r[1]=n=>{f(t)().setTabTabMovementAndTuning(n)}),onSloOpened:r[2]||(r[2]=n=>f(t)().setOverviewPinnedMovementAndTuning(!1))},null,8,["componentid","width","height"])):i.tab==="feed-forward"?(M(),ee(xu,{key:3,width:i.width,componentid:e.componentid,onChangeTab:r[3]||(r[3]=n=>{f(t)().setTabTabMovementAndTuning(n)}),onSloOpened:r[4]||(r[4]=n=>f(t)().setOverviewPinnedMovementAndTuning(!1))},null,8,["width","componentid"])):i.tab==="mechanical-model"?(M(),ee(Eu,{key:4,width:i.width,componentid:i.componentid,onSloOpened:r[5]||(r[5]=n=>f(t)().setOverviewPinnedMovementAndTuning(!1))},null,8,["width","componentid"])):i.tab==="voltage-frequency"?(M(),ee(Wu,{key:5,componentid:i.componentid},null,8,["componentid"])):(M(),O("div",Yu,"Tab '"+Y(i.tab)+"' is not implemented",1))]))}}),Zu={class:"full-size"},Qu={key:0,class:"full-size"},Ku={id:"pane-overview-movement-and-tuning",class:"full-size"},Ju={key:1,class:"full-size"},eg={key:2,class:"full-size"},dg=me({__name:"MovementAndTuning",props:{componentid:{},tab:{},overviewPinned:{type:Boolean,default:!1},height:{},width:{}},setup(a){const e=a,t=Yt(e.componentid),i=q(null),r=$i(i).height,n=V(()=>e.overviewPinned?r.value+"px":e.height);return(o,s)=>(M(),O("div",Zu,[o.overviewPinned&&e.tab!=="overview"?(M(),O("div",Qu,[k(f(os),{orientation:"Vertical","separator-size":9,height:e.height},{default:re(()=>[k(f(ns),null,{default:re(()=>[k(f(Bn),{content:"#pane-overview-movement-and-tuning",size:"214px"}),k(f(Bn),{content:"#pane-main-movement-and-tuning"})]),_:1})]),_:1},8,["height"]),b("div",Ku,[k(ro,{componentid:e.componentid,"active-tab":e.tab,onChangeTab:s[0]||(s[0]=l=>{f(t)().setTabTabMovementAndTuning(l)})},null,8,["componentid","active-tab"])]),b("div",{id:"pane-main-movement-and-tuning",class:"full-size",ref_key:"paneMainMovementAndTuningRef",ref:i},[k(Io,{componentid:e.componentid,tab:e.tab,width:e.width,height:n.value},null,8,["componentid","tab","width","height"])],512)])):e.tab==="overview"?(M(),O("div",Ju,[k(ro,{componentid:e.componentid,"active-tab":e.tab,onChangeTab:s[1]||(s[1]=l=>{f(t)().setTabTabMovementAndTuning(l)})},null,8,["componentid","active-tab"])])):(M(),O("div",eg,[k(Io,{componentid:e.componentid,tab:e.tab,width:e.width,height:n.value},null,8,["componentid","tab","width","height"])]))]))}});export{dg as default};
